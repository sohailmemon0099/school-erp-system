/*! For license information please see main.cc5e576f.js.LICENSE.txt */
(()=>{var e={43:(e,t,s)=>{"use strict";e.exports=s(202)},75:(e,t,s)=>{"use strict";s.d(t,{B:()=>r,t:()=>n});var a=console;function n(){return a}function r(e){a=e}},153:(e,t,s)=>{"use strict";var a=s(43),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var a,r={},c=null,d=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!o.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:d,props:r,_owner:l.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},168:(e,t,s)=>{"use strict";function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},a.apply(null,arguments)}s.d(t,{A:()=>a})},198:(e,t,s)=>{"use strict";s.d(t,{E:()=>w});var a=s(168),n=s(870);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}var l=s(991),o=s(75),c=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,s=e||function(){};return this.listeners.push(s),this.onSubscribe(),function(){t.listeners=t.listeners.filter(function(e){return e!==s}),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),d=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!n.S$&&(null==(t=window)?void 0:t.addEventListener)){var s=function(){return e()};return window.addEventListener("visibilitychange",s,!1),window.addEventListener("focus",s,!1),function(){window.removeEventListener("visibilitychange",s),window.removeEventListener("focus",s)}}},t}i(t,e);var s=t.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},s.setEventListener=function(e){var t,s=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"===typeof e?s.setFocused(e):s.onFocus()})},s.setFocused=function(e){this.focused=e,e&&this.onFocus()},s.onFocus=function(){this.listeners.forEach(function(e){e()})},s.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(c)),u=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!n.S$&&(null==(t=window)?void 0:t.addEventListener)){var s=function(){return e()};return window.addEventListener("online",s,!1),window.addEventListener("offline",s,!1),function(){window.removeEventListener("online",s),window.removeEventListener("offline",s)}}},t}i(t,e);var s=t.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},s.setEventListener=function(e){var t,s=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"===typeof e?s.setOnline(e):s.onOnline()})},s.setOnline=function(e){this.online=e,e&&this.onOnline()},s.onOnline=function(){this.listeners.forEach(function(e){e()})},s.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},t}(c));function h(e){return Math.min(1e3*Math.pow(2,e),3e4)}function m(e){return"function"===typeof(null==e?void 0:e.cancel)}var x=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function p(e){return e instanceof x}var g=function(e){var t,s,a,r,i=this,l=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){l=!0},this.continueRetry=function(){l=!1},this.continue=function(){return null==s?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(e,t){a=e,r=t});var o=function(t){i.isResolved||(i.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==s||s(),a(t))},c=function(t){i.isResolved||(i.isResolved=!0,null==e.onError||e.onError(t),null==s||s(),r(t))};!function a(){if(!i.isResolved){var r;try{r=e.fn()}catch(p){r=Promise.reject(p)}t=function(e){if(!i.isResolved&&(c(new x(e)),null==i.abort||i.abort(),m(r)))try{r.cancel()}catch(t){}},i.isTransportCancelable=m(r),Promise.resolve(r).then(o).catch(function(t){var r,o;if(!i.isResolved){var m=null!=(r=e.retry)?r:3,x=null!=(o=e.retryDelay)?o:h,p="function"===typeof x?x(i.failureCount,t):x,g=!0===m||"number"===typeof m&&i.failureCount<m||"function"===typeof m&&m(i.failureCount,t);!l&&g?(i.failureCount++,null==e.onFail||e.onFail(i.failureCount,t),(0,n.yy)(p).then(function(){if(!d.isFocused()||!u.isOnline())return new Promise(function(t){s=t,i.isPaused=!0,null==e.onPause||e.onPause()}).then(function(){s=void 0,i.isPaused=!1,null==e.onContinue||e.onContinue()})}).then(function(){l?c(t):a()})):c(t)}})}}()},f=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,a.A)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,n.gn)(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){e.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var s,a,r=this.state.data,i=(0,n.Zw)(e,r);return(null==(s=(a=this.options).isDataEqual)?void 0:s.call(a,r,i))?i=r:!1!==this.options.structuralSharing&&(i=(0,n.BH)(r,i)),this.dispatch({data:i,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),i},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,s=this.promise;return null==(t=this.retryer)||t.cancel(e),s?s.then(n.lQ).catch(n.lQ):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(e){return!1!==e.options.enabled})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(e){return e.getCurrentResult().isStale})},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,n.j3)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnWindowFocus()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnReconnect()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var s,a,r,i=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var l;return null==(l=this.retryer)||l.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var c=this.observers.find(function(e){return e.options.queryFn});c&&this.setOptions(c.options)}var d=(0,n.HN)(this.queryKey),u=(0,n.jY)(),h={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(h,"signal",{enumerable:!0,get:function(){if(u)return i.abortSignalConsumed=!0,u.signal}});var m,x,f={fetchOptions:t,options:this.options,queryKey:d,state:this.state,fetchFn:function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(h)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(s=this.options.behavior)?void 0:s.onFetch)&&(null==(m=this.options.behavior)||m.onFetch(f));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(a=f.fetchOptions)?void 0:a.meta))||this.dispatch({type:"fetch",meta:null==(x=f.fetchOptions)?void 0:x.meta});return this.retryer=new g({fn:f.fetchFn,abort:null==u||null==(r=u.abort)?void 0:r.bind(u),onSuccess:function(e){i.setData(e),null==i.cache.config.onSuccess||i.cache.config.onSuccess(e,i),0===i.cacheTime&&i.optionalRemove()},onError:function(e){p(e)&&e.silent||i.dispatch({type:"error",error:e}),p(e)||(null==i.cache.config.onError||i.cache.config.onError(e,i),(0,o.t)().error(e)),0===i.cacheTime&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),l.j.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},t.getDefaultState=function(e){var t="function"===typeof e.initialData?e.initialData():e.initialData,s="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,a="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?null!=s?s:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},t.reducer=function(e,t){var s,n;switch(t.type){case"failed":return(0,a.A)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,a.A)({},e,{isPaused:!0});case"continue":return(0,a.A)({},e,{isPaused:!1});case"fetch":return(0,a.A)({},e,{fetchFailureCount:0,fetchMeta:null!=(s=t.meta)?s:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,a.A)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(n=t.dataUpdatedAt)?n:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var r=t.error;return p(r)&&r.revert&&this.revertState?(0,a.A)({},this.revertState):(0,a.A)({},e,{error:r,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,a.A)({},e,{isInvalidated:!0});case"setState":return(0,a.A)({},e,t.state);default:return e}},e}(),b=function(e){function t(t){var s;return(s=e.call(this)||this).config=t||{},s.queries=[],s.queriesMap={},s}i(t,e);var s=t.prototype;return s.build=function(e,t,s){var a,r=t.queryKey,i=null!=(a=t.queryHash)?a:(0,n.F$)(r,t),l=this.get(i);return l||(l=new f({cache:this,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r),meta:t.meta}),this.add(l)),l},s.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},s.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},s.clear=function(){var e=this;l.j.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},s.get=function(e){return this.queriesMap[e]},s.getAll=function(){return this.queries},s.find=function(e,t){var s=(0,n.b_)(e,t)[0];return"undefined"===typeof s.exact&&(s.exact=!0),this.queries.find(function(e){return(0,n.MK)(s,e)})},s.findAll=function(e,t){var s=(0,n.b_)(e,t)[0];return Object.keys(s).length>0?this.queries.filter(function(e){return(0,n.MK)(s,e)}):this.queries},s.notify=function(e){var t=this;l.j.batch(function(){t.listeners.forEach(function(t){t(e)})})},s.onFocus=function(){var e=this;l.j.batch(function(){e.queries.forEach(function(e){e.onFocus()})})},s.onOnline=function(){var e=this;l.j.batch(function(){e.queries.forEach(function(e){e.onOnline()})})},t}(c),y=function(){function e(e){this.options=(0,a.A)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(n.lQ).catch(n.lQ)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,s="loading"===this.state.status,a=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)}).then(function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})})),a.then(function(){return t.executeMutation()}).then(function(s){e=s,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,o.t)().error(e),Promise.resolve().then(function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:e}),e})})},t.executeMutation=function(){var e,t=this;return this.retryer=new g({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,a.A)({},e,{failureCount:e.failureCount+1});case"pause":return(0,a.A)({},e,{isPaused:!0});case"continue":return(0,a.A)({},e,{isPaused:!1});case"loading":return(0,a.A)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,a.A)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,a.A)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,a.A)({},e,t.state);default:return e}}(this.state,e),l.j.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},e}();var v=function(e){function t(t){var s;return(s=e.call(this)||this).config=t||{},s.mutations=[],s.mutationId=0,s}i(t,e);var s=t.prototype;return s.build=function(e,t,s){var a=new y({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:s,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(a),a},s.add=function(e){this.mutations.push(e),this.notify(e)},s.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},s.clear=function(){var e=this;l.j.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},s.getAll=function(){return this.mutations},s.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find(function(t){return(0,n.nJ)(e,t)})},s.findAll=function(e){return this.mutations.filter(function(t){return(0,n.nJ)(e,t)})},s.notify=function(e){var t=this;l.j.batch(function(){t.listeners.forEach(function(t){t(e)})})},s.onFocus=function(){this.resumePausedMutations()},s.onOnline=function(){this.resumePausedMutations()},s.resumePausedMutations=function(){var e=this.mutations.filter(function(e){return e.state.isPaused});return l.j.batch(function(){return e.reduce(function(e,t){return e.then(function(){return t.continue().catch(n.lQ)})},Promise.resolve())})},t}(c);function j(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function N(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}var w=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new b,this.mutationCache=e.mutationCache||new v,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=d.subscribe(function(){d.isFocused()&&u.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())}),this.unsubscribeOnline=u.subscribe(function(){d.isFocused()&&u.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())})},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var s=(0,n.b_)(e,t)[0];return s.fetching=!0,this.queryCache.findAll(s).length},t.isMutating=function(e){return this.mutationCache.findAll((0,a.A)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var s;return null==(s=this.queryCache.find(e,t))?void 0:s.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map(function(e){return[e.queryKey,e.state.data]})},t.setQueryData=function(e,t,s){var a=(0,n.vh)(e),r=this.defaultQueryOptions(a);return this.queryCache.build(this,r).setData(t,s)},t.setQueriesData=function(e,t,s){var a=this;return l.j.batch(function(){return a.getQueryCache().findAll(e).map(function(e){var n=e.queryKey;return[n,a.setQueryData(n,t,s)]})})},t.getQueryState=function(e,t){var s;return null==(s=this.queryCache.find(e,t))?void 0:s.state},t.removeQueries=function(e,t){var s=(0,n.b_)(e,t)[0],a=this.queryCache;l.j.batch(function(){a.findAll(s).forEach(function(e){a.remove(e)})})},t.resetQueries=function(e,t,s){var r=this,i=(0,n.b_)(e,t,s),o=i[0],c=i[1],d=this.queryCache,u=(0,a.A)({},o,{active:!0});return l.j.batch(function(){return d.findAll(o).forEach(function(e){e.reset()}),r.refetchQueries(u,c)})},t.cancelQueries=function(e,t,s){var a=this,r=(0,n.b_)(e,t,s),i=r[0],o=r[1],c=void 0===o?{}:o;"undefined"===typeof c.revert&&(c.revert=!0);var d=l.j.batch(function(){return a.queryCache.findAll(i).map(function(e){return e.cancel(c)})});return Promise.all(d).then(n.lQ).catch(n.lQ)},t.invalidateQueries=function(e,t,s){var r,i,o,c=this,d=(0,n.b_)(e,t,s),u=d[0],h=d[1],m=(0,a.A)({},u,{active:null==(r=null!=(i=u.refetchActive)?i:u.active)||r,inactive:null!=(o=u.refetchInactive)&&o});return l.j.batch(function(){return c.queryCache.findAll(u).forEach(function(e){e.invalidate()}),c.refetchQueries(m,h)})},t.refetchQueries=function(e,t,s){var r=this,i=(0,n.b_)(e,t,s),o=i[0],c=i[1],d=l.j.batch(function(){return r.queryCache.findAll(o).map(function(e){return e.fetch(void 0,(0,a.A)({},c,{meta:{refetchPage:null==o?void 0:o.refetchPage}}))})}),u=Promise.all(d).then(n.lQ);return(null==c?void 0:c.throwOnError)||(u=u.catch(n.lQ)),u},t.fetchQuery=function(e,t,s){var a=(0,n.vh)(e,t,s),r=this.defaultQueryOptions(a);"undefined"===typeof r.retry&&(r.retry=!1);var i=this.queryCache.build(this,r);return i.isStaleByTime(r.staleTime)?i.fetch(r):Promise.resolve(i.state.data)},t.prefetchQuery=function(e,t,s){return this.fetchQuery(e,t,s).then(n.lQ).catch(n.lQ)},t.fetchInfiniteQuery=function(e,t,s){var a=(0,n.vh)(e,t,s);return a.behavior={onFetch:function(e){e.fetchFn=function(){var t,s,a,r,i,l,o,c=null==(t=e.fetchOptions)||null==(s=t.meta)?void 0:s.refetchPage,d=null==(a=e.fetchOptions)||null==(r=a.meta)?void 0:r.fetchMore,u=null==d?void 0:d.pageParam,h="forward"===(null==d?void 0:d.direction),x="backward"===(null==d?void 0:d.direction),p=(null==(i=e.state.data)?void 0:i.pages)||[],g=(null==(l=e.state.data)?void 0:l.pageParams)||[],f=(0,n.jY)(),b=null==f?void 0:f.signal,y=g,v=!1,w=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},k=function(e,t,s,a){return y=a?[t].concat(y):[].concat(y,[t]),a?[s].concat(e):[].concat(e,[s])},S=function(t,s,a,n){if(v)return Promise.reject("Cancelled");if("undefined"===typeof a&&!s&&t.length)return Promise.resolve(t);var r={queryKey:e.queryKey,signal:b,pageParam:a,meta:e.meta},i=w(r),l=Promise.resolve(i).then(function(e){return k(t,a,e,n)});return m(i)&&(l.cancel=i.cancel),l};if(p.length)if(h){var C="undefined"!==typeof u,_=C?u:j(e.options,p);o=S(p,C,_)}else if(x){var E="undefined"!==typeof u,M=E?u:N(e.options,p);o=S(p,E,M,!0)}else!function(){y=[];var t="undefined"===typeof e.options.getNextPageParam,s=!c||!p[0]||c(p[0],0,p);o=s?S([],t,g[0]):Promise.resolve(k([],g[0],p[0]));for(var a=function(s){o=o.then(function(a){if(!c||!p[s]||c(p[s],s,p)){var n=t?g[s]:j(e.options,a);return S(a,t,n)}return Promise.resolve(k(a,g[s],p[s]))})},n=1;n<p.length;n++)a(n)}();else o=S([]);var D=o.then(function(e){return{pages:e,pageParams:y}});return D.cancel=function(){v=!0,null==f||f.abort(),m(o)&&o.cancel()},D}}},this.fetchQuery(a)},t.prefetchInfiniteQuery=function(e,t,s){return this.fetchInfiniteQuery(e,t,s).then(n.lQ).catch(n.lQ)},t.cancelMutations=function(){var e=this,t=l.j.batch(function(){return e.mutationCache.getAll().map(function(e){return e.cancel()})});return Promise.all(t).then(n.lQ).catch(n.lQ)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var s=this.queryDefaults.find(function(t){return(0,n.Od)(e)===(0,n.Od)(t.queryKey)});s?s.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find(function(t){return(0,n.Cp)(e,t.queryKey)}))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var s=this.mutationDefaults.find(function(t){return(0,n.Od)(e)===(0,n.Od)(t.mutationKey)});s?s.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find(function(t){return(0,n.Cp)(e,t.mutationKey)}))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,a.A)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,n.F$)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,a.A)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},202:(e,t)=>{"use strict";var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function f(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||x}function b(){}function y(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||x}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=f.prototype;var v=y.prototype=new b;v.constructor=y,p(v,f.prototype),v.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var n,r={},i=null,l=null;if(null!=t)for(n in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,n)&&!k.hasOwnProperty(n)&&(r[n]=t[n]);var o=arguments.length-2;if(1===o)r.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===r[n]&&(r[n]=o[n]);return{$$typeof:s,type:e,key:i,ref:l,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case a:o=!0}}if(o)return i=i(o=e),e=""===r?"."+E(o,0):r,j(i)?(n="",null!=e&&(n=e.replace(_,"$&/")+"/"),M(i,t,n,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",j(e))for(var c=0;c<e.length;c++){var d=r+E(l=e[c],c);o+=M(l,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=M(l=l.value,t,n,d=r+E(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function D(e,t,s){if(null==e)return e;var a=[],n=0;return M(e,a,"","",function(e){return t.call(s,e,n++)}),a}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},T={transition:null},I={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:T,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,s){D(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=n,t.Profiler=i,t.PureComponent=y,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=O,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=p({},e.props),r=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:s,type:e.type,key:r,ref:i,props:n,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,s){return A.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,s){return A.current.useReducer(e,t,s)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return A.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,n=e[a];if(!(0<r(n,t)))break e;e[a]=t,e[s]=n,s=a}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,n=e.length,i=n>>>1;a<i;){var l=2*(a+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,s))c<n&&0>r(d,o)?(e[a]=d,e[c]=s,a=c):(e[a]=o,e[l]=s,a=l);else{if(!(c<n&&0>r(d,s)))break e;e[a]=d,e[c]=s,a=c}}}return t}function r(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,x=!1,p=!1,g=!1,f="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=a(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,s(c,t)}t=a(d)}}function j(e){if(g=!1,v(e),!p)if(null!==a(c))p=!0,T(N);else{var t=a(d);null!==t&&I(j,t.startTime-e)}}function N(e,s){p=!1,g&&(g=!1,b(C),C=-1),x=!0;var r=m;try{for(v(s),h=a(c);null!==h&&(!(h.expirationTime>s)||e&&!M());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var l=i(h.expirationTime<=s);s=t.unstable_now(),"function"===typeof l?h.callback=l:h===a(c)&&n(c),v(s)}else n(c);h=a(c)}if(null!==h)var o=!0;else{var u=a(d);null!==u&&I(j,u.startTime-s),o=!1}return o}finally{h=null,m=r,x=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,_=5,E=-1;function M(){return!(t.unstable_now()-E<_)}function D(){if(null!==S){var e=t.unstable_now();E=e;var s=!0;try{s=S(!0,e)}finally{s?w():(k=!1,S=null)}}else k=!1}if("function"===typeof y)w=function(){y(D)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=D,w=function(){A.postMessage(null)}}else w=function(){f(D,0)};function T(e){S=e,k||(k=!0,w())}function I(e,s){C=f(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||x||(p=!0,T(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,n,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,s(d,e),null===a(c)&&e===a(d)&&(g?(b(C),C=-1):g=!0,I(j,r-i))):(e.sortIndex=l,s(c,e),p||x||(p=!0,T(N))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},298:()=>{},391:(e,t,s)=>{"use strict";var a=s(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},524:(e,t,s)=>{"use strict";s.d(t,{QueryClientProvider:()=>u});var a=s(991),n=s(950).unstable_batchedUpdates;a.j.setBatchNotifyFunction(n);var r=s(75),i=console;(0,r.B)(i);var l=s(43),o=l.createContext(void 0),c=l.createContext(!1);function d(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=o),window.ReactQueryClientContext):o}var u=function(e){var t=e.client,s=e.contextSharing,a=void 0!==s&&s,n=e.children;l.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var r=d(a);return l.createElement(c.Provider,{value:a},l.createElement(r.Provider,{value:t},n))}},579:(e,t,s)=>{"use strict";e.exports=s(153)},730:(e,t,s)=>{"use strict";var a=s(43),n=s(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},x={};function p(e,t,s,a,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var f=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,s,a){var n=g.hasOwnProperty(t)?g[t]:null;(null!==n?0!==n.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,a){if(null===t||"undefined"===typeof t||function(e,t,s,a){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,a))return!0;if(a)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,n,a)&&(s=null),a||null===n?function(e){return!!u.call(x,e)||!u.call(m,e)&&(h.test(e)?x[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=null===s?3!==n.type&&"":s:(t=n.attributeName,a=n.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(n=n.type)||4===n&&!0===s?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f,b);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var R,L=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function q(e,t){if(!e||z)return"";z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),r=a.stack.split("\n"),i=n.length-1,l=r.length-1;1<=i&&0<=l&&n[i]!==r[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==r[l]){if(1!==i||1!==l)do{if(i--,0>--l||n[i]!==r[l]){var o="\n"+n[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case S:return"Profiler";case k:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return U(e(t))}catch(s){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var s=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function K(e,t){var s=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){J(e,t);var s=H(t.value),a=t.type;if(null!=s)"number"===a?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Q(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,n=0;n<e.length;n++){if(e[n].value===s)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(r(92));if(te(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function re(e,t){var s=H(t.value),a=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function pe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--"),n=pe(s,t[s],a);"float"===s&&(s="cssFloat"),a?e.setProperty(s,n):e[s]=n}}Object.keys(me).forEach(function(e){xe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var fe=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,ke=null;function Se(e){if(e=yn(e)){if("function"!==typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=jn(t),Ne(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function _e(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Me(){}var De=!1;function Pe(e,t,s){if(De)return e(t,s);De=!0;try{return Ee(e,t,s)}finally{De=!1,(null!==we||null!==ke)&&(Me(),_e())}}function Ae(e,t){var s=e.stateNode;if(null===s)return null;var a=jn(s);if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(r(231,t,typeof s));return s}var Te=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Te=!1}function Oe(e,t,s,a,n,r,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Re=!1,Le=null,Fe=!1,ze=null,qe={onError:function(e){Re=!0,Le=e}};function Be(e,t,s,a,n,r,i,l,o){Re=!1,Le=null,Oe.apply(qe,arguments)}function Ue(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(r(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(a=n.return)){s=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===s)return He(n),e;if(i===a)return He(n),t;i=i.sibling}throw Error(r(188))}if(s.return!==a.return)s=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===s){l=!0,s=n,a=i;break}if(o===a){l=!0,a=n,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,a=n;break}if(o===a){l=!0,a=i,s=n;break}o=o.sibling}if(!l)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(3!==s.tag)throw Error(r(188));return s.stateNode.current===s?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ge=n.unstable_scheduleCallback,Qe=n.unstable_cancelCallback,$e=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Je=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,st=n.unstable_LowPriority,at=n.unstable_IdlePriority,nt=null,rt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var s=e.pendingLanes;if(0===s)return 0;var a=0,n=e.suspendedLanes,r=e.pingedLanes,i=268435455&s;if(0!==i){var l=i&~n;0!==l?a=ut(l):0!==(r&=i)&&(a=ut(r))}else 0!==(i=s&~n)?a=ut(i):0!==r&&(a=ut(r));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&n)&&((n=a&-a)>=(r=t&-t)||16===n&&0!==(4194240&r)))return t;if(0!==(4&a)&&(a|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)n=1<<(s=31-it(t)),a|=e[s],t&=~n;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ft(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=s}function bt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-it(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Nt,wt,kt,St,Ct=!1,_t=[],Et=null,Mt=null,Dt=null,Pt=new Map,At=new Map,Tt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Rt(e,t,s,a,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:r,targetContainers:[n]},null!==t&&(null!==(t=yn(t))&&Nt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Lt(e){var t=bn(e.target);if(null!==t){var s=Ue(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=We(s)))return e.blockedOn=t,void St(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=yn(s))&&Nt(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);ve=a,s.target.dispatchEvent(a),ve=null,t.shift()}return!0}function zt(e,t,s){Ft(e)&&s.delete(t)}function qt(){Ct=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Mt&&Ft(Mt)&&(Mt=null),null!==Dt&&Ft(Dt)&&(Dt=null),Pt.forEach(zt),At.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var s=1;s<_t.length;s++){var a=_t[s];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Mt&&Bt(Mt,e),null!==Dt&&Bt(Dt,e),Pt.forEach(t),At.forEach(t),s=0;s<Tt.length;s++)(a=Tt[s]).blockedOn===e&&(a.blockedOn=null);for(;0<Tt.length&&null===(s=Tt[0]).blockedOn;)Lt(s),null===s.blockedOn&&Tt.shift()}var Wt=v.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,s,a){var n=yt,r=Wt.transition;Wt.transition=null;try{yt=1,Gt(e,t,s,a)}finally{yt=n,Wt.transition=r}}function Yt(e,t,s,a){var n=yt,r=Wt.transition;Wt.transition=null;try{yt=4,Gt(e,t,s,a)}finally{yt=n,Wt.transition=r}}function Gt(e,t,s,a){if(Ht){var n=$t(e,t,s,a);if(null===n)Wa(e,t,a,Qt,s),Ot(e,a);else if(function(e,t,s,a,n){switch(t){case"focusin":return Et=Rt(Et,e,t,s,a,n),!0;case"dragenter":return Mt=Rt(Mt,e,t,s,a,n),!0;case"mouseover":return Dt=Rt(Dt,e,t,s,a,n),!0;case"pointerover":var r=n.pointerId;return Pt.set(r,Rt(Pt.get(r)||null,e,t,s,a,n)),!0;case"gotpointercapture":return r=n.pointerId,At.set(r,Rt(At.get(r)||null,e,t,s,a,n)),!0}return!1}(n,e,t,s,a))a.stopPropagation();else if(Ot(e,a),4&t&&-1<It.indexOf(e)){for(;null!==n;){var r=yn(n);if(null!==r&&jt(r),null===(r=$t(e,t,s,a))&&Wa(e,t,a,Qt,s),r===n)break;n=r}null!==n&&a.stopPropagation()}else Wa(e,t,a,null,s)}}var Qt=null;function $t(e,t,s,a){if(Qt=null,null!==(e=bn(e=je(a))))if(null===(t=Ue(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case st:return 16;case at:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function es(){if(Zt)return Zt;var e,t,s=Xt,a=s.length,n="value"in Jt?Jt.value:Jt.textContent,r=n.length;for(e=0;e<a&&s[e]===n[e];e++);var i=a-e;for(t=1;t<=i&&s[a-t]===n[r-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function as(){return!1}function ns(e){function t(t,s,a,n,r){for(var i in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ss:as,this.isPropagationStopped=as,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var rs,is,ls,os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=ns(os),ds=L({},os,{view:0,detail:0}),us=ns(ds),hs=L({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&"mousemove"===e.type?(rs=e.screenX-ls.screenX,is=e.screenY-ls.screenY):is=rs=0,ls=e),rs)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ms=ns(hs),xs=ns(L({},hs,{dataTransfer:0})),ps=ns(L({},ds,{relatedTarget:0})),gs=ns(L({},os,{animationName:0,elapsedTime:0,pseudoElement:0})),fs=L({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bs=ns(fs),ys=ns(L({},os,{data:0})),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ns[e])&&!!t[e]}function ks(){return ws}var Ss=L({},ds,{key:function(e){if(e.key){var t=vs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?js[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=ns(Ss),_s=ns(L({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Es=ns(L({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks})),Ms=ns(L({},os,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ds=L({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ps=ns(Ds),As=[9,13,27,32],Ts=d&&"CompositionEvent"in window,Is=null;d&&"documentMode"in document&&(Is=document.documentMode);var Os=d&&"TextEvent"in window&&!Is,Rs=d&&(!Ts||Is&&8<Is&&11>=Is),Ls=String.fromCharCode(32),Fs=!1;function zs(e,t){switch(e){case"keyup":return-1!==As.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bs=!1;var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ws(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Us[e.type]:"textarea"===t}function Hs(e,t,s,a){Ce(a),0<(t=Va(t,"onChange")).length&&(s=new cs("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Vs=null,Ys=null;function Gs(e){La(e,0)}function Qs(e){if(G(vn(e)))return e}function $s(e,t){if("change"===e)return t}var Ks=!1;if(d){var Js;if(d){var Xs="oninput"in document;if(!Xs){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),Xs="function"===typeof Zs.oninput}Js=Xs}else Js=!1;Ks=Js&&(!document.documentMode||9<document.documentMode)}function ea(){Vs&&(Vs.detachEvent("onpropertychange",ta),Ys=Vs=null)}function ta(e){if("value"===e.propertyName&&Qs(Ys)){var t=[];Hs(t,Ys,e,je(e)),Pe(Gs,t)}}function sa(e,t,s){"focusin"===e?(ea(),Ys=s,(Vs=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qs(Ys)}function na(e,t){if("click"===e)return Qs(t)}function ra(e,t){if("input"===e||"change"===e)return Qs(t)}var ia="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(ia(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!u.call(t,n)||!ia(e[n],t[n]))return!1}return!0}function oa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var s,a=oa(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=oa(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ua(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(a){s=!1}if(!s)break;t=Q((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=ua(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&da(s.ownerDocument.documentElement,s)){if(null!==a&&ha(s))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=s.textContent.length,r=Math.min(a.start,n);a=void 0===a.end?r:Math.min(a.end,n),!e.extend&&r>a&&(n=a,a=r,r=n),n=ca(s,r);var i=ca(s,a);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xa=d&&"documentMode"in document&&11>=document.documentMode,pa=null,ga=null,fa=null,ba=!1;function ya(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;ba||null==pa||pa!==Q(a)||("selectionStart"in(a=pa)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},fa&&la(fa,a)||(fa=a,0<(a=Va(ga,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=pa)))}function va(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ja={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},Na={},wa={};function ka(e){if(Na[e])return Na[e];if(!ja[e])return e;var t,s=ja[e];for(t in s)if(s.hasOwnProperty(t)&&t in wa)return Na[e]=s[t];return e}d&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var Sa=ka("animationend"),Ca=ka("animationiteration"),_a=ka("animationstart"),Ea=ka("transitionend"),Ma=new Map,Da="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(e,t){Ma.set(e,t),o(t,[e])}for(var Aa=0;Aa<Da.length;Aa++){var Ta=Da[Aa];Pa(Ta.toLowerCase(),"on"+(Ta[0].toUpperCase()+Ta.slice(1)))}Pa(Sa,"onAnimationEnd"),Pa(Ca,"onAnimationIteration"),Pa(_a,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(Ea,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Ra(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,a,n,i,l,o,c){if(Be.apply(this,arguments),Re){if(!Re)throw Error(r(198));var d=Le;Re=!1,Le=null,Fe||(Fe=!0,ze=d)}}(a,t,void 0,e),e.currentTarget=null}function La(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var l=a[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&n.isPropagationStopped())break e;Ra(n,l,c),r=o}else for(i=0;i<a.length;i++){if(o=(l=a[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&n.isPropagationStopped())break e;Ra(n,l,c),r=o}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function Fa(e,t){var s=t[pn];void 0===s&&(s=t[pn]=new Set);var a=e+"__bubble";s.has(a)||(Ua(t,e,2,!1),s.add(a))}function za(e,t,s){var a=0;t&&(a|=4),Ua(s,e,a,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ba(e){if(!e[qa]){e[qa]=!0,i.forEach(function(t){"selectionchange"!==t&&(Oa.has(t)||za(t,!1,e),za(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qa]||(t[qa]=!0,za("selectionchange",!1,t))}}function Ua(e,t,s,a){switch(Kt(t)){case 1:var n=Vt;break;case 4:n=Yt;break;default:n=Gt}s=n.bind(null,t,s,e),n=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),a?void 0!==n?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):void 0!==n?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Wa(e,t,s,a,n){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var l=a.stateNode.containerInfo;if(l===n||8===l.nodeType&&l.parentNode===n)break;if(4===i)for(i=a.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===n||8===o.nodeType&&o.parentNode===n))return;i=i.return}for(;null!==l;){if(null===(i=bn(l)))return;if(5===(o=i.tag)||6===o){a=r=i;continue e}l=l.parentNode}}a=a.return}Pe(function(){var a=r,n=je(s),i=[];e:{var l=Ma.get(e);if(void 0!==l){var o=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":o=Cs;break;case"focusin":c="focus",o=ps;break;case"focusout":c="blur",o=ps;break;case"beforeblur":case"afterblur":o=ps;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Es;break;case Sa:case Ca:case _a:o=gs;break;case Ea:o=Ms;break;case"scroll":o=us;break;case"wheel":o=Ps;break;case"copy":case"cut":case"paste":o=bs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=_s}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==l?l+"Capture":null:l;d=[];for(var m,x=a;null!==x;){var p=(m=x).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==h&&(null!=(p=Ae(x,h))&&d.push(Ha(x,p,m)))),u)break;x=x.return}0<d.length&&(l=new o(l,c,null,s,n),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||s===ve||!(c=s.relatedTarget||s.fromElement)||!bn(c)&&!c[xn])&&(o||l)&&(l=n.window===n?n:(l=n.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=a,null!==(c=(c=s.relatedTarget||s.toElement)?bn(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=a),o!==c)){if(d=ms,p="onMouseLeave",h="onMouseEnter",x="mouse","pointerout"!==e&&"pointerover"!==e||(d=_s,p="onPointerLeave",h="onPointerEnter",x="pointer"),u=null==o?l:vn(o),m=null==c?l:vn(c),(l=new d(p,x+"leave",o,s,n)).target=u,l.relatedTarget=m,p=null,bn(n)===a&&((d=new d(h,x+"enter",c,s,n)).target=m,d.relatedTarget=u,p=d),u=p,o&&c)e:{for(h=c,x=0,m=d=o;m;m=Ya(m))x++;for(m=0,p=h;p;p=Ya(p))m++;for(;0<x-m;)d=Ya(d),x--;for(;0<m-x;)h=Ya(h),m--;for(;x--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ya(d),h=Ya(h)}d=null}else d=null;null!==o&&Ga(i,l,o,d,!1),null!==c&&null!==u&&Ga(i,u,c,d,!0)}if("select"===(o=(l=a?vn(a):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var g=$s;else if(Ws(l))if(Ks)g=ra;else{g=aa;var f=sa}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(g=na);switch(g&&(g=g(e,a))?Hs(i,g,s,n):(f&&f(e,l,a),"focusout"===e&&(f=l._wrapperState)&&f.controlled&&"number"===l.type&&ee(l,"number",l.value)),f=a?vn(a):window,e){case"focusin":(Ws(f)||"true"===f.contentEditable)&&(pa=f,ga=a,fa=null);break;case"focusout":fa=ga=pa=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,ya(i,s,n);break;case"selectionchange":if(xa)break;case"keydown":case"keyup":ya(i,s,n)}var b;if(Ts)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Bs?zs(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(Rs&&"ko"!==s.locale&&(Bs||"onCompositionStart"!==y?"onCompositionEnd"===y&&Bs&&(b=es()):(Xt="value"in(Jt=n)?Jt.value:Jt.textContent,Bs=!0)),0<(f=Va(a,y)).length&&(y=new ys(y,e,null,s,n),i.push({event:y,listeners:f}),b?y.data=b:null!==(b=qs(s))&&(y.data=b))),(b=Os?function(e,t){switch(e){case"compositionend":return qs(t);case"keypress":return 32!==t.which?null:(Fs=!0,Ls);case"textInput":return(e=t.data)===Ls&&Fs?null:e;default:return null}}(e,s):function(e,t){if(Bs)return"compositionend"===e||!Ts&&zs(e,t)?(e=es(),Zt=Xt=Jt=null,Bs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rs&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(a=Va(a,"onBeforeInput")).length&&(n=new ys("onBeforeInput","beforeinput",null,s,n),i.push({event:n,listeners:a}),n.data=b))}La(i,t)})}function Ha(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Va(e,t){for(var s=t+"Capture",a=[];null!==e;){var n=e,r=n.stateNode;5===n.tag&&null!==r&&(n=r,null!=(r=Ae(e,s))&&a.unshift(Ha(e,r,n)),null!=(r=Ae(e,t))&&a.push(Ha(e,r,n))),e=e.return}return a}function Ya(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ga(e,t,s,a,n){for(var r=t._reactName,i=[];null!==s&&s!==a;){var l=s,o=l.alternate,c=l.stateNode;if(null!==o&&o===a)break;5===l.tag&&null!==c&&(l=c,n?null!=(o=Ae(s,r))&&i.unshift(Ha(s,o,l)):n||null!=(o=Ae(s,r))&&i.push(Ha(s,o,l))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var Qa=/\r\n?/g,$a=/\u0000|\uFFFD/g;function Ka(e){return("string"===typeof e?e:""+e).replace(Qa,"\n").replace($a,"")}function Ja(e,t,s){if(t=Ka(t),Ka(e)!==t&&s)throw Error(r(425))}function Xa(){}var Za=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sn="function"===typeof setTimeout?setTimeout:void 0,an="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,rn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(ln)}:sn;function ln(e){setTimeout(function(){throw e})}function on(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&8===n.nodeType)if("/$"===(s=n.data)){if(0===a)return e.removeChild(n),void Ut(t);a--}else"$"!==s&&"$?"!==s&&"$!"!==s||a++;s=n}while(s);Ut(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),hn="__reactFiber$"+un,mn="__reactProps$"+un,xn="__reactContainer$"+un,pn="__reactEvents$"+un,gn="__reactListeners$"+un,fn="__reactHandles$"+un;function bn(e){var t=e[hn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[xn]||s[hn]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=dn(e);null!==e;){if(s=e[hn])return s;e=dn(e)}return t}s=(e=s).parentNode}return null}function yn(e){return!(e=e[hn]||e[xn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function jn(e){return e[mn]||null}var Nn=[],wn=-1;function kn(e){return{current:e}}function Sn(e){0>wn||(e.current=Nn[wn],Nn[wn]=null,wn--)}function Cn(e,t){wn++,Nn[wn]=e.current,e.current=t}var _n={},En=kn(_n),Mn=kn(!1),Dn=_n;function Pn(e,t){var s=e.type.contextTypes;if(!s)return _n;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n,r={};for(n in s)r[n]=t[n];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function An(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Tn(){Sn(Mn),Sn(En)}function In(e,t,s){if(En.current!==_n)throw Error(r(168));Cn(En,t),Cn(Mn,s)}function On(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return s;for(var n in a=a.getChildContext())if(!(n in t))throw Error(r(108,W(e)||"Unknown",n));return L({},s,a)}function Rn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Dn=En.current,Cn(En,e),Cn(Mn,Mn.current),!0}function Ln(e,t,s){var a=e.stateNode;if(!a)throw Error(r(169));s?(e=On(e,t,Dn),a.__reactInternalMemoizedMergedChildContext=e,Sn(Mn),Sn(En),Cn(En,e)):Sn(Mn),Cn(Mn,s)}var Fn=null,zn=!1,qn=!1;function Bn(e){null===Fn?Fn=[e]:Fn.push(e)}function Un(){if(!qn&&null!==Fn){qn=!0;var e=0,t=yt;try{var s=Fn;for(yt=1;e<s.length;e++){var a=s[e];do{a=a(!0)}while(null!==a)}Fn=null,zn=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(e+1)),Ge(Ze,Un),n}finally{yt=t,qn=!1}}return null}var Wn=[],Hn=0,Vn=null,Yn=0,Gn=[],Qn=0,$n=null,Kn=1,Jn="";function Xn(e,t){Wn[Hn++]=Yn,Wn[Hn++]=Vn,Vn=e,Yn=t}function Zn(e,t,s){Gn[Qn++]=Kn,Gn[Qn++]=Jn,Gn[Qn++]=$n,$n=e;var a=Kn;e=Jn;var n=32-it(a)-1;a&=~(1<<n),s+=1;var r=32-it(t)+n;if(30<r){var i=n-n%5;r=(a&(1<<i)-1).toString(32),a>>=i,n-=i,Kn=1<<32-it(t)+n|s<<n|a,Jn=r+e}else Kn=1<<r|s<<n|a,Jn=e}function er(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function tr(e){for(;e===Vn;)Vn=Wn[--Hn],Wn[Hn]=null,Yn=Wn[--Hn],Wn[Hn]=null;for(;e===$n;)$n=Gn[--Qn],Gn[Qn]=null,Jn=Gn[--Qn],Gn[Qn]=null,Kn=Gn[--Qn],Gn[Qn]=null}var sr=null,ar=null,nr=!1,rr=null;function ir(e,t){var s=Pc(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function lr(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,sr=e,ar=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,sr=e,ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==$n?{id:Kn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Pc(18,null,null,0)).stateNode=t,s.return=e,e.child=s,sr=e,ar=null,!0);default:return!1}}function or(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(nr){var t=ar;if(t){var s=t;if(!lr(e,t)){if(or(e))throw Error(r(418));t=cn(s.nextSibling);var a=sr;t&&lr(e,t)?ir(a,s):(e.flags=-4097&e.flags|2,nr=!1,sr=e)}}else{if(or(e))throw Error(r(418));e.flags=-4097&e.flags|2,nr=!1,sr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sr=e}function ur(e){if(e!==sr)return!1;if(!nr)return dr(e),nr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=ar)){if(or(e))throw hr(),Error(r(418));for(;t;)ir(e,t),t=cn(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){ar=cn(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}ar=null}}else ar=sr?cn(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=ar;e;)e=cn(e.nextSibling)}function mr(){ar=sr=null,nr=!1}function xr(e){null===rr?rr=[e]:rr.push(e)}var pr=v.ReactCurrentBatchConfig;function gr(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(r(309));var a=s.stateNode}if(!a)throw Error(r(147,e));var n=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function fr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function br(e){return(0,e._init)(e._payload)}function yr(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function i(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=2,s):a:(t.flags|=2,s):(t.flags|=1048576,s)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,a){return null===t||6!==t.tag?((t=Lc(s,e.mode,a)).return=e,t):((t=n(t,s)).return=e,t)}function c(e,t,s,a){var r=s.type;return r===w?u(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===A&&br(r)===t.type)?((a=n(t,s.props)).ref=gr(e,t,s),a.return=e,a):((a=Ic(s.type,s.key,s.props,null,e.mode,a)).ref=gr(e,t,s),a.return=e,a)}function d(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Fc(s,e.mode,a)).return=e,t):((t=n(t,s.children||[])).return=e,t)}function u(e,t,s,a,r){return null===t||7!==t.tag?((t=Oc(s,e.mode,a,r)).return=e,t):((t=n(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Ic(t.type,t.key,t.props,null,e.mode,s)).ref=gr(e,null,t),s.return=e,s;case N:return(t=Fc(t,e.mode,s)).return=e,t;case A:return h(e,(0,t._init)(t._payload),s)}if(te(t)||O(t))return(t=Oc(t,e.mode,s,null)).return=e,t;fr(e,t)}return null}function m(e,t,s,a){var n=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==n?null:o(e,t,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===n?c(e,t,s,a):null;case N:return s.key===n?d(e,t,s,a):null;case A:return m(e,t,(n=s._init)(s._payload),a)}if(te(s)||O(s))return null!==n?null:u(e,t,s,a,null);fr(e,s)}return null}function x(e,t,s,a,n){if("string"===typeof a&&""!==a||"number"===typeof a)return o(t,e=e.get(s)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return c(t,e=e.get(null===a.key?s:a.key)||null,a,n);case N:return d(t,e=e.get(null===a.key?s:a.key)||null,a,n);case A:return x(e,t,s,(0,a._init)(a._payload),n)}if(te(a)||O(a))return u(t,e=e.get(s)||null,a,n,null);fr(t,a)}return null}function p(n,r,l,o){for(var c=null,d=null,u=r,p=r=0,g=null;null!==u&&p<l.length;p++){u.index>p?(g=u,u=null):g=u.sibling;var f=m(n,u,l[p],o);if(null===f){null===u&&(u=g);break}e&&u&&null===f.alternate&&t(n,u),r=i(f,r,p),null===d?c=f:d.sibling=f,d=f,u=g}if(p===l.length)return s(n,u),nr&&Xn(n,p),c;if(null===u){for(;p<l.length;p++)null!==(u=h(n,l[p],o))&&(r=i(u,r,p),null===d?c=u:d.sibling=u,d=u);return nr&&Xn(n,p),c}for(u=a(n,u);p<l.length;p++)null!==(g=x(u,n,p,l[p],o))&&(e&&null!==g.alternate&&u.delete(null===g.key?p:g.key),r=i(g,r,p),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(n,e)}),nr&&Xn(n,p),c}function g(n,l,o,c){var d=O(o);if("function"!==typeof d)throw Error(r(150));if(null==(o=d.call(o)))throw Error(r(151));for(var u=d=null,p=l,g=l=0,f=null,b=o.next();null!==p&&!b.done;g++,b=o.next()){p.index>g?(f=p,p=null):f=p.sibling;var y=m(n,p,b.value,c);if(null===y){null===p&&(p=f);break}e&&p&&null===y.alternate&&t(n,p),l=i(y,l,g),null===u?d=y:u.sibling=y,u=y,p=f}if(b.done)return s(n,p),nr&&Xn(n,g),d;if(null===p){for(;!b.done;g++,b=o.next())null!==(b=h(n,b.value,c))&&(l=i(b,l,g),null===u?d=b:u.sibling=b,u=b);return nr&&Xn(n,g),d}for(p=a(n,p);!b.done;g++,b=o.next())null!==(b=x(p,n,g,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?g:b.key),l=i(b,l,g),null===u?d=b:u.sibling=b,u=b);return e&&p.forEach(function(e){return t(n,e)}),nr&&Xn(n,g),d}return function e(a,r,i,o){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=r;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){s(a,d.sibling),(r=n(d,i.props.children)).return=a,a=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&br(c)===d.type){s(a,d.sibling),(r=n(d,i.props)).ref=gr(a,d,i),r.return=a,a=r;break e}s(a,d);break}t(a,d),d=d.sibling}i.type===w?((r=Oc(i.props.children,a.mode,o,i.key)).return=a,a=r):((o=Ic(i.type,i.key,i.props,null,a.mode,o)).ref=gr(a,r,i),o.return=a,a=o)}return l(a);case N:e:{for(d=i.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){s(a,r.sibling),(r=n(r,i.children||[])).return=a,a=r;break e}s(a,r);break}t(a,r),r=r.sibling}(r=Fc(i,a.mode,o)).return=a,a=r}return l(a);case A:return e(a,r,(d=i._init)(i._payload),o)}if(te(i))return p(a,r,i,o);if(O(i))return g(a,r,i,o);fr(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(s(a,r.sibling),(r=n(r,i)).return=a,a=r):(s(a,r),(r=Lc(i,a.mode,o)).return=a,a=r),l(a)):s(a,r)}}var vr=yr(!0),jr=yr(!1),Nr=kn(null),wr=null,kr=null,Sr=null;function Cr(){Sr=kr=wr=null}function _r(e){var t=Nr.current;Sn(Nr),e._currentValue=t}function Er(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Mr(e,t){wr=e,Sr=kr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bl=!0),e.firstContext=null)}function Dr(e){var t=e._currentValue;if(Sr!==e)if(e={context:e,memoizedValue:t,next:null},null===kr){if(null===wr)throw Error(r(308));kr=e,wr.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Pr=null;function Ar(e){null===Pr?Pr=[e]:Pr.push(e)}function Tr(e,t,s,a){var n=t.interleaved;return null===n?(s.next=s,Ar(t)):(s.next=n.next,n.next=s),t.interleaved=s,Ir(e,a)}function Ir(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Or=!1;function Rr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Eo)){var n=a.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Ir(e,s)}return null===(n=a.interleaved)?(t.next=t,Ar(a)):(t.next=n.next,n.next=t),a.interleaved=t,Ir(e,s)}function qr(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,bt(e,s)}}function Br(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var n=null,r=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===r?n=r=i:r=r.next=i,s=s.next}while(null!==s);null===r?n=r=t:r=r.next=t}else n=r=t;return s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ur(e,t,s,a){var n=e.updateQueue;Or=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=n.baseState;for(i=0,d=c=o=null,l=r;;){var h=l.lane,m=l.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,p=l;switch(h=t,m=s,p.tag){case 1:if("function"===typeof(x=p.payload)){u=x.call(m,u,h);break e}u=x;break e;case 3:x.flags=-65537&x.flags|128;case 0:if(null===(h="function"===typeof(x=p.payload)?x.call(m,u,h):x)||void 0===h)break e;u=L({},u,h);break e;case 2:Or=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=h;if(null===(l=l.next)){if(null===(l=n.shared.pending))break;l=(h=l).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===r&&(n.shared.lanes=0);Ro|=i,e.lanes=i,e.memoizedState=u}}function Wr(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(null!==n){if(a.callback=null,a=s,"function"!==typeof n)throw Error(r(191,n));n.call(a)}}}var Hr={},Vr=kn(Hr),Yr=kn(Hr),Gr=kn(Hr);function Qr(e){if(e===Hr)throw Error(r(174));return e}function $r(e,t){switch(Cn(Gr,t),Cn(Yr,e),Cn(Vr,Hr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sn(Vr),Cn(Vr,t)}function Kr(){Sn(Vr),Sn(Yr),Sn(Gr)}function Jr(e){Qr(Gr.current);var t=Qr(Vr.current),s=oe(t,e.type);t!==s&&(Cn(Yr,e),Cn(Vr,s))}function Xr(e){Yr.current===e&&(Sn(Vr),Sn(Yr))}var Zr=kn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function si(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ai=v.ReactCurrentDispatcher,ni=v.ReactCurrentBatchConfig,ri=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(r(321))}function xi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ia(e[s],t[s]))return!1;return!0}function pi(e,t,s,a,n,i){if(ri=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Xi:Zi,e=s(a,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(r(301));i+=1,oi=li=null,t.updateQueue=null,ai.current=el,e=s(a,n)}while(di)}if(ai.current=Ji,t=null!==li&&null!==li.next,ri=0,oi=li=ii=null,ci=!1,t)throw Error(r(300));return e}function gi(){var e=0!==ui;return ui=0,e}function fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function bi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(r(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function yi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=bi(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=li,n=a.baseQueue,i=s.pending;if(null!==i){if(null!==n){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,s.pending=null}if(null!==n){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ri&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=h,l=a):c=c.next=h,ii.lanes|=u,Ro|=u}d=d.next}while(null!==d&&d!==i);null===c?l=a:c.next=o,ia(a,t.memoizedState)||(bl=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,s.lastRenderedState=a}if(null!==(e=s.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Ro|=i,n=n.next}while(n!==e)}else null===n&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ji(e){var t=bi(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,i=t.memoizedState;if(null!==n){s.pending=null;var l=n=n.next;do{i=e(i,l.action),l=l.next}while(l!==n);ia(i,t.memoizedState)||(bl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,a]}function Ni(){}function wi(e,t){var s=ii,a=bi(),n=t(),i=!ia(a.memoizedState,n);if(i&&(a.memoizedState=n,bl=!0),a=a.queue,Oi(Ci.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(s.flags|=2048,Di(9,Si.bind(null,s,a,n,t),void 0,null),null===Mo)throw Error(r(349));0!==(30&ri)||ki(s,t,n)}return n}function ki(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Si(e,t,s,a){t.value=s,t.getSnapshot=a,_i(t)&&Ei(e)}function Ci(e,t,s){return s(function(){_i(t)&&Ei(e)})}function _i(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ia(e,s)}catch(a){return!0}}function Ei(e){var t=Ir(e,1);null!==t&&sc(t,e,1,-1)}function Mi(e){var t=fi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Di(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function Pi(){return bi().memoizedState}function Ai(e,t,s,a){var n=fi();ii.flags|=e,n.memoizedState=Di(1|t,s,void 0,void 0===a?null:a)}function Ti(e,t,s,a){var n=bi();a=void 0===a?null:a;var r=void 0;if(null!==li){var i=li.memoizedState;if(r=i.destroy,null!==a&&xi(a,i.deps))return void(n.memoizedState=Di(t,s,r,a))}ii.flags|=e,n.memoizedState=Di(1|t,s,r,a)}function Ii(e,t){return Ai(8390656,8,e,t)}function Oi(e,t){return Ti(2048,8,e,t)}function Ri(e,t){return Ti(4,2,e,t)}function Li(e,t){return Ti(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ti(4,4,Fi.bind(null,t,e),s)}function qi(){}function Bi(e,t){var s=bi();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&xi(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Ui(e,t){var s=bi();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&xi(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Wi(e,t,s){return 0===(21&ri)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=s):(ia(s,t)||(s=pt(),ii.lanes|=s,Ro|=s,e.baseState=!0),t)}function Hi(e,t){var s=yt;yt=0!==s&&4>s?s:4,e(!0);var a=ni.transition;ni.transition={};try{e(!1),t()}finally{yt=s,ni.transition=a}}function Vi(){return bi().memoizedState}function Yi(e,t,s){var a=tc(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Qi(e))$i(t,s);else if(null!==(s=Tr(e,t,s,a))){sc(s,e,a,ec()),Ki(s,t,a)}}function Gi(e,t,s){var a=tc(e),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))$i(t,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,s);if(n.hasEagerState=!0,n.eagerState=l,ia(l,i)){var o=t.interleaved;return null===o?(n.next=n,Ar(t)):(n.next=o.next,o.next=n),void(t.interleaved=n)}}catch(c){}null!==(s=Tr(e,t,n,a))&&(sc(s,e,a,n=ec()),Ki(s,t,a))}}function Qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function $i(e,t){di=ci=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Ki(e,t,s){if(0!==(4194240&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,bt(e,s)}}var Ji={readContext:Dr,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Xi={readContext:Dr,useCallback:function(e,t){return fi().memoizedState=[e,void 0===t?null:t],e},useContext:Dr,useEffect:Ii,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ai(4194308,4,Fi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var s=fi();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=fi();return t=void 0!==s?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},fi().memoizedState=e},useState:Mi,useDebugValue:qi,useDeferredValue:function(e){return fi().memoizedState=e},useTransition:function(){var e=Mi(!1),t=e[0];return e=Hi.bind(null,e[1]),fi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=ii,n=fi();if(nr){if(void 0===s)throw Error(r(407));s=s()}else{if(s=t(),null===Mo)throw Error(r(349));0!==(30&ri)||ki(a,t,s)}n.memoizedState=s;var i={value:s,getSnapshot:t};return n.queue=i,Ii(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Di(9,Si.bind(null,a,i,s,t),void 0,null),s},useId:function(){var e=fi(),t=Mo.identifierPrefix;if(nr){var s=Jn;t=":"+t+"R"+(s=(Kn&~(1<<32-it(Kn)-1)).toString(32)+s),0<(s=ui++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Dr,useCallback:Bi,useContext:Dr,useEffect:Oi,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:Li,useMemo:Ui,useReducer:vi,useRef:Pi,useState:function(){return vi(yi)},useDebugValue:qi,useDeferredValue:function(e){return Wi(bi(),li.memoizedState,e)},useTransition:function(){return[vi(yi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1},el={readContext:Dr,useCallback:Bi,useContext:Dr,useEffect:Oi,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:Li,useMemo:Ui,useReducer:ji,useRef:Pi,useState:function(){return ji(yi)},useDebugValue:qi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[ji(yi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var s in t=L({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function sl(e,t,s,a){s=null===(s=s(a,t=e.memoizedState))||void 0===s?t:L({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=ec(),n=tc(e),r=Fr(a,n);r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=zr(e,r,n))&&(sc(t,e,n,a),qr(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=ec(),n=tc(e),r=Fr(a,n);r.tag=1,r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=zr(e,r,n))&&(sc(t,e,n,a),qr(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),a=tc(e),n=Fr(s,a);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=zr(e,n,a))&&(sc(t,e,a,s),qr(t,e,a))}};function nl(e,t,s,a,n,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!la(s,a)||!la(n,r))}function rl(e,t,s){var a=!1,n=_n,r=t.contextType;return"object"===typeof r&&null!==r?r=Dr(r):(n=An(t)?Dn:En.current,r=(a=null!==(a=t.contextTypes)&&void 0!==a)?Pn(e,n):_n),t=new t(s,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),t}function il(e,t,s,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function ll(e,t,s,a){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},Rr(e);var r=t.contextType;"object"===typeof r&&null!==r?n.context=Dr(r):(r=An(t)?Dn:En.current,n.context=Pn(e,r)),n.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(sl(e,t,r,s),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&al.enqueueReplaceState(n,n.state,null),Ur(e,s,n,a),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var s="",a=t;do{s+=B(a),a=a.return}while(a);var n=s}catch(r){n="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:n,digest:null}}function cl(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ul="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,s){(s=Fr(-1,s)).tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Ho||(Ho=!0,Vo=a),dl(0,t)},s}function ml(e,t,s){(s=Fr(-1,s)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var n=t.value;s.payload=function(){return a(n)},s.callback=function(){dl(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(s.callback=function(){dl(0,t),"function"!==typeof a&&(null===Yo?Yo=new Set([this]):Yo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function xl(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new ul;var n=new Set;a.set(t,n)}else void 0===(n=a.get(t))&&(n=new Set,a.set(t,n));n.has(s)||(n.add(s),e=Sc.bind(null,e,t,s),t.then(e,e))}function pl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,s,a,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Fr(-1,1)).tag=2,zr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var fl=v.ReactCurrentOwner,bl=!1;function yl(e,t,s,a){t.child=null===e?jr(t,null,s,a):vr(t,e.child,s,a)}function vl(e,t,s,a,n){s=s.render;var r=t.ref;return Mr(t,n),a=pi(e,t,s,a,r,n),s=gi(),null===e||bl?(nr&&s&&er(t),t.flags|=1,yl(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wl(e,t,n))}function jl(e,t,s,a,n){if(null===e){var r=s.type;return"function"!==typeof r||Ac(r)||void 0!==r.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Ic(s.type,null,a,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Nl(e,t,r,a,n))}if(r=e.child,0===(e.lanes&n)){var i=r.memoizedProps;if((s=null!==(s=s.compare)?s:la)(i,a)&&e.ref===t.ref)return Wl(e,t,n)}return t.flags|=1,(e=Tc(r,a)).ref=t.ref,e.return=t,t.child=e}function Nl(e,t,s,a,n){if(null!==e){var r=e.memoizedProps;if(la(r,a)&&e.ref===t.ref){if(bl=!1,t.pendingProps=a=r,0===(e.lanes&n))return t.lanes=e.lanes,Wl(e,t,n);0!==(131072&e.flags)&&(bl=!0)}}return Sl(e,t,s,a,n)}function wl(e,t,s){var a=t.pendingProps,n=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(To,Ao),Ao|=s;else{if(0===(1073741824&s))return e=null!==r?r.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(To,Ao),Ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:s,Cn(To,Ao),Ao|=a}else null!==r?(a=r.baseLanes|s,t.memoizedState=null):a=s,Cn(To,Ao),Ao|=a;return yl(e,t,n,s),t.child}function kl(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,s,a,n){var r=An(s)?Dn:En.current;return r=Pn(t,r),Mr(t,n),s=pi(e,t,s,a,r,n),a=gi(),null===e||bl?(nr&&a&&er(t),t.flags|=1,yl(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wl(e,t,n))}function Cl(e,t,s,a,n){if(An(s)){var r=!0;Rn(t)}else r=!1;if(Mr(t,n),null===t.stateNode)Ul(e,t),rl(t,s,a),ll(t,s,a,n),a=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Dr(c):c=Pn(t,c=An(s)?Dn:En.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==a||o!==c)&&il(t,i,a,c),Or=!1;var h=t.memoizedState;i.state=h,Ur(t,a,i,n),o=t.memoizedState,l!==a||h!==o||Mn.current||Or?("function"===typeof d&&(sl(t,s,d,a),o=t.memoizedState),(l=Or||nl(t,s,l,a,h,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=o),i.props=a,i.state=o,i.context=c,a=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,Lr(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(o=s.contextType)&&null!==o?o=Dr(o):o=Pn(t,o=An(s)?Dn:En.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||h!==o)&&il(t,i,a,o),Or=!1,h=t.memoizedState,i.state=h,Ur(t,a,i,n);var x=t.memoizedState;l!==u||h!==x||Mn.current||Or?("function"===typeof m&&(sl(t,s,m,a),x=t.memoizedState),(c=Or||nl(t,s,c,a,h,x,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,x,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,x,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),i.props=a,i.state=x,i.context=o,a=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return _l(e,t,s,a,r,n)}function _l(e,t,s,a,n,r){kl(e,t);var i=0!==(128&t.flags);if(!a&&!i)return n&&Ln(t,s,!1),Wl(e,t,r);a=t.stateNode,fl.current=t;var l=i&&"function"!==typeof s.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=vr(t,e.child,null,r),t.child=vr(t,null,l,r)):yl(e,t,l,r),t.memoizedState=a.state,n&&Ln(t,s,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?In(0,t.pendingContext,t.pendingContext!==t.context):t.context&&In(0,t.context,!1),$r(e,t.containerInfo)}function Ml(e,t,s,a,n){return mr(),xr(n),t.flags|=256,yl(e,t,s,a),t.child}var Dl,Pl,Al,Tl,Il={dehydrated:null,treeContext:null,retryLane:0};function Ol(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rl(e,t,s){var a,n=t.pendingProps,i=Zr.current,l=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cn(Zr,1&i),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&n)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Rc(o,n,0,null),e=Oc(e,n,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ol(s),t.memoizedState=Il,e):Ll(t,o));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,s,a,n,i,l){if(s)return 256&t.flags?(t.flags&=-257,Fl(e,t,l,a=cl(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=Rc({mode:"visible",children:a.children},n,0,null),(i=Oc(i,n,l,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&vr(t,e.child,null,l),t.child.memoizedState=Ol(l),t.memoizedState=Il,i);if(0===(1&t.mode))return Fl(e,t,l,null);if("$!"===n.data){if(a=n.nextSibling&&n.nextSibling.dataset)var o=a.dgst;return a=o,Fl(e,t,l,a=cl(i=Error(r(419)),a,void 0))}if(o=0!==(l&e.childLanes),bl||o){if(null!==(a=Mo)){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(a.suspendedLanes|l))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Ir(e,n),sc(a,e,n,-1))}return pc(),Fl(e,t,l,a=cl(Error(r(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,ar=cn(n.nextSibling),sr=t,nr=!0,rr=null,null!==e&&(Gn[Qn++]=Kn,Gn[Qn++]=Jn,Gn[Qn++]=$n,Kn=e.id,Jn=e.overflow,$n=t),t=Ll(t,a.children),t.flags|=4096,t)}(e,t,o,n,a,i,s);if(l){l=n.fallback,o=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Tc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?l=Tc(a,l):(l=Oc(l,o,s,null)).flags|=2,l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=null===(o=e.child.memoizedState)?Ol(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Il,n}return e=(l=e.child).sibling,n=Tc(l,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=s),n.return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Ll(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fl(e,t,s,a){return null!==a&&xr(a),vr(t,e.child,null,s),(e=Ll(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zl(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Er(e.return,t,s)}function ql(e,t,s,a,n){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=s,r.tailMode=n)}function Bl(e,t,s){var a=t.pendingProps,n=a.revealOrder,r=a.tail;if(yl(e,t,a.children,s),0!==(2&(a=Zr.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,s,t);else if(19===e.tag)zl(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cn(Zr,a),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;null!==s;)null!==(e=s.alternate)&&null===ei(e)&&(n=s),s=s.sibling;null===(s=n)?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),ql(t,!1,n,s,r);break;case"backwards":for(s=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}ql(t,!0,s,null,r);break;case"together":ql(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Ro|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(s=Tc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Tc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Hl(e,t){if(!nr)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vl(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=14680064&n.subtreeFlags,a|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Yl(e,t,s){var a=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vl(t),null;case 1:case 17:return An(t.type)&&Tn(),Vl(t),null;case 3:return a=t.stateNode,Kr(),Sn(Mn),Sn(En),si(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ic(rr),rr=null))),Pl(e,t),Vl(t),null;case 5:Xr(t);var n=Qr(Gr.current);if(s=t.type,null!==e&&null!=t.stateNode)Al(e,t,s,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(r(166));return Vl(t),null}if(e=Qr(Vr.current),ur(t)){a=t.stateNode,s=t.type;var i=t.memoizedProps;switch(a[hn]=t,a[mn]=i,e=0!==(1&t.mode),s){case"dialog":Fa("cancel",a),Fa("close",a);break;case"iframe":case"object":case"embed":Fa("load",a);break;case"video":case"audio":for(n=0;n<Ia.length;n++)Fa(Ia[n],a);break;case"source":Fa("error",a);break;case"img":case"image":case"link":Fa("error",a),Fa("load",a);break;case"details":Fa("toggle",a);break;case"input":K(a,i),Fa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Fa("invalid",a);break;case"textarea":ne(a,i),Fa("invalid",a)}for(var o in be(s,i),n=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Ja(a.textContent,c,e),n=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Ja(a.textContent,c,e),n=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fa("scroll",a)}switch(s){case"input":Y(a),Z(a,i,!0);break;case"textarea":Y(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Xa)}a=n,t.updateQueue=a,null!==a&&(t.flags|=4)}else{o=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),"select"===s&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[hn]=t,e[mn]=a,Dl(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(s,a),s){case"dialog":Fa("cancel",e),Fa("close",e),n=a;break;case"iframe":case"object":case"embed":Fa("load",e),n=a;break;case"video":case"audio":for(n=0;n<Ia.length;n++)Fa(Ia[n],e);n=a;break;case"source":Fa("error",e),n=a;break;case"img":case"image":case"link":Fa("error",e),Fa("load",e),n=a;break;case"details":Fa("toggle",e),n=a;break;case"input":K(e,a),n=$(e,a),Fa("invalid",e);break;case"option":default:n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=L({},a,{value:void 0}),Fa("invalid",e);break;case"textarea":ne(e,a),n=ae(e,a),Fa("invalid",e)}for(i in be(s,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fa("scroll",e):null!=d&&y(e,i,d,o))}switch(s){case"input":Y(e),Z(e,a,!1);break;case"textarea":Y(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?se(e,!!a.multiple,i,!1):null!=a.defaultValue&&se(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xa)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vl(t),null;case 6:if(e&&null!=t.stateNode)Tl(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(r(166));if(s=Qr(Gr.current),Qr(Vr.current),ur(t)){if(a=t.stateNode,s=t.memoizedProps,a[hn]=t,(i=a.nodeValue!==s)&&null!==(e=sr))switch(e.tag){case 3:Ja(a.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ja(a.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===s.nodeType?s:s.ownerDocument).createTextNode(a))[hn]=t,t.stateNode=a}return Vl(t),null;case 13:if(Sn(Zr),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(nr&&null!==ar&&0!==(1&t.mode)&&0===(128&t.flags))hr(),mr(),t.flags|=98560,i=!1;else if(i=ur(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[hn]=t}else mr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vl(t),i=!1}else null!==rr&&(ic(rr),rr=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Io&&(Io=3):pc())),null!==t.updateQueue&&(t.flags|=4),Vl(t),null);case 4:return Kr(),Pl(e,t),null===e&&Ba(t.stateNode.containerInfo),Vl(t),null;case 10:return _r(t.type._context),Vl(t),null;case 19:if(Sn(Zr),null===(i=t.memoizedState))return Vl(t),null;if(a=0!==(128&t.flags),null===(o=i.rendering))if(a)Hl(i,!1);else{if(0!==Io||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Hl(i,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;null!==s;)e=a,(i=s).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Cn(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Uo&&(t.flags|=128,a=!0,Hl(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ei(o))){if(t.flags|=128,a=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Hl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!nr)return Vl(t),null}else 2*Je()-i.renderingStartTime>Uo&&1073741824!==s&&(t.flags|=128,a=!0,Hl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=i.last)?s.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,s=Zr.current,Cn(Zr,a?1&s|2:1&s),t):(Vl(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Ao)&&(Vl(t),6&t.subtreeFlags&&(t.flags|=8192)):Vl(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Gl(e,t){switch(tr(t),t.tag){case 1:return An(t.type)&&Tn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Kr(),Sn(Mn),Sn(En),si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xr(t),null;case 13:if(Sn(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sn(Zr),null;case 4:return Kr(),null;case 10:return _r(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Dl=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Pl=function(){},Al=function(e,t,s,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Qr(Vr.current);var r,i=null;switch(s){case"input":n=$(e,n),a=$(e,a),i=[];break;case"select":n=L({},n,{value:void 0}),a=L({},a,{value:void 0}),i=[];break;case"textarea":n=ae(e,n),a=ae(e,a),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof a.onClick&&(e.onclick=Xa)}for(d in be(s,a),s=null,n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var o=n[d];for(r in o)o.hasOwnProperty(r)&&(s||(s={}),s[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=null!=n?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(r in o)!o.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(s||(s={}),s[r]="");for(r in c)c.hasOwnProperty(r)&&o[r]!==c[r]&&(s||(s={}),s[r]=c[r])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fa("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Tl=function(e,t,s,a){s!==a&&(t.flags|=4)};var Ql=!1,$l=!1,Kl="function"===typeof WeakSet?WeakSet:Set,Jl=null;function Xl(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(a){kc(e,t,a)}else s.current=null}function Zl(e,t,s){try{s()}catch(a){kc(e,t,a)}}var eo=!1;function to(e,t,s){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var n=a=a.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&Zl(t,s,r)}n=n.next}while(n!==a)}}function so(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function ao(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function no(e){var t=e.alternate;null!==t&&(e.alternate=null,no(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hn],delete t[mn],delete t[pn],delete t[gn],delete t[fn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ro(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ro(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Xa));else if(4!==a&&null!==(e=e.child))for(lo(e,t,s),e=e.sibling;null!==e;)lo(e,t,s),e=e.sibling}function oo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&null!==(e=e.child))for(oo(e,t,s),e=e.sibling;null!==e;)oo(e,t,s),e=e.sibling}var co=null,uo=!1;function ho(e,t,s){for(s=s.child;null!==s;)mo(e,t,s),s=s.sibling}function mo(e,t,s){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(nt,s)}catch(l){}switch(s.tag){case 5:$l||Xl(s,t);case 6:var a=co,n=uo;co=null,ho(e,t,s),uo=n,null!==(co=a)&&(uo?(e=co,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):co.removeChild(s.stateNode));break;case 18:null!==co&&(uo?(e=co,s=s.stateNode,8===e.nodeType?on(e.parentNode,s):1===e.nodeType&&on(e,s),Ut(e)):on(co,s.stateNode));break;case 4:a=co,n=uo,co=s.stateNode.containerInfo,uo=!0,ho(e,t,s),co=a,uo=n;break;case 0:case 11:case 14:case 15:if(!$l&&(null!==(a=s.updateQueue)&&null!==(a=a.lastEffect))){n=a=a.next;do{var r=n,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&Zl(s,t,i),n=n.next}while(n!==a)}ho(e,t,s);break;case 1:if(!$l&&(Xl(s,t),"function"===typeof(a=s.stateNode).componentWillUnmount))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(l){kc(s,t,l)}ho(e,t,s);break;case 21:ho(e,t,s);break;case 22:1&s.mode?($l=(a=$l)||null!==s.memoizedState,ho(e,t,s),$l=a):ho(e,t,s);break;default:ho(e,t,s)}}function xo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Kl),t.forEach(function(t){var a=Ec.bind(null,e,t);s.has(t)||(s.add(t),t.then(a,a))})}}function po(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var n=s[a];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(r(160));mo(i,l,n),co=null,uo=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){kc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)go(t,e),t=t.sibling}function go(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(po(t,e),fo(e),4&a){try{to(3,e,e.return),so(3,e)}catch(g){kc(e,e.return,g)}try{to(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:po(t,e),fo(e),512&a&&null!==s&&Xl(s,s.return);break;case 5:if(po(t,e),fo(e),512&a&&null!==s&&Xl(s,s.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(g){kc(e,e.return,g)}}if(4&a&&null!=(n=e.stateNode)){var i=e.memoizedProps,l=null!==s?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&J(n,i),ye(o,l);var d=ye(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];"style"===u?ge(n,h):"dangerouslySetInnerHTML"===u?ue(n,h):"children"===u?he(n,h):y(n,u,h,d)}switch(o){case"input":X(n,i);break;case"textarea":re(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;null!=x?se(n,!!i.multiple,x,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(n,!!i.multiple,i.defaultValue,!0):se(n,!!i.multiple,i.multiple?[]:"",!1))}n[mn]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(po(t,e),fo(e),4&a){if(null===e.stateNode)throw Error(r(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(po(t,e),fo(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:po(t,e),fo(e);break;case 13:po(t,e),fo(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bo=Je())),4&a&&xo(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?($l=(d=$l)||u,po(t,e),$l=d):po(t,e),fo(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jl=e,u=e.child;null!==u;){for(h=Jl=u;null!==Jl;){switch(x=(m=Jl).child,m.tag){case 0:case 11:case 14:case 15:to(4,m,m.return);break;case 1:Xl(m,m.return);var p=m.stateNode;if("function"===typeof p.componentWillUnmount){a=m,s=m.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){kc(a,s,g)}}break;case 5:Xl(m,m.return);break;case 22:if(null!==m.memoizedState){jo(h);continue}}null!==x?(x.return=m,Jl=x):jo(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{n=h.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=h.stateNode,l=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=pe("display",l))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:po(t,e),fo(e),4&a&&xo(e);case 21:}}function fo(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(ro(s)){var a=s;break e}s=s.return}throw Error(r(160))}switch(a.tag){case 5:var n=a.stateNode;32&a.flags&&(he(n,""),a.flags&=-33),oo(e,io(e),n);break;case 3:case 4:var i=a.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(r(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bo(e,t,s){Jl=e,yo(e,t,s)}function yo(e,t,s){for(var a=0!==(1&e.mode);null!==Jl;){var n=Jl,r=n.child;if(22===n.tag&&a){var i=null!==n.memoizedState||Ql;if(!i){var l=n.alternate,o=null!==l&&null!==l.memoizedState||$l;l=Ql;var c=$l;if(Ql=i,($l=o)&&!c)for(Jl=n;null!==Jl;)o=(i=Jl).child,22===i.tag&&null!==i.memoizedState?No(n):null!==o?(o.return=i,Jl=o):No(n);for(;null!==r;)Jl=r,yo(r,t,s),r=r.sibling;Jl=n,Ql=l,$l=c}vo(e)}else 0!==(8772&n.subtreeFlags)&&null!==r?(r.return=n,Jl=r):vo(e)}}function vo(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$l||so(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!$l)if(null===s)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:tl(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wr(t,i,a);break;case 3:var l=t.updateQueue;if(null!==l){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Wr(t,l,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(r(163))}$l||512&t.flags&&ao(t)}catch(m){kc(t,t.return,m)}}if(t===e){Jl=null;break}if(null!==(s=t.sibling)){s.return=t.return,Jl=s;break}Jl=t.return}}function jo(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Jl=s;break}Jl=t.return}}function No(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{so(4,t)}catch(o){kc(t,s,o)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var n=t.return;try{a.componentDidMount()}catch(o){kc(t,n,o)}}var r=t.return;try{ao(t)}catch(o){kc(t,r,o)}break;case 5:var i=t.return;try{ao(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var wo,ko=Math.ceil,So=v.ReactCurrentDispatcher,Co=v.ReactCurrentOwner,_o=v.ReactCurrentBatchConfig,Eo=0,Mo=null,Do=null,Po=0,Ao=0,To=kn(0),Io=0,Oo=null,Ro=0,Lo=0,Fo=0,zo=null,qo=null,Bo=0,Uo=1/0,Wo=null,Ho=!1,Vo=null,Yo=null,Go=!1,Qo=null,$o=0,Ko=0,Jo=null,Xo=-1,Zo=0;function ec(){return 0!==(6&Eo)?Je():-1!==Xo?Xo:Xo=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Eo)&&0!==Po?Po&-Po:null!==pr.transition?(0===Zo&&(Zo=pt()),Zo):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function sc(e,t,s,a){if(50<Ko)throw Ko=0,Jo=null,Error(r(185));ft(e,s,a),0!==(2&Eo)&&e===Mo||(e===Mo&&(0===(2&Eo)&&(Lo|=s),4===Io&&lc(e,Po)),ac(e,a),1===s&&0===Eo&&0===(1&t.mode)&&(Uo=Je()+500,zn&&Un()))}function ac(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-it(r),l=1<<i,o=n[i];-1===o?0!==(l&s)&&0===(l&a)||(n[i]=mt(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}}(e,t);var a=ht(e,e===Mo?Po:0);if(0===a)null!==s&&Qe(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=s&&Qe(s),1===t)0===e.tag?function(e){zn=!0,Bn(e)}(oc.bind(null,e)):Bn(oc.bind(null,e)),rn(function(){0===(6&Eo)&&Un()}),s=null;else{switch(vt(a)){case 1:s=Ze;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=at}s=Mc(s,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function nc(e,t){if(Xo=-1,Zo=0,0!==(6&Eo))throw Error(r(327));var s=e.callbackNode;if(Nc()&&e.callbackNode!==s)return null;var a=ht(e,e===Mo?Po:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var n=Eo;Eo|=2;var i=xc();for(Mo===e&&Po===t||(Wo=null,Uo=Je()+500,hc(e,t));;)try{bc();break}catch(o){mc(e,o)}Cr(),So.current=i,Eo=n,null!==Do?t=0:(Mo=null,Po=0,t=Io)}if(0!==t){if(2===t&&(0!==(n=xt(e))&&(a=n,t=rc(e,n))),1===t)throw s=Oo,hc(e,0),lc(e,a),ac(e,Je()),s;if(6===t)lc(e,a);else{if(n=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var a=0;a<s.length;a++){var n=s[a],r=n.getSnapshot;n=n.value;try{if(!ia(r(),n))return!1}catch(l){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=gc(e,a))&&(0!==(i=xt(e))&&(a=i,t=rc(e,i))),1===t))throw s=Oo,hc(e,0),lc(e,a),ac(e,Je()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:jc(e,qo,Wo);break;case 3:if(lc(e,a),(130023424&a)===a&&10<(t=Bo+500-Je())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=sn(jc.bind(null,e,qo,Wo),t);break}jc(e,qo,Wo);break;case 4:if(lc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,n=-1;0<a;){var l=31-it(a);i=1<<l,(l=t[l])>n&&(n=l),a&=~i}if(a=n,10<(a=(120>(a=Je()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*ko(a/1960))-a)){e.timeoutHandle=sn(jc.bind(null,e,qo,Wo),a);break}jc(e,qo,Wo);break;default:throw Error(r(329))}}}return ac(e,Je()),e.callbackNode===s?nc.bind(null,e):null}function rc(e,t){var s=zo;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=qo,qo=s,null!==t&&ic(t)),e}function ic(e){null===qo?qo=e:qo.push.apply(qo,e)}function lc(e,t){for(t&=~Fo,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-it(t),a=1<<s;e[s]=-1,t&=~a}}function oc(e){if(0!==(6&Eo))throw Error(r(327));Nc();var t=ht(e,0);if(0===(1&t))return ac(e,Je()),null;var s=gc(e,t);if(0!==e.tag&&2===s){var a=xt(e);0!==a&&(t=a,s=rc(e,a))}if(1===s)throw s=Oo,hc(e,0),lc(e,t),ac(e,Je()),s;if(6===s)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,qo,Wo),ac(e,Je()),null}function cc(e,t){var s=Eo;Eo|=1;try{return e(t)}finally{0===(Eo=s)&&(Uo=Je()+500,zn&&Un())}}function dc(e){null!==Qo&&0===Qo.tag&&0===(6&Eo)&&Nc();var t=Eo;Eo|=1;var s=_o.transition,a=yt;try{if(_o.transition=null,yt=1,e)return e()}finally{yt=a,_o.transition=s,0===(6&(Eo=t))&&Un()}}function uc(){Ao=To.current,Sn(To)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,an(s)),null!==Do)for(s=Do.return;null!==s;){var a=s;switch(tr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Tn();break;case 3:Kr(),Sn(Mn),Sn(En),si();break;case 5:Xr(a);break;case 4:Kr();break;case 13:case 19:Sn(Zr);break;case 10:_r(a.type._context);break;case 22:case 23:uc()}s=s.return}if(Mo=e,Do=e=Tc(e.current,null),Po=Ao=t,Io=0,Oo=null,Fo=Lo=Ro=0,qo=zo=null,null!==Pr){for(t=0;t<Pr.length;t++)if(null!==(a=(s=Pr[t]).interleaved)){s.interleaved=null;var n=a.next,r=s.pending;if(null!==r){var i=r.next;r.next=n,a.next=i}s.pending=a}Pr=null}return e}function mc(e,t){for(;;){var s=Do;try{if(Cr(),ai.current=Ji,ci){for(var a=ii.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}ci=!1}if(ri=0,oi=li=ii=null,di=!1,ui=0,Co.current=null,null===s||null===s.return){Io=1,Oo=t,Do=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=Po,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=pl(l);if(null!==x){x.flags&=-257,gl(x,l,o,0,t),1&x.mode&&xl(i,d,t),c=d;var p=(t=x).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){xl(i,d,t),pc();break e}c=Error(r(426))}else if(nr&&1&o.mode){var f=pl(l);if(null!==f){0===(65536&f.flags)&&(f.flags|=256),gl(f,l,o,0,t),xr(ol(c,o));break e}}i=c=ol(c,o),4!==Io&&(Io=2),null===zo?zo=[i]:zo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Br(i,hl(0,c,t));break e;case 1:o=c;var b=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Yo||!Yo.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Br(i,ml(i,o,t));break e}}i=i.return}while(null!==i)}vc(s)}catch(v){t=v,Do===s&&null!==s&&(Do=s=s.return);continue}break}}function xc(){var e=So.current;return So.current=Ji,null===e?Ji:e}function pc(){0!==Io&&3!==Io&&2!==Io||(Io=4),null===Mo||0===(268435455&Ro)&&0===(268435455&Lo)||lc(Mo,Po)}function gc(e,t){var s=Eo;Eo|=2;var a=xc();for(Mo===e&&Po===t||(Wo=null,hc(e,t));;)try{fc();break}catch(n){mc(e,n)}if(Cr(),Eo=s,So.current=a,null!==Do)throw Error(r(261));return Mo=null,Po=0,Io}function fc(){for(;null!==Do;)yc(Do)}function bc(){for(;null!==Do&&!$e();)yc(Do)}function yc(e){var t=wo(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,null===t?vc(e):Do=t,Co.current=null}function vc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Yl(s,t,Ao)))return void(Do=s)}else{if(null!==(s=Gl(s,t)))return s.flags&=32767,void(Do=s);if(null===e)return Io=6,void(Do=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Do=t);Do=t=e}while(null!==t);0===Io&&(Io=5)}function jc(e,t,s){var a=yt,n=_o.transition;try{_o.transition=null,yt=1,function(e,t,s,a){do{Nc()}while(null!==Qo);if(0!==(6&Eo))throw Error(r(327));s=e.finishedWork;var n=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-it(s),r=1<<n;t[n]=0,a[n]=-1,e[n]=-1,s&=~r}}(e,i),e===Mo&&(Do=Mo=null,Po=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Go||(Go=!0,Mc(tt,function(){return Nc(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=_o.transition,_o.transition=null;var l=yt;yt=1;var o=Eo;Eo|=4,Co.current=null,function(e,t){if(Za=Ht,ha(e=ua())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var x;h!==s||0!==n&&3!==h.nodeType||(o=l+n),h!==i||0!==a&&3!==h.nodeType||(c=l+a),3===h.nodeType&&(l+=h.nodeValue.length),null!==(x=h.firstChild);)m=h,h=x;for(;;){if(h===e)break t;if(m===s&&++d===n&&(o=l),m===i&&++u===a&&(c=l),null!==(x=h.nextSibling))break;m=(h=m).parentNode}h=x}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(en={focusedElem:e,selectionRange:s},Ht=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,f=p.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:tl(t.type,g),f);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(r(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}p=eo,eo=!1}(e,s),go(s,e),ma(en),Ht=!!Za,en=Za=null,e.current=s,bo(s,e,n),Ke(),Eo=o,yt=l,_o.transition=i}else e.current=s;if(Go&&(Go=!1,Qo=e,$o=n),i=e.pendingLanes,0===i&&(Yo=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),ac(e,Je()),null!==t)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ho)throw Ho=!1,e=Vo,Vo=null,e;0!==(1&$o)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Jo?Ko++:(Ko=0,Jo=e):Ko=0,Un()}(e,t,s,a)}finally{_o.transition=n,yt=a}return null}function Nc(){if(null!==Qo){var e=vt($o),t=_o.transition,s=yt;try{if(_o.transition=null,yt=16>e?16:e,null===Qo)var a=!1;else{if(e=Qo,Qo=null,$o=0,0!==(6&Eo))throw Error(r(331));var n=Eo;for(Eo|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Jl=d;null!==Jl;){var u=Jl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var h=u.child;if(null!==h)h.return=u,Jl=h;else for(;null!==Jl;){var m=(u=Jl).sibling,x=u.return;if(no(u),u===d){Jl=null;break}if(null!==m){m.return=x,Jl=m;break}Jl=x}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var f=g.sibling;g.sibling=null,g=f}while(null!==g)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Jl=b;break e}Jl=i.return}}var y=e.current;for(Jl=y;null!==Jl;){var v=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,Jl=v;else e:for(l=y;null!==Jl;){if(0!==(2048&(o=Jl).flags))try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(N){kc(o,o.return,N)}if(o===l){Jl=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Jl=j;break e}Jl=o.return}}if(Eo=n,Un(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(nt,e)}catch(N){}a=!0}return a}finally{yt=s,_o.transition=t}}return!1}function wc(e,t,s){e=zr(e,t=hl(0,t=ol(s,t),1),1),t=ec(),null!==e&&(ft(e,1,t),ac(e,t))}function kc(e,t,s){if(3===e.tag)wc(e,e,s);else for(;null!==t;){if(3===t.tag){wc(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Yo||!Yo.has(a))){t=zr(t,e=ml(t,e=ol(s,e),1),1),e=ec(),null!==t&&(ft(t,1,e),ac(t,e));break}}t=t.return}}function Sc(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,Mo===e&&(Po&s)===s&&(4===Io||3===Io&&(130023424&Po)===Po&&500>Je()-Bo?hc(e,0):Fo|=s),ac(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=Ir(e,t))&&(ft(e,t,s),ac(e,s))}function _c(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Cc(e,s)}function Ec(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),Cc(e,s)}function Mc(e,t){return Ge(e,t)}function Dc(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,s,a){return new Dc(e,t,s,a)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var s=e.alternate;return null===s?((s=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ic(e,t,s,a,n,i){var l=2;if(a=e,"function"===typeof e)Ac(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Oc(s.children,n,i,t);case k:l=8,n|=8;break;case S:return(e=Pc(12,s,t,2|n)).elementType=S,e.lanes=i,e;case M:return(e=Pc(13,s,t,n)).elementType=M,e.lanes=i,e;case D:return(e=Pc(19,s,t,n)).elementType=D,e.lanes=i,e;case T:return Rc(s,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:l=10;break e;case _:l=9;break e;case E:l=11;break e;case P:l=14;break e;case A:l=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Pc(l,s,t,n)).elementType=e,t.type=a,t.lanes=i,t}function Oc(e,t,s,a){return(e=Pc(7,e,a,t)).lanes=s,e}function Rc(e,t,s,a){return(e=Pc(22,e,a,t)).elementType=T,e.lanes=s,e.stateNode={isHidden:!1},e}function Lc(e,t,s){return(e=Pc(6,e,null,t)).lanes=s,e}function Fc(e,t,s){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,s,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function qc(e,t,s,a,n,r,i,l,o){return e=new zc(e,t,s,l,o),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Pc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rr(r),e}function Bc(e){if(!e)return _n;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(An(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var s=e.type;if(An(s))return On(e,s,t)}return t}function Uc(e,t,s,a,n,r,i,l,o){return(e=qc(s,a,!0,e,0,r,0,l,o)).context=Bc(null),s=e.current,(r=Fr(a=ec(),n=tc(s))).callback=void 0!==t&&null!==t?t:null,zr(s,r,n),e.current.lanes=n,ft(e,n,a),ac(e,a),e}function Wc(e,t,s,a){var n=t.current,r=ec(),i=tc(n);return s=Bc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Fr(r,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=zr(n,t,i))&&(sc(e,n,i,r),qr(e,n,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Yc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}wo=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mn.current)bl=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return bl=!1,function(e,t,s){switch(t.tag){case 3:El(t),mr();break;case 5:Jr(t);break;case 1:An(t.type)&&Rn(t);break;case 4:$r(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Cn(Nr,a._currentValue),a._currentValue=n;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Cn(Zr,1&Zr.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Rl(e,t,s):(Cn(Zr,1&Zr.current),null!==(e=Wl(e,t,s))?e.sibling:null);Cn(Zr,1&Zr.current);break;case 19:if(a=0!==(s&t.childLanes),0!==(128&e.flags)){if(a)return Bl(e,t,s);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Zr,Zr.current),a)break;return null;case 22:case 23:return t.lanes=0,wl(e,t,s)}return Wl(e,t,s)}(e,t,s);bl=0!==(131072&e.flags)}else bl=!1,nr&&0!==(1048576&t.flags)&&Zn(t,Yn,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ul(e,t),e=t.pendingProps;var n=Pn(t,En.current);Mr(t,s),n=pi(null,t,a,e,n,s);var i=gi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,An(a)?(i=!0,Rn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Rr(t),n.updater=al,t.stateNode=n,n._reactInternals=t,ll(t,a,e,s),t=_l(null,t,a,!0,i,s)):(t.tag=0,nr&&i&&er(t),yl(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,a=(n=a._init)(a._payload),t.type=a,n=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===P)return 14}return 2}(a),e=tl(a,e),n){case 0:t=Sl(null,t,a,e,s);break e;case 1:t=Cl(null,t,a,e,s);break e;case 11:t=vl(null,t,a,e,s);break e;case 14:t=jl(null,t,a,tl(a.type,e),s);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,Sl(e,t,a,n=t.elementType===a?n:tl(a,n),s);case 1:return a=t.type,n=t.pendingProps,Cl(e,t,a,n=t.elementType===a?n:tl(a,n),s);case 3:e:{if(El(t),null===e)throw Error(r(387));a=t.pendingProps,n=(i=t.memoizedState).element,Lr(e,t),Ur(t,a,null,s);var l=t.memoizedState;if(a=l.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ml(e,t,a,s,n=ol(Error(r(423)),t));break e}if(a!==n){t=Ml(e,t,a,s,n=ol(Error(r(424)),t));break e}for(ar=cn(t.stateNode.containerInfo.firstChild),sr=t,nr=!0,rr=null,s=jr(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(mr(),a===n){t=Wl(e,t,s);break e}yl(e,t,a,s)}t=t.child}return t;case 5:return Jr(t),null===e&&cr(t),a=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,l=n.children,tn(a,n)?l=null:null!==i&&tn(a,i)&&(t.flags|=32),kl(e,t),yl(e,t,l,s),t.child;case 6:return null===e&&cr(t),null;case 13:return Rl(e,t,s);case 4:return $r(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=vr(t,null,a,s):yl(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,vl(e,t,a,n=t.elementType===a?n:tl(a,n),s);case 7:return yl(e,t,t.pendingProps,s),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Cn(Nr,a._currentValue),a._currentValue=l,null!==i)if(ia(i.value,l)){if(i.children===n.children&&!Mn.current){t=Wl(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Fr(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),Er(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(r(341));l.lanes|=s,null!==(o=l.alternate)&&(o.lanes|=s),Er(l,s,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}yl(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Mr(t,s),a=a(n=Dr(n)),t.flags|=1,yl(e,t,a,s),t.child;case 14:return n=tl(a=t.type,t.pendingProps),jl(e,t,a,n=tl(a.type,n),s);case 15:return Nl(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:tl(a,n),Ul(e,t),t.tag=1,An(a)?(e=!0,Rn(t)):e=!1,Mr(t,s),rl(t,a,n),ll(t,a,n,s),_l(null,t,a,!0,e,s);case 19:return Bl(e,t,s);case 22:return wl(e,t,s)}throw Error(r(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,s,a,n){var r=s._reactRootContainer;if(r){var i=r;if("function"===typeof n){var l=n;n=function(){var e=Hc(i);l.call(e)}}Wc(t,i,e,n)}else i=function(e,t,s,a,n){if(n){if("function"===typeof a){var r=a;a=function(){var e=Hc(i);r.call(e)}}var i=Uc(t,a,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[xn]=i.current,Ba(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof a){var l=a;a=function(){var e=Hc(o);l.call(e)}}var o=qc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=o,e[xn]=o.current,Ba(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,o,s,a)}),o}(s,t,e,n,a);return Hc(i)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Wc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[xn]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Tt.length&&0!==t&&t<Tt[s].priority;s++);Tt.splice(s,0,e),0===s&&Lt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ut(t.pendingLanes);0!==s&&(bt(t,1|s),ac(t,Je()),0===(6&Eo)&&(Uo=Je()+500,Un()))}break;case 13:dc(function(){var t=Ir(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),Yc(e,1)}},Nt=function(e){if(13===e.tag){var t=Ir(e,134217728);if(null!==t)sc(t,e,134217728,ec());Yc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),s=Ir(e,t);if(null!==s)sc(s,e,t,ec());Yc(e,t)}},kt=function(){return yt},St=function(e,t){var s=yt;try{return yt=e,t()}finally{yt=s}},Ne=function(e,t,s){switch(t){case"input":if(X(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=jn(a);if(!n)throw Error(r(90));G(a),X(a,n)}}}break;case"textarea":re(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ee=cc,Me=dc;var ed={usingClientEntryPoint:!1,Events:[yn,vn,jn,Ce,_e,cc]},td={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{nt=ad.inject(sd),rt=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(r(200));return function(e,t,s){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==a?null:""+a,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Kc(e))throw Error(r(299));var s=!1,a="",n=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=qc(e,1,!1,null,0,s,0,a,n),e[xn]=t.current,Ba(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Jc(t))throw Error(r(200));return Zc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Kc(e))throw Error(r(405));var a=null!=s&&s.hydratedSources||null,n=!1,i="",l=Gc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(n=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(l=s.onRecoverableError)),t=Uc(t,null,e,1,null!=s?s:null,n,0,i,l),e[xn]=t.current,Ba(e),a)for(e=0;e<a.length;e++)n=(n=(s=a[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new $c(t)},t.render=function(e,t,s){if(!Jc(t))throw Error(r(200));return Zc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(r(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Jc(s))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,s,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},819:(e,t,s)=>{"use strict";s.d(t,{QueryClient:()=>a.E});var a=s(198),n=s(298);s.o(n,"QueryClientProvider")&&s.d(t,{QueryClientProvider:function(){return n.QueryClientProvider}})},853:(e,t,s)=>{"use strict";e.exports=s(234)},870:(e,t,s)=>{"use strict";s.d(t,{BH:()=>b,Cp:()=>g,F$:()=>x,G6:()=>w,HN:()=>o,MK:()=>h,Od:()=>p,S$:()=>n,Zw:()=>i,b_:()=>u,gn:()=>l,j3:()=>c,jY:()=>k,lQ:()=>r,nJ:()=>m,vh:()=>d,yy:()=>N});var a=s(168),n="undefined"===typeof window;function r(){}function i(e,t){return"function"===typeof e?e(t):e}function l(e){return"number"===typeof e&&e>=0&&e!==1/0}function o(e){return Array.isArray(e)?e:[e]}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function d(e,t,s){return j(e)?"function"===typeof t?(0,a.A)({},s,{queryKey:e,queryFn:t}):(0,a.A)({},t,{queryKey:e}):e}function u(e,t,s){return j(e)?[(0,a.A)({},t,{queryKey:e}),s]:[e||{},t]}function h(e,t){var s=e.active,a=e.exact,n=e.fetching,r=e.inactive,i=e.predicate,l=e.queryKey,o=e.stale;if(j(l))if(a){if(t.queryHash!==x(l,t.options))return!1}else if(!g(t.queryKey,l))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(s,r);if("none"===c)return!1;if("all"!==c){var d=t.isActive();if("active"===c&&!d)return!1;if("inactive"===c&&d)return!1}return("boolean"!==typeof o||t.isStale()===o)&&(("boolean"!==typeof n||t.isFetching()===n)&&!(i&&!i(t)))}function m(e,t){var s=e.exact,a=e.fetching,n=e.predicate,r=e.mutationKey;if(j(r)){if(!t.options.mutationKey)return!1;if(s){if(p(t.options.mutationKey)!==p(r))return!1}else if(!g(t.options.mutationKey,r))return!1}return("boolean"!==typeof a||"loading"===t.state.status===a)&&!(n&&!n(t))}function x(e,t){return((null==t?void 0:t.queryKeyHashFn)||p)(e)}function p(e){var t,s=o(e);return t=s,JSON.stringify(t,function(e,t){return y(t)?Object.keys(t).sort().reduce(function(e,s){return e[s]=t[s],e},{}):t})}function g(e,t){return f(o(e),o(t))}function f(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some(function(s){return!f(e[s],t[s])}))}function b(e,t){if(e===t)return e;var s=Array.isArray(e)&&Array.isArray(t);if(s||y(e)&&y(t)){for(var a=s?e.length:Object.keys(e).length,n=s?t:Object.keys(t),r=n.length,i=s?[]:{},l=0,o=0;o<r;o++){var c=s?o:n[o];i[c]=b(e[c],t[c]),i[c]===e[c]&&l++}return a===r&&l===a?e:i}return t}function y(e){if(!v(e))return!1;var t=e.constructor;if("undefined"===typeof t)return!0;var s=t.prototype;return!!v(s)&&!!s.hasOwnProperty("isPrototypeOf")}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function j(e){return"string"===typeof e||Array.isArray(e)}function N(e){return new Promise(function(t){setTimeout(t,e)})}function w(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function k(){if("function"===typeof AbortController)return new AbortController}},907:(e,t,s)=>{"use strict";s.d(t,{QueryClient:()=>a.QueryClient,QueryClientProvider:()=>n.QueryClientProvider});var a=s(819);s.o(a,"QueryClientProvider")&&s.d(t,{QueryClientProvider:function(){return a.QueryClientProvider}});var n=s(524)},950:(e,t,s)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)},991:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s(870),n=new(function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,a.G6)(function(){t.notifyFn(e)})},t.batchCalls=function(e){var t=this;return function(){for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];t.schedule(function(){e.apply(void 0,a)})}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,a.G6)(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}())}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var r=Object.create(null);s.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&a;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>a[e]);return i.default=()=>a,s.d(r,i),r}})(),s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};s.r(e),s.d(e,{hasBrowserEnv:()=>Wt,hasStandardBrowserEnv:()=>Vt,hasStandardBrowserWebWorkerEnv:()=>Yt,navigator:()=>Ht,origin:()=>Gt});var t,a=s(43),n=s.t(a,2),r=s(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const l="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(gn){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,s,a){return void 0===s&&(s=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:s,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function m(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function x(e,s,a,n){void 0===n&&(n={});let{window:r=document.defaultView,v5Compat:c=!1}=n,m=r.history,x=t.Pop,p=null,g=f();function f(){return(m.state||{idx:null}).idx}function b(){x=t.Pop;let e=f(),s=null==e?null:e-g;g=e,p&&p({action:x,location:v.location,delta:s})}function y(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,s="string"===typeof e?e:h(e);return s=s.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==g&&(g=0,m.replaceState(i({},m.state,{idx:g}),""));let v={get action(){return x},get location(){return e(r,m)},listen(e){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(l,b),p=e,()=>{r.removeEventListener(l,b),p=null}},createHref:e=>s(r,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,s){x=t.Push;let n=u(v.location,e,s);a&&a(n,e),g=f()+1;let i=d(n,g),l=v.createHref(n);try{m.pushState(i,"",l)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;r.location.assign(l)}c&&p&&p({action:x,location:v.location,delta:1})},replace:function(e,s){x=t.Replace;let n=u(v.location,e,s);a&&a(n,e),g=f();let r=d(n,g),i=v.createHref(n);m.replaceState(r,"",i),c&&p&&p({action:x,location:v.location,delta:0})},go:e=>m.go(e)};return v}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,s){return void 0===s&&(s="/"),f(e,t,s,!1)}function f(e,t,s,a){let n=P(("string"===typeof t?m(t):t).pathname||"/",s);if(null==n)return null;let r=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=D(n);i=E(r[l],e,a)}return i}function b(e,t,s,a){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===a&&(a="");let n=(e,n,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let l=R([a,i.relativePath]),c=s.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),b(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:_(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let a of y(e.path))n(e,t,a);else n(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[s,...a]=t,n=s.endsWith("?"),r=s.replace(/\?$/,"");if(0===a.length)return n?[r,""]:[r];let i=y(a.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),n&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const v=/^:[\w-]+$/,j=3,N=2,w=1,k=10,S=-2,C=e=>"*"===e;function _(e,t){let s=e.split("/"),a=s.length;return s.some(C)&&(a+=S),t&&(a+=N),s.filter(e=>!C(e)).reduce((e,t)=>e+(v.test(t)?j:""===t?w:k),a)}function E(e,t,s){void 0===s&&(s=!1);let{routesMeta:a}=e,n={},r="/",i=[];for(let l=0;l<a.length;++l){let e=a[l],o=l===a.length-1,c="/"===r?t:t.slice(r.length)||"/",d=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&s&&!a[a.length-1].route.index&&(d=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:R([r,d.pathname]),pathnameBase:L(R([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=R([r,d.pathnameBase]))}return i}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(a.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let r=new RegExp(n,t?void 0:"i");return[r,a]}(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),l=n.slice(1),o=a.reduce((e,t,s)=>{let{paramName:a,isOptional:n}=t;if("*"===a){let e=l[s]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[s];return e[a]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:r,pathnameBase:i,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&"/"!==a?null:e.slice(s)||"/"}function A(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function T(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function I(e,t){let s=T(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function O(e,t,s,a){let n;void 0===a&&(a=!1),"string"===typeof e?n=m(e):(n=i({},e),o(!n.pathname||!n.pathname.includes("?"),A("?","pathname","search",n)),o(!n.pathname||!n.pathname.includes("#"),A("#","pathname","hash",n)),o(!n.search||!n.search.includes("#"),A("#","search","hash",n)));let r,l=""===e||""===n.pathname,c=l?"/":n.pathname;if(null==c)r=s;else{let e=t.length-1;if(!a&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}r=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:s,search:a="",hash:n=""}="string"===typeof e?m(e):e,r=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:r,search:F(a),hash:z(n)}}(n,r),u=c&&"/"!==c&&c.endsWith("/"),h=(l||"."===c)&&s.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const R=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],U=(new Set(B),["get",...B]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},W.apply(this,arguments)}const H=a.createContext(null);const V=a.createContext(null);const Y=a.createContext(null);const G=a.createContext(null);const Q=a.createContext({outlet:null,matches:[],isDataRoute:!1});const $=a.createContext(null);function K(){return null!=a.useContext(G)}function J(){return K()||o(!1),a.useContext(G).location}function X(e){a.useContext(Y).static||a.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=a.useContext(Q);return e?function(){let{router:e}=de(oe.UseNavigateStable),t=he(ce.UseNavigateStable),s=a.useRef(!1);X(()=>{s.current=!0});let n=a.useCallback(function(a,n){void 0===n&&(n={}),s.current&&("number"===typeof a?e.navigate(a):e.navigate(a,W({fromRouteId:t},n)))},[e,t]);return n}():function(){K()||o(!1);let e=a.useContext(H),{basename:t,future:s,navigator:n}=a.useContext(Y),{matches:r}=a.useContext(Q),{pathname:i}=J(),l=JSON.stringify(I(r,s.v7_relativeSplatPath)),c=a.useRef(!1);X(()=>{c.current=!0});let d=a.useCallback(function(s,a){if(void 0===a&&(a={}),!c.current)return;if("number"===typeof s)return void n.go(s);let r=O(s,JSON.parse(l),i,"path"===a.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:R([t,r.pathname])),(a.replace?n.replace:n.push)(r,a.state,a)},[t,n,l,i,e]);return d}()}const ee=a.createContext(null);function te(e,t){let{relative:s}=void 0===t?{}:t,{future:n}=a.useContext(Y),{matches:r}=a.useContext(Q),{pathname:i}=J(),l=JSON.stringify(I(r,n.v7_relativeSplatPath));return a.useMemo(()=>O(e,JSON.parse(l),i,"path"===s),[e,l,i,s])}function se(e,s,n,r){K()||o(!1);let{navigator:i}=a.useContext(Y),{matches:l}=a.useContext(Q),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,x=J();if(s){var p;let e="string"===typeof s?m(s):s;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||o(!1),h=e}else h=x;let f=h.pathname||"/",b=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");b="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=g(e,{pathname:b});let v=le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:R([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,r);return s&&v?a.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},v):v}function ae(){let e=function(){var e;let t=a.useContext($),s=ue(ce.UseRouteError),n=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[n]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),s?a.createElement("pre",{style:r},s):null,null)}const ne=a.createElement(ae,null);class re extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(Q.Provider,{value:this.props.routeContext},a.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:s,children:n}=e,r=a.useContext(H);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),a.createElement(Q.Provider,{value:t},n)}function le(e,t,s,n){var r;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===n&&(n=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,c=null==(r=s)?void 0:r.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let a=0;a<l.length;a++){let e=l[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:a}=s,n=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||n){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,n,r)=>{let i,o=!1,h=null,m=null;var x;s&&(i=c&&n.route.id?c[n.route.id]:void 0,h=n.route.errorElement||ne,d&&(u<0&&0===r?(x="route-fallback",!1||me[x]||(me[x]=!0),o=!0,m=null):u===r&&(o=!0,m=n.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,r+1)),g=()=>{let t;return t=i?h:o?m:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(ie,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(n.route.ErrorBoundary||n.route.errorElement||0===r)?a.createElement(re,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=a.useContext(H);return t||o(!1),t}function ue(e){let t=a.useContext(V);return t||o(!1),t}function he(e){let t=function(){let e=a.useContext(Q);return e||o(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||o(!1),s.route.id}const me={};function xe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function pe(e){let{to:t,replace:s,state:n,relative:r}=e;K()||o(!1);let{future:i,static:l}=a.useContext(Y),{matches:c}=a.useContext(Q),{pathname:d}=J(),u=Z(),h=O(t,I(c,i.v7_relativeSplatPath),d,"path"===r),m=JSON.stringify(h);return a.useEffect(()=>u(JSON.parse(m),{replace:s,state:n,relative:r}),[u,m,r,s,n]),null}function ge(e){return function(e){let t=a.useContext(Q).outlet;return t?a.createElement(ee.Provider,{value:e},t):t}(e.context)}function fe(e){o(!1)}function be(e){let{basename:s="/",children:n=null,location:r,navigationType:i=t.Pop,navigator:l,static:c=!1,future:d}=e;K()&&o(!1);let u=s.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:u,navigator:l,static:c,future:W({v7_relativeSplatPath:!1},d)}),[u,d,l,c]);"string"===typeof r&&(r=m(r));let{pathname:x="/",search:p="",hash:g="",state:f=null,key:b="default"}=r,y=a.useMemo(()=>{let e=P(x,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:f,key:b},navigationType:i}},[u,x,p,g,f,b,i]);return null==y?null:a.createElement(Y.Provider,{value:h},a.createElement(G.Provider,{children:n,value:y}))}function ye(e){let{children:t,location:s}=e;return se(ve(t),s)}new Promise(()=>{});a.Component;function ve(e,t){void 0===t&&(t=[]);let s=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let r=[...t,n];if(e.type===a.Fragment)return void s.push.apply(s,ve(e.props.children,r));e.type!==fe&&o(!1),e.props.index&&e.props.children&&o(!1);let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,r)),s.push(i)}),s}var je=s(950),Ne=s.t(je,2);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},we.apply(this,arguments)}function ke(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(gn){}new Map;const Ce=n.startTransition;Ne.flushSync,n.useId;function _e(e){let{basename:t,children:s,future:n,window:r}=e,i=a.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:r,v5Compat:!0})&&(l={}),x(function(e,t){let{pathname:s,search:a,hash:n}=e.location;return u("",{pathname:s,search:a,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,l)));let o=i.current,[c,d]=a.useState({action:o.action,location:o.location}),{v7_startTransition:m}=n||{},p=a.useCallback(e=>{m&&Ce?Ce(()=>d(e)):d(e)},[d,m]);return a.useLayoutEffect(()=>o.listen(p),[o,p]),a.useEffect(()=>xe(n),[n]),a.createElement(be,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:n})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=a.forwardRef(function(e,t){let s,{onClick:n,relative:r,reloadDocument:i,replace:l,state:c,target:d,to:u,preventScrollReset:m,viewTransition:x}=e,p=ke(e,Se),{basename:g}=a.useContext(Y),f=!1;if("string"===typeof u&&Me.test(u)&&(s=u,Ee))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),s=P(t.pathname,g);t.origin===e.origin&&null!=s?u=s+t.search+t.hash:f=!0}catch(gn){}let b=function(e,t){let{relative:s}=void 0===t?{}:t;K()||o(!1);let{basename:n,navigator:r}=a.useContext(Y),{hash:i,pathname:l,search:c}=te(e,{relative:s}),d=l;return"/"!==n&&(d="/"===l?n:R([n,l])),r.createHref({pathname:d,search:c,hash:i})}(u,{relative:r}),y=function(e,t){let{target:s,replace:n,state:r,preventScrollReset:i,relative:l,viewTransition:o}=void 0===t?{}:t,c=Z(),d=J(),u=te(e,{relative:l});return a.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==n?n:h(d)===h(u);c(e,{replace:s,state:r,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,n,r,s,e,i,l,o])}(u,{replace:l,state:c,target:d,preventScrollReset:m,relative:r,viewTransition:x});return a.createElement("a",we({},p,{href:s||b,onClick:f||i?n:function(e){n&&n(e),e.defaultPrevented||y(e)},ref:t,target:d}))});var Pe,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ie(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=Te(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:t+""}function Oe(e,t,s){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Re(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function Le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(s),!0).forEach(function(t){Oe(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Re(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Fe(e,t){return function(){return e.apply(t,arguments)}}const{toString:ze}=Object.prototype,{getPrototypeOf:qe}=Object,{iterator:Be,toStringTag:Ue}=Symbol,We=(He=Object.create(null),e=>{const t=ze.call(e);return He[t]||(He[t]=t.slice(8,-1).toLowerCase())});var He;const Ve=e=>(e=e.toLowerCase(),t=>We(t)===e),Ye=e=>t=>typeof t===e,{isArray:Ge}=Array,Qe=Ye("undefined");function $e(e){return null!==e&&!Qe(e)&&null!==e.constructor&&!Qe(e.constructor)&&Xe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ke=Ve("ArrayBuffer");const Je=Ye("string"),Xe=Ye("function"),Ze=Ye("number"),et=e=>null!==e&&"object"===typeof e,tt=e=>{if("object"!==We(e))return!1;const t=qe(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ue in e)&&!(Be in e)},st=Ve("Date"),at=Ve("File"),nt=Ve("Blob"),rt=Ve("FileList"),it=Ve("URLSearchParams"),[lt,ot,ct,dt]=["ReadableStream","Request","Response","Headers"].map(Ve);function ut(e,t){let s,a,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ge(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if($e(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),r=a.length;let i;for(s=0;s<r;s++)i=a[s],t.call(null,e[i],i,e)}}function ht(e,t){if($e(e))return null;t=t.toLowerCase();const s=Object.keys(e);let a,n=s.length;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const mt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,xt=e=>!Qe(e)&&e!==mt;const pt=(gt="undefined"!==typeof Uint8Array&&qe(Uint8Array),e=>gt&&e instanceof gt);var gt;const ft=Ve("HTMLFormElement"),bt=(e=>{let{hasOwnProperty:t}=e;return(e,s)=>t.call(e,s)})(Object.prototype),yt=Ve("RegExp"),vt=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),a={};ut(s,(s,n)=>{let r;!1!==(r=t(s,n,e))&&(a[n]=r||s)}),Object.defineProperties(e,a)};const jt=Ve("AsyncFunction"),Nt=((e,t)=>{return e?setImmediate:t?(s="axios@".concat(Math.random()),a=[],mt.addEventListener("message",e=>{let{source:t,data:n}=e;t===mt&&n===s&&a.length&&a.shift()()},!1),e=>{a.push(e),mt.postMessage(s,"*")}):e=>setTimeout(e);var s,a})("function"===typeof setImmediate,Xe(mt.postMessage)),wt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(mt):"undefined"!==typeof process&&process.nextTick||Nt,kt={isArray:Ge,isArrayBuffer:Ke,isBuffer:$e,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Xe(e.append)&&("formdata"===(t=We(e))||"object"===t&&Xe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ke(e.buffer),t},isString:Je,isNumber:Ze,isBoolean:e=>!0===e||!1===e,isObject:et,isPlainObject:tt,isEmptyObject:e=>{if(!et(e)||$e(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(gn){return!1}},isReadableStream:lt,isRequest:ot,isResponse:ct,isHeaders:dt,isUndefined:Qe,isDate:st,isFile:at,isBlob:nt,isRegExp:yt,isFunction:Xe,isStream:e=>et(e)&&Xe(e.pipe),isURLSearchParams:it,isTypedArray:pt,isFileList:rt,forEach:ut,merge:function e(){const{caseless:t}=xt(this)&&this||{},s={},a=(a,n)=>{const r=t&&ht(s,n)||n;tt(s[r])&&tt(a)?s[r]=e(s[r],a):tt(a)?s[r]=e({},a):Ge(a)?s[r]=a.slice():s[r]=a};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&ut(arguments[n],a);return s},extend:function(e,t,s){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ut(t,(t,a)=>{s&&Xe(t)?e[a]=Fe(t,s):e[a]=t},{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,a)=>{let n,r,i;const l={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)i=n[r],a&&!a(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==s&&qe(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:We,kindOfTest:Ve,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const a=e.indexOf(t,s);return-1!==a&&a===s},toArray:e=>{if(!e)return null;if(Ge(e))return e;let t=e.length;if(!Ze(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Be]).call(e);let a;for(;(a=s.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const a=[];for(;null!==(s=e.exec(t));)a.push(s);return a},isHTMLForm:ft,hasOwnProperty:bt,hasOwnProp:bt,reduceDescriptors:vt,freezeMethods:e=>{vt(e,(t,s)=>{if(Xe(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const a=e[s];Xe(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},a=e=>{e.forEach(e=>{s[e]=!0})};return Ge(e)?a(e):a(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ht,global:mt,isContextDefined:xt,isSpecCompliantForm:function(e){return!!(e&&Xe(e.append)&&"FormData"===e[Ue]&&e[Be])},toJSONObject:e=>{const t=new Array(10),s=(e,a)=>{if(et(e)){if(t.indexOf(e)>=0)return;if($e(e))return e;if(!("toJSON"in e)){t[a]=e;const n=Ge(e)?[]:{};return ut(e,(e,t)=>{const r=s(e,a+1);!Qe(r)&&(n[t]=r)}),t[a]=void 0,n}}return e};return s(e,0)},isAsyncFn:jt,isThenable:e=>e&&(et(e)||Xe(e))&&Xe(e.then)&&Xe(e.catch),setImmediate:Nt,asap:wt,isIterable:e=>null!=e&&Xe(e[Be])};function St(e,t,s,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}kt.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:kt.toJSONObject(this.config),code:this.code,status:this.status}}});const Ct=St.prototype,_t={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_t[e]={value:e}}),Object.defineProperties(St,_t),Object.defineProperty(Ct,"isAxiosError",{value:!0}),St.from=(e,t,s,a,n,r)=>{const i=Object.create(Ct);return kt.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),St.call(i,e.message,t,s,a,n),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const Et=St;function Mt(e){return kt.isPlainObject(e)||kt.isArray(e)}function Dt(e){return kt.endsWith(e,"[]")?e.slice(0,-2):e}function Pt(e,t,s){return e?e.concat(t).map(function(e,t){return e=Dt(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const At=kt.toFlatObject(kt,{},null,function(e){return/^is[A-Z]/.test(e)});const Tt=function(e,t,s){if(!kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(s=kt.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!kt.isUndefined(t[e])})).metaTokens,n=s.visitor||c,r=s.dots,i=s.indexes,l=(s.Blob||"undefined"!==typeof Blob&&Blob)&&kt.isSpecCompliantForm(t);if(!kt.isFunction(n))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(kt.isDate(e))return e.toISOString();if(kt.isBoolean(e))return e.toString();if(!l&&kt.isBlob(e))throw new Et("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(e)||kt.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,n){let l=e;if(e&&!n&&"object"===typeof e)if(kt.endsWith(s,"{}"))s=a?s:s.slice(0,-2),e=JSON.stringify(e);else if(kt.isArray(e)&&function(e){return kt.isArray(e)&&!e.some(Mt)}(e)||(kt.isFileList(e)||kt.endsWith(s,"[]"))&&(l=kt.toArray(e)))return s=Dt(s),l.forEach(function(e,a){!kt.isUndefined(e)&&null!==e&&t.append(!0===i?Pt([s],a,r):null===i?s:s+"[]",o(e))}),!1;return!!Mt(e)||(t.append(Pt(n,s,r),o(e)),!1)}const d=[],u=Object.assign(At,{defaultVisitor:c,convertValue:o,isVisitable:Mt});if(!kt.isObject(e))throw new TypeError("data must be an object");return function e(s,a){if(!kt.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+a.join("."));d.push(s),kt.forEach(s,function(s,r){!0===(!(kt.isUndefined(s)||null===s)&&n.call(t,s,kt.isString(r)?r.trim():r,a,u))&&e(s,a?a.concat(r):[r])}),d.pop()}}(e),t};function It(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Ot(e,t){this._pairs=[],e&&Tt(e,this,t)}const Rt=Ot.prototype;Rt.append=function(e,t){this._pairs.push([e,t])},Rt.toString=function(e){const t=e?function(t){return e.call(this,t,It)}:It;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Lt=Ot;function Ft(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zt(e,t,s){if(!t)return e;const a=s&&s.encode||Ft;kt.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let r;if(r=n?n(t,s):kt.isURLSearchParams(t)?t.toString():new Lt(t,s).toString(a),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const qt=class{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){kt.forEach(this.handlers,function(t){null!==t&&e(t)})}},Bt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ut={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Lt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Wt="undefined"!==typeof window&&"undefined"!==typeof document,Ht="object"===typeof navigator&&navigator||void 0,Vt=Wt&&(!Ht||["ReactNative","NativeScript","NS"].indexOf(Ht.product)<0),Yt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Gt=Wt&&window.location.href||"http://localhost",Qt=Le(Le({},e),Ut);const $t=function(e){function t(e,s,a,n){let r=e[n++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),l=n>=e.length;if(r=!r&&kt.isArray(a)?a.length:r,l)return kt.hasOwnProp(a,r)?a[r]=[a[r],s]:a[r]=s,!i;a[r]&&kt.isObject(a[r])||(a[r]=[]);return t(e,s,a[r],n)&&kt.isArray(a[r])&&(a[r]=function(e){const t={},s=Object.keys(e);let a;const n=s.length;let r;for(a=0;a<n;a++)r=s[a],t[r]=e[r];return t}(a[r])),!i}if(kt.isFormData(e)&&kt.isFunction(e.entries)){const s={};return kt.forEachEntry(e,(e,a)=>{t(function(e){return kt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,s,0)}),s}return null};const Kt={transitional:Bt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",a=s.indexOf("application/json")>-1,n=kt.isObject(e);n&&kt.isHTMLForm(e)&&(e=new FormData(e));if(kt.isFormData(e))return a?JSON.stringify($t(e)):e;if(kt.isArrayBuffer(e)||kt.isBuffer(e)||kt.isStream(e)||kt.isFile(e)||kt.isBlob(e)||kt.isReadableStream(e))return e;if(kt.isArrayBufferView(e))return e.buffer;if(kt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(n){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Tt(e,new Qt.classes.URLSearchParams,Le({visitor:function(e,t,s,a){return Qt.isNode&&kt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=kt.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Tt(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||a?(t.setContentType("application/json",!1),function(e,t,s){if(kt.isString(e))try{return(t||JSON.parse)(e),kt.trim(e)}catch(gn){if("SyntaxError"!==gn.name)throw gn}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Kt.transitional,s=t&&t.forcedJSONParsing,a="json"===this.responseType;if(kt.isResponse(e)||kt.isReadableStream(e))return e;if(e&&kt.isString(e)&&(s&&!this.responseType||a)){const s=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(gn){if(s){if("SyntaxError"===gn.name)throw Et.from(gn,Et.ERR_BAD_RESPONSE,this,null,this.response);throw gn}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qt.classes.FormData,Blob:Qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};kt.forEach(["delete","get","head","post","put","patch"],e=>{Kt.headers[e]={}});const Jt=Kt,Xt=kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zt=Symbol("internals");function es(e){return e&&String(e).trim().toLowerCase()}function ts(e){return!1===e||null==e?e:kt.isArray(e)?e.map(ts):String(e)}function ss(e,t,s,a,n){return kt.isFunction(a)?a.call(this,t,s):(n&&(t=s),kt.isString(t)?kt.isString(a)?-1!==t.indexOf(a):kt.isRegExp(a)?a.test(t):void 0:void 0)}class as{constructor(e){e&&this.set(e)}set(e,t,s){const a=this;function n(e,t,s){const n=es(t);if(!n)throw new Error("header name must be a non-empty string");const r=kt.findKey(a,n);(!r||void 0===a[r]||!0===s||void 0===s&&!1!==a[r])&&(a[r||t]=ts(e))}const r=(e,t)=>kt.forEach(e,(e,s)=>n(e,s,t));if(kt.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(kt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let s,a,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),s=e.substring(0,n).trim().toLowerCase(),a=e.substring(n+1).trim(),!s||t[s]&&Xt[s]||("set-cookie"===s?t[s]?t[s].push(a):t[s]=[a]:t[s]=t[s]?t[s]+", "+a:a)}),t})(e),t);else if(kt.isObject(e)&&kt.isIterable(e)){let s,a,n={};for(const t of e){if(!kt.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[a=t[0]]=(s=n[a])?kt.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}r(n,t)}else null!=e&&n(t,e,s);return this}get(e,t){if(e=es(e)){const s=kt.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(e);)t[a[1]]=a[2];return t}(e);if(kt.isFunction(t))return t.call(this,e,s);if(kt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=es(e)){const s=kt.findKey(this,e);return!(!s||void 0===this[s]||t&&!ss(0,this[s],s,t))}return!1}delete(e,t){const s=this;let a=!1;function n(e){if(e=es(e)){const n=kt.findKey(s,e);!n||t&&!ss(0,s[n],n,t)||(delete s[n],a=!0)}}return kt.isArray(e)?e.forEach(n):n(e),a}clear(e){const t=Object.keys(this);let s=t.length,a=!1;for(;s--;){const n=t[s];e&&!ss(0,this[n],n,e,!0)||(delete this[n],a=!0)}return a}normalize(e){const t=this,s={};return kt.forEach(this,(a,n)=>{const r=kt.findKey(s,n);if(r)return t[r]=ts(a),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(n):String(n).trim();i!==n&&delete t[n],t[i]=ts(a),s[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return kt.forEach(this,(s,a)=>{null!=s&&!1!==s&&(t[a]=e&&kt.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,s]=e;return t+": "+s}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];return a.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Zt]=this[Zt]={accessors:{}}).accessors,s=this.prototype;function a(e){const a=es(e);t[a]||(!function(e,t){const s=kt.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+s,{value:function(e,s,n){return this[a].call(this,t,e,s,n)},configurable:!0})})}(s,e),t[a]=!0)}return kt.isArray(e)?e.forEach(a):a(e),this}}as.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),kt.reduceDescriptors(as.prototype,(e,t)=>{let{value:s}=e,a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(e){this[a]=e}}}),kt.freezeMethods(as);const ns=as;function rs(e,t){const s=this||Jt,a=t||s,n=ns.from(a.headers);let r=a.data;return kt.forEach(e,function(e){r=e.call(s,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function is(e){return!(!e||!e.__CANCEL__)}function ls(e,t,s){Et.call(this,null==e?"canceled":e,Et.ERR_CANCELED,t,s),this.name="CanceledError"}kt.inherits(ls,Et,{__CANCEL__:!0});const os=ls;function cs(e,t,s){const a=s.config.validateStatus;s.status&&a&&!a(s.status)?t(new Et("Request failed with status code "+s.status,[Et.ERR_BAD_REQUEST,Et.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}const ds=function(e,t){e=e||10;const s=new Array(e),a=new Array(e);let n,r=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=a[i];n||(n=o),s[r]=l,a[r]=o;let d=i,u=0;for(;d!==r;)u+=s[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),o-n<t)return;const h=c&&o-c;return h?Math.round(1e3*u/h):void 0}};const us=function(e,t){let s,a,n=0,r=1e3/t;const i=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=r,s=null,a&&(clearTimeout(a),a=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=r?i(o,e):(s=o,a||(a=setTimeout(()=>{a=null,i(s)},r-t)))},()=>s&&i(s)]},hs=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const n=ds(50,250);return us(s=>{const r=s.loaded,i=s.lengthComputable?s.total:void 0,l=r-a,o=n(l);a=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&r<=i?(i-r)/o:void 0,event:s,lengthComputable:null!=i,[t?"download":"upload"]:!0})},s)},ms=(e,t)=>{const s=null!=e;return[a=>t[0]({lengthComputable:s,total:e,loaded:a}),t[1]]},xs=e=>function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return kt.asap(()=>e(...s))},ps=Qt.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Qt.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Qt.origin),Qt.navigator&&/(msie|trident)/i.test(Qt.navigator.userAgent)):()=>!0,gs=Qt.hasStandardBrowserEnv?{write(e,t,s,a,n,r){const i=[e+"="+encodeURIComponent(t)];kt.isNumber(s)&&i.push("expires="+new Date(s).toGMTString()),kt.isString(a)&&i.push("path="+a),kt.isString(n)&&i.push("domain="+n),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function fs(e,t,s){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const bs=e=>e instanceof ns?Le({},e):e;function ys(e,t){t=t||{};const s={};function a(e,t,s,a){return kt.isPlainObject(e)&&kt.isPlainObject(t)?kt.merge.call({caseless:a},e,t):kt.isPlainObject(t)?kt.merge({},t):kt.isArray(t)?t.slice():t}function n(e,t,s,n){return kt.isUndefined(t)?kt.isUndefined(e)?void 0:a(void 0,e,0,n):a(e,t,0,n)}function r(e,t){if(!kt.isUndefined(t))return a(void 0,t)}function i(e,t){return kt.isUndefined(t)?kt.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function l(s,n,r){return r in t?a(s,n):r in e?a(void 0,s):void 0}const o={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,s)=>n(bs(e),bs(t),0,!0)};return kt.forEach(Object.keys(Le(Le({},e),t)),function(a){const r=o[a]||n,i=r(e[a],t[a],a);kt.isUndefined(i)&&r!==l||(s[a]=i)}),s}const vs=e=>{const t=ys({},e);let s,{data:a,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=ns.from(l),t.url=zt(fs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),kt.isFormData(a))if(Qt.hasStandardBrowserEnv||Qt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(s=l.getContentType())){const[e,...t]=s?s.split(";").map(e=>e.trim()).filter(Boolean):[];l.setContentType([e||"multipart/form-data",...t].join("; "))}if(Qt.hasStandardBrowserEnv&&(n&&kt.isFunction(n)&&(n=n(t)),n||!1!==n&&ps(t.url))){const e=r&&i&&gs.read(i);e&&l.set(r,e)}return t},js="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const a=vs(e);let n=a.data;const r=ns.from(a.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=a;function x(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(i),a.signal&&a.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function g(){if(!p)return;const a=ns.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());cs(function(e){t(e),x()},function(e){s(e),x()},{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:a,config:e,request:p}),p=null}p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(s(new Et("Request aborted",Et.ECONNABORTED,e,p)),p=null)},p.onerror=function(){s(new Et("Network Error",Et.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const n=a.transitional||Bt;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),s(new Et(t,n.clarifyTimeoutError?Et.ETIMEDOUT:Et.ECONNABORTED,e,p)),p=null},void 0===n&&r.setContentType(null),"setRequestHeader"in p&&kt.forEach(r.toJSON(),function(e,t){p.setRequestHeader(t,e)}),kt.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),u&&"json"!==u&&(p.responseType=a.responseType),m&&([o,d]=hs(m,!0),p.addEventListener("progress",o)),h&&p.upload&&([l,c]=hs(h),p.upload.addEventListener("progress",l),p.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(i=t=>{p&&(s(!t||t.type?new os(null,e,p):t),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(i),a.signal&&(a.signal.aborted?i():a.signal.addEventListener("abort",i)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);f&&-1===Qt.protocols.indexOf(f)?s(new Et("Unsupported protocol "+f+":",Et.ERR_BAD_REQUEST,e)):p.send(n||null)})},Ns=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,a=new AbortController;const n=function(e){if(!s){s=!0,i();const t=e instanceof Error?e:this.reason;a.abort(t instanceof Et?t:new os(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,n(new Et("timeout ".concat(t," of ms exceeded"),Et.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:l}=a;return l.unsubscribe=()=>kt.asap(i),l}};function ws(e,t){this.v=e,this.k=t}function ks(e){return function(){return new Ss(e.apply(this,arguments))}}function Ss(e){var t,s;function a(t,s){try{var r=e[t](s),i=r.value,l=i instanceof ws;Promise.resolve(l?i.v:i).then(function(s){if(l){var o="return"===t?"return":"next";if(!i.k||s.done)return a(o,s);s=e[o](s).value}n(r.done?"return":"normal",s)},function(e){a("throw",e)})}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):s=null}this._invoke=function(e,n){return new Promise(function(r,i){var l={key:e,arg:n,resolve:r,reject:i,next:null};s?s=s.next=l:(t=s=l,a(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function Cs(e){return new ws(e,0)}function _s(e){var t={},s=!1;function a(t,a){return s=!0,a=new Promise(function(s){s(e[t](a))}),{done:!1,value:new ws(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return s?(s=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(s)throw s=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return s?(s=!1,e):a("return",e)}),t}function Es(e){var t,s,a,n=2;for("undefined"!=typeof Symbol&&(s=Symbol.asyncIterator,a=Symbol.iterator);n--;){if(s&&null!=(t=e[s]))return t.call(e);if(a&&null!=(t=e[a]))return new Ms(t.call(e));s="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function Ms(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Ms=function(e){this.s=e,this.n=e.next},Ms.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var s=this.s.return;return void 0===s?Promise.resolve({value:e,done:!0}):t(s.apply(this.s,arguments))},throw:function(e){var s=this.s.return;return void 0===s?Promise.reject(e):t(s.apply(this.s,arguments))}},new Ms(e)}Ss.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ss.prototype.next=function(e){return this._invoke("next",e)},Ss.prototype.throw=function(e){return this._invoke("throw",e)},Ss.prototype.return=function(e){return this._invoke("return",e)};const Ds=function*(e,t){let s=e.byteLength;if(!t||s<t)return void(yield e);let a,n=0;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},Ps=function(){var e=ks(function*(e,t){var s,a=!1,n=!1;try{for(var r,i=Es(As(e));a=!(r=yield Cs(i.next())).done;a=!1){const e=r.value;yield*_s(Es(Ds(e,t)))}}catch(l){n=!0,s=l}finally{try{a&&null!=i.return&&(yield Cs(i.return()))}finally{if(n)throw s}}});return function(t,s){return e.apply(this,arguments)}}(),As=function(){var e=ks(function*(e){if(e[Symbol.asyncIterator])return void(yield*_s(Es(e)));const t=e.getReader();try{for(;;){const{done:e,value:s}=yield Cs(t.read());if(e)break;yield s}}finally{yield Cs(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Ts=(e,t,s,a)=>{const n=Ps(e,t);let r,i=0,l=e=>{r||(r=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await n.next();if(t)return l(),void e.close();let r=a.byteLength;if(s){let e=i+=r;s(e)}e.enqueue(new Uint8Array(a))}catch(t){throw l(t),t}},cancel:e=>(l(e),n.return())},{highWaterMark:2})},Is="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Os=Is&&"function"===typeof ReadableStream,Rs=Is&&("function"===typeof TextEncoder?(Ls=new TextEncoder,e=>Ls.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ls;const Fs=function(e){try{for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return!!e(...s)}catch(gn){return!1}},zs=Os&&Fs(()=>{let e=!1;const t=new Request(Qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),qs=Os&&Fs(()=>kt.isReadableStream(new Response("").body)),Bs={stream:qs&&(e=>e.body)};var Us;Is&&(Us=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Bs[e]&&(Bs[e]=kt.isFunction(Us[e])?t=>t[e]():(t,s)=>{throw new Et("Response type '".concat(e,"' is not supported"),Et.ERR_NOT_SUPPORT,s)})}));const Ws=async(e,t)=>{const s=kt.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(kt.isBlob(e))return e.size;if(kt.isSpecCompliantForm(e)){const t=new Request(Qt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return kt.isArrayBufferView(e)||kt.isArrayBuffer(e)?e.byteLength:(kt.isURLSearchParams(e)&&(e+=""),kt.isString(e)?(await Rs(e)).byteLength:void 0)})(t):s},Hs=Is&&(async e=>{let{url:t,method:s,data:a,signal:n,cancelToken:r,timeout:i,onDownloadProgress:l,onUploadProgress:o,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=vs(e);c=c?(c+"").toLowerCase():"text";let m,x=Ns([n,r&&r.toAbortSignal()],i);const p=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let g;try{if(o&&zs&&"get"!==s&&"head"!==s&&0!==(g=await Ws(d,a))){let e,s=new Request(t,{method:"POST",body:a,duplex:"half"});if(kt.isFormData(a)&&(e=s.headers.get("content-type"))&&d.setContentType(e),s.body){const[e,t]=ms(g,hs(xs(o)));a=Ts(s.body,65536,e,t)}}kt.isString(u)||(u=u?"include":"omit");const n="credentials"in Request.prototype;m=new Request(t,Le(Le({},h),{},{signal:x,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:n?u:void 0}));let r=await fetch(m,h);const i=qs&&("stream"===c||"response"===c);if(qs&&(l||i&&p)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=r[t]});const t=kt.toFiniteNumber(r.headers.get("content-length")),[s,a]=l&&ms(t,hs(xs(l),!0))||[];r=new Response(Ts(r.body,65536,s,()=>{a&&a(),p&&p()}),e)}c=c||"text";let f=await Bs[kt.findKey(Bs,c)||"text"](r,e);return!i&&p&&p(),await new Promise((t,s)=>{cs(t,s,{data:f,headers:ns.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:m})})}catch(f){if(p&&p(),f&&"TypeError"===f.name&&/Load failed|fetch/i.test(f.message))throw Object.assign(new Et("Network Error",Et.ERR_NETWORK,e,m),{cause:f.cause||f});throw Et.from(f,f&&f.code,e,m)}}),Vs={http:null,xhr:js,fetch:Hs};kt.forEach(Vs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(gn){}Object.defineProperty(e,"adapterName",{value:t})}});const Ys=e=>"- ".concat(e),Gs=e=>kt.isFunction(e)||null===e||!1===e,Qs=e=>{e=kt.isArray(e)?e:[e];const{length:t}=e;let s,a;const n={};for(let r=0;r<t;r++){let t;if(s=e[r],a=s,!Gs(s)&&(a=Vs[(t=String(s)).toLowerCase()],void 0===a))throw new Et("Unknown adapter '".concat(t,"'"));if(a)break;n[t||"#"+r]=a}if(!a){const e=Object.entries(n).map(e=>{let[t,s]=e;return"adapter ".concat(t," ")+(!1===s?"is not supported by the environment":"is not available in the build")});let s=t?e.length>1?"since :\n"+e.map(Ys).join("\n"):" "+Ys(e[0]):"as no adapter specified";throw new Et("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return a};function $s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new os(null,e)}function Ks(e){$s(e),e.headers=ns.from(e.headers),e.data=rs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Qs(e.adapter||Jt.adapter)(e).then(function(t){return $s(e),t.data=rs.call(e,e.transformResponse,t),t.headers=ns.from(t.headers),t},function(t){return is(t)||($s(e),t&&t.response&&(t.response.data=rs.call(e,e.transformResponse,t.response),t.response.headers=ns.from(t.response.headers))),Promise.reject(t)})}const Js="1.11.0",Xs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Xs[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Zs={};Xs.transitional=function(e,t,s){function a(e,t){return"[Axios v"+Js+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,n,r)=>{if(!1===e)throw new Et(a(n," has been removed"+(t?" in "+t:"")),Et.ERR_DEPRECATED);return t&&!Zs[n]&&(Zs[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,n,r)}},Xs.spelling=function(e){return(t,s)=>(console.warn("".concat(s," is likely a misspelling of ").concat(e)),!0)};const ea={assertOptions:function(e,t,s){if("object"!==typeof e)throw new Et("options must be an object",Et.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let n=a.length;for(;n-- >0;){const r=a[n],i=t[r];if(i){const t=e[r],s=void 0===t||i(t,r,e);if(!0!==s)throw new Et("option "+r+" must be "+s,Et.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new Et("Unknown option "+r,Et.ERR_BAD_OPTION)}},validators:Xs},ta=ea.validators;class sa{constructor(e){this.defaults=e||{},this.interceptors={request:new qt,response:new qt}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(gn){}}throw s}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ys(this.defaults,t);const{transitional:s,paramsSerializer:a,headers:n}=t;void 0!==s&&ea.assertOptions(s,{silentJSONParsing:ta.transitional(ta.boolean),forcedJSONParsing:ta.transitional(ta.boolean),clarifyTimeoutError:ta.transitional(ta.boolean)},!1),null!=a&&(kt.isFunction(a)?t.paramsSerializer={serialize:a}:ea.assertOptions(a,{encode:ta.function,serialize:ta.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ea.assertOptions(t,{baseUrl:ta.spelling("baseURL"),withXsrfToken:ta.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=n&&kt.merge(n.common,n[t.method]);n&&kt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=ns.concat(r,n);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[Ks.bind(this),void 0];for(e.unshift(...i),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Ks.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return zt(fs((e=ys(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}kt.forEach(["delete","get","head","options"],function(e){sa.prototype[e]=function(t,s){return this.request(ys(s||{},{method:e,url:t,data:(s||{}).data}))}}),kt.forEach(["post","put","patch"],function(e){function t(t){return function(s,a,n){return this.request(ys(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}sa.prototype[e]=t(),sa.prototype[e+"Form"]=t(!0)});const aa=sa;class na{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{s.subscribe(e),t=e}).then(e);return a.cancel=function(){s.unsubscribe(t)},a},e(function(e,a,n){s.reason||(s.reason=new os(e,a,n),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new na(function(t){e=t});return{token:t,cancel:e}}}const ra=na;const ia={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ia).forEach(e=>{let[t,s]=e;ia[s]=t});const la=ia;const oa=function e(t){const s=new aa(t),a=Fe(aa.prototype.request,s);return kt.extend(a,aa.prototype,s,{allOwnKeys:!0}),kt.extend(a,s,null,{allOwnKeys:!0}),a.create=function(s){return e(ys(t,s))},a}(Jt);oa.Axios=aa,oa.CanceledError=os,oa.CancelToken=ra,oa.isCancel=is,oa.VERSION=Js,oa.toFormData=Tt,oa.AxiosError=Et,oa.Cancel=oa.CanceledError,oa.all=function(e){return Promise.all(e)},oa.spread=function(e){return function(t){return e.apply(null,t)}},oa.isAxiosError=function(e){return kt.isObject(e)&&!0===e.isAxiosError},oa.mergeConfig=ys,oa.AxiosHeaders=ns,oa.formToJSON=e=>$t(kt.isHTMLForm(e)?new FormData(e):e),oa.getAdapter=Qs,oa.HttpStatusCode=la,oa.default=oa;const ca=oa,da=ca.create({baseURL:"http://13.61.100.250/api",timeout:1e4,headers:{"Content-Type":"application/json"}});da.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e.headers["X-Request-ID"]="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),e},e=>Promise.reject(e)),da.interceptors.response.use(e=>e,e=>{var t,s,a;return console.log("API Response Error:",null===(t=e.response)||void 0===t?void 0:t.status,null===(s=e.response)||void 0===s?void 0:s.data),401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(console.log("401 Unauthorized - Current path:",window.location.pathname),console.log("401 Error - NOT redirecting automatically, letting AuthContext handle it")),Promise.reject(e)});const ua=e=>da.post("/auth/login",e),ha=e=>da.post("/auth/register",e),ma=()=>da.get("/auth/me"),xa=e=>da.put("/auth/profile",e),pa=da;var ga=s(579);const fa=(0,a.createContext)(),ba={user:null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),loading:!0},ya=(e,t)=>{switch(t.type){case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),localStorage.setItem("user",JSON.stringify(t.payload.user)),Le(Le({},e),{},{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,loading:!1});case"LOGOUT":return localStorage.removeItem("token"),localStorage.removeItem("user"),Le(Le({},e),{},{user:null,token:null,isAuthenticated:!1,loading:!1});case"SET_LOADING":return Le(Le({},e),{},{loading:t.payload});case"SET_USER":return localStorage.setItem("user",JSON.stringify(t.payload)),Le(Le({},e),{},{user:t.payload,isAuthenticated:!0,loading:!1});default:return e}},va=e=>{let{children:t}=e;const[s,n]=(0,a.useReducer)(ya,ba);(0,a.useEffect)(()=>((async()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);n({type:"SET_USER",payload:e}),console.log("User restored from localStorage - NO server validation")}catch(s){console.log("Error parsing user data:",s),localStorage.removeItem("token"),localStorage.removeItem("user"),n({type:"LOGOUT"})}else if(e&&!t)try{const e=await ma();n({type:"SET_USER",payload:e.data.user}),localStorage.setItem("user",JSON.stringify(e.data.user))}catch(s){console.log("Token validation failed, but NOT logging out automatically:",s)}else n({type:"SET_LOADING",payload:!1})})(),()=>{}),[]);const r=Le(Le({},s),{},{login:async e=>{try{console.log("AuthContext: Attempting login with:",e);const s=await ua(e);return console.log("AuthContext: Login response:",s),s.data&&"success"===s.data.status?(console.log("AuthContext: Login successful, dispatching LOGIN_SUCCESS"),n({type:"LOGIN_SUCCESS",payload:s.data.data}),console.log("AuthContext: Login success dispatched, user should be logged in"),{success:!0}):(console.error("AuthContext: Unexpected response structure:",s),{success:!1,error:(null===(t=s.data)||void 0===t?void 0:t.message)||"Login failed"});var t}catch(r){var s,a;return console.error("AuthContext: Login error:",r),console.error("AuthContext: Error response:",r.response),{success:!1,error:(null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Login failed"}}},register:async e=>{try{const t=await ha(e);return n({type:"LOGIN_SUCCESS",payload:t.data}),{success:!0}}catch(a){var t,s;return{success:!1,error:(null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Registration failed"}}},logout:()=>{console.log("Manual logout requested by user"),n({type:"LOGOUT"})},forceLogout:()=>{console.log("Force logout requested - clearing all data"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("notifications_last_fetch"),n({type:"LOGOUT"}),window.dispatchEvent(new CustomEvent("auth:logout",{detail:{reason:"manual_logout"}}))},updateProfile:async e=>{try{const t=await xa(e);return n({type:"SET_USER",payload:t.data.user}),{success:!0}}catch(a){var t,s;return{success:!1,error:(null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Profile update failed"}}}});return(0,ga.jsx)(fa.Provider,{value:r,children:t})},ja=()=>{const e=(0,a.useContext)(fa);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Na=(0,a.createContext)(),wa=()=>{const e=(0,a.useContext)(Na);if(!e)throw new Error("usePermissions must be used within a PermissionProvider");return e},ka=e=>{let{children:t}=e;const[s,n]=(0,a.useState)({}),[r,i]=(0,a.useState)(null),[l,o]=(0,a.useState)(!0),{user:c,isAuthenticated:d}=ja();(0,a.useEffect)(()=>{(async()=>{try{if(!d||!c)return n({}),i(null),void o(!1);if(c&&c.role){console.log("User role from AuthContext:",c.role),i(c.role);const e=u(c.role);return console.log("Role permissions:",e),n(e),void o(!1)}const e=localStorage.getItem("token");if(!e)return n({}),i(null),void o(!1);const t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=(await t.json()).data.user.role;console.log("User role from API:",e),i(e);const s=u(e);console.log("Role permissions:",s),n(s)}else n({}),i(null)}catch(e){console.error("Error fetching permissions:",e),n({}),i(null)}finally{o(!1)}})()},[null===c||void 0===c?void 0:c.id,d]);const u=e=>{try{return{admin:{dashboard:{view:!0,create:!0,update:!0,delete:!0,export:!0},students:{view:!0,create:!0,update:!0,delete:!0,export:!0},teachers:{view:!0,create:!0,update:!0,delete:!0,export:!0},classes:{view:!0,create:!0,update:!0,delete:!0,export:!0},subjects:{view:!0,create:!0,update:!0,delete:!0,export:!0},attendance:{view:!0,create:!0,update:!0,delete:!0,export:!0},grades:{view:!0,create:!0,update:!0,delete:!0,export:!0},fees:{view:!0,create:!0,update:!0,delete:!0,export:!0},reports:{view:!0,create:!0,update:!0,delete:!0,export:!0},examSchedules:{view:!0,create:!0,update:!0,delete:!0,export:!0},hallTickets:{view:!0,create:!0,update:!0,delete:!0,export:!0},library:{view:!0,create:!0,update:!0,delete:!0,export:!0},transport:{view:!0,create:!0,update:!0,delete:!0,export:!0},certificates:{view:!0,create:!0,update:!0,delete:!0,export:!0},communication:{view:!0,create:!0,update:!0,delete:!0,export:!0},health:{view:!0,create:!0,update:!0,delete:!0,export:!0},admission:{view:!0,create:!0,update:!0,delete:!0,export:!0},lms:{view:!0,create:!0,update:!0,delete:!0,export:!0},social:{view:!0,create:!0,update:!0,delete:!0,export:!0},transactionReports:{view:!0,create:!0,update:!0,delete:!0,export:!0},userManagement:{view:!0,create:!0,update:!0,delete:!0,export:!0},rolePermissions:{view:!0,create:!0,update:!0,delete:!0,export:!0}},teacher:{dashboard:{view:!0},lms:{view:!0,create:!0,update:!0},grades:{view:!0,create:!0,update:!0},social:{view:!0,create:!0,update:!0},classes:{view:!0},library:{view:!0},students:{view:!0},subjects:{view:!0},attendance:{view:!0,create:!0,update:!0},hallTickets:{view:!0},examSchedules:{view:!0,create:!0,update:!0},exams:{view:!0,create:!0,update:!0},timetable:{view:!0},classworks:{view:!0,create:!0,update:!0},markDistributions:{view:!0,create:!0,update:!0},attendanceReports:{view:!0},teachers:{view:!1,create:!1,update:!1,delete:!1,export:!1},transport:{view:!1,create:!1,update:!1,delete:!1,export:!1},certificates:{view:!1,create:!1,update:!1,delete:!1,export:!1},communication:{view:!1,create:!1,update:!1,delete:!1,export:!1},health:{view:!1,create:!1,update:!1,delete:!1,export:!1},admission:{view:!1,create:!1,update:!1,delete:!1,export:!1},fees:{view:!1,create:!1,update:!1,delete:!1,export:!1},cheques:{view:!1,create:!1,update:!1,delete:!1,export:!1},transactionLogs:{view:!1,create:!1,update:!1,delete:!1,export:!1},reports:{view:!1,create:!1,update:!1,delete:!1,export:!1},transactionReports:{view:!1,create:!1,update:!1,delete:!1,export:!1},userManagement:{view:!1,create:!1,update:!1,delete:!1,export:!1},rolePermissions:{view:!1,create:!1,update:!1,delete:!1,export:!1},classTeacherAssignments:{view:!1,create:!1,update:!1,delete:!1,export:!1}},student:{lms:{view:!0},fees:{view:!0},grades:{view:!0},social:{view:!0},library:{view:!0},dashboard:{view:!0},attendance:{view:!0},hallTickets:{view:!0},examSchedules:{view:!0}},clark:{fees:{view:!0,create:!0,update:!0},grades:{view:!0,create:!0,update:!0},classes:{view:!0,create:!0,update:!0},library:{view:!0,create:!0,update:!0},reports:{view:!0,export:!0},students:{view:!0,create:!0,update:!0},subjects:{view:!0,create:!0,update:!0},teachers:{view:!0,create:!0,update:!0},admission:{view:!0,create:!0,update:!0},dashboard:{view:!0},transport:{view:!0,create:!0,update:!0},attendance:{view:!0,create:!0,update:!0},hallTickets:{view:!0,create:!0,update:!0},certificates:{view:!0,create:!0,update:!0},communication:{view:!0,create:!0,update:!0},examSchedules:{view:!0,create:!0,update:!0},transactionReports:{view:!0,create:!0,update:!0}},parent:{fees:{view:!0},grades:{view:!0},social:{view:!0},library:{view:!0},dashboard:{view:!0},transport:{view:!0},attendance:{view:!0},hallTickets:{view:!0},examSchedules:{view:!0}},staff:{fees:{view:!0},grades:{view:!0},classes:{view:!0},library:{view:!0},reports:{view:!0},students:{view:!0},subjects:{view:!0},teachers:{view:!0},admission:{view:!0},dashboard:{view:!0},transport:{view:!0},attendance:{view:!0},hallTickets:{view:!0},certificates:{view:!0},communication:{view:!0},examSchedules:{view:!0},transactionReports:{view:!0}}}[e]||{}}catch(t){return console.error("Error in getRolePermissions:",t),{}}},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view";return!!s[e]&&!0===s[e][t]},m={permissions:s,userRole:r,loading:l,hasPermission:h,canView:e=>{try{return h(e,"view")}catch(t){return console.error("Error in canView:",t),!1}},canCreate:e=>{try{return h(e,"create")}catch(t){return console.error("Error in canCreate:",t),!1}},canUpdate:e=>{try{return h(e,"update")}catch(t){return console.error("Error in canUpdate:",t),!1}},canDelete:e=>{try{return h(e,"delete")}catch(t){return console.error("Error in canDelete:",t),!1}},canExport:e=>{try{return h(e,"export")}catch(t){return console.error("Error in canExport:",t),!1}},refreshPermissions:()=>{if(c&&d){const e=u(c.role);n(e),i(c.role)}}};return(0,ga.jsx)(Na.Provider,{value:m,children:t})},Sa=(0,a.createContext)(),Ca=e=>{let{children:t}=e;const[s,n]=(0,a.useState)(()=>{const e=localStorage.getItem("theme");return e?"dark"===e:window.matchMedia("(prefers-color-scheme: dark)").matches});(0,a.useEffect)(()=>{const e=s?"dark":"light";localStorage.setItem("theme",e),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]);const r={isDarkMode:s,toggleTheme:()=>{n(e=>!e)},setTheme:e=>{n("dark"===e)},theme:s?"dark":"light"};return(0,ga.jsx)(Sa.Provider,{value:r,children:t})};function _a(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var Ea={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ma=["color","size","strokeWidth","absoluteStrokeWidth","children"];var Da=(e,t)=>{const s=(0,a.forwardRef)((s,n)=>{let{color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:o,children:c}=s,d=_a(s,Ma);return(0,a.createElement)("svg",Le(Le({ref:n},Ea),{},{width:i,height:i,stroke:r,strokeWidth:o?24*Number(l)/Number(i):l,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(c)?c:[c])||[]]);var u});return s.displayName="".concat(e),s};const Pa=Da("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Aa=Da("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ta=Da("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Ia=Da("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Oa=Da("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Ra=Da("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),La=Da("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Fa=Da("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),za=Da("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qa=Da("Bus",[["path",{d:"M19 17h2l.64-2.54c.24-.959.24-1.962 0-2.92l-1.07-4.27A3 3 0 0 0 17.66 5H4a2 2 0 0 0-2 2v10h2",key:"wfsdqh"}],["path",{d:"M14 17H9",key:"o2noo5"}],["circle",{cx:"6.5",cy:"17.5",r:"2.5",key:"gc8oob"}],["circle",{cx:"16.5",cy:"17.5",r:"2.5",key:"4btu0q"}]]),Ba=Da("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ua=Da("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Wa=Da("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Ha=Da("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Va=Da("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ya=Da("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ga=Da("UserCog",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["circle",{cx:"19",cy:"11",r:"2",key:"1rxg02"}],["path",{d:"M19 8v1",key:"1iffrw"}],["path",{d:"M19 13v1",key:"z4xc62"}],["path",{d:"m21.6 9.5-.87.5",key:"6lxupl"}],["path",{d:"m17.27 12-.87.5",key:"1rwhxx"}],["path",{d:"m21.6 12.5-.87-.5",key:"agvc9a"}],["path",{d:"m17.27 10-.87-.5",key:"12d57s"}]]),Qa=Da("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),$a=Da("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ka=Da("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ja=Da("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xa=Da("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Za=Da("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),en=Da("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),tn=Da("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),sn=e=>pa.get("/notifications",{params:e}),an=()=>pa.get("/notifications/stats"),nn=e=>pa.put("/notifications/".concat(e,"/read")),rn=()=>pa.put("/notifications/read-all"),ln=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(0),[r,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{localStorage.getItem("token")&&(t([]),n(0),console.log("NotificationBell: Set default values, no API calls to prevent logout issues"))},[]);const l=e=>{switch(e){case"success":return"\u2705";case"warning":return"\u26a0\ufe0f";case"error":return"\u274c";case"announcement":return"\ud83d\udce2";default:return"\u2139\ufe0f"}},o=e=>{switch(e){case"success":return"text-green-600";case"warning":return"text-yellow-600";case"error":return"text-red-600";case"announcement":return"text-blue-600";default:return"text-gray-600"}};return(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsxs)("button",{onClick:()=>i(!r),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full",children:[(0,ga.jsx)(tn,{className:"h-6 w-6"}),s>0&&(0,ga.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:s>9?"9+":s})]}),r&&(0,ga.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[(0,ga.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>{(async()=>{try{const e=await sn({limit:5});t(e.data.notifications)}catch(e){console.error("Error fetching notifications:",e),t([])}})(),(async()=>{try{const e=await an();n(e.data.unread)}catch(e){console.error("Error fetching notification stats:",e),n(0)}})()},className:"text-sm text-green-600 hover:text-green-800",children:"Refresh"}),s>0&&(0,ga.jsx)("button",{onClick:async()=>{try{await rn(),t(e=>e.map(e=>Le(Le({},e),{},{isRead:!0,readAt:new Date}))),n(0)}catch(e){console.error("Error marking all notifications as read:",e),t(e=>e.map(e=>Le(Le({},e),{},{isRead:!0,readAt:new Date}))),n(0)}},className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all read"}),(0,ga.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)($a,{className:"h-4 w-4"})})]})]})}),(0,ga.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===e.length?(0,ga.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,ga.jsx)("p",{children:"No notifications"}),(0,ga.jsx)("p",{className:"text-xs mt-2",children:'Click "Refresh" to load notifications'})]}):e.map(e=>(0,ga.jsx)("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ".concat(e.isRead?"":"bg-blue-50"),onClick:()=>!e.isRead&&(async e=>{try{await nn(e),t(t=>t.map(t=>t.id===e?Le(Le({},t),{},{isRead:!0,readAt:new Date}):t)),n(e=>Math.max(0,e-1))}catch(s){console.error("Error marking notification as read:",s),t(t=>t.map(t=>t.id===e?Le(Le({},t),{},{isRead:!0,readAt:new Date}):t)),n(e=>Math.max(0,e-1))}})(e.id),children:(0,ga.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ga.jsx)("span",{className:"text-lg",children:l(e.type)}),(0,ga.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ga.jsx)("p",{className:"text-sm font-medium ".concat(o(e.type)),children:e.title}),(0,ga.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,ga.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleString()})]}),!e.isRead&&(0,ga.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]})},e.id))}),(0,ga.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,ga.jsx)("button",{className:"w-full text-center text-sm text-blue-600 hover:text-blue-800",children:"View all notifications"})})]})]})},on=Da("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),cn=Da("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),dn=e=>{let{className:t=""}=e;const{isDarkMode:s,toggleTheme:n}=(()=>{const e=(0,a.useContext)(Sa);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return(0,ga.jsx)("button",{onClick:n,className:"relative inline-flex items-center justify-center w-12 h-6 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(s?"bg-blue-600 focus:ring-offset-gray-800":"bg-gray-200 focus:ring-offset-white"," ").concat(t),"aria-label":"Switch to ".concat(s?"light":"dark"," mode"),children:(0,ga.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-white shadow-lg transform transition-transform duration-200 ".concat(s?"translate-x-3":"-translate-x-3"),children:s?(0,ga.jsx)(on,{className:"w-3 h-3 text-blue-600 m-0.5"}):(0,ga.jsx)(cn,{className:"w-3 h-3 text-yellow-500 m-0.5"})})})},un=()=>{const[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)({}),{user:r,logout:i}=ja(),{canView:l,userRole:o}=wa(),c=Z(),d=J();console.log("Layout - user:",r),console.log("Layout - userRole:",o),console.log("Layout - canView:",l);const u=e=>{n(t=>Le(Le({},t),{},{[e]:!t[e]}))},h=e=>({dashboard:"dashboard",students:"students",classes:"classes",subjects:"subjects",attendance:"attendance",grades:"grades",teachers:"teachers",timetable:"timetable",classworks:"classworks",exams:"exams","exam-schedules":"examSchedules","hall-tickets":"hallTickets","mark-distributions":"markDistributions",library:"library",lms:"lms",transport:"transport",certificates:"certificates",affidavits:"certificates",communication:"communication",social:"social",health:"health",inquiries:"admission",admission:"admission",fees:"fees",cheques:"fees","transaction-reports":"transactionReports","attendance-reports":"attendanceReports","user-management":"userManagement","role-permissions":"rolePermissions","class-teacher-assignments":"classTeacherAssignments"}[e.split("/").pop()]||"dashboard"),m=[{name:"Dashboard",href:"/admin/dashboard",icon:Pa},{name:"Student Management",icon:Aa,children:[{name:"Students",href:"/admin/students",icon:Aa},{name:"Classes",href:"/admin/classes",icon:Ta},{name:"Subjects",href:"/admin/subjects",icon:Ta},{name:"Attendance",href:"/admin/attendance",icon:Ia},{name:"Grades",href:"/admin/grades",icon:Oa}]},{name:"Academic Management",icon:Ra,children:[{name:"Teachers",href:"/admin/teachers",icon:Ra},{name:"Timetable",href:"/admin/timetable",icon:La},{name:"Classworks",href:"/admin/classworks",icon:Ta},{name:"Exams",href:"/admin/exams",icon:Ta},{name:"Exam Schedules",href:"/admin/exam-schedules",icon:Ia},{name:"Hall Tickets",href:"/admin/hall-tickets",icon:Fa},{name:"Mark Distributions",href:"/admin/mark-distributions",icon:za},{name:"Library",href:"/admin/library",icon:Ta},{name:"LMS",href:"/admin/lms",icon:Ra}]},{name:"Transport Management",icon:qa,children:[{name:"Vehicles",href:"/admin/transport",icon:qa},{name:"Transport Fees",href:"/admin/transport",icon:Ba},{name:"Transport Payments",href:"/admin/transport",icon:Ua}]},{name:"Certificate & Documents",icon:Fa,children:[{name:"Bonafide Certificates",href:"/admin/certificates",icon:Fa},{name:"Leaving Certificates",href:"/admin/certificates",icon:Fa},{name:"Affidavits",href:"/admin/affidavits",icon:Fa}]},{name:"Communication",icon:Wa,children:[{name:"Bulk SMS",href:"/admin/communication",icon:Ha},{name:"Messages",href:"/admin/communication",icon:Wa},{name:"Notifications",href:"/admin/notifications",icon:Ha},{name:"Social Network",href:"/admin/social",icon:Wa}]},{name:"Health & Wellness",icon:Va,children:[{name:"Health Records",href:"/admin/health",icon:Va},{name:"Vaccinations",href:"/admin/health",icon:Va},{name:"Emergency Contacts",href:"/admin/health",icon:Aa}]},{name:"Admission & CRM",icon:Aa,children:[{name:"Inquiries",href:"/admin/inquiries",icon:Ha},{name:"Follow-ups",href:"/admin/admission",icon:Wa},{name:"Funnel Reports",href:"/admin/admission",icon:Ya}]},{name:"Finance Management",icon:Ba,children:[{name:"Fees",href:"/admin/fees",icon:Ba},{name:"Cheques",href:"/admin/cheques",icon:Ua},{name:"Transaction Logs",href:"/admin/transaction-logs",icon:Ya},{name:"Transaction Reports",href:"/admin/transaction-reports",icon:Fa}]},{name:"Reports & Analytics",icon:Ya,children:[{name:"Attendance Reports",href:"/admin/attendance-reports",icon:Ya},{name:"Dashboard Stats",href:"/admin/dashboard",icon:Ya}]},{name:"System Administration",icon:za,children:[{name:"User Management",href:"/admin/user-management",icon:Ga},{name:"Role Permissions",href:"/admin/role-permissions",icon:Qa},{name:"Class-Teacher Assignments",href:"/admin/class-teacher-assignments",icon:Aa}]}].filter(e=>{if(e.children)return e.children.filter(e=>{const t=h(e.href);return l(t)}).length>0;{const t=h(e.href);return l(t)}}).map(e=>e.children?Le(Le({},e),{},{children:e.children.filter(e=>{const t=h(e.href);return l(t)})}):e);const x=e=>d.pathname===e;return(0,ga.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,ga.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(e?"block":"hidden"),children:[(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>t(!1)}),(0,ga.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white dark:bg-gray-800",children:[(0,ga.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,ga.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"School ERP"}),(0,ga.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)($a,{className:"h-6 w-6"})})]}),(0,ga.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4 overflow-y-auto",children:m.map(e=>{const t=e.icon,a=s[e.name];return e.children?(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("button",{onClick:()=>u(e.name),className:"group flex items-center justify-between w-full px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:[(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]}),a?(0,ga.jsx)(Ka,{className:"h-4 w-4"}):(0,ga.jsx)(Ja,{className:"h-4 w-4"})]}),a&&(0,ga.jsx)("div",{className:"ml-4 space-y-1",children:e.children.map(e=>{const t=e.icon;return(0,ga.jsxs)("button",{onClick:t=>{t.stopPropagation(),c(e.href)},className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md w-full text-left ".concat(x(e.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,ga.jsx)(t,{className:"mr-3 h-4 w-4"}),e.name]},e.name)})})]},e.name):(0,ga.jsxs)("button",{onClick:t=>{t.stopPropagation(),c(e.href)},className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md w-full text-left ".concat(x(e.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,ga.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,ga.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,ga.jsxs)("div",{className:"flex flex-col flex-grow bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[(0,ga.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,ga.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"School ERP"})}),(0,ga.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4 overflow-y-auto",children:m.map(e=>{const t=e.icon,a=s[e.name];return e.children?(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("button",{onClick:()=>u(e.name),className:"group flex items-center justify-between w-full px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:[(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]}),a?(0,ga.jsx)(Ka,{className:"h-4 w-4"}):(0,ga.jsx)(Ja,{className:"h-4 w-4"})]}),a&&(0,ga.jsx)("div",{className:"ml-4 space-y-1",children:e.children.map(e=>{const t=e.icon;return(0,ga.jsxs)("button",{onClick:t=>{t.stopPropagation(),c(e.href)},className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md w-full text-left ".concat(x(e.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,ga.jsx)(t,{className:"mr-3 h-4 w-4"}),e.name]},e.name)})})]},e.name):(0,ga.jsxs)("button",{onClick:t=>{t.stopPropagation(),c(e.href)},className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md w-full text-left ".concat(x(e.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,ga.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,ga.jsxs)("div",{className:"lg:pl-64",children:[(0,ga.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,ga.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>t(!0),children:(0,ga.jsx)(Xa,{className:"h-6 w-6"})}),(0,ga.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,ga.jsx)("div",{className:"flex flex-1"}),(0,ga.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,ga.jsx)(ln,{}),(0,ga.jsx)(dn,{}),(0,ga.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500",onClick:()=>c("/profile"),children:(0,ga.jsx)(za,{className:"h-6 w-6"})}),(0,ga.jsx)("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),(0,ga.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,ga.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:(0,ga.jsx)(Za,{className:"h-5 w-5 text-white"})}),(0,ga.jsxs)("div",{className:"hidden lg:block",children:[(0,ga.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[null===r||void 0===r?void 0:r.firstName," ",null===r||void 0===r?void 0:r.lastName]}),(0,ga.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null===r||void 0===r?void 0:r.role})]})]}),(0,ga.jsx)("button",{onClick:()=>{i(),c("/login")},className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(en,{className:"h-5 w-5"})})]})]})]})]}),(0,ga.jsx)("main",{className:"py-6",children:(0,ga.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,ga.jsx)(ge,{})})})]})]})},hn=()=>{const[e,t]=(0,a.useState)(!1),{user:s,logout:n}=ja(),r=Z(),i=J(),l=[{name:"Dashboard",href:"/student/dashboard",icon:Pa},{name:"My Subjects",href:"/student/subjects",icon:Ta},{name:"Attendance",href:"/student/attendance",icon:Ia},{name:"Grades",href:"/student/grades",icon:Oa},{name:"Homework",href:"/student/homework",icon:Fa},{name:"Schedule",href:"/student/schedule",icon:La},{name:"Profile",href:"/student/profile",icon:Za}],o=()=>{n(),r("/login")},c=e=>i.pathname===e;return(0,ga.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ga.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(e?"block":"hidden"),children:[(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>t(!1)}),(0,ga.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,ga.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,ga.jsx)("h1",{className:"text-xl font-bold text-blue-600",children:"Student Portal"}),(0,ga.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)($a,{className:"h-6 w-6"})})]}),(0,ga.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:l.map(e=>{const t=e.icon;return(0,ga.jsxs)("a",{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(c(e.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,ga.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,ga.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Za,{className:"w-4 h-4 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[null===s||void 0===s?void 0:s.firstName," ",null===s||void 0===s?void 0:s.lastName]}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Student"})]})]}),(0,ga.jsxs)("button",{onClick:o,className:"mt-3 w-full flex items-center px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md",children:[(0,ga.jsx)(en,{className:"mr-3 h-5 w-5"}),"Sign out"]})]})]})]}),(0,ga.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,ga.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,ga.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,ga.jsx)("h1",{className:"text-xl font-bold text-blue-600",children:"Student Portal"})}),(0,ga.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:l.map(e=>{const t=e.icon;return(0,ga.jsxs)("a",{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(c(e.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,ga.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,ga.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Za,{className:"w-4 h-4 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[null===s||void 0===s?void 0:s.firstName," ",null===s||void 0===s?void 0:s.lastName]}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Student"})]})]}),(0,ga.jsxs)("button",{onClick:o,className:"mt-3 w-full flex items-center px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md",children:[(0,ga.jsx)(en,{className:"mr-3 h-5 w-5"}),"Sign out"]})]})]})}),(0,ga.jsxs)("div",{className:"lg:pl-64",children:[(0,ga.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,ga.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>t(!0),children:(0,ga.jsx)(Xa,{className:"h-6 w-6"})}),(0,ga.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,ga.jsx)("div",{className:"flex flex-1"}),(0,ga.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,ga.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500",children:(0,ga.jsx)(tn,{className:"h-6 w-6"})}),(0,ga.jsx)("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),(0,ga.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,ga.jsxs)("div",{className:"hidden lg:block",children:[(0,ga.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[null===s||void 0===s?void 0:s.firstName," ",null===s||void 0===s?void 0:s.lastName]}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Student"})]}),(0,ga.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Za,{className:"w-4 h-4 text-blue-600"})})]})]})]})]}),(0,ga.jsx)("main",{className:"py-6",children:(0,ga.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,ga.jsx)(ge,{})})})]})]})},mn=Da("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),xn=Da("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function pn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let gn={data:""},fn=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||gn,bn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yn=/\/\*[^]*?\*\/|  +/g,vn=/\n+/g,jn=(e,t)=>{let s="",a="",n="";for(let r in e){let i=e[r];"@"==r[0]?"i"==r[1]?s=r+" "+i+";":a+="f"==r[1]?jn(i,r):r+"{"+jn(i,"k"==r[1]?"":t)+"}":"object"==typeof i?a+=jn(i,t?t.replace(/([^,])+/g,e=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):r):null!=i&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=jn.p?jn.p(r,i):r+":"+i+";")}return s+(t&&n?t+"{"+n+"}":n)+a},Nn={},wn=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+wn(e[s]);return t}return e},kn=(e,t,s,a,n)=>{let r=wn(e),i=Nn[r]||(Nn[r]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(r));if(!Nn[i]){let t=r!==e?e:(e=>{let t,s,a=[{}];for(;t=bn.exec(e.replace(yn,""));)t[4]?a.shift():t[3]?(s=t[3].replace(vn," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(vn," ").trim();return a[0]})(e);Nn[i]=jn(n?{["@keyframes "+i]:t}:t,s?"":"."+i)}let l=s&&Nn.g?Nn.g:null;return s&&(Nn.g=Nn[i]),((e,t,s,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(Nn[i],t,a,l),i};function Sn(e){let t=this||{},s=e.call?e(t.p):e;return kn(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,n)=>{let r=t[n];if(r&&r.call){let e=r(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":jn(e,""):!1===e?"":e}return e+a+(null==r?"":r)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,fn(t.target),t.g,t.o,t.k)}Sn.bind({g:1});let Cn,_n,En,Mn=Sn.bind({k:1});function Dn(e,t){let s=this||{};return function(){let a=arguments;function n(r,i){let l=Object.assign({},r),o=l.className||n.className;s.p=Object.assign({theme:_n&&_n()},l),s.o=/ *go\d+/.test(o),l.className=Sn.apply(s,a)+(o?" "+o:""),t&&(l.ref=i);let c=e;return e[0]&&(c=l.as||e,delete l.as),En&&c[0]&&En(l),Cn(c,l)}return t?t(n):n}}var Pn,An,Tn,In,On,Rn,Ln,Fn,zn,qn,Bn,Un,Wn,Hn,Vn,Yn,Gn=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Qn=(()=>{let e=0;return()=>(++e).toString()})(),$n=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Kn="default",Jn=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return Le(Le({},e),{},{toasts:[t.toast,...e.toasts].slice(0,s)});case 1:return Le(Le({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Le(Le({},e),t.toast):e)});case 2:let{toast:a}=t;return Jn(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=t;return Le(Le({},e),{},{toasts:e.toasts.map(e=>e.id===n||void 0===n?Le(Le({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Le(Le({},e),{},{toasts:[]}):Le(Le({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Le(Le({},e),{},{pausedAt:t.time});case 6:let r=t.time-(e.pausedAt||0);return Le(Le({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Le(Le({},e),{},{pauseDuration:e.pauseDuration+r}))})}},Xn=[],Zn={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},er={},tr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kn;er[t]=Jn(er[t]||Zn,e),Xn.forEach(e=>{let[s,a]=e;s===t&&a(er[t])})},sr=e=>Object.keys(er).forEach(t=>tr(e,t)),ar=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn;return t=>{tr(t,e)}},nr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rr=e=>(t,s)=>{let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return Le(Le({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},s),{},{id:(null==s?void 0:s.id)||Qn()})}(t,e,s);return ar(a.toasterId||(e=>Object.keys(er).find(t=>er[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},ir=(e,t)=>rr("blank")(e,t);ir.error=rr("error"),ir.success=rr("success"),ir.loading=rr("loading"),ir.custom=rr("custom"),ir.dismiss=(e,t)=>{let s={type:3,toastId:e};t?ar(t)(s):sr(s)},ir.dismissAll=e=>ir.dismiss(void 0,e),ir.remove=(e,t)=>{let s={type:4,toastId:e};t?ar(t)(s):sr(s)},ir.removeAll=e=>ir.remove(void 0,e),ir.promise=(e,t,s)=>{let a=ir.loading(t.loading,Le(Le({},s),null==s?void 0:s.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let n=t.success?Gn(t.success,e):void 0;return n?ir.success(n,Le(Le({id:a},s),null==s?void 0:s.success)):ir.dismiss(a),e}).catch(e=>{let n=t.error?Gn(t.error,e):void 0;n?ir.error(n,Le(Le({id:a},s),null==s?void 0:s.error)):ir.dismiss(a)}),e};var lr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kn,[s,n]=(0,a.useState)(er[t]||Zn),r=(0,a.useRef)(er[t]);(0,a.useEffect)(()=>(r.current!==er[t]&&n(er[t]),Xn.push([t,n]),()=>{let e=Xn.findIndex(e=>{let[s]=e;return s===t});e>-1&&Xn.splice(e,1)}),[t]);let i=s.toasts.map(t=>{var s,a,n;return Le(Le(Le(Le({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||nr[t.type],style:Le(Le(Le({},e.style),null==(n=e[t.type])?void 0:n.style),t.style)})});return Le(Le({},s),{},{toasts:i})}(e,t),r=(0,a.useRef)(new Map).current,i=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),l({type:4,toastId:e})},t);r.set(e,s)},[]);(0,a.useEffect)(()=>{if(n)return;let e=Date.now(),a=s.map(s=>{if(s.duration===1/0)return;let a=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(a<0))return setTimeout(()=>ir.dismiss(s.id,t),a);s.visible&&ir.dismiss(s.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[s,n,t]);let l=(0,a.useCallback)(ar(t),[t]),o=(0,a.useCallback)(()=>{l({type:5,time:Date.now()})},[l]),c=(0,a.useCallback)((e,t)=>{l({type:1,toast:{id:e,height:t}})},[l]),d=(0,a.useCallback)(()=>{n&&l({type:6,time:Date.now()})},[n,l]),u=(0,a.useCallback)((e,t)=>{let{reverseOrder:a=!1,gutter:n=8,defaultPosition:r}=t||{},i=s.filter(t=>(t.position||r)===(e.position||r)&&t.height),l=i.findIndex(t=>t.id===e.id),o=i.filter((e,t)=>t<l&&e.visible).length;return i.filter(e=>e.visible).slice(...a?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+n,0)},[s]);return(0,a.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=r.get(e.id);t&&(clearTimeout(t),r.delete(e.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},or=Mn(Pn||(Pn=pn(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),cr=Mn(An||(An=pn(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),dr=Mn(Tn||(Tn=pn(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),ur=Dn("div")(In||(In=pn(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",or,cr,e=>e.secondary||"#fff",dr),hr=Mn(On||(On=pn(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),mr=Dn("div")(Rn||(Rn=pn(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",hr),xr=Mn(Ln||(Ln=pn(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),pr=Mn(Fn||(Fn=pn(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),gr=Dn("div")(zn||(zn=pn(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",xr,pr,e=>e.secondary||"#fff"),fr=Dn("div")(qn||(qn=pn(["\n  position: absolute;\n"]))),br=Dn("div")(Bn||(Bn=pn(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),yr=Mn(Un||(Un=pn(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),vr=Dn("div")(Wn||(Wn=pn(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),yr),jr=e=>{let{toast:t}=e,{icon:s,type:n,iconTheme:r}=t;return void 0!==s?"string"==typeof s?a.createElement(vr,null,s):s:"blank"===n?null:a.createElement(br,null,a.createElement(mr,Le({},r)),"loading"!==n&&a.createElement(fr,null,"error"===n?a.createElement(ur,Le({},r)):a.createElement(gr,Le({},r))))},Nr=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),wr=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),kr=Dn("div")(Hn||(Hn=pn(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Sr=Dn("div")(Vn||(Vn=pn(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Cr=a.memo(e=>{let{toast:t,position:s,style:n,children:r}=e,i=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,n]=$n()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Nr(s),wr(s)];return{animation:t?"".concat(Mn(a)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Mn(n)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||s||"top-center",t.visible):{opacity:0},l=a.createElement(jr,{toast:t}),o=a.createElement(Sr,Le({},t.ariaProps),Gn(t.message,t));return a.createElement(kr,{className:t.className,style:Le(Le(Le({},i),n),t.style)},"function"==typeof r?r({icon:l,message:o}):a.createElement(a.Fragment,null,l,o))});!function(e,t,s,a){jn.p=t,Cn=e,_n=s,En=a}(a.createElement);var _r=e=>{let{id:t,className:s,style:n,onHeightUpdate:r,children:i}=e,l=a.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;r(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return a.createElement("div",{ref:l,className:s,style:n},i)},Er=Sn(Yn||(Yn=pn(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Mr=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:n,gutter:r,children:i,toasterId:l,containerStyle:o,containerClassName:c}=e,{toasts:d,handlers:u}=lr(n,l);return a.createElement("div",{"data-rht-toaster":l||"",style:Le({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let n=e.position||s,l=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Le(Le({left:0,right:0,display:"flex",position:"absolute",transition:$n()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(s?1:-1),"px)")},a),n)})(n,u.calculateOffset(e,{reverseOrder:t,gutter:r,defaultPosition:s}));return a.createElement(_r,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Er:"",style:l},"custom"===e.type?Gn(e.message,e):i?i(e):a.createElement(Cr,{toast:e,position:n}))}))},Dr=ir;const Pr=()=>{const[e,t]=(0,a.useState)({email:"",password:""}),[s,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),{login:l}=ja(),o=Z(),c=s=>{t(Le(Le({},e),{},{[s.target.name]:s.target.value}))};return(0,ga.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:[(0,ga.jsx)("div",{className:"absolute top-4 right-4",children:(0,ga.jsx)(dn,{})}),(0,ga.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-600",children:(0,ga.jsx)(Ra,{className:"h-8 w-8 text-white"})}),(0,ga.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Sign in to your account"}),(0,ga.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:["Or"," ",(0,ga.jsx)(De,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"create a new account"})]})]}),(0,ga.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),i(!0),console.log("=== LOGIN ATTEMPT ==="),console.log("Form data:",e);try{const t=await l(e);t.success?(console.log("Login successful via AuthContext"),Dr.success("Login successful!"),setTimeout(()=>{o("/dashboard")},1e3)):(console.error("Login failed via AuthContext:",t),Dr.error(t.error||"Login failed"))}catch(s){console.error("Login error:",s),Dr.error("Network error: "+s.message)}i(!1)},children:[(0,ga.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,ga.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e.email,onChange:c})]}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,ga.jsx)("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:e.password,onChange:c}),(0,ga.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!s),children:s?(0,ga.jsx)(mn,{className:"h-5 w-5 text-gray-400"}):(0,ga.jsx)(xn,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,ga.jsx)("div",{children:(0,ga.jsx)("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Signing in...":"Sign in"})})]})]})]})},Ar=["confirmPassword"],Tr=()=>{const[e,t]=(0,a.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"student",phone:""}),[s,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),{register:c}=ja(),d=Z(),u=s=>{t(Le(Le({},e),{},{[s.target.name]:s.target.value}))};return(0,ga.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,ga.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-600",children:(0,ga.jsx)(Ra,{className:"h-8 w-8 text-white"})}),(0,ga.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,ga.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,ga.jsx)(De,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your existing account"})]})]}),(0,ga.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),e.password!==e.confirmPassword)return void Dr.error("Passwords do not match");if(e.password.length<6)return void Dr.error("Password must be at least 6 characters long");o(!0);const{confirmPassword:s}=e,a=_a(e,Ar),n=await c(a);n.success?(Dr.success("Registration successful!"),d("/dashboard")):Dr.error(n.error),o(!1)},children:[(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,ga.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"input mt-1",value:e.firstName,onChange:u})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,ga.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"input mt-1",value:e.lastName,onChange:u})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,ga.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"input mt-1",value:e.email,onChange:u})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,ga.jsxs)("select",{id:"role",name:"role",className:"input mt-1",value:e.role,onChange:u,children:[(0,ga.jsx)("option",{value:"student",children:"Student"}),(0,ga.jsx)("option",{value:"teacher",children:"Teacher"}),(0,ga.jsx)("option",{value:"parent",children:"Parent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,ga.jsx)("input",{id:"phone",name:"phone",type:"tel",className:"input mt-1",value:e.phone,onChange:u})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,ga.jsxs)("div",{className:"relative mt-1",children:[(0,ga.jsx)("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"new-password",required:!0,className:"input pr-10",value:e.password,onChange:u}),(0,ga.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!s),children:s?(0,ga.jsx)(mn,{className:"h-5 w-5 text-gray-400"}):(0,ga.jsx)(xn,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,ga.jsxs)("div",{className:"relative mt-1",children:[(0,ga.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:r?"text":"password",autoComplete:"new-password",required:!0,className:"input pr-10",value:e.confirmPassword,onChange:u}),(0,ga.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!r),children:r?(0,ga.jsx)(mn,{className:"h-5 w-5 text-gray-400"}):(0,ga.jsx)(xn,{className:"h-5 w-5 text-gray-400"})})]})]})]}),(0,ga.jsx)("div",{children:(0,ga.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Creating account...":"Create account"})})]})]})})},Ir=Da("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Or=Da("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Rr=Da("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Lr=Da("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Fr=Da("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function zr(e){return e+.5|0}const qr=(e,t,s)=>Math.max(Math.min(e,s),t);function Br(e){return qr(zr(2.55*e),0,255)}function Ur(e){return qr(zr(255*e),0,255)}function Wr(e){return qr(zr(e/2.55)/100,0,1)}function Hr(e){return qr(zr(100*e),0,100)}const Vr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yr=[..."0123456789ABCDEF"],Gr=e=>Yr[15&e],Qr=e=>Yr[(240&e)>>4]+Yr[15&e],$r=e=>(240&e)>>4===(15&e);function Kr(e){var t=(e=>$r(e.r)&&$r(e.g)&&$r(e.b)&&$r(e.a))(e)?Gr:Qr;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Jr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xr(e,t,s){const a=t*Math.min(s,1-s),n=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return s-a*Math.max(Math.min(n-3,9-n,1),-1)};return[n(0),n(8),n(4)]}function Zr(e,t,s){const a=function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(a+e/60)%6;return s-s*t*Math.max(Math.min(n,4-n,1),0)};return[a(5),a(3),a(1)]}function ei(e,t,s){const a=Xr(e,1,.5);let n;for(t+s>1&&(n=1/(t+s),t*=n,s*=n),n=0;n<3;n++)a[n]*=1-t-s,a[n]+=t;return a}function ti(e){const t=e.r/255,s=e.g/255,a=e.b/255,n=Math.max(t,s,a),r=Math.min(t,s,a),i=(n+r)/2;let l,o,c;return n!==r&&(c=n-r,o=i>.5?c/(2-n-r):c/(n+r),l=function(e,t,s,a,n){return e===n?(t-s)/a+(t<s?6:0):t===n?(s-e)/a+2:(e-t)/a+4}(t,s,a,c,n),l=60*l+.5),[0|l,o||0,i]}function si(e,t,s,a){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,a)).map(Ur)}function ai(e,t,s){return si(Xr,e,t,s)}function ni(e){return(e%360+360)%360}function ri(e){const t=Jr.exec(e);let s,a=255;if(!t)return;t[5]!==s&&(a=t[6]?Br(+t[5]):Ur(+t[5]));const n=ni(+t[2]),r=+t[3]/100,i=+t[4]/100;return s="hwb"===t[1]?function(e,t,s){return si(ei,e,t,s)}(n,r,i):"hsv"===t[1]?function(e,t,s){return si(Zr,e,t,s)}(n,r,i):ai(n,r,i),{r:s[0],g:s[1],b:s[2],a:a}}const ii={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},li={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let oi;function ci(e){oi||(oi=function(){const e={},t=Object.keys(li),s=Object.keys(ii);let a,n,r,i,l;for(a=0;a<t.length;a++){for(i=l=t[a],n=0;n<s.length;n++)r=s[n],l=l.replace(r,ii[r]);r=parseInt(li[i],16),e[l]=[r>>16&255,r>>8&255,255&r]}return e}(),oi.transparent=[0,0,0,0]);const t=oi[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const di=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const ui=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,hi=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function mi(e,t,s){if(e){let a=ti(e);a[t]=Math.max(0,Math.min(a[t]+a[t]*s,0===t?360:1)),a=ai(a),e.r=a[0],e.g=a[1],e.b=a[2]}}function xi(e,t){return e?Object.assign(t||{},e):e}function pi(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ur(e[3]))):(t=xi(e,{r:0,g:0,b:0,a:1})).a=Ur(t.a),t}function gi(e){return"r"===e.charAt(0)?function(e){const t=di.exec(e);let s,a,n,r=255;if(t){if(t[7]!==s){const e=+t[7];r=t[8]?Br(e):qr(255*e,0,255)}return s=+t[1],a=+t[3],n=+t[5],s=255&(t[2]?Br(s):qr(s,0,255)),a=255&(t[4]?Br(a):qr(a,0,255)),n=255&(t[6]?Br(n):qr(n,0,255)),{r:s,g:a,b:n,a:r}}}(e):ri(e)}class fi{constructor(e){if(e instanceof fi)return e;const t=typeof e;let s;"object"===t?s=pi(e):"string"===t&&(s=function(e){var t,s=e.length;return"#"===e[0]&&(4===s||5===s?t={r:255&17*Vr[e[1]],g:255&17*Vr[e[2]],b:255&17*Vr[e[3]],a:5===s?17*Vr[e[4]]:255}:7!==s&&9!==s||(t={r:Vr[e[1]]<<4|Vr[e[2]],g:Vr[e[3]]<<4|Vr[e[4]],b:Vr[e[5]]<<4|Vr[e[6]],a:9===s?Vr[e[7]]<<4|Vr[e[8]]:255})),t}(e)||ci(e)||gi(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=xi(this._rgb);return e&&(e.a=Wr(e.a)),e}set rgb(e){this._rgb=pi(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Wr(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?Kr(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=ti(e),s=t[0],a=Hr(t[1]),n=Hr(t[2]);return e.a<255?"hsla(".concat(s,", ").concat(a,"%, ").concat(n,"%, ").concat(Wr(e.a),")"):"hsl(".concat(s,", ").concat(a,"%, ").concat(n,"%)")}(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,a=e.rgb;let n;const r=t===n?.5:t,i=2*r-1,l=s.a-a.a,o=((i*l===-1?i:(i+l)/(1+i*l))+1)/2;n=1-o,s.r=255&o*s.r+n*a.r+.5,s.g=255&o*s.g+n*a.g+.5,s.b=255&o*s.b+n*a.b+.5,s.a=r*s.a+(1-r)*a.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,s){const a=hi(Wr(e.r)),n=hi(Wr(e.g)),r=hi(Wr(e.b));return{r:Ur(ui(a+s*(hi(Wr(t.r))-a))),g:Ur(ui(n+s*(hi(Wr(t.g))-n))),b:Ur(ui(r+s*(hi(Wr(t.b))-r))),a:e.a+s*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new fi(this.rgb)}alpha(e){return this._rgb.a=Ur(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=zr(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mi(this._rgb,2,e),this}darken(e){return mi(this._rgb,2,-e),this}saturate(e){return mi(this._rgb,1,e),this}desaturate(e){return mi(this._rgb,1,-e),this}rotate(e){return function(e,t){var s=ti(e);s[0]=ni(s[0]+t),s=ai(s),e.r=s[0],e.g=s[1],e.b=s[2]}(this._rgb,e),this}}function bi(){}const yi=(()=>{let e=0;return()=>e++})();function vi(e){return null===e||void 0===e}function ji(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Ni(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function wi(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function ki(e,t){return wi(e)?e:t}function Si(e,t){return"undefined"===typeof e?t:e}const Ci=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function _i(e,t,s){if(e&&"function"===typeof e.call)return e.apply(s,t)}function Ei(e,t,s,a){let n,r,i;if(ji(e))if(r=e.length,a)for(n=r-1;n>=0;n--)t.call(s,e[n],n);else for(n=0;n<r;n++)t.call(s,e[n],n);else if(Ni(e))for(i=Object.keys(e),r=i.length,n=0;n<r;n++)t.call(s,e[i[n]],i[n])}function Mi(e,t){let s,a,n,r;if(!e||!t||e.length!==t.length)return!1;for(s=0,a=e.length;s<a;++s)if(n=e[s],r=t[s],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Di(e){if(ji(e))return e.map(Di);if(Ni(e)){const t=Object.create(null),s=Object.keys(e),a=s.length;let n=0;for(;n<a;++n)t[s[n]]=Di(e[s[n]]);return t}return e}function Pi(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Ai(e,t,s,a){if(!Pi(e))return;const n=t[e],r=s[e];Ni(n)&&Ni(r)?Ti(n,r,a):t[e]=Di(r)}function Ti(e,t,s){const a=ji(t)?t:[t],n=a.length;if(!Ni(e))return e;const r=(s=s||{}).merger||Ai;let i;for(let l=0;l<n;++l){if(i=a[l],!Ni(i))continue;const t=Object.keys(i);for(let a=0,n=t.length;a<n;++a)r(t[a],e,i,s)}return e}function Ii(e,t){return Ti(e,t,{merger:Oi})}function Oi(e,t,s){if(!Pi(e))return;const a=t[e],n=s[e];Ni(a)&&Ni(n)?Ii(a,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Di(n))}const Ri={"":e=>e,x:e=>e.x,y:e=>e.y};function Li(e,t){const s=Ri[t]||(Ri[t]=function(e){const t=function(e){const t=e.split("."),s=[];let a="";for(const n of t)a+=n,a.endsWith("\\")?a=a.slice(0,-1)+".":(s.push(a),a="");return s}(e);return e=>{for(const s of t){if(""===s)break;e=e&&e[s]}return e}}(t));return s(e)}function Fi(e){return e.charAt(0).toUpperCase()+e.slice(1)}const zi=e=>"undefined"!==typeof e,qi=e=>"function"===typeof e,Bi=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};const Ui=Math.PI,Wi=2*Ui,Hi=Wi+Ui,Vi=Number.POSITIVE_INFINITY,Yi=Ui/180,Gi=Ui/2,Qi=Ui/4,$i=2*Ui/3,Ki=Math.log10,Ji=Math.sign;function Xi(e,t,s){return Math.abs(e-t)<s}function Zi(e){const t=Math.round(e);e=Xi(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(Ki(e))),a=e/s;return(a<=1?1:a<=2?2:a<=5?5:10)*s}function el(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function tl(e,t,s){let a,n,r;for(a=0,n=e.length;a<n;a++)r=e[a][s],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function sl(e){return e*(Ui/180)}function al(e){return e*(180/Ui)}function nl(e){if(!wi(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function rl(e,t){const s=t.x-e.x,a=t.y-e.y,n=Math.sqrt(s*s+a*a);let r=Math.atan2(a,s);return r<-.5*Ui&&(r+=Wi),{angle:r,distance:n}}function il(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ll(e,t){return(e-t+Hi)%Wi-Ui}function ol(e){return(e%Wi+Wi)%Wi}function cl(e,t,s,a){const n=ol(e),r=ol(t),i=ol(s),l=ol(r-n),o=ol(i-n),c=ol(n-r),d=ol(n-i);return n===r||n===i||a&&r===i||l>o&&c<d}function dl(e,t,s){return Math.max(t,Math.min(s,e))}function ul(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,s)-a&&e<=Math.max(t,s)+a}function hl(e,t,s){s=s||(s=>e[s]<t);let a,n=e.length-1,r=0;for(;n-r>1;)a=r+n>>1,s(a)?r=a:n=a;return{lo:r,hi:n}}const ml=(e,t,s,a)=>hl(e,s,a?a=>{const n=e[a][t];return n<s||n===s&&e[a+1][t]===s}:a=>e[a][t]<s),xl=(e,t,s)=>hl(e,s,a=>e[a][t]>=s);const pl=["push","pop","shift","splice","unshift"];function gl(e,t){const s=e._chartjs;if(!s)return;const a=s.listeners,n=a.indexOf(t);-1!==n&&a.splice(n,1),a.length>0||(pl.forEach(t=>{delete e[t]}),delete e._chartjs)}function fl(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const bl="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function yl(e,t){let s=[],a=!1;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];s=r,a||(a=!0,bl.call(window,()=>{a=!1,e.apply(t,s)}))}}const vl=e=>"start"===e?"left":"end"===e?"right":"center",jl=(e,t,s)=>"start"===e?t:"end"===e?s:(t+s)/2;function Nl(e,t,s){const a=t.length;let n=0,r=a;if(e._sorted){const{iScale:i,vScale:l,_parsed:o}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:m,maxDefined:x}=i.getUserBounds();if(m){if(n=Math.min(ml(o,d,u).lo,s?a:ml(t,d,i.getPixelForValue(u)).lo),c){const e=o.slice(0,n+1).reverse().findIndex(e=>!vi(e[l.axis]));n-=Math.max(0,e)}n=dl(n,0,a-1)}if(x){let e=Math.max(ml(o,i.axis,h,!0).hi+1,s?0:ml(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=o.slice(e-1).findIndex(e=>!vi(e[l.axis]));e+=Math.max(0,t)}r=dl(e,n,a)-n}else r=a-n}return{start:n,count:r}}function wl(e){const{xScale:t,yScale:s,_scaleRanges:a}=e,n={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!a)return e._scaleRanges=n,!0;const r=a.xmin!==t.min||a.xmax!==t.max||a.ymin!==s.min||a.ymax!==s.max;return Object.assign(a,n),r}const kl=e=>0===e||1===e,Sl=(e,t,s)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Wi/s),Cl=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*Wi/s)+1,_l={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Gi),easeOutSine:e=>Math.sin(e*Gi),easeInOutSine:e=>-.5*(Math.cos(Ui*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>kl(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>kl(e)?e:Sl(e,.075,.3),easeOutElastic:e=>kl(e)?e:Cl(e,.075,.3),easeInOutElastic(e){const t=.1125;return kl(e)?e:e<.5?.5*Sl(2*e,t,.45):.5+.5*Cl(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-_l.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,s=2.75;return e<1/s?t*e*e:e<2/s?t*(e-=1.5/s)*e+.75:e<2.5/s?t*(e-=2.25/s)*e+.9375:t*(e-=2.625/s)*e+.984375},easeInOutBounce:e=>e<.5?.5*_l.easeInBounce(2*e):.5*_l.easeOutBounce(2*e-1)+.5};function El(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Ml(e){return El(e)?e:new fi(e)}function Dl(e){return El(e)?e:new fi(e).saturate(.5).darken(.1).hexString()}const Pl=["x","y","borderWidth","radius","tension"],Al=["color","borderColor","backgroundColor"];const Tl=new Map;function Il(e,t,s){return function(e,t){t=t||{};const s=e+JSON.stringify(t);let a=Tl.get(s);return a||(a=new Intl.NumberFormat(e,t),Tl.set(s,a)),a}(t,s).format(e)}const Ol={values:e=>ji(e)?e:""+e,numeric(e,t,s){if(0===e)return"0";const a=this.chart.options.locale;let n,r=e;if(s.length>1){const t=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(t<1e-4||t>1e15)&&(n="scientific"),r=function(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e));return s}(e,s)}const i=Ki(Math.abs(r)),l=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),o={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(o,this.options.ticks.format),Il(e,a,o)},logarithmic(e,t,s){if(0===e)return"0";const a=s[t].significand||e/Math.pow(10,Math.floor(Ki(e)));return[1,2,3,5,10,15].includes(a)||t>.8*s.length?Ol.numeric.call(this,e,t,s):""}};var Rl={formatters:Ol};const Ll=Object.create(null),Fl=Object.create(null);function zl(e,t){if(!t)return e;const s=t.split(".");for(let a=0,n=s.length;a<n;++a){const t=s[a];e=e[t]||(e[t]=Object.create(null))}return e}function ql(e,t,s){return"string"===typeof t?Ti(zl(e,t),s):Ti(zl(e,""),t)}class Bl{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Dl(t.backgroundColor),this.hoverBorderColor=(e,t)=>Dl(t.borderColor),this.hoverColor=(e,t)=>Dl(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ql(this,e,t)}get(e){return zl(this,e)}describe(e,t){return ql(Fl,e,t)}override(e,t){return ql(Ll,e,t)}route(e,t,s,a){const n=zl(this,e),r=zl(this,s),i="_"+t;Object.defineProperties(n,{[i]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=r[a];return Ni(e)?Object.assign({},t,e):Si(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var Ul=new Bl({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Al},numbers:{type:"number",properties:Pl}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Wl(e,t,s,a,n){let r=t[n];return r||(r=t[n]=e.measureText(n).width,s.push(n)),r>a&&(a=r),a}function Hl(e,t,s,a){let n=(a=a||{}).data=a.data||{},r=a.garbageCollect=a.garbageCollect||[];a.font!==t&&(n=a.data={},r=a.garbageCollect=[],a.font=t),e.save(),e.font=t;let i=0;const l=s.length;let o,c,d,u,h;for(o=0;o<l;o++)if(u=s[o],void 0===u||null===u||ji(u)){if(ji(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||ji(h)||(i=Wl(e,n,r,i,h))}else i=Wl(e,n,r,i,u);e.restore();const m=r.length/2;if(m>s.length){for(o=0;o<m;o++)delete n[r[o]];r.splice(0,m)}return i}function Vl(e,t,s){const a=e.currentDevicePixelRatio,n=0!==s?Math.max(s/2,.5):0;return Math.round((t-n)*a)/a+n}function Yl(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Gl(e,t,s,a){Ql(e,t,s,a,null)}function Ql(e,t,s,a,n){let r,i,l,o,c,d,u,h;const m=t.pointStyle,x=t.rotation,p=t.radius;let g=(x||0)*Yi;if(m&&"object"===typeof m&&(r=m.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(s,a),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),m){default:n?e.ellipse(s,a,n/2,p,0,0,Wi):e.arc(s,a,p,0,Wi),e.closePath();break;case"triangle":d=n?n/2:p,e.moveTo(s+Math.sin(g)*d,a-Math.cos(g)*p),g+=$i,e.lineTo(s+Math.sin(g)*d,a-Math.cos(g)*p),g+=$i,e.lineTo(s+Math.sin(g)*d,a-Math.cos(g)*p),e.closePath();break;case"rectRounded":c=.516*p,o=p-c,i=Math.cos(g+Qi)*o,u=Math.cos(g+Qi)*(n?n/2-c:o),l=Math.sin(g+Qi)*o,h=Math.sin(g+Qi)*(n?n/2-c:o),e.arc(s-u,a-l,c,g-Ui,g-Gi),e.arc(s+h,a-i,c,g-Gi,g),e.arc(s+u,a+l,c,g,g+Gi),e.arc(s-h,a+i,c,g+Gi,g+Ui),e.closePath();break;case"rect":if(!x){o=Math.SQRT1_2*p,d=n?n/2:o,e.rect(s-d,a-o,2*d,2*o);break}g+=Qi;case"rectRot":u=Math.cos(g)*(n?n/2:p),i=Math.cos(g)*p,l=Math.sin(g)*p,h=Math.sin(g)*(n?n/2:p),e.moveTo(s-u,a-l),e.lineTo(s+h,a-i),e.lineTo(s+u,a+l),e.lineTo(s-h,a+i),e.closePath();break;case"crossRot":g+=Qi;case"cross":u=Math.cos(g)*(n?n/2:p),i=Math.cos(g)*p,l=Math.sin(g)*p,h=Math.sin(g)*(n?n/2:p),e.moveTo(s-u,a-l),e.lineTo(s+u,a+l),e.moveTo(s+h,a-i),e.lineTo(s-h,a+i);break;case"star":u=Math.cos(g)*(n?n/2:p),i=Math.cos(g)*p,l=Math.sin(g)*p,h=Math.sin(g)*(n?n/2:p),e.moveTo(s-u,a-l),e.lineTo(s+u,a+l),e.moveTo(s+h,a-i),e.lineTo(s-h,a+i),g+=Qi,u=Math.cos(g)*(n?n/2:p),i=Math.cos(g)*p,l=Math.sin(g)*p,h=Math.sin(g)*(n?n/2:p),e.moveTo(s-u,a-l),e.lineTo(s+u,a+l),e.moveTo(s+h,a-i),e.lineTo(s-h,a+i);break;case"line":i=n?n/2:Math.cos(g)*p,l=Math.sin(g)*p,e.moveTo(s-i,a-l),e.lineTo(s+i,a+l);break;case"dash":e.moveTo(s,a),e.lineTo(s+Math.cos(g)*(n?n/2:p),a+Math.sin(g)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function $l(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Kl(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Jl(e){e.restore()}function Xl(e,t,s,a,n){if(!t)return e.lineTo(s.x,s.y);if("middle"===n){const a=(t.x+s.x)/2;e.lineTo(a,t.y),e.lineTo(a,s.y)}else"after"===n!==!!a?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function Zl(e,t,s,a){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(a?t.cp1x:t.cp2x,a?t.cp1y:t.cp2y,a?s.cp2x:s.cp1x,a?s.cp2y:s.cp1y,s.x,s.y)}function eo(e,t,s,a,n){if(n.strikethrough||n.underline){const r=e.measureText(a),i=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,o=s-r.actualBoundingBoxAscent,c=s+r.actualBoundingBoxDescent,d=n.strikethrough?(o+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(i,d),e.lineTo(l,d),e.stroke()}}function to(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function so(e,t,s,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=ji(t)?t:[t],l=r.strokeWidth>0&&""!==r.strokeColor;let o,c;for(e.save(),e.font=n.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),vi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,r),o=0;o<i.length;++o)c=i[o],r.backdrop&&to(e,r.backdrop),l&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),vi(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,s,a,r.maxWidth)),e.fillText(c,s,a,r.maxWidth),eo(e,s,a,c,r),a+=Number(n.lineHeight);e.restore()}function ao(e,t){const{x:s,y:a,w:n,h:r,radius:i}=t;e.arc(s+i.topLeft,a+i.topLeft,i.topLeft,1.5*Ui,Ui,!0),e.lineTo(s,a+r-i.bottomLeft),e.arc(s+i.bottomLeft,a+r-i.bottomLeft,i.bottomLeft,Ui,Gi,!0),e.lineTo(s+n-i.bottomRight,a+r),e.arc(s+n-i.bottomRight,a+r-i.bottomRight,i.bottomRight,Gi,0,!0),e.lineTo(s+n,a+i.topRight),e.arc(s+n-i.topRight,a+i.topRight,i.topRight,0,-Gi,!0),e.lineTo(s+i.topLeft,a)}const no=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ro=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function io(e,t){const s=(""+e).match(no);if(!s||"normal"===s[1])return 1.2*t;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100}return t*e}const lo=e=>+e||0;function oo(e,t){const s={},a=Ni(t),n=a?Object.keys(t):t,r=Ni(e)?a?s=>Si(e[s],e[t[s]]):t=>e[t]:()=>e;for(const i of n)s[i]=lo(r(i));return s}function co(e){return oo(e,{top:"y",right:"x",bottom:"y",left:"x"})}function uo(e){return oo(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ho(e){const t=co(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function mo(e,t){e=e||{},t=t||Ul.font;let s=Si(e.size,t.size);"string"===typeof s&&(s=parseInt(s,10));let a=Si(e.style,t.style);a&&!(""+a).match(ro)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const n={family:Si(e.family,t.family),lineHeight:io(Si(e.lineHeight,t.lineHeight),s),size:s,style:a,weight:Si(e.weight,t.weight),string:""};return n.string=function(e){return!e||vi(e.size)||vi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n}function xo(e,t,s,a){let n,r,i,l=!0;for(n=0,r=e.length;n<r;++n)if(i=e[n],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),l=!1),void 0!==s&&ji(i)&&(i=i[s%i.length],l=!1),void 0!==i))return a&&!l&&(a.cacheable=!1),i}function po(e,t){return Object.assign(Object.create(e),t)}function go(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const n=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof s&&(s=_o("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:s,_getTarget:a,override:a=>go([a,...e],t,n,s)};return new Proxy(r,{deleteProperty:(t,s)=>(delete t[s],delete t._keys,delete e[0][s],!0),get:(s,a)=>jo(s,a,()=>function(e,t,s,a){let n;for(const r of t)if(n=_o(yo(r,e),s),"undefined"!==typeof n)return vo(e,n)?So(s,a,e,n):n}(a,t,e,s)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Eo(e).includes(t),ownKeys:e=>Eo(e),set(e,t,s){const n=e._storage||(e._storage=a());return e[t]=n[t]=s,delete e._keys,!0}})}function fo(e,t,s,a){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:bo(e,a),setContext:t=>fo(e,t,s,a),override:n=>fo(e.override(n),t,s,a)};return new Proxy(n,{deleteProperty:(t,s)=>(delete t[s],delete e[s],!0),get:(e,t,s)=>jo(e,t,()=>function(e,t,s){const{_proxy:a,_context:n,_subProxy:r,_descriptors:i}=e;let l=a[t];qi(l)&&i.isScriptable(t)&&(l=function(e,t,s,a){const{_proxy:n,_context:r,_subProxy:i,_stack:l}=s;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let o=t(r,i||a);l.delete(e),vo(e,o)&&(o=So(n._scopes,n,e,o));return o}(t,l,e,s));ji(l)&&l.length&&(l=function(e,t,s,a){const{_proxy:n,_context:r,_subProxy:i,_descriptors:l}=s;if("undefined"!==typeof r.index&&a(e))return t[r.index%t.length];if(Ni(t[0])){const s=t,a=n._scopes.filter(e=>e!==s);t=[];for(const o of s){const s=So(a,n,e,o);t.push(fo(s,r,i&&i[e],l))}}return t}(t,l,e,i.isIndexable));vo(t,l)&&(l=fo(l,n,r&&r[t],i));return l}(e,t,s)),getOwnPropertyDescriptor:(t,s)=>t._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,s)=>Reflect.has(e,s),ownKeys:()=>Reflect.ownKeys(e),set:(t,s,a)=>(e[s]=a,delete t[s],!0)})}function bo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:s=t.scriptable,_indexable:a=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:s,indexable:a,isScriptable:qi(s)?s:()=>s,isIndexable:qi(a)?a:()=>a}}const yo=(e,t)=>e?e+Fi(t):t,vo=(e,t)=>Ni(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function jo(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const a=s();return e[t]=a,a}function No(e,t,s){return qi(e)?e(t,s):e}const wo=(e,t)=>!0===e?t:"string"===typeof e?Li(t,e):void 0;function ko(e,t,s,a,n){for(const r of t){const t=wo(s,r);if(t){e.add(t);const r=No(t._fallback,s,n);if("undefined"!==typeof r&&r!==s&&r!==a)return r}else if(!1===t&&"undefined"!==typeof a&&s!==a)return null}return!1}function So(e,t,s,a){const n=t._rootScopes,r=No(t._fallback,s,a),i=[...e,...n],l=new Set;l.add(a);let o=Co(l,i,s,r||s,a);return null!==o&&(("undefined"===typeof r||r===s||(o=Co(l,i,r,o,a),null!==o))&&go(Array.from(l),[""],n,r,()=>function(e,t,s){const a=e._getTarget();t in a||(a[t]={});const n=a[t];if(ji(n)&&Ni(s))return s;return n||{}}(t,s,a)))}function Co(e,t,s,a,n){for(;s;)s=ko(e,t,s,a,n);return s}function _o(e,t){for(const s of t){if(!s)continue;const t=s[e];if("undefined"!==typeof t)return t}}function Eo(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const s of e)for(const e of Object.keys(s).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Mo(e,t,s,a){const{iScale:n}=e,{key:r="r"}=this._parsing,i=new Array(a);let l,o,c,d;for(l=0,o=a;l<o;++l)c=l+s,d=t[c],i[l]={r:n.parse(Li(d,r),c)};return i}const Do=Number.EPSILON||1e-14,Po=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ao=e=>"x"===e?"y":"x";function To(e,t,s,a){const n=e.skip?t:e,r=t,i=s.skip?t:s,l=il(r,n),o=il(i,r);let c=l/(l+o),d=o/(l+o);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=a*c,h=a*d;return{previous:{x:r.x-u*(i.x-n.x),y:r.y-u*(i.y-n.y)},next:{x:r.x+h*(i.x-n.x),y:r.y+h*(i.y-n.y)}}}function Io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const s=Ao(t),a=e.length,n=Array(a).fill(0),r=Array(a);let i,l,o,c=Po(e,0);for(i=0;i<a;++i)if(l=o,o=c,c=Po(e,i+1),o){if(c){const e=c[t]-o[t];n[i]=0!==e?(c[s]-o[s])/e:0}r[i]=l?c?Ji(n[i-1])!==Ji(n[i])?0:(n[i-1]+n[i])/2:n[i-1]:n[i]}!function(e,t,s){const a=e.length;let n,r,i,l,o,c=Po(e,0);for(let d=0;d<a-1;++d)o=c,c=Po(e,d+1),o&&c&&(Xi(t[d],0,Do)?s[d]=s[d+1]=0:(n=s[d]/t[d],r=s[d+1]/t[d],l=Math.pow(n,2)+Math.pow(r,2),l<=9||(i=3/Math.sqrt(l),s[d]=n*i*t[d],s[d+1]=r*i*t[d])))}(e,n,r),function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const a=Ao(s),n=e.length;let r,i,l,o=Po(e,0);for(let c=0;c<n;++c){if(i=l,l=o,o=Po(e,c+1),!l)continue;const n=l[s],d=l[a];i&&(r=(n-i[s])/3,l["cp1".concat(s)]=n-r,l["cp1".concat(a)]=d-r*t[c]),o&&(r=(o[s]-n)/3,l["cp2".concat(s)]=n+r,l["cp2".concat(a)]=d+r*t[c])}}(e,r,t)}function Oo(e,t,s){return Math.max(Math.min(e,s),t)}function Ro(e,t,s,a,n){let r,i,l,o;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Io(e,n);else{let s=a?e[e.length-1]:e[0];for(r=0,i=e.length;r<i;++r)l=e[r],o=To(s,l,e[Math.min(r+1,i-(a?0:1))%i],t.tension),l.cp1x=o.previous.x,l.cp1y=o.previous.y,l.cp2x=o.next.x,l.cp2y=o.next.y,s=l}t.capBezierPoints&&function(e,t){let s,a,n,r,i,l=$l(e[0],t);for(s=0,a=e.length;s<a;++s)i=r,r=l,l=s<a-1&&$l(e[s+1],t),r&&(n=e[s],i&&(n.cp1x=Oo(n.cp1x,t.left,t.right),n.cp1y=Oo(n.cp1y,t.top,t.bottom)),l&&(n.cp2x=Oo(n.cp2x,t.left,t.right),n.cp2y=Oo(n.cp2y,t.top,t.bottom)))}(e,s)}function Lo(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Fo(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function zo(e,t,s){let a;return"string"===typeof e?(a=parseInt(e,10),-1!==e.indexOf("%")&&(a=a/100*t.parentNode[s])):a=e,a}const qo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Bo=["top","right","bottom","left"];function Uo(e,t,s){const a={};s=s?"-"+s:"";for(let n=0;n<4;n++){const r=Bo[n];a[r]=parseFloat(e[t+"-"+r+s])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function Wo(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:a}=t,n=qo(s),r="border-box"===n.boxSizing,i=Uo(n,"padding"),l=Uo(n,"border","width"),{x:o,y:c,box:d}=function(e,t){const s=e.touches,a=s&&s.length?s[0]:e,{offsetX:n,offsetY:r}=a;let i,l,o=!1;if(((e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot))(n,r,e.target))i=n,l=r;else{const e=t.getBoundingClientRect();i=a.clientX-e.left,l=a.clientY-e.top,o=!0}return{x:i,y:l,box:o}}(e,s),u=i.left+(d&&l.left),h=i.top+(d&&l.top);let{width:m,height:x}=t;return r&&(m-=i.width+l.width,x-=i.height+l.height),{x:Math.round((o-u)/m*s.width/a),y:Math.round((c-h)/x*s.height/a)}}const Ho=e=>Math.round(10*e)/10;function Vo(e,t,s,a){const n=qo(e),r=Uo(n,"margin"),i=zo(n.maxWidth,e,"clientWidth")||Vi,l=zo(n.maxHeight,e,"clientHeight")||Vi,o=function(e,t,s){let a,n;if(void 0===t||void 0===s){const r=e&&Fo(e);if(r){const e=r.getBoundingClientRect(),i=qo(r),l=Uo(i,"border","width"),o=Uo(i,"padding");t=e.width-o.width-l.width,s=e.height-o.height-l.height,a=zo(i.maxWidth,r,"clientWidth"),n=zo(i.maxHeight,r,"clientHeight")}else t=e.clientWidth,s=e.clientHeight}return{width:t,height:s,maxWidth:a||Vi,maxHeight:n||Vi}}(e,t,s);let{width:c,height:d}=o;if("content-box"===n.boxSizing){const e=Uo(n,"border","width"),t=Uo(n,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-r.width),d=Math.max(0,a?c/a:d-r.height),c=Ho(Math.min(c,i,o.maxWidth)),d=Ho(Math.min(d,l,o.maxHeight)),c&&!d&&(d=Ho(c/2));return(void 0!==t||void 0!==s)&&a&&o.height&&d>o.height&&(d=o.height,c=Ho(Math.floor(d*a))),{width:c,height:d}}function Yo(e,t,s){const a=t||1,n=Math.floor(e.height*a),r=Math.floor(e.width*a);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(s||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==a||i.height!==n||i.width!==r)&&(e.currentDevicePixelRatio=a,i.height=n,i.width=r,e.ctx.setTransform(a,0,0,a,0,0),!0)}const Go=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Lo()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(gn){}return e}();function Qo(e,t){const s=function(e,t){return qo(e).getPropertyValue(t)}(e,t),a=s&&s.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function $o(e,t,s,a){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function Ko(e,t,s,a){return{x:e.x+s*(t.x-e.x),y:"middle"===a?s<.5?e.y:t.y:"after"===a?s<1?e.y:t.y:s>0?t.y:e.y}}function Jo(e,t,s,a){const n={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},i=$o(e,n,s),l=$o(n,r,s),o=$o(r,t,s),c=$o(i,l,s),d=$o(l,o,s);return $o(c,d,s)}function Xo(e,t,s){return e?function(e,t){return{x:s=>e+e+t-s,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,s):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Zo(e,t){let s,a;"ltr"!==t&&"rtl"!==t||(s=e.canvas.style,a=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=a)}function ec(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function tc(e){return"angle"===e?{between:cl,compare:ll,normalize:ol}:{between:ul,compare:(e,t)=>e-t,normalize:e=>e}}function sc(e){let{start:t,end:s,count:a,loop:n,style:r}=e;return{start:t%a,end:s%a,loop:n&&(s-t+1)%a===0,style:r}}function ac(e,t,s){if(!s)return[e];const{property:a,start:n,end:r}=s,i=t.length,{compare:l,between:o,normalize:c}=tc(a),{start:d,end:u,loop:h,style:m}=function(e,t,s){const{property:a,start:n,end:r}=s,{between:i,normalize:l}=tc(a),o=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=o,h+=o,c=0,d=o;c<d&&i(l(t[u%o][a]),n,r);++c)u--,h--;u%=o,h%=o}return h<u&&(h+=o),{start:u,end:h,loop:m,style:e.style}}(e,t,s),x=[];let p,g,f,b=!1,y=null;const v=()=>b||o(n,f,p)&&0!==l(n,f),j=()=>!b||0===l(r,p)||o(r,f,p);for(let N=d,w=d;N<=u;++N)g=t[N%i],g.skip||(p=c(g[a]),p!==f&&(b=o(p,n,r),null===y&&v()&&(y=0===l(p,n)?N:w),null!==y&&j()&&(x.push(sc({start:y,end:N,loop:h,count:i,style:m})),y=null),w=N,f=p));return null!==y&&x.push(sc({start:y,end:u,loop:h,count:i,style:m})),x}function nc(e,t){const s=[],a=e.segments;for(let n=0;n<a.length;n++){const r=ac(a[n],e.points,t);r.length&&s.push(...r)}return s}function rc(e,t,s,a){return a&&a.setContext&&s?function(e,t,s,a){const n=e._chart.getContext(),r=ic(e.options),{_datasetIndex:i,options:{spanGaps:l}}=e,o=s.length,c=[];let d=r,u=t[0].start,h=u;function m(e,t,a,n){const r=l?-1:1;if(e!==t){for(e+=o;s[e%o].skip;)e-=r;for(;s[t%o].skip;)t+=r;e%o!==t%o&&(c.push({start:e%o,end:t%o,loop:a,style:n}),d=n,u=t%o)}}for(const x of t){u=l?u:x.start;let e,t=s[u%o];for(h=u+1;h<=x.end;h++){const r=s[h%o];e=ic(a.setContext(po(n,{type:"segment",p0:t,p1:r,p0DataIndex:(h-1)%o,p1DataIndex:h%o,datasetIndex:i}))),lc(e,d)&&m(u,h-1,x.loop,d),t=r,d=e}u<h-1&&m(u,h-1,x.loop,d)}return c}(e,t,s,a):t}function ic(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function lc(e,t){if(!t)return!1;const s=[],a=function(e,t){return El(t)?(s.includes(t)||s.push(t),s.indexOf(t)):t};return JSON.stringify(e,a)!==JSON.stringify(t,a)}function oc(e,t,s){return e.options.clip?e[s]:t[s]}function cc(e,t){const s=t._clip;if(s.disabled)return!1;const a=function(e,t){const{xScale:s,yScale:a}=e;return s&&a?{left:oc(s,t,"left"),right:oc(s,t,"right"),top:oc(a,t,"top"),bottom:oc(a,t,"bottom")}:t}(t,e.chartArea);return{left:!1===s.left?0:a.left-(!0===s.left?0:s.left),right:!1===s.right?e.width:a.right+(!0===s.right?0:s.right),top:!1===s.top?0:a.top-(!0===s.top?0:s.top),bottom:!1===s.bottom?e.height:a.bottom+(!0===s.bottom?0:s.bottom)}}class dc{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,a){const n=t.listeners[a],r=t.duration;n.forEach(a=>a({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(s-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=bl.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const n=s.items;let r,i=n.length-1,l=!1;for(;i>=0;--i)r=n[i],r._active?(r._total>s.duration&&(s.duration=r._total),r.tick(e),l=!0):(n[i]=n[n.length-1],n.pop());l&&(a.draw(),this._notify(a,s,e,"progress")),n.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),t+=n.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var uc=new dc;const hc="transparent",mc={boolean:(e,t,s)=>s>.5?t:e,color(e,t,s){const a=Ml(e||hc),n=a.valid&&Ml(t||hc);return n&&n.valid?n.mix(a,s).hexString():t},number:(e,t,s)=>e+(t-e)*s};class xc{constructor(e,t,s,a){const n=t[s];a=xo([e.to,a,n,e.from]);const r=xo([e.from,n,a]);this._active=!0,this._fn=e.fn||mc[e.type||typeof r],this._easing=_l[e.easing]||_l.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=r,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const a=this._target[this._prop],n=s-this._start,r=this._duration-n;this._start=s,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=xo([e.to,t,a,e.from]),this._from=xo([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,a=this._prop,n=this._from,r=this._loop,i=this._to;let l;if(this._active=n!==i&&(r||t<s),!this._active)return this._target[a]=i,void this._notify(!0);t<0?this._target[a]=n:(l=t/s%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[a]=this._fn(n,i,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][t]()}}class pc{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ni(e))return;const t=Object.keys(Ul.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const n=e[a];if(!Ni(n))return;const r={};for(const e of t)r[e]=n[e];(ji(n.properties)&&n.properties||[a]).forEach(e=>{e!==a&&s.has(e)||s.set(e,r)})})}_animateOptions(e,t){const s=t.options,a=function(e,t){if(!t)return;let s=e.options;if(!s)return void(e.options=t);s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}}));return s}(e,s);if(!a)return[];const n=this._createAnimations(a,s);return s.$shared&&function(e,t){const s=[],a=Object.keys(t);for(let n=0;n<a.length;n++){const t=e[a[n]];t&&t.active()&&s.push(t.wait())}return Promise.all(s)}(e.options.$animations,s).then(()=>{e.options=s},()=>{}),n}_createAnimations(e,t){const s=this._properties,a=[],n=e.$animations||(e.$animations={}),r=Object.keys(t),i=Date.now();let l;for(l=r.length-1;l>=0;--l){const o=r[l];if("$"===o.charAt(0))continue;if("options"===o){a.push(...this._animateOptions(e,t));continue}const c=t[o];let d=n[o];const u=s.get(o);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(n[o]=d=new xc(u,e,o,c),a.push(d)):e[o]=c}return a}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const s=this._createAnimations(e,t);return s.length?(uc.add(this._chart,s),!0):void 0}}function gc(e,t){const s=e&&e.options||{},a=s.reverse,n=void 0===s.min?t:0,r=void 0===s.max?t:0;return{start:a?r:n,end:a?n:r}}function fc(e,t){const s=[],a=e._getSortedDatasetMetas(t);let n,r;for(n=0,r=a.length;n<r;++n)s.push(a[n].index);return s}function bc(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=e.keys,r="single"===a.mode;let i,l,o,c;if(null===t)return;let d=!1;for(i=0,l=n.length;i<l;++i){if(o=+n[i],o===s){if(d=!0,a.all)continue;break}c=e.values[o],wi(c)&&(r||0===t||Ji(t)===Ji(c))&&(t+=c)}return d||a.all?t:0}function yc(e,t){const s=e&&e.options.stacked;return s||void 0===s&&void 0!==t.stack}function vc(e,t,s){const a=e[t]||(e[t]={});return a[s]||(a[s]={})}function jc(e,t,s,a){for(const n of t.getMatchingVisibleMetas(a).reverse()){const t=e[n.index];if(s&&t>0||!s&&t<0)return n.index}return null}function Nc(e,t){const{chart:s,_cachedMeta:a}=e,n=s._stacks||(s._stacks={}),{iScale:r,vScale:i,index:l}=a,o=r.axis,c=i.axis,d=function(e,t,s){return"".concat(e.id,".").concat(t.id,".").concat(s.stack||s.type)}(r,i,a),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[o]:s,[c]:r}=e;h=(e._stacks||(e._stacks={}))[c]=vc(n,d,s),h[l]=r,h._top=jc(h,i,!0,a.type),h._bottom=jc(h,i,!1,a.type);(h._visualValues||(h._visualValues={}))[l]=r}}function wc(e,t){const s=e.scales;return Object.keys(s).filter(e=>s[e].axis===t).shift()}function kc(e,t){const s=e.controller.index,a=e.vScale&&e.vScale.axis;if(a){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[a]||void 0===t[a][s])return;delete t[a][s],void 0!==t[a]._visualValues&&void 0!==t[a]._visualValues[s]&&delete t[a]._visualValues[s]}}}const Sc=e=>"reset"===e||"none"===e,Cc=(e,t)=>t?e:Object.assign({},e);class _c{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),a=(e,t,s,a)=>"x"===e?t:"r"===e?a:s,n=t.xAxisID=Si(s.xAxisID,wc(e,"x")),r=t.yAxisID=Si(s.yAxisID,wc(e,"y")),i=t.rAxisID=Si(s.rAxisID,wc(e,"r")),l=t.indexAxis,o=t.iAxisID=a(l,n,r,i),c=t.vAxisID=a(l,r,n,i);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(o),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gl(this._data,this),e._stacked&&kc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Ni(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:s,vScale:a}=t,n="x"===s.axis?"x":"y",r="x"===a.axis?"x":"y",i=Object.keys(e),l=new Array(i.length);let o,c,d;for(o=0,c=i.length;o<c;++o)d=i[o],l[o]={[n]:d,[r]:e[d]};return l}(t,e)}else if(s!==t){if(s){gl(s,this);const e=this._cachedMeta;kc(e),e._parsed=[]}t&&Object.isExtensible(t)&&(n=this,(a=t)._chartjs?a._chartjs.listeners.push(n):(Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),pl.forEach(e=>{const t="_onData"+Fi(e),s=a[e];Object.defineProperty(a,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=s.apply(this,n);return a._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...n)}),i}})}))),this._syncList=[],this._data=t}var a,n}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const n=t._stacked;t._stacked=yc(t.vScale,t),t.stack!==s.stack&&(a=!0,kc(t),t.stack=s.stack),this._resyncElements(e),(a||n!==t._stacked)&&(Nc(this,t._parsed),t._stacked=yc(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:a}=this,{iScale:n,_stacked:r}=s,i=n.axis;let l,o,c,d=0===e&&t===a.length||s._sorted,u=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=a,s._sorted=!0,c=a;else{c=ji(a[e])?this.parseArrayData(s,a,e,t):Ni(a[e])?this.parseObjectData(s,a,e,t):this.parsePrimitiveData(s,a,e,t);const n=()=>null===o[i]||u&&o[i]<u[i];for(l=0;l<t;++l)s._parsed[l+e]=o=c[l],d&&(n()&&(d=!1),u=o);s._sorted=d}r&&Nc(this,c)}parsePrimitiveData(e,t,s,a){const{iScale:n,vScale:r}=e,i=n.axis,l=r.axis,o=n.getLabels(),c=n===r,d=new Array(a);let u,h,m;for(u=0,h=a;u<h;++u)m=u+s,d[u]={[i]:c||n.parse(o[m],m),[l]:r.parse(t[m],m)};return d}parseArrayData(e,t,s,a){const{xScale:n,yScale:r}=e,i=new Array(a);let l,o,c,d;for(l=0,o=a;l<o;++l)c=l+s,d=t[c],i[l]={x:n.parse(d[0],c),y:r.parse(d[1],c)};return i}parseObjectData(e,t,s,a){const{xScale:n,yScale:r}=e,{xAxisKey:i="x",yAxisKey:l="y"}=this._parsing,o=new Array(a);let c,d,u,h;for(c=0,d=a;c<d;++c)u=c+s,h=t[u],o[c]={x:n.parse(Li(h,i),u),y:r.parse(Li(h,l),u)};return o}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const a=this.chart,n=this._cachedMeta,r=t[e.axis];return bc({keys:fc(a,!0),values:t._stacks[e.axis]._visualValues},r,n.index,{mode:s})}updateRangeFromParsed(e,t,s,a){const n=s[t.axis];let r=null===n?NaN:n;const i=a&&s._stacks[t.axis];a&&i&&(a.values=i,r=bc(a,n,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const s=this._cachedMeta,a=s._parsed,n=s._sorted&&e===s.iScale,r=a.length,i=this._getOtherScale(e),l=((e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:fc(s,!0),values:null})(t,s,this.chart),o={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:s,minDefined:a,maxDefined:n}=e.getUserBounds();return{min:a?t:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}(i);let u,h;function m(){h=a[u];const t=h[i.axis];return!wi(h[e.axis])||c>t||d<t}for(u=0;u<r&&(m()||(this.updateRangeFromParsed(o,e,h,l),!n));++u);if(n)for(u=r-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(o,e,h,l);break}return o}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let a,n,r;for(a=0,n=t.length;a<n;++a)r=t[a][e.axis],wi(r)&&s.push(r);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,a=t.vScale,n=this.getParsed(e);return{label:s?""+s.getLabelForValue(n[s.axis]):"",value:a?""+a.getLabelForValue(n[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,s,a,n;return Ni(e)?(t=e.top,s=e.right,a=e.bottom,n=e.left):t=s=a=n=e,{top:t,right:s,bottom:a,left:n,disabled:!1===e}}(Si(this.options.clip,function(e,t,s){if(!1===s)return!1;const a=gc(e,s),n=gc(t,s);return{top:n.end,right:a.end,bottom:n.start,left:a.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,a=s.data||[],n=t.chartArea,r=[],i=this._drawStart||0,l=this._drawCount||a.length-i,o=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(e,n,i,l),c=i;c<i+l;++c){const t=a[c];t.hidden||(t.active&&o?r.push(t):t.draw(e,n))}for(c=0;c<r.length;++c)r[c].draw(e,n)}getStyle(e,t){const s=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const a=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];n=t.$context||(t.$context=function(e,t,s){return po(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),n.parsed=this.getParsed(e),n.raw=a.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(e,t){return po(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=a,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=s,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",s=arguments.length>2?arguments[2]:void 0;const a="active"===t,n=this._cachedDataOpts,r=e+"-"+t,i=n[r],l=this.enableOptionSharing&&zi(s);if(i)return Cc(i,l);const o=this.chart.config,c=o.datasetElementScopeKeys(this._type,e),d=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=o.getOptionScopes(this.getDataset(),c),h=Object.keys(Ul.elements[e]),m=o.resolveNamedOptions(u,h,()=>this.getContext(s,a,t),d);return m.$shared&&(m.$shared=l,n[r]=Object.freeze(Cc(m,l))),m}_resolveAnimations(e,t,s){const a=this.chart,n=this._cachedDataOpts,r="animation-".concat(t),i=n[r];if(i)return i;let l;if(!1!==a.options.animation){const a=this.chart.config,n=a.datasetAnimationScopeKeys(this._type,t),r=a.getOptionScopes(this.getDataset(),n);l=a.createResolver(r,this.getContext(e,s,t))}const o=new pc(a,l&&l.animations);return l&&l._cacheable&&(n[r]=Object.freeze(o)),o}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Sc(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),a=this._sharedOptions,n=this.getSharedOptions(s),r=this.includeOptions(t,n)||n!==a;return this.updateSharedOptions(n,t,s),{sharedOptions:n,includeOptions:r}}updateElement(e,t,s,a){Sc(a)?Object.assign(e,s):this._resolveAnimations(t,a).update(e,s)}updateSharedOptions(e,t,s){e&&!Sc(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,a){e.active=a;const n=this.getStyle(t,a);this._resolveAnimations(t,s,a).update(e,{options:!a&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[i,l,o]of this._syncList)this[i](l,o);this._syncList=[];const a=s.length,n=t.length,r=Math.min(n,a);r&&this.parse(0,r),n>a?this._insertElements(a,n-a,e):n<a&&this._removeElements(n,a-n)}_insertElements(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=this._cachedMeta,n=a.data,r=e+t;let i;const l=e=>{for(e.length+=t,i=e.length-1;i>=r;i--)e[i]=e[i-t]};for(l(n),i=e;i<r;++i)n[i]=new this.dataElementType;this._parsing&&l(a._parsed),this.parse(e,t),s&&this.updateElements(n,e,t,"reset")}updateElements(e,t,s,a){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,t);s._stacked&&kc(s,a)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,a]=e;this[t](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ec(e){const t=e.iScale,s=function(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let a=[];for(let t=0,n=s.length;t<n;t++)a=a.concat(s[t].controller.getAllParsedValues(e));e._cache.$bar=fl(a.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let a,n,r,i,l=t._length;const o=()=>{32767!==r&&-32768!==r&&(zi(i)&&(l=Math.min(l,Math.abs(r-i)||l)),i=r)};for(a=0,n=s.length;a<n;++a)r=t.getPixelForValue(s[a]),o();for(i=void 0,a=0,n=t.ticks.length;a<n;++a)r=t.getPixelForTick(a),o();return l}function Mc(e,t,s,a){return ji(e)?function(e,t,s,a){const n=s.parse(e[0],a),r=s.parse(e[1],a),i=Math.min(n,r),l=Math.max(n,r);let o=i,c=l;Math.abs(i)>Math.abs(l)&&(o=l,c=i),t[s.axis]=c,t._custom={barStart:o,barEnd:c,start:n,end:r,min:i,max:l}}(e,t,s,a):t[s.axis]=s.parse(e,a),t}function Dc(e,t,s,a){const n=e.iScale,r=e.vScale,i=n.getLabels(),l=n===r,o=[];let c,d,u,h;for(c=s,d=s+a;c<d;++c)h=t[c],u={},u[n.axis]=l||n.parse(i[c],c),o.push(Mc(h,u,r,c));return o}function Pc(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Ac(e,t,s,a){let n=t.borderSkipped;const r={};if(!n)return void(e.borderSkipped=r);if(!0===n)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:l,reverse:o,top:c,bottom:d}=function(e){let t,s,a,n,r;return e.horizontal?(t=e.base>e.x,s="left",a="right"):(t=e.base<e.y,s="bottom",a="top"),t?(n="end",r="start"):(n="start",r="end"),{start:s,end:a,reverse:t,top:n,bottom:r}}(e);"middle"===n&&s&&(e.enableBorderRadius=!0,(s._top||0)===a?n=c:(s._bottom||0)===a?n=d:(r[Tc(d,i,l,o)]=!0,n=c)),r[Tc(n,i,l,o)]=!0,e.borderSkipped=r}function Tc(e,t,s,a){var n,r,i;return a?(i=s,e=Ic(e=(n=e)===(r=t)?i:n===i?r:n,s,t)):e=Ic(e,t,s),e}function Ic(e,t,s){return"start"===e?t:"end"===e?s:e}function Oc(e,t,s){let{inflateAmount:a}=t;e.inflateAmount="auto"===a?1===s?.33:0:a}Oe(_c,"defaults",{}),Oe(_c,"datasetElementType",null),Oe(_c,"dataElementType",null);class Rc extends _c{parsePrimitiveData(e,t,s,a){return Dc(e,t,s,a)}parseArrayData(e,t,s,a){return Dc(e,t,s,a)}parseObjectData(e,t,s,a){const{iScale:n,vScale:r}=e,{xAxisKey:i="x",yAxisKey:l="y"}=this._parsing,o="x"===n.axis?i:l,c="x"===r.axis?i:l,d=[];let u,h,m,x;for(u=s,h=s+a;u<h;++u)x=t[u],m={},m[n.axis]=n.parse(Li(x,o),u),d.push(Mc(Li(x,c),m,r,u));return d}updateRangeFromParsed(e,t,s,a){super.updateRangeFromParsed(e,t,s,a);const n=s._custom;n&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:a}=t,n=this.getParsed(e),r=n._custom,i=Pc(r)?"["+r.start+", "+r.end+"]":""+a.getLabelForValue(n[a.axis]);return{label:""+s.getLabelForValue(n[s.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,a){const n="reset"===a,{index:r,_cachedMeta:{vScale:i}}=this,l=i.getBasePixel(),o=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,a);for(let h=t;h<t+s;h++){const t=this.getParsed(h),s=n||vi(t[i.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),x=(t._stacks||{})[i.axis],p={horizontal:o,base:s.base,enableBorderRadius:!x||Pc(t._custom)||r===x._top||r===x._bottom,x:o?s.head:m.center,y:o?m.center:s.head,height:o?m.size:Math.abs(s.size),width:o?Math.abs(s.size):m.size};u&&(p.options=d||this.resolveDataElementOptions(h,e[h].active?"active":a));const g=p.options||e[h].options;Ac(p,g,x,r),Oc(p,g,c.ratio),this.updateElement(e[h],h,p,a)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),n=s.options.stacked,r=[],i=this._cachedMeta.controller.getParsed(t),l=i&&i[s.axis],o=e=>{const t=e._parsed.find(e=>e[s.axis]===l),a=t&&t[e.vScale.axis];if(vi(a)||isNaN(a))return!0};for(const c of a)if((void 0===t||!o(c))&&((!1===n||-1===r.indexOf(c.stack)||void 0===n&&void 0===c.stack)&&r.push(c.stack),c.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Si("x"===this.chart.options.indexAxis?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const a=this._getStacks(e,s),n=void 0!==t?a.indexOf(t):-1;return-1===n?a.length-1:n}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,a=[];let n,r;for(n=0,r=t.data.length;n<r;++n)a.push(s.getPixelForValue(this.getParsed(n)[s.axis],n));const i=e.barThickness;return{min:i||Ec(t),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:a},options:{base:n,minBarLength:r}}=this,i=n||0,l=this.getParsed(e),o=l._custom,c=Pc(o);let d,u,h=l[t.axis],m=0,x=s?this.applyStack(t,l,s):h;x!==h&&(m=x-h,x=h),c&&(h=o.barStart,x=o.barEnd-o.barStart,0!==h&&Ji(h)!==Ji(o.barEnd)&&(m=0),m+=h);const p=vi(n)||c?m:n;let g=t.getPixelForValue(p);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+x):g,u=d-g,Math.abs(u)<r){u=function(e,t,s){return 0!==e?Ji(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}(u,t,i)*r,h===i&&(g-=u/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),o=Math.min(e,n),m=Math.max(e,n);g=Math.max(Math.min(g,m),o),d=g+u,s&&!c&&(l._stacks[t.axis]._visualValues[a]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(i)){const e=Ji(u)*t.getLineWidthForValue(i)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const s=t.scale,a=this.options,n=a.skipNull,r=Si(a.maxBarThickness,1/0);let i,l;const o=this._getAxisCount();if(t.grouped){const s=n?this._getStackCount(e):t.stackCount,c="flex"===a.barThickness?function(e,t,s,a){const n=t.pixels,r=n[e];let i=e>0?n[e-1]:null,l=e<n.length-1?n[e+1]:null;const o=s.categoryPercentage;null===i&&(i=r-(null===l?t.end-t.start:l-r)),null===l&&(l=r+r-i);const c=r-(r-Math.min(i,l))/2*o;return{chunk:Math.abs(l-i)/2*o/a,ratio:s.barPercentage,start:c}}(e,t,a,s*o):function(e,t,s,a){const n=s.barThickness;let r,i;return vi(n)?(r=t.min*s.categoryPercentage,i=s.barPercentage):(r=n*a,i=1),{chunk:r/a,ratio:i,start:t.pixels[e]-r/2}}(e,t,a,s*o),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Si(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+u;i=c.start+c.chunk*h+c.chunk/2,l=Math.min(r,c.chunk*c.ratio)}else i=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(r,t.min*t.ratio);return{base:i-l/2,head:i+l/2,center:i,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,a=s.length;let n=0;for(;n<a;++n)null===this.getParsed(n)[t.axis]||s[n].hidden||s[n].draw(this._ctx)}}Oe(Rc,"id","bar"),Oe(Rc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Oe(Rc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Lc extends _c{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,a){const n=super.parsePrimitiveData(e,t,s,a);for(let r=0;r<n.length;r++)n[r]._custom=this.resolveDataElementOptions(r+s).radius;return n}parseArrayData(e,t,s,a){const n=super.parseArrayData(e,t,s,a);for(let r=0;r<n.length;r++){const e=t[s+r];n[r]._custom=Si(e[2],this.resolveDataElementOptions(r+s).radius)}return n}parseObjectData(e,t,s,a){const n=super.parseObjectData(e,t,s,a);for(let r=0;r<n.length;r++){const e=t[s+r];n[r]._custom=Si(e&&e.r&&+e.r,this.resolveDataElementOptions(r+s).radius)}return n}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:a,yScale:n}=t,r=this.getParsed(e),i=a.getLabelForValue(r.x),l=n.getLabelForValue(r.y),o=r._custom;return{label:s[e]||"",value:"("+i+", "+l+(o?", "+o:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,a){const n="reset"===a,{iScale:r,vScale:i}=this._cachedMeta,{sharedOptions:l,includeOptions:o}=this._getSharedOptions(t,a),c=r.axis,d=i.axis;for(let u=t;u<t+s;u++){const t=e[u],s=!n&&this.getParsed(u),h={},m=h[c]=n?r.getPixelForDecimal(.5):r.getPixelForValue(s[c]),x=h[d]=n?i.getBasePixel():i.getPixelForValue(s[d]);h.skip=isNaN(m)||isNaN(x),o&&(h.options=l||this.resolveDataElementOptions(u,t.active?"active":a),n&&(h.options.radius=0)),this.updateElement(t,u,h,a)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let a=super.resolveDataElementOptions(e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const n=a.radius;return"active"!==t&&(a.radius=0),a.radius+=Si(s&&s._custom,n),a}}Oe(Lc,"id","bubble"),Oe(Lc,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Oe(Lc,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Fc extends _c{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,a=this._cachedMeta;if(!1===this._parsing)a._parsed=s;else{let n,r,i=e=>+s[e];if(Ni(s[e])){const{key:e="value"}=this._parsing;i=t=>+Li(s[t],e)}for(n=e,r=e+t;n<r;++n)a._parsed[n]=i(n)}}_getRotation(){return sl(this.options.rotation-90)}_getCircumference(){return sl(this.options.circumference)}_getRotationExtents(){let e=Wi,t=-Wi;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,n=a._getRotation(),r=a._getCircumference();e=Math.min(e,n),t=Math.max(t,n+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,a=this._cachedMeta,n=a.data,r=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,i=Math.max((Math.min(s.width,s.height)-r)/2,0),l=Math.min((o=this.options.cutout,c=i,"string"===typeof o&&o.endsWith("%")?parseFloat(o)/100:+o/c),1);var o,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:x,offsetX:p,offsetY:g}=function(e,t,s){let a=1,n=1,r=0,i=0;if(t<Wi){const l=e,o=l+t,c=Math.cos(l),d=Math.sin(l),u=Math.cos(o),h=Math.sin(o),m=(e,t,a)=>cl(e,l,o,!0)?1:Math.max(t,t*s,a,a*s),x=(e,t,a)=>cl(e,l,o,!0)?-1:Math.min(t,t*s,a,a*s),p=m(0,c,u),g=m(Gi,d,h),f=x(Ui,c,u),b=x(Ui+Gi,d,h);a=(p-f)/2,n=(g-b)/2,r=-(p+f)/2,i=-(g+b)/2}return{ratioX:a,ratioY:n,offsetX:r,offsetY:i}}(h,u,l),f=(s.width-r)/m,b=(s.height-r)/x,y=Math.max(Math.min(f,b)/2,0),v=Ci(this.options.radius,y),j=(v-Math.max(v*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=g*v,a.total=this.calculateTotal(),this.outerRadius=v-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*d,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const s=this.options,a=this._cachedMeta,n=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===a._parsed[e]||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*n/Wi)}updateElements(e,t,s,a){const n="reset"===a,r=this.chart,i=r.chartArea,l=r.options.animation,o=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=n&&l.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:x}=this._getSharedOptions(t,a);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,n);for(p=t;p<t+s;++p){const t=this._circumference(p,n),s=e[p],r={x:o+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};x&&(r.options=m||this.resolveDataElementOptions(p,s.active?"active":a)),g+=t,this.updateElement(s,p,r,a)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s,a=0;for(s=0;s<t.length;s++){const n=e._parsed[s];null===n||isNaN(n)||!this.chart.getDataVisibility(s)||t[s].hidden||(a+=Math.abs(n))}return a}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Wi*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,a=s.data.labels||[],n=Il(t._parsed[e],s.options.locale);return{label:a[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const s=this.chart;let a,n,r,i,l;if(!e)for(a=0,n=s.data.datasets.length;a<n;++a)if(s.isDatasetVisible(a)){r=s.getDatasetMeta(a),e=r.data,i=r.controller;break}if(!e)return 0;for(a=0,n=e.length;a<n;++a)l=i.resolveDataElementOptions(a),"inner"!==l.borderAlign&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,a=e.length;s<a;++s){const e=this.resolveDataElementOptions(s);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(Si(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Oe(Fc,"id","doughnut"),Oe(Fc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Oe(Fc,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Oe(Fc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:a}}=e.legend.options;return t.labels.map((t,n)=>{const r=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:a,lineWidth:r.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(n),index:n}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}});class zc extends _c{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:a=[],_dataset:n}=t,r=this.chart._animationsDisabled;let{start:i,count:l}=Nl(t,a,r);this._drawStart=i,this._drawCount=l,wl(t)&&(i=0,l=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!n._decimated,s.points=a;const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),o.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:o},e),this.updateElements(a,i,l,e)}updateElements(e,t,s,a){const n="reset"===a,{iScale:r,vScale:i,_stacked:l,_dataset:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,a),u=r.axis,h=i.axis,{spanGaps:m,segment:x}=this.options,p=el(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||n||"none"===a,f=t+s,b=e.length;let y=t>0&&this.getParsed(t-1);for(let v=0;v<b;++v){const s=e[v],m=g?s:{};if(v<t||v>=f){m.skip=!0;continue}const b=this.getParsed(v),j=vi(b[h]),N=m[u]=r.getPixelForValue(b[u],v),w=m[h]=n||j?i.getBasePixel():i.getPixelForValue(l?this.applyStack(i,b,l):b[h],v);m.skip=isNaN(N)||isNaN(w)||j,m.stop=v>0&&Math.abs(b[u]-y[u])>p,x&&(m.parsed=b,m.raw=o.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,s.active?"active":a)),g||this.updateElement(s,v,m,a),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const n=a[0].size(this.resolveDataElementOptions(0)),r=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,n,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Oe(zc,"id","line"),Oe(zc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Oe(zc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class qc extends _c{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,a=s.data.labels||[],n=Il(t._parsed[e].r,s.options.locale);return{label:a[e]||"",value:n}}parseObjectData(e,t,s,a){return Mo.bind(this)(e,t,s,a)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,s)=>{const a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<t.min&&(t.min=a),a>t.max&&(t.max=a))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,a=Math.min(t.right-t.left,t.bottom-t.top),n=Math.max(a/2,0),r=(n-Math.max(s.cutoutPercentage?n/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=n-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(e,t,s,a){const n="reset"===a,r=this.chart,i=r.options.animation,l=this._cachedMeta.rScale,o=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*Ui;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,a,m);for(u=t;u<t+s;u++){const t=e[u];let s=h,x=h+this._computeAngle(u,a,m),p=r.getDataVisibility(u)?l.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=x,n&&(i.animateScale&&(p=0),i.animateRotate&&(s=x=d));const g={x:o,y:c,innerRadius:0,outerRadius:p,startAngle:s,endAngle:x,options:this.resolveDataElementOptions(u,t.active?"active":a)};this.updateElement(t,u,g,a)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?sl(this.resolveDataElementOptions(e,t).angle||s):0}}Oe(qc,"id","polarArea"),Oe(qc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Oe(qc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:a}}=e.legend.options;return t.labels.map((t,n)=>{const r=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:a,lineWidth:r.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(n),index:n}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Bc extends Fc{}Oe(Bc,"id","pie"),Oe(Bc,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Uc extends _c{getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,a){return Mo.bind(this)(e,t,s,a)}update(e){const t=this._cachedMeta,s=t.dataset,a=t.data||[],n=t.iScale.getLabels();if(s.points=a,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const r={_loop:!0,_fullLoop:n.length===a.length,options:t};this.updateElement(s,void 0,r,e)}this.updateElements(a,0,a.length,e)}updateElements(e,t,s,a){const n=this._cachedMeta.rScale,r="reset"===a;for(let i=t;i<t+s;i++){const t=e[i],s=this.resolveDataElementOptions(i,t.active?"active":a),l=n.getPointPositionForValue(i,this.getParsed(i).r),o=r?n.xCenter:l.x,c=r?n.yCenter:l.y,d={x:o,y:c,angle:l.angle,skip:isNaN(o)||isNaN(c),options:s};this.updateElement(t,i,d,a)}}}Oe(Uc,"id","radar"),Oe(Uc,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Oe(Uc,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Wc extends _c{getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:a,yScale:n}=t,r=this.getParsed(e),i=a.getLabelForValue(r.x),l=n.getLabelForValue(r.y);return{label:s[e]||"",value:"("+i+", "+l+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,a=this.chart._animationsDisabled;let{start:n,count:r}=Nl(t,s,a);if(this._drawStart=n,this._drawCount=r,wl(t)&&(n=0,r=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:n,_dataset:r}=t;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,n,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,a){const n="reset"===a,{iScale:r,vScale:i,_stacked:l,_dataset:o}=this._cachedMeta,c=this.resolveDataElementOptions(t,a),d=this.getSharedOptions(c),u=this.includeOptions(a,d),h=r.axis,m=i.axis,{spanGaps:x,segment:p}=this.options,g=el(x)?x:Number.POSITIVE_INFINITY,f=this.chart._animationsDisabled||n||"none"===a;let b=t>0&&this.getParsed(t-1);for(let y=t;y<t+s;++y){const t=e[y],s=this.getParsed(y),c=f?t:{},x=vi(s[m]),v=c[h]=r.getPixelForValue(s[h],y),j=c[m]=n||x?i.getBasePixel():i.getPixelForValue(l?this.applyStack(i,s,l):s[m],y);c.skip=isNaN(v)||isNaN(j)||x,c.stop=y>0&&Math.abs(s[h]-b[h])>g,p&&(c.parsed=s,c.raw=o.data[y]),u&&(c.options=d||this.resolveDataElementOptions(y,t.active?"active":a)),f||this.updateElement(t,y,c,a),b=s}this.updateSharedOptions(d,a,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}const s=e.dataset,a=s.options&&s.options.borderWidth||0;if(!t.length)return a;const n=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(a,n,r)/2}}Oe(Wc,"id","scatter"),Oe(Wc,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Oe(Wc,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Hc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Vc{static override(e){Object.assign(Vc.prototype,e)}constructor(e){Oe(this,"options",void 0),this.options=e||{}}init(){}formats(){return Hc()}parse(){return Hc()}format(){return Hc()}add(){return Hc()}diff(){return Hc()}startOf(){return Hc()}endOf(){return Hc()}}var Yc=Vc;function Gc(e,t,s,a){const{controller:n,data:r,_sorted:i}=e,l=n._cachedMeta.iScale,o=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&"r"!==t&&i&&r.length){const i=l._reversePixels?xl:ml;if(!a){const a=i(r,t,s);if(o){const{vScale:t}=n._cachedMeta,{_parsed:s}=e,r=s.slice(0,a.lo+1).reverse().findIndex(e=>!vi(e[t.axis]));a.lo-=Math.max(0,r);const i=s.slice(a.hi).findIndex(e=>!vi(e[t.axis]));a.hi+=Math.max(0,i)}return a}if(n._sharedOptions){const e=r[0],a="function"===typeof e.getRange&&e.getRange(t);if(a){const e=i(r,t,s-a),n=i(r,t,s+a);return{lo:e.lo,hi:n.hi}}}}return{lo:0,hi:r.length-1}}function Qc(e,t,s,a,n){const r=e.getSortedVisibleDatasetMetas(),i=s[t];for(let l=0,o=r.length;l<o;++l){const{index:e,data:s}=r[l],{lo:o,hi:c}=Gc(r[l],t,i,n);for(let t=o;t<=c;++t){const n=s[t];n.skip||a(n,e,t)}}}function $c(e,t,s,a,n){const r=[];if(!n&&!e.isPointInArea(t))return r;return Qc(e,s,t,function(s,i,l){(n||$l(s,e.chartArea,0))&&s.inRange(t.x,t.y,a)&&r.push({element:s,datasetIndex:i,index:l})},!0),r}function Kc(e,t,s,a,n,r){let i=[];const l=function(e){const t=-1!==e.indexOf("x"),s=-1!==e.indexOf("y");return function(e,a){const n=t?Math.abs(e.x-a.x):0,r=s?Math.abs(e.y-a.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}}(s);let o=Number.POSITIVE_INFINITY;return Qc(e,s,t,function(s,c,d){const u=s.inRange(t.x,t.y,n);if(a&&!u)return;const h=s.getCenterPoint(n);if(!(!!r||e.isPointInArea(h))&&!u)return;const m=l(t,h);m<o?(i=[{element:s,datasetIndex:c,index:d}],o=m):m===o&&i.push({element:s,datasetIndex:c,index:d})}),i}function Jc(e,t,s,a,n,r){return r||e.isPointInArea(t)?"r"!==s||a?Kc(e,t,s,a,n,r):function(e,t,s,a){let n=[];return Qc(e,s,t,function(e,s,r){const{startAngle:i,endAngle:l}=e.getProps(["startAngle","endAngle"],a),{angle:o}=rl(e,{x:t.x,y:t.y});cl(o,i,l)&&n.push({element:e,datasetIndex:s,index:r})}),n}(e,t,s,n):[]}function Xc(e,t,s,a,n){const r=[],i="x"===s?"inXRange":"inYRange";let l=!1;return Qc(e,s,t,(e,a,o)=>{e[i]&&e[i](t[s],n)&&(r.push({element:e,datasetIndex:a,index:o}),l=l||e.inRange(t.x,t.y,n))}),a&&!l?[]:r}var Zc={evaluateInteractionItems:Qc,modes:{index(e,t,s,a){const n=Wo(t,e),r=s.axis||"x",i=s.includeInvisible||!1,l=s.intersect?$c(e,n,r,a,i):Jc(e,n,r,!1,a,i),o=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=l[0].index,s=e.data[t];s&&!s.skip&&o.push({element:s,datasetIndex:e.index,index:t})}),o):[]},dataset(e,t,s,a){const n=Wo(t,e),r=s.axis||"xy",i=s.includeInvisible||!1;let l=s.intersect?$c(e,n,r,a,i):Jc(e,n,r,!1,a,i);if(l.length>0){const t=l[0].datasetIndex,s=e.getDatasetMeta(t).data;l=[];for(let e=0;e<s.length;++e)l.push({element:s[e],datasetIndex:t,index:e})}return l},point:(e,t,s,a)=>$c(e,Wo(t,e),s.axis||"xy",a,s.includeInvisible||!1),nearest(e,t,s,a){const n=Wo(t,e),r=s.axis||"xy",i=s.includeInvisible||!1;return Jc(e,n,r,s.intersect,a,i)},x:(e,t,s,a)=>Xc(e,Wo(t,e),"x",s.intersect,a),y:(e,t,s,a)=>Xc(e,Wo(t,e),"y",s.intersect,a)}};const ed=["left","top","right","bottom"];function td(e,t){return e.filter(e=>e.pos===t)}function sd(e,t){return e.filter(e=>-1===ed.indexOf(e.pos)&&e.box.axis===t)}function ad(e,t){return e.sort((e,s)=>{const a=t?s:e,n=t?e:s;return a.weight===n.weight?a.index-n.index:a.weight-n.weight})}function nd(e,t){const s=function(e){const t={};for(const s of e){const{stack:e,pos:a,stackWeight:n}=s;if(!e||!ed.includes(a))continue;const r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=n}return t}(e),{vBoxMaxWidth:a,hBoxMaxHeight:n}=t;let r,i,l;for(r=0,i=e.length;r<i;++r){l=e[r];const{fullSize:i}=l.box,o=s[l.stack],c=o&&l.stackWeight/o.weight;l.horizontal?(l.width=c?c*a:i&&t.availableWidth,l.height=n):(l.width=a,l.height=c?c*n:i&&t.availableHeight)}return s}function rd(e,t,s,a){return Math.max(e[s],t[s])+Math.max(e[a],t[a])}function id(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ld(e,t,s,a){const{pos:n,box:r}=s,i=e.maxPadding;if(!Ni(n)){s.size&&(e[n]-=s.size);const t=a[s.stack]||{size:0,count:1};t.size=Math.max(t.size,s.horizontal?r.height:r.width),s.size=t.size/t.count,e[n]+=s.size}r.getPadding&&id(i,r.getPadding());const l=Math.max(0,t.outerWidth-rd(i,e,"left","right")),o=Math.max(0,t.outerHeight-rd(i,e,"top","bottom")),c=l!==e.w,d=o!==e.h;return e.w=l,e.h=o,s.horizontal?{same:c,other:d}:{same:d,other:c}}function od(e,t){const s=t.maxPadding;function a(e){const a={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{a[e]=Math.max(t[e],s[e])}),a}return a(e?["left","right"]:["top","bottom"])}function cd(e,t,s,a){const n=[];let r,i,l,o,c,d;for(r=0,i=e.length,c=0;r<i;++r){l=e[r],o=l.box,o.update(l.width||t.w,l.height||t.h,od(l.horizontal,t));const{same:i,other:u}=ld(t,s,l,a);c|=i&&n.length,d=d||u,o.fullSize||n.push(l)}return c&&cd(n,t,s,a)||d}function dd(e,t,s,a,n){e.top=s,e.left=t,e.right=t+a,e.bottom=s+n,e.width=a,e.height=n}function ud(e,t,s,a){const n=s.padding;let{x:r,y:i}=t;for(const l of e){const e=l.box,o=a[l.stack]||{count:1,placed:0,weight:1},c=l.stackWeight/o.weight||1;if(l.horizontal){const a=t.w*c,r=o.size||e.height;zi(o.start)&&(i=o.start),e.fullSize?dd(e,n.left,i,s.outerWidth-n.right-n.left,r):dd(e,t.left+o.placed,i,a,r),o.start=i,o.placed+=a,i=e.bottom}else{const a=t.h*c,i=o.size||e.width;zi(o.start)&&(r=o.start),e.fullSize?dd(e,r,n.top,i,s.outerHeight-n.bottom-n.top):dd(e,r,t.top+o.placed,i,a),o.start=r,o.placed+=a,r=e.right}}t.x=r,t.y=i}var hd={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;-1!==s&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,a){if(!e)return;const n=ho(e.options.layout.padding),r=Math.max(t-n.width,0),i=Math.max(s-n.height,0),l=function(e){const t=function(e){const t=[];let s,a,n,r,i,l;for(s=0,a=(e||[]).length;s<a;++s)n=e[s],({position:r,options:{stack:i,stackWeight:l=1}}=n),t.push({index:s,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:i&&r+i,stackWeight:l});return t}(e),s=ad(t.filter(e=>e.box.fullSize),!0),a=ad(td(t,"left"),!0),n=ad(td(t,"right")),r=ad(td(t,"top"),!0),i=ad(td(t,"bottom")),l=sd(t,"x"),o=sd(t,"y");return{fullSize:s,leftAndTop:a.concat(r),rightAndBottom:n.concat(o).concat(i).concat(l),chartArea:td(t,"chartArea"),vertical:a.concat(n).concat(o),horizontal:r.concat(i).concat(l)}}(e.boxes),o=l.vertical,c=l.horizontal;Ei(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=o.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:s,padding:n,availableWidth:r,availableHeight:i,vBoxMaxWidth:r/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},n);id(h,ho(a));const m=Object.assign({maxPadding:h,w:r,h:i,x:n.left,y:n.top},n),x=nd(o.concat(c),u);cd(l.fullSize,m,u,x),cd(o,m,u,x),cd(c,m,u,x)&&cd(o,m,u,x),function(e){const t=e.maxPadding;function s(s){const a=Math.max(t[s]-e[s],0);return e[s]+=a,a}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}(m),ud(l.leftAndTop,m,u,x),m.x+=m.w,m.y+=m.h,ud(l.rightAndBottom,m,u,x),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ei(l.chartArea,t=>{const s=t.box;Object.assign(s,e.chartArea),s.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class md{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,a){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):s)}}isAttached(e){return!0}updateConfig(e){}}class xd extends md{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const pd="$chartjs",gd={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fd=e=>null===e||""===e;const bd=!!Go&&{passive:!0};function yd(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,bd)}function vd(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function jd(e,t,s){const a=e.canvas,n=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||vd(s.addedNodes,a),t=t&&!vd(s.removedNodes,a);t&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function Nd(e,t,s){const a=e.canvas,n=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||vd(s.removedNodes,a),t=t&&!vd(s.addedNodes,a);t&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const wd=new Map;let kd=0;function Sd(){const e=window.devicePixelRatio;e!==kd&&(kd=e,wd.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function Cd(e,t,s){const a=e.canvas,n=a&&Fo(a);if(!n)return;const r=yl((e,t)=>{const a=n.clientWidth;s(e,t),a<n.clientWidth&&s()},window),i=new ResizeObserver(e=>{const t=e[0],s=t.contentRect.width,a=t.contentRect.height;0===s&&0===a||r(s,a)});return i.observe(n),function(e,t){wd.size||window.addEventListener("resize",Sd),wd.set(e,t)}(e,r),i}function _d(e,t,s){s&&s.disconnect(),"resize"===t&&function(e){wd.delete(e),wd.size||window.removeEventListener("resize",Sd)}(e)}function Ed(e,t,s){const a=e.canvas,n=yl(t=>{null!==e.ctx&&s(function(e,t){const s=gd[e.type]||e.type,{x:a,y:n}=Wo(e,t);return{type:s,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==n?n:null}}(t,e))},e);return function(e,t,s){e&&e.addEventListener(t,s,bd)}(a,t,n),n}class Md extends md{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(function(e,t){const s=e.style,a=e.getAttribute("height"),n=e.getAttribute("width");if(e[pd]={initial:{height:a,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",fd(n)){const t=Qo(e,"width");void 0!==t&&(e.width=t)}if(fd(a))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Qo(e,"height");void 0!==t&&(e.height=t)}}(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[pd])return!1;const s=t[pd].initial;["height","width"].forEach(e=>{const a=s[e];vi(a)?t.removeAttribute(e):t.setAttribute(e,a)});const a=s.style||{};return Object.keys(a).forEach(e=>{t.style[e]=a[e]}),t.width=t.width,delete t[pd],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),n={attach:jd,detach:Nd,resize:Cd}[t]||Ed;a[t]=n(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),a=s[t];if(!a)return;({attach:_d,detach:_d,resize:_d}[t]||yd)(e,t,a),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,a){return Vo(e,t,s,a)}isAttached(e){const t=e&&Fo(e);return!(!t||!t.isConnected)}}class Dd{constructor(){Oe(this,"x",void 0),Oe(this,"y",void 0),Oe(this,"active",!1),Oe(this,"options",void 0),Oe(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return el(this.x)&&el(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const a={};return e.forEach(e=>{a[e]=s[e]&&s[e].active()?s[e]._to:this[e]}),a}}function Pd(e,t){const s=e.options.ticks,a=function(e){const t=e.options.offset,s=e._tickSize(),a=e._length/s+(t?0:1),n=e._maxLength/s;return Math.floor(Math.min(a,n))}(e),n=Math.min(s.maxTicksLimit||a,a),r=s.major.enabled?function(e){const t=[];let s,a;for(s=0,a=e.length;s<a;s++)e[s].major&&t.push(s);return t}(t):[],i=r.length,l=r[0],o=r[i-1],c=[];if(i>n)return function(e,t,s,a){let n,r=0,i=s[0];for(a=Math.ceil(a),n=0;n<e.length;n++)n===i&&(t.push(e[n]),r++,i=s[r*a])}(t,c,r,i/n),c;const d=function(e,t,s){const a=function(e){const t=e.length;let s,a;if(t<2)return!1;for(a=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==a)return!1;return a}(e),n=t.length/s;if(!a)return Math.max(n,1);const r=function(e){const t=[],s=Math.sqrt(e);let a;for(a=1;a<s;a++)e%a===0&&(t.push(a),t.push(e/a));return s===(0|s)&&t.push(s),t.sort((e,t)=>e-t).pop(),t}(a);for(let i=0,l=r.length-1;i<l;i++){const e=r[i];if(e>n)return e}return Math.max(n,1)}(r,t,n);if(i>0){let e,s;const a=i>1?Math.round((o-l)/(i-1)):null;for(Ad(t,c,d,vi(a)?0:l-a,l),e=0,s=i-1;e<s;e++)Ad(t,c,d,r[e],r[e+1]);return Ad(t,c,d,o,vi(a)?t.length:o+a),c}return Ad(t,c,d),c}function Ad(e,t,s,a,n){const r=Si(a,0),i=Math.min(Si(n,e.length),e.length);let l,o,c,d=0;for(s=Math.ceil(s),n&&(l=n-a,s=l/Math.floor(l/s)),c=r;c<0;)d++,c=Math.round(r+d*s);for(o=Math.max(r,0);o<i;o++)o===c&&(t.push(e[o]),d++,c=Math.round(r+d*s))}Oe(Dd,"defaults",{}),Oe(Dd,"defaultRoutes",void 0);const Td=(e,t,s)=>"top"===t||"left"===t?e[t]+s:e[t]-s,Id=(e,t)=>Math.min(t||e,e);function Od(e,t){const s=[],a=e.length/t,n=e.length;let r=0;for(;r<n;r+=a)s.push(e[Math.floor(r)]);return s}function Rd(e,t,s){const a=e.ticks.length,n=Math.min(t,a-1),r=e._startPixel,i=e._endPixel,l=1e-6;let o,c=e.getPixelForTick(n);if(!(s&&(o=1===a?Math.max(c-r,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(n-1))/2,c+=n<t?o:-o,c<r-l||c>i+l)))return c}function Ld(e){return e.drawTicks?e.tickLength:0}function Fd(e,t){if(!e.display)return 0;const s=mo(e.font,t),a=ho(e.padding);return(ji(e.text)?e.text.length:1)*s.lineHeight+a.height}function zd(e,t,s){let a=vl(e);return(s&&"right"!==t||!s&&"right"===t)&&(a=(e=>"left"===e?"right":"right"===e?"left":e)(a)),a}class qd extends Dd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:a}=this;return e=ki(e,Number.POSITIVE_INFINITY),t=ki(t,Number.NEGATIVE_INFINITY),s=ki(s,Number.POSITIVE_INFINITY),a=ki(a,Number.NEGATIVE_INFINITY),{min:ki(e,s),max:ki(t,a),minDefined:wi(e),maxDefined:wi(t)}}getMinMax(e){let t,{min:s,max:a,minDefined:n,maxDefined:r}=this.getUserBounds();if(n&&r)return{min:s,max:a};const i=this.getMatchingVisibleMetas();for(let l=0,o=i.length;l<o;++l)t=i[l].controller.getMinMax(this,e),n||(s=Math.min(s,t.min)),r||(a=Math.max(a,t.max));return s=r&&s>a?a:s,a=n&&s>a?s:a,{min:ki(s,ki(a,s)),max:ki(a,ki(s,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_i(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:a,grace:n,ticks:r}=this.options,i=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,s){const{min:a,max:n}=e,r=Ci(t,(n-a)/2),i=(e,t)=>s&&0===e?0:e+t;return{min:i(a,-Math.abs(r)),max:i(n,r)}}(this,n,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=i<this.ticks.length;this._convertTicksToLabels(l?Od(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Pd(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,s=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,s=!s),this._startPixel=e,this._endPixel=t,this._reversePixels=s,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_i(this.options.afterUpdate,[this])}beforeSetDimensions(){_i(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_i(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),_i(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_i(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,a,n;for(s=0,a=e.length;s<a;s++)n=e[s],n.label=_i(t.callback,[n.value,s,e],this)}afterTickToLabelConversion(){_i(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_i(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Id(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,n=t.maxRotation;let r,i,l,o=a;if(!this._isVisible()||!t.display||a>=n||s<=1||!this.isHorizontal())return void(this.labelRotation=a);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=dl(this.chart.width-d,0,this.maxWidth);r=e.offset?this.maxWidth/s:h/(s-1),d+6>r&&(r=h/(s-(e.offset?.5:1)),i=this.maxHeight-Ld(e.grid)-t.padding-Fd(e.title,this.chart.options.font),l=Math.sqrt(d*d+u*u),o=al(Math.min(Math.asin(dl((c.highest.height+6)/r,-1,1)),Math.asin(dl(i/l,-1,1))-Math.asin(dl(u/l,-1,1)))),o=Math.max(a,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){_i(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_i(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:a,grid:n}}=this,r=this._isVisible(),i=this.isHorizontal();if(r){const r=Fd(a,t.options.font);if(i?(e.width=this.maxWidth,e.height=Ld(n)+r):(e.height=this.maxHeight,e.width=Ld(n)+r),s.display&&this.ticks.length){const{first:t,last:a,widest:n,highest:r}=this._getLabelSizes(),l=2*s.padding,o=sl(this.labelRotation),c=Math.cos(o),d=Math.sin(o);if(i){const t=s.mirror?0:d*n.width+c*r.height;e.height=Math.min(this.maxHeight,e.height+t+l)}else{const t=s.mirror?0:c*n.width+d*r.height;e.width=Math.min(this.maxWidth,e.width+t+l)}this._calculatePadding(t,a,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,a){const{ticks:{align:n,padding:r},position:i}=this.options,l=0!==this.labelRotation,o="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;l?o?(d=a*e.width,u=s*t.height):(d=s*e.height,u=a*t.width):"start"===n?u=t.width:"end"===n?d=e.width:"inner"!==n&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+r)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let s=t.height/2,a=e.height/2;"start"===n?(s=0,a=e.height):"end"===n&&(s=t.height,a=0),this.paddingTop=s+r,this.paddingBottom=a+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_i(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,s=e.length;t<s;t++)vi(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=Od(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:a,_longestTextCache:n}=this,r=[],i=[],l=Math.floor(t/Id(t,s));let o,c,d,u,h,m,x,p,g,f,b,y=0,v=0;for(o=0;o<t;o+=l){if(u=e[o].label,h=this._resolveTickFontOptions(o),a.font=m=h.string,x=n[m]=n[m]||{data:{},gc:[]},p=h.lineHeight,g=f=0,vi(u)||ji(u)){if(ji(u))for(c=0,d=u.length;c<d;++c)b=u[c],vi(b)||ji(b)||(g=Wl(a,x.data,x.gc,g,b),f+=p)}else g=Wl(a,x.data,x.gc,g,u),f=p;r.push(g),i.push(f),y=Math.max(g,y),v=Math.max(f,v)}!function(e,t){Ei(e,e=>{const s=e.gc,a=s.length/2;let n;if(a>t){for(n=0;n<a;++n)delete e.data[s[n]];s.splice(0,a)}})}(n,t);const j=r.indexOf(y),N=i.indexOf(v),w=e=>({width:r[e]||0,height:i[e]||0});return{first:w(0),last:w(t-1),widest:w(j),highest:w(N),widths:r,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return dl(this._alignToPixels?Vl(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=function(e,t,s){return po(e,{tick:s,index:t,type:"tick"})}(this.getContext(),e,s))}return this.$context||(this.$context=po(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=sl(this.labelRotation),s=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),n=this._getLabelSizes(),r=e.autoSkipPadding||0,i=n?n.widest.width+r:0,l=n?n.highest.height+r:0;return this.isHorizontal()?l*s>i*a?i/s:l/a:l*a<i*s?l/s:i/a}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,a=this.options,{grid:n,position:r,border:i}=a,l=n.offset,o=this.isHorizontal(),c=this.ticks.length+(l?1:0),d=Ld(n),u=[],h=i.setContext(this.getContext()),m=h.display?h.width:0,x=m/2,p=function(e){return Vl(s,e,m)};let g,f,b,y,v,j,N,w,k,S,C,_;if("top"===r)g=p(this.bottom),j=this.bottom-d,w=g-x,S=p(e.top)+x,_=e.bottom;else if("bottom"===r)g=p(this.top),S=e.top,_=p(e.bottom)-x,j=g+x,w=this.top+d;else if("left"===r)g=p(this.right),v=this.right-d,N=g-x,k=p(e.left)+x,C=e.right;else if("right"===r)g=p(this.left),k=e.left,C=p(e.right)-x,v=g+x,N=this.left+d;else if("x"===t){if("center"===r)g=p((e.top+e.bottom)/2+.5);else if(Ni(r)){const e=Object.keys(r)[0],t=r[e];g=p(this.chart.scales[e].getPixelForValue(t))}S=e.top,_=e.bottom,j=g+x,w=j+d}else if("y"===t){if("center"===r)g=p((e.left+e.right)/2);else if(Ni(r)){const e=Object.keys(r)[0],t=r[e];g=p(this.chart.scales[e].getPixelForValue(t))}v=g-x,N=v-d,k=e.left,C=e.right}const E=Si(a.ticks.maxTicksLimit,c),M=Math.max(1,Math.ceil(c/E));for(f=0;f<c;f+=M){const e=this.getContext(f),t=n.setContext(e),a=i.setContext(e),r=t.lineWidth,c=t.color,d=a.dash||[],h=a.dashOffset,m=t.tickWidth,x=t.tickColor,p=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=Rd(this,f,l),void 0!==b&&(y=Vl(s,b,r),o?v=N=k=C=y:j=w=S=_=y,u.push({tx1:v,ty1:j,tx2:N,ty2:w,x1:k,y1:S,x2:C,y2:_,width:r,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:x,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,s=this.options,{position:a,ticks:n}=s,r=this.isHorizontal(),i=this.ticks,{align:l,crossAlign:o,padding:c,mirror:d}=n,u=Ld(s.grid),h=u+c,m=d?-c:h,x=-sl(this.labelRotation),p=[];let g,f,b,y,v,j,N,w,k,S,C,_,E="middle";if("top"===a)j=this.bottom-m,N=this._getXAxisLabelAlignment();else if("bottom"===a)j=this.top+m,N=this._getXAxisLabelAlignment();else if("left"===a){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("right"===a){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("x"===t){if("center"===a)j=(e.top+e.bottom)/2+h;else if(Ni(a)){const e=Object.keys(a)[0],t=a[e];j=this.chart.scales[e].getPixelForValue(t)+h}N=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===a)v=(e.left+e.right)/2-h;else if(Ni(a)){const e=Object.keys(a)[0],t=a[e];v=this.chart.scales[e].getPixelForValue(t)}N=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===l?E="top":"end"===l&&(E="bottom"));const M=this._getLabelSizes();for(g=0,f=i.length;g<f;++g){b=i[g],y=b.label;const e=n.setContext(this.getContext(g));w=this.getPixelForTick(g)+n.labelOffset,k=this._resolveTickFontOptions(g),S=k.lineHeight,C=ji(y)?y.length:1;const t=C/2,s=e.color,l=e.textStrokeColor,c=e.textStrokeWidth;let u,h=N;if(r?(v=w,"inner"===N&&(h=g===f-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),_="top"===a?"near"===o||0!==x?-C*S+S/2:"center"===o?-M.highest.height/2-t*S+S:-M.highest.height+S/2:"near"===o||0!==x?S/2:"center"===o?M.highest.height/2-t*S:M.highest.height-C*S,d&&(_*=-1),0===x||e.showLabelBackdrop||(v+=S/2*Math.sin(x))):(j=w,_=(1-C)*S/2),e.showLabelBackdrop){const t=ho(e.backdropPadding),s=M.heights[g],a=M.widths[g];let n=_-t.top,r=0-t.left;switch(E){case"middle":n-=s/2;break;case"bottom":n-=s}switch(N){case"center":r-=a/2;break;case"right":r-=a;break;case"inner":g===f-1?r-=a:g>0&&(r-=a/2)}u={left:r,top:n,width:a+t.width,height:s+t.height,color:e.backdropColor}}p.push({label:y,font:k,textOffset:_,options:{rotation:x,color:s,strokeColor:l,strokeWidth:c,textAlign:h,textBaseline:E,translation:[v,j],backdrop:u}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-sl(this.labelRotation))return"top"===e?"left":"right";let s="center";return"start"===t.align?s="left":"end"===t.align?s="right":"inner"===t.align&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:a,padding:n}}=this.options,r=e+n,i=this._getLabelSizes().widest.width;let l,o;return"left"===t?a?(o=this.right+n,"near"===s?l="left":"center"===s?(l="center",o+=i/2):(l="right",o+=i)):(o=this.right-r,"near"===s?l="right":"center"===s?(l="center",o-=i/2):(l="left",o=this.left)):"right"===t?a?(o=this.left+n,"near"===s?l="right":"center"===s?(l="center",o-=i/2):(l="left",o-=i)):(o=this.left+r,"near"===s?l="left":"center"===s?(l="center",o+=i/2):(l="right",o=this.right)):l="right",{textAlign:l,x:o}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:a,width:n,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,a,n,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(t=>t.value===e);if(s>=0){return t.setContext(this.getContext(s)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,r;const i=(e,t,a)=>{a.width&&a.color&&(s.save(),s.lineWidth=a.width,s.strokeStyle=a.color,s.setLineDash(a.borderDash||[]),s.lineDashOffset=a.borderDashOffset,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke(),s.restore())};if(t.display)for(n=0,r=a.length;n<r;++n){const e=a[n];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:a}}=this,n=s.setContext(this.getContext()),r=s.display?n.width:0;if(!r)return;const i=a.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let o,c,d,u;this.isHorizontal()?(o=Vl(e,this.left,r)-r/2,c=Vl(e,this.right,i)+i/2,d=u=l):(d=Vl(e,this.top,r)-r/2,u=Vl(e,this.bottom,i)+i/2,o=c=l),t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.beginPath(),t.moveTo(o,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&Kl(t,s);const a=this.getLabelItems(e);for(const n of a){const e=n.options,s=n.font;so(t,n.label,0,n.textOffset,s,e)}s&&Jl(t)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:a}}=this;if(!s.display)return;const n=mo(s.font),r=ho(s.padding),i=s.align;let l=n.lineHeight/2;"bottom"===t||"center"===t||Ni(t)?(l+=r.bottom,ji(s.text)&&(l+=n.lineHeight*(s.text.length-1))):l+=r.top;const{titleX:o,titleY:c,maxWidth:d,rotation:u}=function(e,t,s,a){const{top:n,left:r,bottom:i,right:l,chart:o}=e,{chartArea:c,scales:d}=o;let u,h,m,x=0;const p=i-n,g=l-r;if(e.isHorizontal()){if(h=jl(a,r,l),Ni(s)){const e=Object.keys(s)[0],a=s[e];m=d[e].getPixelForValue(a)+p-t}else m="center"===s?(c.bottom+c.top)/2+p-t:Td(e,s,t);u=l-r}else{if(Ni(s)){const e=Object.keys(s)[0],a=s[e];h=d[e].getPixelForValue(a)-g+t}else h="center"===s?(c.left+c.right)/2-g+t:Td(e,s,t);m=jl(a,i,n),x="left"===s?-Gi:Gi}return{titleX:h,titleY:m,maxWidth:u,rotation:x}}(this,l,t,i);so(e,s.text,0,0,n,{color:s.color,maxWidth:d,rotation:u,textAlign:zd(i,t,a),textBaseline:"middle",translation:[o,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=Si(e.grid&&e.grid.z,-1),a=Si(e.border&&e.border.z,0);return this._isVisible()&&this.draw===qd.prototype.draw?[{z:s,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let n,r;for(n=0,r=t.length;n<r;++n){const r=t[n];r[s]!==this.id||e&&r.type!==e||a.push(r)}return a}_resolveTickFontOptions(e){return mo(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bd{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;(function(e){return"id"in e&&"defaults"in e})(t)&&(s=this.register(t));const a=this.items,n=e.id,r=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in a||(a[n]=e,function(e,t,s){const a=Ti(Object.create(null),[s?Ul.get(s):{},Ul.get(t),e.defaults]);Ul.set(t,a),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(s=>{const a=s.split("."),n=a.pop(),r=[e].concat(a).join("."),i=t[s].split("."),l=i.pop(),o=i.join(".");Ul.route(r,n,o,l)})}(t,e.defaultRoutes);e.descriptors&&Ul.describe(t,e.descriptors)}(e,r,s),this.override&&Ul.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,a=this.scope;s in t&&delete t[s],a&&s in Ul[a]&&(delete Ul[a][s],this.override&&delete Ll[s])}}class Ud{constructor(){this.controllers=new Bd(_c,"datasets",!0),this.elements=new Bd(Dd,"elements"),this.plugins=new Bd(Object,"plugins"),this.scales=new Bd(qd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.scales)}_each(e,t,s){[...t].forEach(t=>{const a=s||this._getRegistryForType(t);s||a.isForType(t)||a===this.plugins&&t.id?this._exec(e,a,t):Ei(t,t=>{const a=s||this._getRegistryForType(t);this._exec(e,a,t)})})}_exec(e,t,s){const a=Fi(e);_i(s["before"+a],[],s),t[e](s),_i(s["after"+a],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const a=t.get(e);if(void 0===a)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var Wd=new Ud;class Hd{constructor(){this._init=[]}notify(e,t,s,a){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=a?this._descriptors(e).filter(a):this._descriptors(e),r=this._notify(n,e,t,s);return"afterDestroy"===t&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,s,a){a=a||{};for(const n of e){const e=n.plugin;if(!1===_i(e[s],[t,a,n.options],e)&&a.cancelable)return!1}return!0}invalidate(){vi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,a=Si(s.options&&s.options.plugins,{}),n=function(e){const t={},s=[],a=Object.keys(Wd.plugins.items);for(let r=0;r<a.length;r++)s.push(Wd.getPlugin(a[r]));const n=e.plugins||[];for(let r=0;r<n.length;r++){const e=n[r];-1===s.indexOf(e)&&(s.push(e),t[e.id]=!0)}return{plugins:s,localIds:t}}(s);return!1!==a||t?function(e,t,s,a){let{plugins:n,localIds:r}=t;const i=[],l=e.getContext();for(const o of n){const t=o.id,n=Vd(s[t],a);null!==n&&i.push({plugin:o,options:Yd(e.config,{plugin:o,local:r[t]},n,l)})}return i}(e,n,a,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,a=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(a(t,s),e,"stop"),this._notify(a(s,t),e,"start")}}function Vd(e,t){return t||!1!==e?!0===e?{}:e:null}function Yd(e,t,s,a){let{plugin:n,local:r}=t;const i=e.pluginScopeKeys(n),l=e.getOptionScopes(s,i);return r&&n.defaults&&l.push(n.defaults),e.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gd(e,t){const s=Ul.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function Qd(e){if("x"===e||"y"===e||"r"===e)return e}function $d(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Kd(e){if(Qd(e))return e;for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];for(const n of s){const t=n.axis||$d(n.position)||e.length>1&&Qd(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Jd(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function Xd(e,t){const s=Ll[e.type]||{scales:{}},a=t.scales||{},n=Gd(e.type,t),r=Object.create(null);return Object.keys(a).forEach(t=>{const i=a[t];if(!Ni(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const l=Kd(t,i,function(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(s.length)return Jd(e,"x",s[0])||Jd(e,"y",s[0])}return{}}(t,e),Ul.scales[i.type]),o=function(e,t){return e===t?"_index_":"_value_"}(l,n),c=s.scales||{};r[t]=Ii(Object.create(null),[{axis:l},i,c[l],c[o]])}),e.data.datasets.forEach(s=>{const n=s.type||e.type,i=s.indexAxis||Gd(n,t),l=(Ll[n]||{}).scales||{};Object.keys(l).forEach(e=>{const t=function(e,t){let s=e;return"_index_"===e?s=t:"_value_"===e&&(s="x"===t?"y":"x"),s}(e,i),n=s[t+"AxisID"]||t;r[n]=r[n]||Object.create(null),Ii(r[n],[{axis:t},a[n],l[e]])})}),Object.keys(r).forEach(e=>{const t=r[e];Ii(t,[Ul.scales[t.type],Ul.scale])}),r}function Zd(e){const t=e.options||(e.options={});t.plugins=Si(t.plugins,{}),t.scales=Xd(e,t)}function eu(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const tu=new Map,su=new Set;function au(e,t){let s=tu.get(e);return s||(s=t(),tu.set(e,s),su.add(s)),s}const nu=(e,t,s)=>{const a=Li(t,s);void 0!==a&&e.add(a)};class ru{constructor(e){this._config=function(e){return(e=e||{}).data=eu(e.data),Zd(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=eu(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Zd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return au(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return au("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return au("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return au("".concat(s,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let a=s.get(e);return a&&!t||(a=new Map,s.set(e,a)),a}getOptionScopes(e,t,s){const{options:a,type:n}=this,r=this._cachedScopes(e,s),i=r.get(t);if(i)return i;const l=new Set;t.forEach(t=>{e&&(l.add(e),t.forEach(t=>nu(l,e,t))),t.forEach(e=>nu(l,a,e)),t.forEach(e=>nu(l,Ll[n]||{},e)),t.forEach(e=>nu(l,Ul,e)),t.forEach(e=>nu(l,Fl,e))});const o=Array.from(l);return 0===o.length&&o.push(Object.create(null)),su.has(t)&&r.set(t,o),o}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ll[t]||{},Ul.datasets[t]||{},{type:t},Ul,Fl]}resolveNamedOptions(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const n={$shared:!0},{resolver:r,subPrefixes:i}=iu(this._resolverCache,e,a);let l=r;if(function(e,t){const{isScriptable:s,isIndexable:a}=bo(e);for(const n of t){const t=s(n),r=a(n),i=(r||t)&&e[n];if(t&&(qi(i)||lu(i))||r&&ji(i))return!0}return!1}(r,t)){n.$shared=!1;l=fo(r,s=qi(s)?s():s,this.createResolver(e,s,i))}for(const o of t)n[o]=l[o];return n}createResolver(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],a=arguments.length>3?arguments[3]:void 0;const{resolver:n}=iu(this._resolverCache,e,s);return Ni(t)?fo(n,t,void 0,a):n}}function iu(e,t,s){let a=e.get(t);a||(a=new Map,e.set(t,a));const n=s.join();let r=a.get(n);if(!r){r={resolver:go(t,s),subPrefixes:s.filter(e=>!e.toLowerCase().includes("hover"))},a.set(n,r)}return r}const lu=e=>Ni(e)&&Object.getOwnPropertyNames(e).some(t=>qi(e[t]));const ou=["top","bottom","left","right","chartArea"];function cu(e,t){return"top"===e||"bottom"===e||-1===ou.indexOf(e)&&"x"===t}function du(e,t){return function(s,a){return s[e]===a[e]?s[t]-a[t]:s[e]-a[e]}}function uu(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),_i(s&&s.onComplete,[e],t)}function hu(e){const t=e.chart,s=t.options.animation;_i(s&&s.onProgress,[e],t)}function mu(e){return Lo()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const xu={},pu=e=>{const t=mu(e);return Object.values(xu).filter(e=>e.canvas===t).pop()};function gu(e,t,s){const a=Object.keys(e);for(const n of a){const a=+n;if(a>=t){const r=e[n];delete e[n],(s>0||a>t)&&(e[a+s]=r)}}}class fu{static register(){Wd.add(...arguments),bu()}static unregister(){Wd.remove(...arguments),bu()}constructor(e,t){const s=this.config=new ru(t),a=mu(e),n=pu(a);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const r=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||function(e){return!Lo()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?xd:Md}(a)),this.platform.updateConfig(s);const i=this.platform.acquireContext(a,r.aspectRatio),l=i&&i.canvas,o=l&&l.height,c=l&&l.width;this.id=yi(),this.ctx=i,this.canvas=l,this.width=c,this.height=o,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hd,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let s;return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}(e=>this.update(e),r.resizeDelay||0),this._dataChanges=[],xu[this.id]=this,i&&l?(uc.listen(this,"complete",uu),uc.listen(this,"progress",hu),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:a,_aspectRatio:n}=this;return vi(e)?t&&n?n:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Wd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Yo(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Yl(this.canvas,this.ctx),this}stop(){return uc.stop(this),this}resize(e,t){uc.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,a=this.canvas,n=s.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(a,e,t,n),i=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Yo(this,i,!0)&&(this.notifyPlugins("resize",{size:r}),_i(s.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){Ei(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,a=Object.keys(s).reduce((e,t)=>(e[t]=!1,e),{});let n=[];t&&(n=n.concat(Object.keys(t).map(e=>{const s=t[e],a=Kd(e,s),n="r"===a,r="x"===a;return{options:s,dposition:n?"chartArea":r?"bottom":"left",dtype:n?"radialLinear":r?"category":"linear"}}))),Ei(n,t=>{const n=t.options,r=n.id,i=Kd(r,n),l=Si(n.type,t.dtype);void 0!==n.position&&cu(n.position,i)===cu(t.dposition)||(n.position=t.dposition),a[r]=!0;let o=null;if(r in s&&s[r].type===l)o=s[r];else{o=new(Wd.getScale(l))({id:r,type:l,ctx:this.ctx,chart:this}),s[o.id]=o}o.init(n,e)}),Ei(a,(e,t)=>{e||delete s[t]}),Ei(s,e=>{hd.configure(this,e,e.options),hd.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((e,t)=>e.index-t.index),s>t){for(let e=t;e<s;++e)this._destroyDatasetMeta(e);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(du("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,s)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=t.length;s<a;s++){const a=t[s];let n=this.getDatasetMeta(s);const r=a.type||this.config.type;if(n.type&&n.type!==r&&(this._destroyDatasetMeta(s),n=this.getDatasetMeta(s)),n.type=r,n.indexAxis=a.indexAxis||Gd(r,this.options),n.order=a.order||0,n.index=s,n.label=""+a.label,n.visible=this.isDatasetVisible(s),n.controller)n.controller.updateIndex(s),n.controller.linkScales();else{const t=Wd.getController(r),{datasetElementType:a,dataElementType:i}=Ul.datasets[r];Object.assign(t,{dataElementType:Wd.getElement(i),datasetElementType:a&&Wd.getElement(a)}),n.controller=new t(this,s),e.push(n.controller)}}return this._updateMetasets(),e}_resetElements(){Ei(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let o=0,c=this.data.datasets.length;o<c;o++){const{controller:e}=this.getDatasetMeta(o),t=!a&&-1===n.indexOf(e);e.buildOrUpdateElements(t),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=s.layout.autoPadding?r:0,this._updateLayout(r),a||Ei(n,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(du("z","_idx"));const{_active:i,_lastEvent:l}=this;l?this._eventHandler(l,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){Ei(this.scales,e=>{hd.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);Bi(t,s)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:n}of t){gu(e,a,"_removeElements"===s?-n:n)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),a=s(0);for(let n=1;n<t;n++)if(!Bi(a,s(n)))return;return Array.from(a).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;hd.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],Ei(this.boxes,e=>{s&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,qi(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",a)&&(s.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(uc.has(this)?this.attached&&!uc.running(this)&&uc.start(this):(this.draw(),uu({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let a,n;for(a=0,n=t.length;a<n;++a){const n=t[a];e&&!n.visible||s.push(n)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=cc(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(a&&Kl(t,a),e.controller.draw(),a&&Jl(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return $l(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,a){const n=Zc.modes[t];return"function"===typeof n?n(this,e,s,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let a=s.filter(e=>e&&e._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=po(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return"boolean"===typeof s.hidden?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const a=s?"show":"hide",n=this.getDatasetMeta(e),r=n.controller._resolveAnimations(void 0,a);zi(t)?(n.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),r.update(n,{visible:s}),this.update(t=>t.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),uc.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Yl(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete xu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},a=(e,t,s)=>{e.offsetX=t,e.offsetY=s,this._eventHandler(e)};Ei(this.options.events,e=>s(e,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},a=(s,a)=>{e[s]&&(t.removeEventListener(this,s,a),delete e[s])},n=(e,t)=>{this.canvas&&this.resize(e,t)};let r;const i=()=>{a("attach",i),this.attached=!0,this.resize(),s("resize",n),s("detach",r)};r=()=>{this.attached=!1,a("resize",n),this._stop(),this._resize(0,0),s("attach",i)},t.isAttached(this.canvas)?i():r()}unbindEvents(){Ei(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ei(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const a=s?"set":"remove";let n,r,i,l;for("dataset"===t&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+a+"DatasetHoverStyle"]()),i=0,l=e.length;i<l;++i){r=e[i];const t=r&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[a+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(e=>{let{datasetIndex:t,index:s}=e;const a=this.getDatasetMeta(t);if(!a)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:a.data[s],index:s}});!Mi(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,s){const a=this.options.hover,n=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),r=n(t,e),i=s?e:n(e,t);r.length&&this.updateHoverStyle(r,a.mode,!1),i.length&&a.mode&&this.updateHoverStyle(i,a.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",s,a))return;const n=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(n||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:a=[],options:n}=this,r=t,i=this._getActiveElements(e,a,s,r),l=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),o=function(e,t,s,a){return s&&"mouseout"!==e.type?a?t:e:null}(e,this._lastEvent,s,l);s&&(this._lastEvent=null,_i(n.onHover,[e,i,this],this),l&&_i(n.onClick,[e,i,this],this));const c=!Mi(i,a);return(c||t)&&(this._active=i,this._updateHoverStyles(i,a,t)),this._lastEvent=o,c}_getActiveElements(e,t,s,a){if("mouseout"===e.type)return[];if(!s)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,a)}}function bu(){return Ei(fu.instances,e=>e._plugins.invalidate())}function yu(e,t,s,a){const n=oo(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const r=(s-t)/2,i=Math.min(r,a*t/2),l=e=>{const t=(s-Math.min(r,e))*a/2;return dl(e,0,Math.min(r,t))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:dl(n.innerStart,0,i),innerEnd:dl(n.innerEnd,0,i)}}function vu(e,t,s,a){return{x:s+e*Math.cos(t),y:a+e*Math.sin(t)}}function ju(e,t,s,a,n,r){const{x:i,y:l,startAngle:o,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+a+s-c,0),h=d>0?d+a+s+c:0;let m=0;const x=n-o;if(a){const e=((d>0?d-a:0)+(u>0?u-a:0))/2;m=(x-(0!==e?x*e/(e+a):x))/2}const p=(x-Math.max(.001,x*u-s/Ui)/u)/2,g=o+p+m,f=n-p-m,{outerStart:b,outerEnd:y,innerStart:v,innerEnd:j}=yu(t,h,u,f-g),N=u-b,w=u-y,k=g+b/N,S=f-y/w,C=h+v,_=h+j,E=g+v/C,M=f-j/_;if(e.beginPath(),r){const t=(k+S)/2;if(e.arc(i,l,u,k,t),e.arc(i,l,u,t,S),y>0){const t=vu(w,S,i,l);e.arc(t.x,t.y,y,S,f+Gi)}const s=vu(_,f,i,l);if(e.lineTo(s.x,s.y),j>0){const t=vu(_,M,i,l);e.arc(t.x,t.y,j,f+Gi,M+Math.PI)}const a=(f-j/h+(g+v/h))/2;if(e.arc(i,l,h,f-j/h,a,!0),e.arc(i,l,h,a,g+v/h,!0),v>0){const t=vu(C,E,i,l);e.arc(t.x,t.y,v,E+Math.PI,g-Gi)}const n=vu(N,g,i,l);if(e.lineTo(n.x,n.y),b>0){const t=vu(N,k,i,l);e.arc(t.x,t.y,b,g-Gi,k)}}else{e.moveTo(i,l);const t=Math.cos(k)*u+i,s=Math.sin(k)*u+l;e.lineTo(t,s);const a=Math.cos(S)*u+i,n=Math.sin(S)*u+l;e.lineTo(a,n)}e.closePath()}function Nu(e,t,s,a,n){const{fullCircles:r,startAngle:i,circumference:l,options:o}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:m}=o,x="inner"===o.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,x?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let p=t.endAngle;if(r){ju(e,t,s,a,p,n);for(let t=0;t<r;++t)e.stroke();isNaN(l)||(p=i+(l%Wi||Wi))}x&&function(e,t,s){const{startAngle:a,pixelMargin:n,x:r,y:i,outerRadius:l,innerRadius:o}=t;let c=n/l;e.beginPath(),e.arc(r,i,l,a-c,s+c),o>n?(c=n/o,e.arc(r,i,o,s+c,a-c,!0)):e.arc(r,i,n,s+Gi,a-Gi),e.closePath(),e.clip()}(e,t,p),o.selfJoin&&p-i>=Ui&&0===m&&"miter"!==d&&function(e,t,s){const{startAngle:a,x:n,y:r,outerRadius:i,innerRadius:l,options:o}=t,{borderWidth:c,borderJoinStyle:d}=o,u=Math.min(c/i,ol(a-s));if(e.beginPath(),e.arc(n,r,i-c/2,a+u/2,s-u/2),l>0){const t=Math.min(c/l,ol(a-s));e.arc(n,r,l+c/2,s-t/2,a+t/2,!0)}else{const t=Math.min(c/2,i*ol(a-s));if("round"===d)e.arc(n,r,t,s-Ui/2,a+Ui/2,!0);else if("bevel"===d){const i=2*t*t,l=-i*Math.cos(s+Ui/2)+n,o=-i*Math.sin(s+Ui/2)+r,c=i*Math.cos(a+Ui/2)+n,d=i*Math.sin(a+Ui/2)+r;e.lineTo(l,o),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,p),r||(ju(e,t,s,a,p,n),e.stroke())}Oe(fu,"defaults",Ul),Oe(fu,"instances",xu),Oe(fu,"overrides",Ll),Oe(fu,"registry",Wd),Oe(fu,"version","4.5.0"),Oe(fu,"getChart",pu);class wu extends Dd{constructor(e){super(),Oe(this,"circumference",void 0),Oe(this,"endAngle",void 0),Oe(this,"fullCircles",void 0),Oe(this,"innerRadius",void 0),Oe(this,"outerRadius",void 0),Oe(this,"pixelMargin",void 0),Oe(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const a=this.getProps(["x","y"],s),{angle:n,distance:r}=rl(a,{x:e,y:t}),{startAngle:i,endAngle:l,innerRadius:o,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),u=(this.options.spacing+this.options.borderWidth)/2,h=Si(d,l-i),m=cl(n,i,l)&&i!==l,x=h>=Wi||m,p=ul(r,o+u,c+u);return x&&p}getCenterPoint(e){const{x:t,y:s,startAngle:a,endAngle:n,innerRadius:r,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:o}=this.options,c=(a+n)/2,d=(r+i+o+l)/2;return{x:t+Math.cos(c)*d,y:s+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,a=(t.offset||0)/4,n=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=s>Wi?Math.floor(s/Wi):0,0===s||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*a,Math.sin(i)*a);const l=a*(1-Math.sin(Math.min(Ui,s||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,s,a,n){const{fullCircles:r,startAngle:i,circumference:l}=t;let o=t.endAngle;if(r){ju(e,t,s,a,o,n);for(let t=0;t<r;++t)e.fill();isNaN(l)||(o=i+(l%Wi||Wi))}ju(e,t,s,a,o,n),e.fill()}(e,this,l,n,r),Nu(e,this,l,n,r),e.restore()}}function ku(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Si(s.borderCapStyle,t.borderCapStyle),e.setLineDash(Si(s.borderDash,t.borderDash)),e.lineDashOffset=Si(s.borderDashOffset,t.borderDashOffset),e.lineJoin=Si(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Si(s.borderWidth,t.borderWidth),e.strokeStyle=Si(s.borderColor,t.borderColor)}function Su(e,t,s){e.lineTo(s.x,s.y)}function Cu(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length,{start:n=0,end:r=a-1}=s,{start:i,end:l}=t,o=Math.max(n,i),c=Math.min(r,l),d=n<i&&r<i||n>l&&r>l;return{count:a,start:o,loop:t.loop,ilen:c<o&&!d?a+c-o:c-o}}function _u(e,t,s,a){const{points:n,options:r}=t,{count:i,start:l,loop:o,ilen:c}=Cu(n,s,a),d=function(e){return e.stepped?Xl:e.tension||"monotone"===e.cubicInterpolationMode?Zl:Su}(r);let u,h,m,{move:x=!0,reverse:p}=a||{};for(u=0;u<=c;++u)h=n[(l+(p?c-u:u))%i],h.skip||(x?(e.moveTo(h.x,h.y),x=!1):d(e,m,h,p,r.stepped),m=h);return o&&(h=n[(l+(p?c:0))%i],d(e,m,h,p,r.stepped)),!!o}function Eu(e,t,s,a){const n=t.points,{count:r,start:i,ilen:l}=Cu(n,s,a),{move:o=!0,reverse:c}=a||{};let d,u,h,m,x,p,g=0,f=0;const b=e=>(i+(c?l-e:e))%r,y=()=>{m!==x&&(e.lineTo(g,x),e.lineTo(g,m),e.lineTo(g,p))};for(o&&(u=n[b(0)],e.moveTo(u.x,u.y)),d=0;d<=l;++d){if(u=n[b(d)],u.skip)continue;const t=u.x,s=u.y,a=0|t;a===h?(s<m?m=s:s>x&&(x=s),g=(f*g+t)/++f):(y(),e.lineTo(t,s),h=a,f=0,m=x=s),p=s}y()}function Mu(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!s?Eu:_u}Oe(wu,"id","arc"),Oe(wu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Oe(wu,"defaultRoutes",{backgroundColor:"backgroundColor"}),Oe(wu,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Du="function"===typeof Path2D;function Pu(e,t,s,a){Du&&!t.options.segment?function(e,t,s,a){let n=t._path;n||(n=t._path=new Path2D,t.path(n,s,a)&&n.closePath()),ku(e,t.options),e.stroke(n)}(e,t,s,a):function(e,t,s,a){const{segments:n,options:r}=t,i=Mu(t);for(const l of n)ku(e,r,l.style),e.beginPath(),i(e,t,l,{start:s,end:s+a-1})&&e.closePath(),e.stroke()}(e,t,s,a)}class Au extends Dd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||"monotone"===s.cubicInterpolationMode)&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;Ro(this._points,s,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const s=e.points,a=e.options.spanGaps,n=s.length;if(!n)return[];const r=!!e._loop,{start:i,end:l}=function(e,t,s,a){let n=0,r=t-1;if(s&&!a)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,s&&(r+=n);r>n&&e[r%t].skip;)r--;return r%=t,{start:n,end:r}}(s,n,r,a);return rc(e,!0===a?[{start:i,end:l,loop:r}]:function(e,t,s,a){const n=e.length,r=[];let i,l=t,o=e[t];for(i=t+1;i<=s;++i){const s=e[i%n];s.skip||s.stop?o.skip||(a=!1,r.push({start:t%n,end:(i-1)%n,loop:a}),t=l=s.stop?i:null):(l=i,o.skip&&(t=i)),o=s}return null!==l&&r.push({start:t%n,end:l%n,loop:a}),r}(s,i,l<i?l+n:l,!!e._fullLoop&&0===i&&l===n-1),s,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,a=e[t],n=this.points,r=nc(this,{property:t,start:a,end:a});if(!r.length)return;const i=[],l=function(e){return e.stepped?Ko:e.tension||"monotone"===e.cubicInterpolationMode?Jo:$o}(s);let o,c;for(o=0,c=r.length;o<c;++o){const{start:c,end:d}=r[o],u=n[c],h=n[d];if(u===h){i.push(u);continue}const m=l(u,h,Math.abs((a-u[t])/(h[t]-u[t])),s.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,s){return Mu(this)(e,this,t,s)}path(e,t,s){const a=this.segments,n=Mu(this);let r=this._loop;t=t||0,s=s||this.points.length-t;for(const i of a)r&=n(e,this,i,{start:t,end:t+s-1});return!!r}draw(e,t,s,a){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),Pu(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Tu(e,t,s,a){const n=e.options,{[s]:r}=e.getProps([s],a);return Math.abs(t-r)<n.radius+n.hitRadius}Oe(Au,"id","line"),Oe(Au,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Oe(Au,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Oe(Au,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Iu extends Dd{constructor(e){super(),Oe(this,"parsed",void 0),Oe(this,"skip",void 0),Oe(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const a=this.options,{x:n,y:r}=this.getProps(["x","y"],s);return Math.pow(e-n,2)+Math.pow(t-r,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,t){return Tu(this,e,"x",t)}inYRange(e,t){return Tu(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const s=this.options;this.skip||s.radius<.1||!$l(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Gl(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Ou(e,t){const{x:s,y:a,base:n,width:r,height:i}=e.getProps(["x","y","base","width","height"],t);let l,o,c,d,u;return e.horizontal?(u=i/2,l=Math.min(s,n),o=Math.max(s,n),c=a-u,d=a+u):(u=r/2,l=s-u,o=s+u,c=Math.min(a,n),d=Math.max(a,n)),{left:l,top:c,right:o,bottom:d}}function Ru(e,t,s,a){return e?0:dl(t,s,a)}function Lu(e){const t=Ou(e),s=t.right-t.left,a=t.bottom-t.top,n=function(e,t,s){const a=e.options.borderWidth,n=e.borderSkipped,r=co(a);return{t:Ru(n.top,r.top,0,s),r:Ru(n.right,r.right,0,t),b:Ru(n.bottom,r.bottom,0,s),l:Ru(n.left,r.left,0,t)}}(e,s/2,a/2),r=function(e,t,s){const{enableBorderRadius:a}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,r=uo(n),i=Math.min(t,s),l=e.borderSkipped,o=a||Ni(n);return{topLeft:Ru(!o||l.top||l.left,r.topLeft,0,i),topRight:Ru(!o||l.top||l.right,r.topRight,0,i),bottomLeft:Ru(!o||l.bottom||l.left,r.bottomLeft,0,i),bottomRight:Ru(!o||l.bottom||l.right,r.bottomRight,0,i)}}(e,s/2,a/2);return{outer:{x:t.left,y:t.top,w:s,h:a,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:s-n.l-n.r,h:a-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Fu(e,t,s,a){const n=null===t,r=null===s,i=e&&!(n&&r)&&Ou(e,a);return i&&(n||ul(t,i.left,i.right))&&(r||ul(s,i.top,i.bottom))}function zu(e,t){e.rect(t.x,t.y,t.w,t.h)}function qu(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.x!==s.x?-t:0,n=e.y!==s.y?-t:0,r=(e.x+e.w!==s.x+s.w?t:0)-a,i=(e.y+e.h!==s.y+s.h?t:0)-n;return{x:e.x+a,y:e.y+n,w:e.w+r,h:e.h+i,radius:e.radius}}Oe(Iu,"id","point"),Oe(Iu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Oe(Iu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Bu extends Dd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:a}}=this,{inner:n,outer:r}=Lu(this),i=(l=r.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?ao:zu;var l;e.save(),r.w===n.w&&r.h===n.h||(e.beginPath(),i(e,qu(r,t,n)),e.clip(),i(e,qu(n,-t,r)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),i(e,qu(n,t)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,t,s){return Fu(this,e,t,s)}inXRange(e,t){return Fu(this,e,null,t)}inYRange(e,t){return Fu(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:a,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(t+a)/2:t,y:n?s:(s+a)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Oe(Bu,"id","bar"),Oe(Bu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Oe(Bu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Uu=(e,t)=>{let{boxHeight:s=t,boxWidth:a=t}=e;return e.usePointStyle&&(s=Math.min(s,t),a=e.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:s,itemHeight:Math.max(t,s)}};class Wu extends Dd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=_i(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,s)=>e.sort(t,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const s=e.labels,a=mo(s.font),n=a.size,r=this._computeTitleHeight(),{boxWidth:i,itemHeight:l}=Uu(s,n);let o,c;t.font=a.string,this.isHorizontal()?(o=this.maxWidth,c=this._fitRows(r,n,i,l)+10):(c=this.maxHeight,o=this._fitCols(r,a,i,l)+10),this.width=Math.min(o,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,a){const{ctx:n,maxWidth:r,options:{labels:{padding:i}}}=this,l=this.legendHitBoxes=[],o=this.lineWidths=[0],c=a+i;let d=e;n.textAlign="left",n.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const x=s+t/2+n.measureText(e.text).width;(0===m||o[o.length-1]+x+2*i>r)&&(d+=c,o[o.length-(m>0?0:1)]=0,h+=c,u++),l[m]={left:0,top:h,row:u,width:x,height:a},o[o.length-1]+=x+i}),d}_fitCols(e,t,s,a){const{ctx:n,maxHeight:r,options:{labels:{padding:i}}}=this,l=this.legendHitBoxes=[],o=this.columnSizes=[],c=r-e;let d=i,u=0,h=0,m=0,x=0;return this.legendItems.forEach((e,r)=>{const{itemWidth:p,itemHeight:g}=function(e,t,s,a,n){const r=function(e,t,s,a){let n=e.text;n&&"string"!==typeof n&&(n=n.reduce((e,t)=>e.length>t.length?e:t));return t+s.size/2+a.measureText(n).width}(a,e,t,s),i=function(e,t,s){let a=e;"string"!==typeof t.text&&(a=Hu(t,s));return a}(n,a,t.lineHeight);return{itemWidth:r,itemHeight:i}}(s,t,n,e,a);r>0&&h+g+2*i>c&&(d+=u+i,o.push({width:u,height:h}),m+=u+i,x++,u=h=0),l[r]={left:m,top:h,col:x,width:p,height:g},u=Math.max(u,p),h+=g+i}),d+=u,o.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:a},rtl:n}}=this,r=Xo(n,this.left,this.width);if(this.isHorizontal()){let n=0,i=jl(s,this.left+a,this.right-this.lineWidths[n]);for(const l of t)n!==l.row&&(n=l.row,i=jl(s,this.left+a,this.right-this.lineWidths[n])),l.top+=this.top+e+a,l.left=r.leftForLtr(r.x(i),l.width),i+=l.width+a}else{let n=0,i=jl(s,this.top+e+a,this.bottom-this.columnSizes[n].height);for(const l of t)l.col!==n&&(n=l.col,i=jl(s,this.top+e+a,this.bottom-this.columnSizes[n].height)),l.top=i,l.left+=this.left+a,l.left=r.leftForLtr(r.x(l.left),l.width),i+=l.height+a}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Kl(e,this),this._draw(),Jl(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:a}=this,{align:n,labels:r}=e,i=Ul.color,l=Xo(e.rtl,this.left,this.width),o=mo(r.font),{padding:c}=r,d=o.size,u=d/2;let h;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=o.string;const{boxWidth:m,boxHeight:x,itemHeight:p}=Uu(r,d),g=this.isHorizontal(),f=this._computeTitleHeight();h=g?{x:jl(n,this.left+c,this.right-s[0]),y:this.top+c+f,line:0}:{x:this.left+c,y:jl(n,this.top+f+c,this.bottom-t[0].height),line:0},Zo(this.ctx,e.textDirection);const b=p+c;this.legendItems.forEach((y,v)=>{a.strokeStyle=y.fontColor,a.fillStyle=y.fontColor;const j=a.measureText(y.text).width,N=l.textAlign(y.textAlign||(y.textAlign=r.textAlign)),w=m+u+j;let k=h.x,S=h.y;l.setWidth(this.width),g?v>0&&k+w+c>this.right&&(S=h.y+=b,h.line++,k=h.x=jl(n,this.left+c,this.right-s[h.line])):v>0&&S+b>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,S=h.y=jl(n,this.top+f+c,this.bottom-t[h.line].height));if(function(e,t,s){if(isNaN(m)||m<=0||isNaN(x)||x<0)return;a.save();const n=Si(s.lineWidth,1);if(a.fillStyle=Si(s.fillStyle,i),a.lineCap=Si(s.lineCap,"butt"),a.lineDashOffset=Si(s.lineDashOffset,0),a.lineJoin=Si(s.lineJoin,"miter"),a.lineWidth=n,a.strokeStyle=Si(s.strokeStyle,i),a.setLineDash(Si(s.lineDash,[])),r.usePointStyle){const i={radius:x*Math.SQRT2/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:n},o=l.xPlus(e,m/2);Ql(a,i,o,t+u,r.pointStyleWidth&&m)}else{const r=t+Math.max((d-x)/2,0),i=l.leftForLtr(e,m),o=uo(s.borderRadius);a.beginPath(),Object.values(o).some(e=>0!==e)?ao(a,{x:i,y:r,w:m,h:x,radius:o}):a.rect(i,r,m,x),a.fill(),0!==n&&a.stroke()}a.restore()}(l.x(k),S,y),k=((e,t,s,a)=>e===(a?"left":"right")?s:"center"===e?(t+s)/2:t)(N,k+m+u,g?k+w:this.right,e.rtl),function(e,t,s){so(a,s.text,e,t+p/2,o,{strikethrough:s.hidden,textAlign:l.textAlign(s.textAlign)})}(l.x(k),S,y),g)h.x+=w+c;else if("string"!==typeof y.text){const e=o.lineHeight;h.y+=Hu(y,e)+c}else h.y+=b}),ec(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=mo(t.font),a=ho(t.padding);if(!t.display)return;const n=Xo(e.rtl,this.left,this.width),r=this.ctx,i=t.position,l=s.size/2,o=a.top+l;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+o,d=jl(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=o+jl(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=jl(i,d,d+u);r.textAlign=n.textAlign(vl(i)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=s.string,so(r,t.text,h,c,s)}_computeTitleHeight(){const e=this.options.title,t=mo(e.font),s=ho(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,a,n;if(ul(e,this.left,this.right)&&ul(t,this.top,this.bottom))for(n=this.legendHitBoxes,s=0;s<n.length;++s)if(a=n[s],ul(e,a.left,a.left+a.width)&&ul(t,a.top,a.top+a.height))return this.legendItems[s];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const a=this._hoveredItem,n=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(a,s);a&&!n&&_i(t.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!n&&_i(t.onHover,[e,s,this],this)}else s&&_i(t.onClick,[e,s,this],this)}}function Hu(e,t){return t*(e.text?e.text.length:0)}var Vu={id:"legend",_element:Wu,start(e,t,s){const a=e.legend=new Wu({ctx:e.ctx,options:s,chart:e});hd.configure(e,a,s),hd.addBox(e,a)},stop(e){hd.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const a=e.legend;hd.configure(e,a,s),a.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const a=t.datasetIndex,n=s.chart;n.isDatasetVisible(a)?(n.hide(a),t.hidden=!0):(n.show(a),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:a,textAlign:n,color:r,useBorderRadius:i,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const o=e.controller.getStyle(s?0:void 0),c=ho(o.borderWidth);return{text:t[e.index].label,fillStyle:o.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:o.borderColor,pointStyle:a||o.pointStyle,rotation:o.rotation,textAlign:n||o.textAlign,borderRadius:i&&(l||o.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Yu extends Dd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const a=ji(s.text)?s.text.length:1;this._padding=ho(s.padding);const n=a*mo(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:s,bottom:a,right:n,options:r}=this,i=r.align;let l,o,c,d=0;return this.isHorizontal()?(o=jl(i,s,n),c=t+e,l=n-s):("left"===r.position?(o=s+e,c=jl(i,a,t),d=-.5*Ui):(o=n-e,c=jl(i,t,a),d=.5*Ui),l=a-t),{titleX:o,titleY:c,maxWidth:l,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=mo(t.font),a=s.lineHeight/2+this._padding.top,{titleX:n,titleY:r,maxWidth:i,rotation:l}=this._drawArgs(a);so(e,t.text,0,0,s,{color:t.color,maxWidth:i,rotation:l,textAlign:vl(t.align),textBaseline:"middle",translation:[n,r]})}}var Gu={id:"title",_element:Yu,start(e,t,s){!function(e,t){const s=new Yu({ctx:e.ctx,options:t,chart:e});hd.configure(e,s,t),hd.addBox(e,s),e.titleBlock=s}(e,s)},stop(e){const t=e.titleBlock;hd.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const a=e.titleBlock;hd.configure(e,a,s),a.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Qu={average(e){if(!e.length)return!1;let t,s,a=new Set,n=0,r=0;for(t=0,s=e.length;t<s;++t){const s=e[t].element;if(s&&s.hasValue()){const e=s.tooltipPosition();a.add(e.x),n+=e.y,++r}}if(0===r||0===a.size)return!1;const i=[...a].reduce((e,t)=>e+t)/a.size;return{x:i,y:n/r}},nearest(e,t){if(!e.length)return!1;let s,a,n,r=t.x,i=t.y,l=Number.POSITIVE_INFINITY;for(s=0,a=e.length;s<a;++s){const a=e[s].element;if(a&&a.hasValue()){const e=il(t,a.getCenterPoint());e<l&&(l=e,n=a)}}if(n){const e=n.tooltipPosition();r=e.x,i=e.y}return{x:r,y:i}}};function $u(e,t){return t&&(ji(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ku(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ju(e,t){const{element:s,datasetIndex:a,index:n}=t,r=e.getDatasetMeta(a).controller,{label:i,value:l}=r.getLabelAndValue(n);return{chart:e,label:i,parsed:r.getParsed(n),raw:e.data.datasets[a].data[n],formattedValue:l,dataset:r.getDataset(),dataIndex:n,datasetIndex:a,element:s}}function Xu(e,t){const s=e.chart.ctx,{body:a,footer:n,title:r}=e,{boxWidth:i,boxHeight:l}=t,o=mo(t.bodyFont),c=mo(t.titleFont),d=mo(t.footerFont),u=r.length,h=n.length,m=a.length,x=ho(t.padding);let p=x.height,g=0,f=a.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(f+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),f){p+=m*(t.displayColors?Math.max(l,o.lineHeight):o.lineHeight)+(f-m)*o.lineHeight+(f-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){g=Math.max(g,s.measureText(e).width+b)};return s.save(),s.font=c.string,Ei(e.title,y),s.font=o.string,Ei(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?i+2+t.boxPadding:0,Ei(a,e=>{Ei(e.before,y),Ei(e.lines,y),Ei(e.after,y)}),b=0,s.font=d.string,Ei(e.footer,y),s.restore(),g+=x.width,{width:g,height:p}}function Zu(e,t,s,a){const{x:n,width:r}=s,{width:i,chartArea:{left:l,right:o}}=e;let c="center";return"center"===a?c=n<=(l+o)/2?"left":"right":n<=r/2?c="left":n>=i-r/2&&(c="right"),function(e,t,s,a){const{x:n,width:r}=a,i=s.caretSize+s.caretPadding;return"left"===e&&n+r+i>t.width||"right"===e&&n-r-i<0||void 0}(c,e,t,s)&&(c="center"),c}function eh(e,t,s){const a=s.yAlign||t.yAlign||function(e,t){const{y:s,height:a}=t;return s<a/2?"top":s>e.height-a/2?"bottom":"center"}(e,s);return{xAlign:s.xAlign||t.xAlign||Zu(e,t,s,a),yAlign:a}}function th(e,t,s,a){const{caretSize:n,caretPadding:r,cornerRadius:i}=e,{xAlign:l,yAlign:o}=s,c=n+r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=uo(i);let x=function(e,t){let{x:s,width:a}=e;return"right"===t?s-=a:"center"===t&&(s-=a/2),s}(t,l);const p=function(e,t,s){let{y:a,height:n}=e;return"top"===t?a+=s:a-="bottom"===t?n+s:n/2,a}(t,o,c);return"center"===o?"left"===l?x+=c:"right"===l&&(x-=c):"left"===l?x-=Math.max(d,h)+n:"right"===l&&(x+=Math.max(u,m)+n),{x:dl(x,0,a.width-t.width),y:dl(p,0,a.height-t.height)}}function sh(e,t,s){const a=ho(s.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-a.right:e.x+a.left}function ah(e){return $u([],Ku(e))}function nh(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const rh={beforeTitle:bi,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,a=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(a>0&&t.dataIndex<a)return s[t.dataIndex]}return""},afterTitle:bi,beforeBody:bi,beforeLabel:bi,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return vi(s)||(t+=s),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:bi,afterBody:bi,beforeFooter:bi,footer:bi,afterFooter:bi};function ih(e,t,s,a){const n=e[t].call(s,a);return"undefined"===typeof n?rh[t].call(s,a):n}class lh extends Dd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&t.options.animation&&s.animations,n=new pc(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,s=this._tooltipItems,po(e,{tooltip:t,tooltipItems:s,type:"tooltip"})));var e,t,s}getTitle(e,t){const{callbacks:s}=t,a=ih(s,"beforeTitle",this,e),n=ih(s,"title",this,e),r=ih(s,"afterTitle",this,e);let i=[];return i=$u(i,Ku(a)),i=$u(i,Ku(n)),i=$u(i,Ku(r)),i}getBeforeBody(e,t){return ah(ih(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,a=[];return Ei(e,e=>{const t={before:[],lines:[],after:[]},n=nh(s,e);$u(t.before,Ku(ih(n,"beforeLabel",this,e))),$u(t.lines,ih(n,"label",this,e)),$u(t.after,Ku(ih(n,"afterLabel",this,e))),a.push(t)}),a}getAfterBody(e,t){return ah(ih(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,a=ih(s,"beforeFooter",this,e),n=ih(s,"footer",this,e),r=ih(s,"afterFooter",this,e);let i=[];return i=$u(i,Ku(a)),i=$u(i,Ku(n)),i=$u(i,Ku(r)),i}_createItems(e){const t=this._active,s=this.chart.data,a=[],n=[],r=[];let i,l,o=[];for(i=0,l=t.length;i<l;++i)o.push(Ju(this.chart,t[i]));return e.filter&&(o=o.filter((t,a,n)=>e.filter(t,a,n,s))),e.itemSort&&(o=o.sort((t,a)=>e.itemSort(t,a,s))),Ei(o,t=>{const s=nh(e.callbacks,t);a.push(ih(s,"labelColor",this,t)),n.push(ih(s,"labelPointStyle",this,t)),r.push(ih(s,"labelTextColor",this,t))}),this.labelColors=a,this.labelPointStyles=n,this.labelTextColors=r,this.dataPoints=o,o}update(e,t){const s=this.options.setContext(this.getContext()),a=this._active;let n,r=[];if(a.length){const e=Qu[s.position].call(this,a,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);const t=this._size=Xu(this,s),i=Object.assign({},e,t),l=eh(this.chart,s,i),o=th(s,i,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,n={opacity:1,x:o.x,y:o.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=r,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,a){const n=this.getCaretPosition(e,s,a);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,s){const{xAlign:a,yAlign:n}=this,{caretSize:r,cornerRadius:i}=s,{topLeft:l,topRight:o,bottomLeft:c,bottomRight:d}=uo(i),{x:u,y:h}=e,{width:m,height:x}=t;let p,g,f,b,y,v;return"center"===n?(y=h+x/2,"left"===a?(p=u,g=p-r,b=y+r,v=y-r):(p=u+m,g=p+r,b=y-r,v=y+r),f=p):(g="left"===a?u+Math.max(l,c)+r:"right"===a?u+m-Math.max(o,d)-r:this.caretX,"top"===n?(b=h,y=b-r,p=g-r,f=g+r):(b=h+x,y=b+r,p=g+r,f=g-r),v=b),{x1:p,x2:g,x3:f,y1:b,y2:y,y3:v}}drawTitle(e,t,s){const a=this.title,n=a.length;let r,i,l;if(n){const o=Xo(s.rtl,this.x,this.width);for(e.x=sh(this,s.titleAlign,s),t.textAlign=o.textAlign(s.titleAlign),t.textBaseline="middle",r=mo(s.titleFont),i=s.titleSpacing,t.fillStyle=s.titleColor,t.font=r.string,l=0;l<n;++l)t.fillText(a[l],o.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i,l+1===n&&(e.y+=s.titleMarginBottom-i)}}_drawColorBox(e,t,s,a,n){const r=this.labelColors[s],i=this.labelPointStyles[s],{boxHeight:l,boxWidth:o}=n,c=mo(n.bodyFont),d=sh(this,"left",n),u=a.x(d),h=l<c.lineHeight?(c.lineHeight-l)/2:0,m=t.y+h;if(n.usePointStyle){const t={radius:Math.min(o,l)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},s=a.leftForLtr(u,o)+o/2,c=m+l/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,Gl(e,t,s,c),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Gl(e,t,s,c)}else{e.lineWidth=Ni(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const t=a.leftForLtr(u,o),s=a.leftForLtr(a.xPlus(u,1),o-2),i=uo(r.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,ao(e,{x:t,y:m,w:o,h:l,radius:i}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),ao(e,{x:s,y:m+1,w:o-2,h:l-2,radius:i}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(t,m,o,l),e.strokeRect(t,m,o,l),e.fillStyle=r.backgroundColor,e.fillRect(s,m+1,o-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:a}=this,{bodySpacing:n,bodyAlign:r,displayColors:i,boxHeight:l,boxWidth:o,boxPadding:c}=s,d=mo(s.bodyFont);let u=d.lineHeight,h=0;const m=Xo(s.rtl,this.x,this.width),x=function(s){t.fillText(s,m.x(e.x+h),e.y+u/2),e.y+=u+n},p=m.textAlign(r);let g,f,b,y,v,j,N;for(t.textAlign=r,t.textBaseline="middle",t.font=d.string,e.x=sh(this,p,s),t.fillStyle=s.bodyColor,Ei(this.beforeBody,x),h=i&&"right"!==p?"center"===r?o/2+c:o+2+c:0,y=0,j=a.length;y<j;++y){for(g=a[y],f=this.labelTextColors[y],t.fillStyle=f,Ei(g.before,x),b=g.lines,i&&b.length&&(this._drawColorBox(t,e,y,m,s),u=Math.max(d.lineHeight,l)),v=0,N=b.length;v<N;++v)x(b[v]),u=d.lineHeight;Ei(g.after,x)}h=0,u=d.lineHeight,Ei(this.afterBody,x),e.y-=n}drawFooter(e,t,s){const a=this.footer,n=a.length;let r,i;if(n){const l=Xo(s.rtl,this.x,this.width);for(e.x=sh(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=l.textAlign(s.footerAlign),t.textBaseline="middle",r=mo(s.footerFont),t.fillStyle=s.footerColor,t.font=r.string,i=0;i<n;++i)t.fillText(a[i],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+s.footerSpacing}}drawBackground(e,t,s,a){const{xAlign:n,yAlign:r}=this,{x:i,y:l}=e,{width:o,height:c}=s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=uo(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(i+d,l),"top"===r&&this.drawCaret(e,t,s,a),t.lineTo(i+o-u,l),t.quadraticCurveTo(i+o,l,i+o,l+u),"center"===r&&"right"===n&&this.drawCaret(e,t,s,a),t.lineTo(i+o,l+c-m),t.quadraticCurveTo(i+o,l+c,i+o-m,l+c),"bottom"===r&&this.drawCaret(e,t,s,a),t.lineTo(i+h,l+c),t.quadraticCurveTo(i,l+c,i,l+c-h),"center"===r&&"left"===n&&this.drawCaret(e,t,s,a),t.lineTo(i,l+d),t.quadraticCurveTo(i,l,i+d,l),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,a=s&&s.x,n=s&&s.y;if(a||n){const s=Qu[e.position].call(this,this._active,this._eventPosition);if(!s)return;const r=this._size=Xu(this,e),i=Object.assign({},s,this._size),l=eh(t,e,i),o=th(e,i,l,t);a._to===o.x&&n._to===o.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=r.width,this.height=r.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,o))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},n={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const r=ho(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=s,this.drawBackground(n,e,a,t),Zo(e,t.textDirection),n.y+=r.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),ec(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,a=e.map(e=>{let{datasetIndex:t,index:s}=e;const a=this.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[s],index:s}}),n=!Mi(s,a),r=this._positionChanged(a,t);(n||r)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,n=this._active||[],r=this._getActiveElements(e,n,t,s),i=this._positionChanged(r,e),l=t||!Mi(r,n)||i;return l&&(this._active=r,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,s,a){const n=this.options;if("mouseout"===e.type)return[];if(!a)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const r=this.chart.getElementsAtEventForMode(e,n.mode,n,s);return n.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:s,caretY:a,options:n}=this,r=Qu[n.position].call(this,e,t);return!1!==r&&(s!==r.x||a!==r.y)}}Oe(lh,"positioners",Qu);var oh={id:"tooltip",_element:lh,positioners:Qu,afterInit(e,t,s){s&&(e.tooltip=new lh({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Le(Le({},s),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:rh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function ch(e,t,s,a){const n=e.indexOf(t);if(-1===n)return((e,t,s,a)=>("string"===typeof t?(s=e.push(t)-1,a.unshift({index:s,label:t})):isNaN(t)&&(s=null),s))(e,t,s,a);return n!==e.lastIndexOf(t)?s:n}function dh(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class uh extends qd{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:s,label:a}of t)e[s]===a&&e.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(vi(e))return null;const s=this.getLabels();return((e,t)=>null===e?null:dl(Math.round(e),0,t))(t=isFinite(t)&&s[t]===e?t:ch(s,e,Si(t,e),this._addedLabels),s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(s=0),t||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,a=[];let n=this.getLabels();n=0===e&&t===n.length-1?n:n.slice(e,t+1),this._valueRange=Math.max(n.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let r=e;r<=t;r++)a.push({value:r});return a}getLabelForValue(e){return dh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function hh(e,t){const s=[],{bounds:a,step:n,min:r,max:i,precision:l,count:o,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=n||1,m=c-1,{min:x,max:p}=t,g=!vi(r),f=!vi(i),b=!vi(o),y=(p-x)/(d+1);let v,j,N,w,k=Zi((p-x)/m/h)*h;if(k<1e-14&&!g&&!f)return[{value:x},{value:p}];w=Math.ceil(p/k)-Math.floor(x/k),w>m&&(k=Zi(w*k/m/h)*h),vi(l)||(v=Math.pow(10,l),k=Math.ceil(k*v)/v),"ticks"===a?(j=Math.floor(x/k)*k,N=Math.ceil(p/k)*k):(j=x,N=p),g&&f&&n&&function(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}((i-r)/n,k/1e3)?(w=Math.round(Math.min((i-r)/k,c)),k=(i-r)/w,j=r,N=i):b?(j=g?r:j,N=f?i:N,w=o-1,k=(N-j)/w):(w=(N-j)/k,w=Xi(w,Math.round(w),k/1e3)?Math.round(w):Math.ceil(w));const S=Math.max(nl(k),nl(j));v=Math.pow(10,vi(l)?S:l),j=Math.round(j*v)/v,N=Math.round(N*v)/v;let C=0;for(g&&(u&&j!==r?(s.push({value:r}),j<r&&C++,Xi(Math.round((j+C*k)*v)/v,r,mh(r,y,e))&&C++):j<r&&C++);C<w;++C){const e=Math.round((j+C*k)*v)/v;if(f&&e>i)break;s.push({value:e})}return f&&u&&N!==i?s.length&&Xi(s[s.length-1].value,i,mh(i,y,e))?s[s.length-1].value=i:s.push({value:i}):f&&N!==i||s.push({value:N}),s}function mh(e,t,s){let{horizontal:a,minRotation:n}=s;const r=sl(n),i=(a?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/i,l)}Oe(uh,"id","category"),Oe(uh,"defaults",{ticks:{callback:dh}});class xh extends qd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return vi(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:a,max:n}=this;const r=e=>a=t?a:e,i=e=>n=s?n:e;if(e){const e=Ji(a),t=Ji(n);e<0&&t<0?i(0):e>0&&t>0&&r(0)}if(a===n){let t=0===n?1:Math.abs(.05*n);i(n+t),e||r(a-t)}this.min=a,this.max=n}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:s,stepSize:a}=e;return a?(t=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(a," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),s=s||11),s&&(t=Math.min(s,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a=hh({maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&tl(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-t)/Math.max(e.length-1,1)/2;t-=a,s+=a}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return Il(e,this.chart.options.locale,this.options.ticks.format)}}class ph extends xh{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=wi(e)?e:0,this.max=wi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=sl(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,n.lineHeight/a))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Oe(ph,"id","linear"),Oe(ph,"defaults",{ticks:{callback:Rl.formatters.numeric}});const gh=e=>Math.floor(Ki(e)),fh=(e,t)=>Math.pow(10,gh(e)+t);function bh(e){return 1===e/Math.pow(10,gh(e))}function yh(e,t,s){const a=Math.pow(10,s),n=Math.floor(e/a);return Math.ceil(t/a)-n}function vh(e,t){let{min:s,max:a}=t;s=ki(e.min,s);const n=[],r=gh(s);let i=function(e,t){let s=gh(t-e);for(;yh(e,t,s)>10;)s++;for(;yh(e,t,s)<10;)s--;return Math.min(s,gh(e))}(s,a),l=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),c=r>i?Math.pow(10,r):0,d=Math.round((s-c)*l)/l,u=Math.floor((s-c)/o/10)*o*10;let h=Math.floor((d-u)/Math.pow(10,i)),m=ki(e.min,Math.round((c+u+h*Math.pow(10,i))*l)/l);for(;m<a;)n.push({value:m,major:bh(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,l=i>=0?1:l),m=Math.round((c+u+h*Math.pow(10,i))*l)/l;const x=ki(e.max,m);return n.push({value:x,major:bh(x),significand:h}),n}class jh extends qd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=xh.prototype.parse.apply(this,[e,t]);if(0!==s)return wi(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=wi(e)?Math.max(0,e):null,this.max=wi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wi(this._userMin)&&(this.min=e===fh(this.min,0)?fh(this.min,-1):fh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,a=this.max;const n=t=>s=e?s:t,r=e=>a=t?a:e;s===a&&(s<=0?(n(1),r(10)):(n(fh(s,-1)),r(fh(a,1)))),s<=0&&n(fh(a,-1)),a<=0&&r(fh(s,1)),this.min=s,this.max=a}buildTicks(){const e=this.options,t=vh({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&tl(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Il(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ki(e),this._valueRange=Ki(this.max)-Ki(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ki(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Nh(e){const t=e.ticks;if(t.display&&e.display){const e=ho(t.backdropPadding);return Si(t.font&&t.font.size,Ul.font.size)+e.height}return 0}function wh(e,t,s){return s=ji(s)?s:[s],{w:Hl(e,t.string,s),h:s.length*t.lineHeight}}function kh(e,t,s,a,n){return e===a||e===n?{start:t-s/2,end:t+s/2}:e<a||e>n?{start:t-s,end:t}:{start:t,end:t+s}}function Sh(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},s=Object.assign({},t),a=[],n=[],r=e._pointLabels.length,i=e.options.pointLabels,l=i.centerPointLabels?Ui/r:0;for(let o=0;o<r;o++){const r=i.setContext(e.getPointLabelContext(o));n[o]=r.padding;const c=e.getPointPosition(o,e.drawingArea+n[o],l),d=mo(r.font),u=wh(e.ctx,d,e._pointLabels[o]);a[o]=u;const h=ol(e.getIndexAngle(o)+l),m=Math.round(al(h));Ch(s,t,h,kh(m,c.x,u.w,0,180),kh(m,c.y,u.h,90,270))}e.setCenterPoint(t.l-s.l,s.r-t.r,t.t-s.t,s.b-t.b),e._pointLabelItems=function(e,t,s){const a=[],n=e._pointLabels.length,r=e.options,{centerPointLabels:i,display:l}=r.pointLabels,o={extra:Nh(r)/2,additionalAngle:i?Ui/n:0};let c;for(let d=0;d<n;d++){o.padding=s[d],o.size=t[d];const n=_h(e,d,o);a.push(n),"auto"===l&&(n.visible=Eh(n,c),n.visible&&(c=n))}return a}(e,a,n)}function Ch(e,t,s,a,n){const r=Math.abs(Math.sin(s)),i=Math.abs(Math.cos(s));let l=0,o=0;a.start<t.l?(l=(t.l-a.start)/r,e.l=Math.min(e.l,t.l-l)):a.end>t.r&&(l=(a.end-t.r)/r,e.r=Math.max(e.r,t.r+l)),n.start<t.t?(o=(t.t-n.start)/i,e.t=Math.min(e.t,t.t-o)):n.end>t.b&&(o=(n.end-t.b)/i,e.b=Math.max(e.b,t.b+o))}function _h(e,t,s){const a=e.drawingArea,{extra:n,additionalAngle:r,padding:i,size:l}=s,o=e.getPointPosition(t,a+n+i,r),c=Math.round(al(ol(o.angle+Gi))),d=function(e,t,s){90===s||270===s?e-=t/2:(s>270||s<90)&&(e-=t);return e}(o.y,l.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,s){"right"===s?e-=t:"center"===s&&(e-=t/2);return e}(o.x,l.w,u);return{visible:!0,x:o.x,y:d,textAlign:u,left:h,top:d,right:h+l.w,bottom:d+l.h}}function Eh(e,t){if(!t)return!0;const{left:s,top:a,right:n,bottom:r}=e;return!($l({x:s,y:a},t)||$l({x:s,y:r},t)||$l({x:n,y:a},t)||$l({x:n,y:r},t))}function Mh(e,t,s){const{left:a,top:n,right:r,bottom:i}=s,{backdropColor:l}=t;if(!vi(l)){const s=uo(t.borderRadius),o=ho(t.backdropPadding);e.fillStyle=l;const c=a-o.left,d=n-o.top,u=r-a+o.width,h=i-n+o.height;Object.values(s).some(e=>0!==e)?(e.beginPath(),ao(e,{x:c,y:d,w:u,h:h,radius:s}),e.fill()):e.fillRect(c,d,u,h)}}function Dh(e,t,s,a){const{ctx:n}=e;if(s)n.arc(e.xCenter,e.yCenter,t,0,Wi);else{let s=e.getPointPosition(0,t);n.moveTo(s.x,s.y);for(let r=1;r<a;r++)s=e.getPointPosition(r,t),n.lineTo(s.x,s.y)}}Oe(jh,"id","logarithmic"),Oe(jh,"defaults",{ticks:{callback:Rl.formatters.logarithmic,major:{enabled:!0}}});class Ph extends xh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ho(Nh(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=wi(e)&&!isNaN(e)?e:0,this.max=wi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Nh(this.options))}generateTickLabels(e){xh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const s=_i(this.options.pointLabels.callback,[e,t],this);return s||0===s?s:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?Sh(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,a){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,a))}getIndexAngle(e){return ol(e*(Wi/(this._pointLabels.length||1))+sl(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(vi(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(vi(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return function(e,t,s){return po(e,{label:s,index:t,type:"pointLabel"})}(this.getContext(),e,s)}}getPointPosition(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=this.getIndexAngle(e)-Gi+s;return{x:Math.cos(a)*t+this.xCenter,y:Math.sin(a)*t+this.yCenter,angle:a}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:a,bottom:n}=this._pointLabelItems[e];return{left:t,top:s,right:a,bottom:n}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),Dh(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:a,border:n}=t,r=this._pointLabels.length;let i,l,o;if(t.pointLabels.display&&function(e,t){const{ctx:s,options:{pointLabels:a}}=e;for(let n=t-1;n>=0;n--){const t=e._pointLabelItems[n];if(!t.visible)continue;const r=a.setContext(e.getPointLabelContext(n));Mh(s,r,t);const i=mo(r.font),{x:l,y:o,textAlign:c}=t;so(s,e._pointLabels[n],l,o+i.lineHeight/2,i,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,r),a.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){l=this.getDistanceFromCenterForValue(e.value);const s=this.getContext(t),i=a.setContext(s),o=n.setContext(s);!function(e,t,s,a,n){const r=e.ctx,i=t.circular,{color:l,lineWidth:o}=t;!i&&!a||!l||!o||s<0||(r.save(),r.strokeStyle=l,r.lineWidth=o,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),Dh(e,s,i,a),r.closePath(),r.stroke(),r.restore())}(this,i,l,r,o)}}),s.display){for(e.save(),i=r-1;i>=0;i--){const a=s.setContext(this.getPointLabelContext(i)),{color:n,lineWidth:r}=a;r&&n&&(e.lineWidth=r,e.strokeStyle=n,e.setLineDash(a.borderDash),e.lineDashOffset=a.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),o=this.getPointPosition(i,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(o.x,o.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const a=this.getIndexAngle(0);let n,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const l=s.setContext(this.getContext(i)),o=mo(l.font);if(n=this.getDistanceFromCenterForValue(this.ticks[i].value),l.showLabelBackdrop){e.font=o.string,r=e.measureText(a.label).width,e.fillStyle=l.backdropColor;const t=ho(l.backdropPadding);e.fillRect(-r/2-t.left,-n-o.size/2-t.top,r+t.width,o.size+t.height)}so(e,a.label,0,-n,o,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}}Oe(Ph,"id","radialLinear"),Oe(Ph,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Rl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Oe(Ph,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Oe(Ph,"descriptors",{angleLines:{_fallback:"grid"}});const Ah={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Th=Object.keys(Ah);function Ih(e,t){return e-t}function Oh(e,t){if(vi(t))return null;const s=e._adapter,{parser:a,round:n,isoWeekday:r}=e._parseOpts;let i=t;return"function"===typeof a&&(i=a(i)),wi(i)||(i="string"===typeof a?s.parse(i,a):s.parse(i)),null===i?null:(n&&(i="week"!==n||!el(r)&&!0!==r?s.startOf(i,n):s.startOf(i,"isoWeek",r)),+i)}function Rh(e,t,s,a){const n=Th.length;for(let r=Th.indexOf(e);r<n-1;++r){const e=Ah[Th[r]],n=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((s-t)/(n*e.size))<=a)return Th[r]}return Th[n-1]}function Lh(e,t,s){if(s){if(s.length){const{lo:a,hi:n}=hl(s,t);e[s[a]>=t?s[a]:s[n]]=!0}}else e[t]=!0}function Fh(e,t,s){const a=[],n={},r=t.length;let i,l;for(i=0;i<r;++i)l=t[i],n[l]=i,a.push({value:l,major:!1});return 0!==r&&s?function(e,t,s,a){const n=e._adapter,r=+n.startOf(t[0].value,a),i=t[t.length-1].value;let l,o;for(l=r;l<=i;l=+n.add(l,1,a))o=s[l],o>=0&&(t[o].major=!0);return t}(e,a,n,s):a}class zh extends qd{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.time||(e.time={}),a=this._adapter=new Yc(e.adapters.date);a.init(t),Ii(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Oh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:a,max:n,minDefined:r,maxDefined:i}=this.getUserBounds();function l(e){r||isNaN(e.min)||(a=Math.min(a,e.min)),i||isNaN(e.max)||(n=Math.max(n,e.max))}r&&i||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),a=wi(a)&&!isNaN(a)?a:+t.startOf(Date.now(),s),n=wi(n)&&!isNaN(n)?n:+t.endOf(Date.now(),s)+1,this.min=Math.min(a,n-1),this.max=Math.max(a+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,a="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const n=this.min,r=function(e,t,s){let a=0,n=e.length;for(;a<n&&e[a]<t;)a++;for(;n>a&&e[n-1]>s;)n--;return a>0||n<e.length?e.slice(a,n):e}(a,n,this.max);return this._unit=t.unit||(s.autoSkip?Rh(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(e,t,s,a,n){for(let r=Th.length-1;r>=Th.indexOf(s);r--){const s=Th[r];if(Ah[s].common&&e._adapter.diff(n,a,s)>=t-1)return s}return Th[s?Th.indexOf(s):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function(e){for(let t=Th.indexOf(e)+1,s=Th.length;t<s;++t)if(Ah[Th[t]].common)return Th[t]}(this._unit):void 0,this.initOffsets(a),e.reverse&&r.reverse(),Fh(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=0,n=0;this.options.offset&&s.length&&(e=this.getDecimalForValue(s[0]),a=1===s.length?1-e:(this.getDecimalForValue(s[1])-e)/2,t=this.getDecimalForValue(s[s.length-1]),n=1===s.length?t:(t-this.getDecimalForValue(s[s.length-2]))/2);const r=s.length<3?.5:.25;a=dl(a,0,r),n=dl(n,0,r),this._offsets={start:a,end:n,factor:1/(a+1+n)}}_generate(){const e=this._adapter,t=this.min,s=this.max,a=this.options,n=a.time,r=n.unit||Rh(n.minUnit,t,s,this._getLabelCapacity(t)),i=Si(a.ticks.stepSize,1),l="week"===r&&n.isoWeekday,o=el(l)||!0===l,c={};let d,u,h=t;if(o&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,o?"day":r),e.diff(s,t,r)>1e5*i)throw new Error(t+" and "+s+" are too far apart with stepSize of "+i+" "+r);const m="data"===a.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<s;d=+e.add(d,i,r),u++)Lh(c,d,m);return d!==s&&"ticks"!==a.bounds&&1!==u||Lh(c,d,m),Object.keys(c).sort(Ih).map(e=>+e)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,a=this._unit,n=t||s[a];return this._adapter.format(e,n)}_tickFormatFunction(e,t,s,a){const n=this.options,r=n.ticks.callback;if(r)return _i(r,[e,t,s],this);const i=n.time.displayFormats,l=this._unit,o=this._majorUnit,c=l&&i[l],d=o&&i[o],u=s[t],h=o&&d&&u&&u.major;return this._adapter.format(e,a||(h?d:c))}generateTickLabels(e){let t,s,a;for(t=0,s=e.length;t<s;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,a=sl(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(a),r=Math.sin(a),i=this._resolveTickFontOptions(0).size;return{w:s*n+i*r,h:s*r+i*n}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,a=s[t.unit]||s.millisecond,n=this._tickFormatFunction(e,0,Fh(this,[e],this._majorUnit),a),r=this._getLabelSize(n),i=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,s=this._cache.data||[];if(s.length)return s;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,t=a.length;e<t;++e)s=s.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const a=this.getLabels();for(t=0,s=a.length;t<s;++t)e.push(Oh(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return fl(e.sort(Ih))}}function qh(e,t,s){let a,n,r,i,l=0,o=e.length-1;s?(t>=e[l].pos&&t<=e[o].pos&&({lo:l,hi:o}=ml(e,"pos",t)),({pos:a,time:r}=e[l]),({pos:n,time:i}=e[o])):(t>=e[l].time&&t<=e[o].time&&({lo:l,hi:o}=ml(e,"time",t)),({time:a,pos:r}=e[l]),({time:n,pos:i}=e[o]));const c=n-a;return c?r+(i-r)*(t-a)/c:r}Oe(zh,"id","time"),Oe(zh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Bh extends zh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=qh(t,this.min),this._tableRange=qh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,a=[],n=[];let r,i,l,o,c;for(r=0,i=e.length;r<i;++r)o=e[r],o>=t&&o<=s&&a.push(o);if(a.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(r=0,i=a.length;r<i;++r)c=a[r+1],l=a[r-1],o=a[r],Math.round((c+l)/2)!==o&&n.push({time:o,pos:r/(i-1)});return n}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return s.includes(e)&&s.length||s.splice(0,0,e),s.includes(t)&&1!==s.length||s.push(t),s.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return e=t.length&&s.length?this.normalize(t.concat(s)):t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(qh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return qh(this._table,s*this._tableRange+this._minPos,!0)}}Oe(Bh,"id","timeseries"),Oe(Bh,"defaults",zh.defaults);const Uh=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Wh="label";function Hh(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Vh(e,t){e.labels=t}function Yh(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wh;const a=[];e.datasets=t.map(t=>{const n=e.datasets.find(e=>e[s]===t[s]);return n&&t.data&&!a.includes(n)?(a.push(n),Object.assign(n,t),n):Le({},t)})}function Gh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wh;const s={labels:[],datasets:[]};return Vh(s,e.labels),Yh(s,e.datasets,t),s}function Qh(e,t){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,m=_a(e,Uh),x=(0,a.useRef)(null),p=(0,a.useRef)(null),g=()=>{x.current&&(p.current=new fu(x.current,{type:l,data:Gh(o,i),options:c&&Le({},c),plugins:d}),Hh(t,p.current))},f=()=>{Hh(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,a.useEffect)(()=>{!r&&p.current&&c&&function(e,t){const s=e.options;s&&t&&Object.assign(s,t)}(p.current,c)},[r,c]),(0,a.useEffect)(()=>{!r&&p.current&&Vh(p.current.config.data,o.labels)},[r,o.labels]),(0,a.useEffect)(()=>{!r&&p.current&&o.datasets&&Yh(p.current.config.data,o.datasets,i)},[r,o.datasets]),(0,a.useEffect)(()=>{p.current&&(r?(f(),setTimeout(g)):p.current.update(h))},[r,c,o.labels,o.datasets,h]),(0,a.useEffect)(()=>{p.current&&(f(),setTimeout(g))},[l]),(0,a.useEffect)(()=>(g(),()=>f()),[]),a.createElement("canvas",Le({ref:x,role:"img",height:s,width:n},m),u)}const $h=(0,a.forwardRef)(Qh);function Kh(e,t){return fu.register(t),(0,a.forwardRef)((t,s)=>a.createElement($h,Le(Le({},t),{},{ref:s,type:e})))}const Jh=Kh("line",zc),Xh=Kh("bar",Rc),Zh=Kh("doughnut",Fc),em=ca.create({baseURL:"http://13.61.100.250/api",timeout:1e4,headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});em.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),"get"===e.method&&(e.params=Le(Le({},e.params),{},{_t:Date.now()})),e},e=>Promise.reject(e)),em.interceptors.response.use(e=>e,e=>{var t,s,a;return console.log("API Response Error:",null===(t=e.response)||void 0===t?void 0:t.status,null===(s=e.response)||void 0===s?void 0:s.data),401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(console.log("401 Unauthorized - Current path:",window.location.pathname),console.log("401 Error - NOT redirecting automatically, letting AuthContext handle it")),Promise.reject(e)});const tm=em,sm={getStudentReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/reports/students",{params:e})).data},getAttendanceReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/reports/attendance",{params:e})).data},getGradeReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/reports/grades",{params:e})).data},getFeeReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/reports/fees",{params:e})).data},getClassReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/reports/classes",{params:e})).data},getTeacherReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/reports/teachers",{params:e})).data},generatePDFReport:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/reports/pdf/".concat(e),{params:t,responseType:"blob"})).data},generateExcelReport:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/reports/excel/".concat(e),{params:t,responseType:"blob"})).data},getDashboardStats:async()=>(await tm.get("/reports/dashboard-stats")).data},am={getStudents:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/students",{params:e})).data},getStudent:async e=>(await tm.get("/students/".concat(e))).data,createStudent:async e=>{const t={firstName:e.firstName,lastName:e.lastName,email:e.email,password:"password123",phone:e.phone,address:e.address,dateOfBirth:e.dateOfBirth,gender:e.gender,studentId:e.studentId,admissionDate:e.admissionDate||(new Date).toISOString().split("T")[0],classId:e.classId,parentName:e.parentName,parentPhone:e.parentPhone,parentEmail:e.parentEmail,emergencyContact:e.emergencyContact,medicalInfo:e.medicalInfo,transportRoute:e.transportRoute};return(await tm.post("/students/with-user",t)).data},updateStudent:async(e,t)=>{const s={firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,address:t.address,dateOfBirth:t.dateOfBirth,gender:t.gender,studentId:t.studentId,admissionDate:t.admissionDate,classId:t.classId,parentName:t.parentName,parentPhone:t.parentPhone,parentEmail:t.parentEmail,emergencyContact:t.emergencyContact,medicalInfo:t.medicalInfo,transportRoute:t.transportRoute};return(await tm.put("/students/".concat(e),s)).data},deleteStudent:async e=>(await tm.delete("/students/".concat(e))).data,getStudentGrades:async e=>(await tm.get("/students/".concat(e,"/grades"))).data,getStudentAttendance:async e=>(await tm.get("/students/".concat(e,"/attendance"))).data,getStudentFees:async e=>(await tm.get("/students/".concat(e,"/fees"))).data,getStudentStats:async e=>(await tm.get("/students/".concat(e,"/stats"))).data};fu.register(uh,ph,Iu,Au,Bu,Gu,oh,Vu,wu);const nm=()=>{const e=Z(),{canView:t,userRole:s,loading:n}=wa(),[r,i]=(0,a.useState)({totalStudents:0,totalTeachers:0,totalClasses:0,totalSubjects:0,totalAttendance:0,totalGrades:0,totalFees:0,totalRevenue:0}),[l,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{o(!0);const e=await sm.getDashboardStats();i(e.data.stats);const t=await am.getStudents({limit:5});d(t.data.students||[])}catch(e){console.error("Error loading dashboard data:",e)}finally{o(!1)}},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}},m=t=>{let{title:s,value:a,icon:n,color:r,trend:i,trendValue:l,onClick:o,route:c}=t;return(0,ga.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>o&&e(c),children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),(0,ga.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a}),i&&(0,ga.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat("up"===i?"text-green-600":"text-red-600"),children:["up"===i?(0,ga.jsx)(Ir,{className:"w-4 h-4 mr-1"}):(0,ga.jsx)(Or,{className:"w-4 h-4 mr-1"}),l,"% from last month"]}),c&&(0,ga.jsxs)("div",{className:"flex items-center mt-2 text-sm text-blue-600",children:[(0,ga.jsx)("span",{children:"Click to view details"}),(0,ga.jsx)(Rr,{className:"w-4 h-4 ml-1"})]})]}),(0,ga.jsx)("div",{className:"p-3 rounded-full ".concat(r),children:(0,ga.jsx)(n,{className:"w-6 h-6 text-white"})})]})})};return l||n?(0,ga.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"space-y-8 dark:bg-gray-900 min-h-screen",children:[(0,ga.jsxs)("div",{className:"bg-gradient-to-r rounded-2xl p-8 text-white ".concat("teacher"===s?"from-green-600 to-blue-600":"admin"===s?"from-blue-600 to-purple-600":"student"===s?"from-purple-600 to-pink-600":"from-gray-600 to-blue-600"),children:[(0,ga.jsxs)("h1",{className:"text-4xl font-bold mb-2",children:["Welcome to School ERP","teacher"===s&&" - Teacher Dashboard","admin"===s&&" - Admin Dashboard","student"===s&&" - Student Dashboard"]}),(0,ga.jsxs)("p",{className:"text-blue-100 text-lg",children:["teacher"===s&&"Access your teaching tools and student information","admin"===s&&"Manage your school efficiently with our comprehensive dashboard","student"===s&&"View your academic progress and school information",!["teacher","admin","student"].includes(s)&&"Manage your school efficiently with our comprehensive dashboard"]})]}),"admin"===s&&(0,ga.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ga.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Admin Quick Actions"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("button",{onClick:()=>e("/admin/user-management"),className:"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,ga.jsx)(Aa,{className:"w-6 h-6 text-blue-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:"Manage Users"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Add/edit users"})]})]}),(0,ga.jsxs)("button",{onClick:()=>e("/admin/fees"),className:"flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[(0,ga.jsx)(Ba,{className:"w-6 h-6 text-green-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900",children:"Manage Fees"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Fee collection"})]})]}),(0,ga.jsxs)("button",{onClick:()=>e("/admin/transaction-reports"),className:"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[(0,ga.jsx)(Ya,{className:"w-6 h-6 text-purple-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900",children:"View Reports"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Financial reports"})]})]}),(0,ga.jsxs)("button",{onClick:()=>e("/admin/role-permissions"),className:"flex items-center p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors",children:[(0,ga.jsx)(Qa,{className:"w-6 h-6 text-orange-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900",children:"Permissions"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Role management"})]})]})]})]}),"teacher"===s&&(0,ga.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ga.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("attendance")&&(0,ga.jsxs)("button",{onClick:()=>e("/admin/attendance"),className:"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,ga.jsx)(Ia,{className:"w-6 h-6 text-blue-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900",children:"Mark Attendance"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Record student attendance"})]})]}),t("grades")&&(0,ga.jsxs)("button",{onClick:()=>e("/admin/grades"),className:"flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[(0,ga.jsx)(Oa,{className:"w-6 h-6 text-green-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900",children:"Enter Grades"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Grade student assignments"})]})]}),t("exams")&&(0,ga.jsxs)("button",{onClick:()=>e("/admin/exams"),className:"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[(0,ga.jsx)(Ta,{className:"w-6 h-6 text-purple-600 mr-3"}),(0,ga.jsxs)("div",{className:"text-left",children:[(0,ga.jsx)("div",{className:"font-medium text-gray-900",children:"Create Exam"}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Set up new exams"})]})]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t("students")&&(0,ga.jsx)(m,{title:"Total Students",value:r.totalStudents,icon:Aa,color:"bg-blue-500",trend:"up",trendValue:"12",route:"/admin/students"}),t("teachers")&&(0,ga.jsx)(m,{title:"Total Teachers",value:r.totalTeachers,icon:Ra,color:"bg-green-500",trend:"up",trendValue:"8",route:"/admin/teachers"}),t("classes")&&(0,ga.jsx)(m,{title:"Total Classes",value:r.totalClasses,icon:Ta,color:"bg-purple-500",trend:"up",trendValue:"5",route:"/admin/classes"}),t("fees")&&"teacher"!==s&&(0,ga.jsx)(m,{title:"Total Revenue",value:"$".concat(r.totalRevenue.toLocaleString()),icon:Ba,color:"bg-yellow-500",trend:"up",trendValue:"15",route:"/admin/fees"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t("attendance")&&(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>e("/admin/attendance"),children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Attendance Trends"}),(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)(Ia,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsx)(Rr,{className:"w-4 h-4 text-blue-600"})]})]}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Jh,{data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Present",data:[85,92,78,96,88,0,0],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4},{label:"Absent",data:[15,8,22,4,12,0,0],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:h})}),(0,ga.jsx)("div",{className:"mt-4 text-center",children:(0,ga.jsx)("span",{className:"text-sm text-blue-600",children:"Click to view attendance details"})})]}),t("grades")&&(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>e("/admin/grades"),children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Grade Distribution"}),(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)(Oa,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsx)(Rr,{className:"w-4 h-4 text-blue-600"})]})]}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Zh,{data:{labels:["A+","A","B+","B","C+","C","D","F"],datasets:[{data:[12,18,25,20,15,8,2,0],backgroundColor:["#10B981","#34D399","#6EE7B7","#A7F3D0","#FDE68A","#FCD34D","#F59E0B","#EF4444"],borderWidth:2,borderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})}),(0,ga.jsx)("div",{className:"mt-4 text-center",children:(0,ga.jsx)("span",{className:"text-sm text-blue-600",children:"Click to view grades details"})})]})]}),t("fees")&&"teacher"!==s&&(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>e("/admin/fees"),children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Monthly Revenue"}),(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)(Ir,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsx)(Rr,{className:"w-4 h-4 text-blue-600"})]})]}),(0,ga.jsx)("div",{className:"h-80",children:(0,ga.jsx)(Xh,{data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue ($)",data:[12e3,15e3,18e3,16e3,2e4,22e3],backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgb(59, 130, 246)",borderWidth:3,fill:!0,tension:.4}]},options:h})}),(0,ga.jsx)("div",{className:"mt-4 text-center",children:(0,ga.jsx)("span",{className:"text-sm text-blue-600",children:"Click to view fees and revenue details"})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t("students")&&(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>e("/admin/students"),children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Recent Students"}),(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)(Aa,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsx)(Rr,{className:"w-4 h-4 text-blue-600"})]})]}),(0,ga.jsx)("div",{className:"space-y-4",children:0===c.length?(0,ga.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Aa,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,ga.jsx)("p",{children:"No students found"})]}):c.map(e=>{var t,s,a,n,r,i,l;return(0,ga.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,ga.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsxs)("span",{className:"text-blue-600 font-semibold",children:[null===(t=e.user)||void 0===t||null===(s=t.firstName)||void 0===s?void 0:s[0],null===(a=e.user)||void 0===a||null===(n=a.lastName)||void 0===n?void 0:n[0]]})}),(0,ga.jsxs)("div",{className:"flex-1",children:[(0,ga.jsxs)("p",{className:"font-medium text-gray-900",children:[null===(r=e.user)||void 0===r?void 0:r.firstName," ",null===(i=e.user)||void 0===i?void 0:i.lastName]}),(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:e.studentId})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:null===(l=e.class)||void 0===l?void 0:l.name}),(0,ga.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString()})]})]},e.id)})}),(0,ga.jsx)("div",{className:"mt-4 text-center",children:(0,ga.jsx)("span",{className:"text-sm text-blue-600",children:"Click to view all students"})})]}),(0,ga.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Quick Stats"}),(0,ga.jsx)(Lr,{className:"w-5 h-5 text-gray-400"})]}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ga.jsx)(Lr,{className:"w-5 h-5 text-green-600"}),(0,ga.jsx)("span",{className:"text-green-800 font-medium",children:"Attendance Rate"})]}),(0,ga.jsx)("span",{className:"text-2xl font-bold text-green-600",children:"94%"})]}),(0,ga.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ga.jsx)(Oa,{className:"w-5 h-5 text-blue-600"}),(0,ga.jsx)("span",{className:"text-blue-800 font-medium",children:"Average Grade"})]}),(0,ga.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:"B+"})]}),t("fees")&&(0,ga.jsxs)("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ga.jsx)(Ba,{className:"w-5 h-5 text-purple-600"}),(0,ga.jsx)("span",{className:"text-purple-800 font-medium",children:"Fee Collection"})]}),(0,ga.jsx)("span",{className:"text-2xl font-bold text-purple-600",children:"87%"})]}),t("classes")&&(0,ga.jsxs)("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ga.jsx)(La,{className:"w-5 h-5 text-yellow-600"}),(0,ga.jsx)("span",{className:"text-yellow-800 font-medium",children:"Active Classes"})]}),(0,ga.jsx)("span",{className:"text-2xl font-bold text-yellow-600",children:r.totalClasses})]})]})]})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Quick Navigation"}),(0,ga.jsx)(Rr,{className:"w-5 h-5 text-gray-400"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors duration-200",onClick:()=>e("/students"),children:[(0,ga.jsx)(Aa,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-blue-800",children:"Students"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg cursor-pointer hover:bg-green-100 transition-colors duration-200",onClick:()=>e("/teachers"),children:[(0,ga.jsx)(Ra,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-green-800",children:"Teachers"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg cursor-pointer hover:bg-purple-100 transition-colors duration-200",onClick:()=>e("/classes"),children:[(0,ga.jsx)(Ta,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-purple-800",children:"Classes"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 transition-colors duration-200",onClick:()=>e("/subjects"),children:[(0,ga.jsx)(Oa,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-orange-800",children:"Subjects"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-indigo-50 rounded-lg cursor-pointer hover:bg-indigo-100 transition-colors duration-200",onClick:()=>e("/attendance"),children:[(0,ga.jsx)(Ia,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-indigo-800",children:"Attendance"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-pink-50 rounded-lg cursor-pointer hover:bg-pink-100 transition-colors duration-200",onClick:()=>e("/grades"),children:[(0,ga.jsx)(Oa,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-pink-800",children:"Grades"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg cursor-pointer hover:bg-yellow-100 transition-colors duration-200",onClick:()=>e("/fees"),children:[(0,ga.jsx)(Ba,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-yellow-800",children:"Fees"})]}),(0,ga.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg cursor-pointer hover:bg-red-100 transition-colors duration-200",onClick:()=>e("/reports"),children:[(0,ga.jsx)(Lr,{className:"w-8 h-8 text-red-600 mx-auto mb-2"}),(0,ga.jsx)("p",{className:"text-center text-sm font-medium text-red-800",children:"Reports"})]})]})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Recent Alerts"}),(0,ga.jsx)(Fr,{className:"w-5 h-5 text-gray-400"})]}),(0,ga.jsxs)("div",{className:"space-y-3",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400",children:[(0,ga.jsx)(Fr,{className:"w-5 h-5 text-yellow-600"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-yellow-800 font-medium",children:"Fee Payment Due"}),(0,ga.jsx)("p",{className:"text-yellow-600 text-sm",children:"5 students have pending fee payments"})]})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:[(0,ga.jsx)(Ia,{className:"w-5 h-5 text-blue-600"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-blue-800 font-medium",children:"Parent-Teacher Meeting"}),(0,ga.jsx)("p",{className:"text-blue-600 text-sm",children:"Scheduled for next Friday at 2:00 PM"})]})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg border-l-4 border-green-400",children:[(0,ga.jsx)(Lr,{className:"w-5 h-5 text-green-600"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-green-800 font-medium",children:"Exam Results Published"}),(0,ga.jsx)("p",{className:"text-green-600 text-sm",children:"Mid-term exam results are now available"})]})]})]})]}),"teacher"===s&&(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t("classes")&&(0,ga.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"My Classes"}),(0,ga.jsxs)("div",{className:"space-y-3",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"font-medium text-gray-900",children:"Grade 5 - A"}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Mathematics, Science"})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"32 Students"}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Active"})]})]}),(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"font-medium text-gray-900",children:"Grade 6 - B"}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Mathematics"})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-green-600",children:"28 Students"}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Active"})]})]})]}),(0,ga.jsx)("button",{onClick:()=>e("/admin/classes"),className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View All Classes"})]}),t("timetable")&&(0,ga.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ga.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Today's Schedule"}),(0,ga.jsxs)("div",{className:"space-y-3",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"font-medium text-gray-900",children:"Mathematics"}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Grade 5 - A"})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"09:00 - 10:00"}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Room 101"})]})]}),(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"font-medium text-gray-900",children:"Science"}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Grade 5 - A"})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-orange-600",children:"10:15 - 11:15"}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Lab 1"})]})]}),(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"font-medium text-gray-900",children:"Mathematics"}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Grade 6 - B"})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-green-600",children:"11:30 - 12:30"}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:"Room 102"})]})]})]}),(0,ga.jsx)("button",{onClick:()=>e("/admin/timetable"),className:"w-full mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"View Full Timetable"})]})]})]})};fu.register(uh,ph,Iu,Au,Bu,Gu,oh,Vu,wu);const rm=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)({attendancePercentage:85,totalSubjects:6,completedAssignments:12,pendingAssignments:3,averageGrade:8.5,totalClasses:30,attendedClasses:25}),[n,r]=(0,a.useState)([{id:1,type:"assignment",title:"Math Homework - Algebra",date:"2025-09-07",status:"completed"},{id:2,type:"attendance",title:"Present in English Class",date:"2025-09-06",status:"present"},{id:3,type:"grade",title:"Science Test - 85%",date:"2025-09-05",status:"graded"},{id:4,type:"assignment",title:"History Essay",date:"2025-09-04",status:"pending"}]),[i,l]=(0,a.useState)([{id:1,title:"Math Test",date:"2025-09-10",type:"exam"},{id:2,title:"Science Project Due",date:"2025-09-12",type:"assignment"},{id:"3",title:"School Holiday",date:"2025-09-15",type:"holiday"},{id:4,title:"Parent-Teacher Meeting",date:"2025-09-18",type:"meeting"}]),[o,c]=(0,a.useState)([{id:1,subject:"Mathematics",title:"Algebra Problems",dueDate:"2025-09-08",status:"pending",description:"Complete exercises 1-20 from chapter 5"},{id:2,subject:"English",title:"Essay Writing",dueDate:"2025-09-10",status:"completed",description:"Write a 500-word essay on climate change"},{id:3,subject:"Science",title:"Lab Report",dueDate:"2025-09-12",status:"pending",description:"Complete lab report for chemistry experiment"}]),d=e=>{switch(e){case"completed":case"present":case"graded":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"absent":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},u=e=>{switch(e){case"exam":return"text-red-600 bg-red-100";case"assignment":return"text-blue-600 bg-blue-100";case"holiday":return"text-green-600 bg-green-100";case"meeting":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}};return(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",(null===e||void 0===e?void 0:e.firstName)||"Student","!"]}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Here's what's happening in your academic journey"})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:"Current Grade"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"8th Grade"})]}),(0,ga.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Za,{className:"w-8 h-8 text-blue-600"})})]})]})}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Lr,{className:"w-6 h-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Attendance"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[t.attendancePercentage,"%"]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ta,{className:"w-6 h-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Subjects"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.totalSubjects})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,ga.jsx)(Fa,{className:"w-6 h-6 text-yellow-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Assignments"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.pendingAssignments})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Oa,{className:"w-6 h-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Average Grade"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[t.averageGrade,"/10"]})]})]})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Homework"}),(0,ga.jsx)(Ta,{className:"w-5 h-5 text-gray-400"})]}),(0,ga.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,ga.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:e.subject}),(0,ga.jsxs)("p",{className:"text-xs text-gray-500",children:["Due: ",e.dueDate]})]}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(d(e.status)),children:e.status})]}),(0,ga.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.description})]},e.id))})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Events"}),(0,ga.jsx)(Ia,{className:"w-5 h-5 text-gray-400"})]}),(0,ga.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:e.date})]}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(u(e.type)),children:e.type})]},e.id))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Attendance"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Xh,{data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat"],datasets:[{label:"Attendance",data:[1,1,1,0,1,0],backgroundColor:["#10B981","#10B981","#10B981","#EF4444","#10B981","#EF4444"],borderColor:["#10B981","#10B981","#10B981","#EF4444","#10B981","#EF4444"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:1,ticks:{callback:function(e){return 1===e?"Present":"Absent"}}}}}})})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject Grades"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Zh,{data:{labels:["Math","English","Science","History","Geography","Art"],datasets:[{label:"Grades",data:[85,92,78,88,90,95],backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activities"}),(0,ga.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsxs)("div",{className:"p-2 bg-gray-100 rounded-lg mr-3",children:["assignment"===e.type&&(0,ga.jsx)(Fa,{className:"w-4 h-4 text-gray-600"}),"attendance"===e.type&&(0,ga.jsx)(Lr,{className:"w-4 h-4 text-gray-600"}),"grade"===e.type&&(0,ga.jsx)(Oa,{className:"w-4 h-4 text-gray-600"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:e.date})]})]}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(d(e.status)),children:e.status})]},e.id))})]})]})},im=Da("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),lm=Da("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),om=Da("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),cm=Da("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),dm=Da("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),um={getClasses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/classes",{params:e})).data},getClass:async e=>(await tm.get("/classes/".concat(e))).data,createClass:async e=>(await tm.post("/classes",e)).data,updateClass:async(e,t)=>(await tm.put("/classes/".concat(e),t)).data,deleteClass:async e=>(await tm.delete("/classes/".concat(e))).data,getClassStats:async e=>(await tm.get("/classes/".concat(e,"/stats"))).data},hm=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)(0),[f,b]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",studentId:"",admissionDate:"",classId:"",parentName:"",parentPhone:"",parentEmail:"",emergencyContact:"",medicalInfo:"",transportRoute:""});(0,a.useEffect)(()=>{y(),v()},[]);const y=async()=>{try{i(!0),console.log("Loading students...");const e=await am.getStudents();console.log("Students response:",e);const s=e.data.students||[];console.log("Setting students state with:",s.length,"students"),t([...s]),console.log("Students state updated successfully")}catch(e){console.error("Error loading students:",e),Dr.error("Failed to load students")}finally{i(!1)}},v=async()=>{try{const e=await um.getClasses();n(e.data.classes||[])}catch(e){console.error("Error loading classes:",e)}},j=()=>{b({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",studentId:"",admissionDate:"",classId:"",parentName:"",parentPhone:"",parentEmail:"",emergencyContact:"",medicalInfo:"",transportRoute:""})},N=e.filter(e=>{var t,s,a,n,r,i;return(null===(t=e.studentId)||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase()))||(null===(s=e.user)||void 0===s||null===(a=s.firstName)||void 0===a?void 0:a.toLowerCase().includes(l.toLowerCase()))||(null===(n=e.user)||void 0===n||null===(r=n.lastName)||void 0===r?void 0:r.toLowerCase().includes(l.toLowerCase()))||(null===(i=e.parentName)||void 0===i?void 0:i.toLowerCase().includes(l.toLowerCase()))});return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Students"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage student information and records"})]}),(0,ga.jsxs)("button",{className:"btn btn-primary flex items-center",onClick:()=>d(!0),children:[(0,ga.jsx)(im,{className:"w-4 h-4 mr-2"}),"Add Student"]})]}),(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search students...",className:"pl-10 input w-64",value:l,onChange:e=>o(e.target.value)})]}),(0,ga.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[(0,ga.jsx)(om,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:r?(0,ga.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)("table",{className:"table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Student ID"}),(0,ga.jsx)("th",{children:"Name"}),(0,ga.jsx)("th",{children:"Class"}),(0,ga.jsx)("th",{children:"Parent"}),(0,ga.jsx)("th",{children:"Phone"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:0===N.length?(0,ga.jsx)("tr",{children:(0,ga.jsxs)("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Aa,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,ga.jsx)("p",{children:"No students found. Add your first student to get started."})]})}):N.map((e,t)=>{var s,a,n,r;return(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("td",{children:e.studentId}),(0,ga.jsxs)("td",{children:[null===(s=e.user)||void 0===s?void 0:s.firstName," ",null===(a=e.user)||void 0===a?void 0:a.lastName]}),(0,ga.jsxs)("td",{children:[null===(n=e.class)||void 0===n?void 0:n.name," ",null===(r=e.class)||void 0===r?void 0:r.section]}),(0,ga.jsx)("td",{children:e.parentName}),(0,ga.jsx)("td",{children:e.parentPhone}),(0,ga.jsx)("td",{children:(0,ga.jsx)("span",{className:"badge ".concat(e.isActive?"badge-success":"badge-danger"),children:e.isActive?"Active":"Inactive"})}),(0,ga.jsx)("td",{children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{className:"btn btn-sm btn-secondary",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(e=>{var t,s,a,n,r,i;console.log("Opening edit modal for student:",e),x(e);const l={firstName:(null===(t=e.user)||void 0===t?void 0:t.firstName)||"",lastName:(null===(s=e.user)||void 0===s?void 0:s.lastName)||"",email:(null===(a=e.user)||void 0===a?void 0:a.email)||"",phone:(null===(n=e.user)||void 0===n?void 0:n.phone)||"",dateOfBirth:(null===(r=e.user)||void 0===r?void 0:r.dateOfBirth)||"",gender:(null===(i=e.user)||void 0===i?void 0:i.gender)||"",studentId:e.studentId||"",admissionDate:e.admissionDate||"",classId:e.classId||"",parentName:e.parentName||"",parentPhone:e.parentPhone||"",parentEmail:e.parentEmail||"",emergencyContact:e.emergencyContact||"",medicalInfo:e.medicalInfo||"",transportRoute:e.transportRoute||""};console.log("Setting form data:",l),b(l),h(!0)})(e),children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this student?"))try{await am.deleteStudent(e),Dr.success("Student deleted successfully"),y()}catch(t){console.error("Error deleting student:",t),Dr.error("Failed to delete student")}})(e.id),children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},"".concat(e.id,"-").concat(e.updatedAt||t,"-").concat(p))})})]},p)})]}),c&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Student"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await am.createStudent(f),Dr.success("Student added successfully"),d(!1),j(),y()}catch(a){var t,s;console.error("Error adding student:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add student")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.firstName,onChange:e=>b(Le(Le({},f),{},{firstName:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.lastName,onChange:e=>b(Le(Le({},f),{},{lastName:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,ga.jsx)("input",{type:"email",className:"input w-full",value:f.email,onChange:e=>b(Le(Le({},f),{},{email:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,ga.jsx)("input",{type:"tel",className:"input w-full",value:f.phone,onChange:e=>b(Le(Le({},f),{},{phone:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.studentId,onChange:e=>b(Le(Le({},f),{},{studentId:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admission Date *"}),(0,ga.jsx)("input",{type:"date",className:"input w-full",value:f.admissionDate,onChange:e=>b(Le(Le({},f),{},{admissionDate:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.classId,onChange:e=>b(Le(Le({},f),{},{classId:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.gender,onChange:e=>b(Le(Le({},f),{},{gender:e.target.value})),children:[(0,ga.jsx)("option",{value:"",children:"Select Gender"}),(0,ga.jsx)("option",{value:"male",children:"Male"}),(0,ga.jsx)("option",{value:"female",children:"Female"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.parentName,onChange:e=>b(Le(Le({},f),{},{parentName:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Phone *"}),(0,ga.jsx)("input",{type:"tel",className:"input w-full",value:f.parentPhone,onChange:e=>b(Le(Le({},f),{},{parentPhone:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Email"}),(0,ga.jsx)("input",{type:"email",className:"input w-full",value:f.parentEmail,onChange:e=>b(Le(Le({},f),{},{parentEmail:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,ga.jsx)("input",{type:"date",className:"input w-full",value:f.dateOfBirth,onChange:e=>b(Le(Le({},f),{},{dateOfBirth:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Student"})]})]})]})}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Student"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{console.log("Updating student with data:",f);const e=await am.updateStudent(m.id,f);console.log("Update response:",e),g(e=>e+1),t(e=>e.map(e=>{var t,s,a,n,r,i,l;return e.id===m.id?Le(Le(Le({},e),f),{},{updatedAt:(new Date).toISOString(),user:Le(Le({},e.user),{},{firstName:f.firstName||(null===(t=e.user)||void 0===t?void 0:t.firstName),lastName:f.lastName||(null===(s=e.user)||void 0===s?void 0:s.lastName),email:f.email||(null===(a=e.user)||void 0===a?void 0:a.email),phone:f.phone||(null===(n=e.user)||void 0===n?void 0:n.phone),address:f.address||(null===(r=e.user)||void 0===r?void 0:r.address),dateOfBirth:f.dateOfBirth||(null===(i=e.user)||void 0===i?void 0:i.dateOfBirth),gender:f.gender||(null===(l=e.user)||void 0===l?void 0:l.gender)})}):e})),Dr.success("Student updated successfully"),h(!1),j(),setTimeout(async()=>{await y(),g(e=>e+1)},100),console.log("Student updated and UI refreshed")}catch(n){var s,a;console.error("Error updating student:",n),Dr.error((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update student")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.firstName,onChange:e=>b(Le(Le({},f),{},{firstName:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.lastName,onChange:e=>b(Le(Le({},f),{},{lastName:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,ga.jsx)("input",{type:"email",className:"input w-full",value:f.email,onChange:e=>b(Le(Le({},f),{},{email:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,ga.jsx)("input",{type:"tel",className:"input w-full",value:f.phone,onChange:e=>b(Le(Le({},f),{},{phone:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.studentId,onChange:e=>b(Le(Le({},f),{},{studentId:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admission Date *"}),(0,ga.jsx)("input",{type:"date",className:"input w-full",value:f.admissionDate,onChange:e=>b(Le(Le({},f),{},{admissionDate:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.classId,onChange:e=>b(Le(Le({},f),{},{classId:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.gender,onChange:e=>b(Le(Le({},f),{},{gender:e.target.value})),children:[(0,ga.jsx)("option",{value:"",children:"Select Gender"}),(0,ga.jsx)("option",{value:"male",children:"Male"}),(0,ga.jsx)("option",{value:"female",children:"Female"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.parentName,onChange:e=>b(Le(Le({},f),{},{parentName:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Phone *"}),(0,ga.jsx)("input",{type:"tel",className:"input w-full",value:f.parentPhone,onChange:e=>b(Le(Le({},f),{},{parentPhone:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Email"}),(0,ga.jsx)("input",{type:"email",className:"input w-full",value:f.parentEmail,onChange:e=>b(Le(Le({},f),{},{parentEmail:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,ga.jsx)("input",{type:"date",className:"input w-full",value:f.dateOfBirth,onChange:e=>b(Le(Le({},f),{},{dateOfBirth:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Student"})]})]})]})})]})},mm={getTeachers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/teachers",{params:e})).data},getTeacher:async e=>(await tm.get("/teachers/".concat(e))).data,createTeacher:async e=>{const t={firstName:e.firstName,lastName:e.lastName,email:e.email,password:"password123",phone:e.phone,address:e.address,dateOfBirth:e.dateOfBirth,gender:e.gender,employeeId:e.employeeId,hireDate:e.hireDate||(new Date).toISOString().split("T")[0],qualification:e.qualification,specialization:e.specialization,salary:e.salary};return(await tm.post("/teachers/with-user",t)).data},updateTeacher:async(e,t)=>{const s={firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,address:t.address,dateOfBirth:t.dateOfBirth,gender:t.gender,employeeId:t.employeeId,hireDate:t.hireDate,qualification:t.qualification,specialization:t.specialization,salary:t.salary};return(await tm.put("/teachers/".concat(e),s)).data},deleteTeacher:async e=>(await tm.delete("/teachers/".concat(e))).data,getTeacherClasses:async e=>(await tm.get("/teachers/".concat(e,"/classes"))).data,getTeacherSubjects:async e=>(await tm.get("/teachers/".concat(e,"/subjects"))).data,getTeacherStats:async e=>(await tm.get("/teachers/".concat(e,"/stats"))).data},xm=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(0),[p,g]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",employeeId:"",hireDate:"",qualification:"",specialization:"",salary:""});(0,a.useEffect)(()=>{f()},[]);const f=async()=>{try{n(!0);const e=(await mm.getTeachers()).data.teachers||[];t([...e])}catch(e){console.error("Error loading teachers:",e),Dr.error("Failed to load teachers")}finally{n(!1)}},b=()=>{g({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",employeeId:"",hireDate:"",qualification:"",specialization:"",salary:""})},y=e.filter(e=>{var t,s,a,n,i,l;return(null===(t=e.employeeId)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(s=e.user)||void 0===s||null===(a=s.firstName)||void 0===a?void 0:a.toLowerCase().includes(r.toLowerCase()))||(null===(n=e.user)||void 0===n||null===(i=n.lastName)||void 0===i?void 0:i.toLowerCase().includes(r.toLowerCase()))||(null===(l=e.qualification)||void 0===l?void 0:l.toLowerCase().includes(r.toLowerCase()))});return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Teachers"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage teacher information and records"})]}),(0,ga.jsxs)("button",{className:"btn btn-primary flex items-center",onClick:()=>o(!0),children:[(0,ga.jsx)(im,{className:"w-4 h-4 mr-2"}),"Add Teacher"]})]}),(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search teachers...",className:"pl-10 input w-64",value:r,onChange:e=>i(e.target.value)})]}),(0,ga.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[(0,ga.jsx)(om,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:s?(0,ga.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)("table",{className:"table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Employee ID"}),(0,ga.jsx)("th",{children:"Name"}),(0,ga.jsx)("th",{children:"Qualification"}),(0,ga.jsx)("th",{children:"Specialization"}),(0,ga.jsx)("th",{children:"Phone"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:0===y.length?(0,ga.jsx)("tr",{children:(0,ga.jsxs)("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Ra,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,ga.jsx)("p",{children:"No teachers found. Add your first teacher to get started."})]})}):y.map(e=>{var t,s,a;return(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("td",{children:e.employeeId}),(0,ga.jsxs)("td",{children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName]}),(0,ga.jsx)("td",{children:e.qualification}),(0,ga.jsx)("td",{children:e.specialization}),(0,ga.jsx)("td",{children:null===(a=e.user)||void 0===a?void 0:a.phone}),(0,ga.jsx)("td",{children:(0,ga.jsx)("span",{className:"badge ".concat(e.isActive?"badge-success":"badge-danger"),children:e.isActive?"Active":"Inactive"})}),(0,ga.jsx)("td",{children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{className:"btn btn-sm btn-secondary",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(e=>{var t,s,a,n,r,i;h(e),g({firstName:(null===(t=e.user)||void 0===t?void 0:t.firstName)||"",lastName:(null===(s=e.user)||void 0===s?void 0:s.lastName)||"",email:(null===(a=e.user)||void 0===a?void 0:a.email)||"",phone:(null===(n=e.user)||void 0===n?void 0:n.phone)||"",dateOfBirth:(null===(r=e.user)||void 0===r?void 0:r.dateOfBirth)||"",gender:(null===(i=e.user)||void 0===i?void 0:i.gender)||"",employeeId:e.employeeId||"",hireDate:e.hireDate||"",qualification:e.qualification||"",specialization:e.specialization||"",salary:e.salary||""}),d(!0)})(e),children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{await mm.deleteTeacher(e),Dr.success("Teacher deleted successfully"),f()}catch(t){console.error("Error deleting teacher:",t),Dr.error("Failed to delete teacher")}})(e.id),children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]},m)})]}),l&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Teacher"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{console.log("Form data being sent:",p),await mm.createTeacher(p),Dr.success("Teacher added successfully"),o(!1),b(),f()}catch(a){var t,s;console.error("Error adding teacher:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add teacher")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.firstName,onChange:e=>g(Le(Le({},p),{},{firstName:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.lastName,onChange:e=>g(Le(Le({},p),{},{lastName:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,ga.jsx)("input",{type:"email",className:"input w-full",value:p.email,onChange:e=>g(Le(Le({},p),{},{email:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,ga.jsx)("input",{type:"tel",className:"input w-full",value:p.phone,onChange:e=>g(Le(Le({},p),{},{phone:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.employeeId,onChange:e=>g(Le(Le({},p),{},{employeeId:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hire Date *"}),(0,ga.jsx)("input",{type:"date",className:"input w-full",value:p.hireDate,onChange:e=>g(Le(Le({},p),{},{hireDate:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.qualification,onChange:e=>g(Le(Le({},p),{},{qualification:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.specialization,onChange:e=>g(Le(Le({},p),{},{specialization:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:p.salary,onChange:e=>g(Le(Le({},p),{},{salary:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,ga.jsxs)("select",{className:"input w-full",value:p.gender,onChange:e=>g(Le(Le({},p),{},{gender:e.target.value})),children:[(0,ga.jsx)("option",{value:"",children:"Select Gender"}),(0,ga.jsx)("option",{value:"male",children:"Male"}),(0,ga.jsx)("option",{value:"female",children:"Female"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>o(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Teacher"})]})]})]})}),c&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Teacher"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await mm.updateTeacher(u.id,p);console.log("Update response:",e),x(e=>e+1),t(e=>e.map(e=>e.id===u.id?Le(Le(Le({},e),p),{},{updatedAt:(new Date).toISOString()}):e)),Dr.success("Teacher updated successfully"),d(!1),b(),setTimeout(async()=>{await f()},100),console.log("Teacher updated and UI refreshed")}catch(n){var s,a;console.error("Error updating teacher:",n),Dr.error((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update teacher")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.firstName,onChange:e=>g(Le(Le({},p),{},{firstName:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.lastName,onChange:e=>g(Le(Le({},p),{},{lastName:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,ga.jsx)("input",{type:"email",className:"input w-full",value:p.email,onChange:e=>g(Le(Le({},p),{},{email:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,ga.jsx)("input",{type:"tel",className:"input w-full",value:p.phone,onChange:e=>g(Le(Le({},p),{},{phone:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.employeeId,onChange:e=>g(Le(Le({},p),{},{employeeId:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hire Date *"}),(0,ga.jsx)("input",{type:"date",className:"input w-full",value:p.hireDate,onChange:e=>g(Le(Le({},p),{},{hireDate:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.qualification,onChange:e=>g(Le(Le({},p),{},{qualification:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.specialization,onChange:e=>g(Le(Le({},p),{},{specialization:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:p.salary,onChange:e=>g(Le(Le({},p),{},{salary:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,ga.jsxs)("select",{className:"input w-full",value:p.gender,onChange:e=>g(Le(Le({},p),{},{gender:e.target.value})),children:[(0,ga.jsx)("option",{value:"",children:"Select Gender"}),(0,ga.jsx)("option",{value:"male",children:"Male"}),(0,ga.jsx)("option",{value:"female",children:"Female"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Teacher"})]})]})]})})]})},pm=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(0),[p,g]=(0,a.useState)({name:"",section:"",capacity:"",roomNumber:"",academicYear:""});(0,a.useEffect)(()=>{f()},[]);const f=async()=>{try{n(!0);const e=await um.getClasses();t(e.data.classes||[])}catch(e){console.error("Error loading classes:",e),Dr.error("Failed to load classes")}finally{n(!1)}},b=()=>{g({name:"",section:"",capacity:"",roomNumber:"",academicYear:""})},y=e.filter(e=>{var t,s,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(s=e.section)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()))||(null===(a=e.academicYear)||void 0===a?void 0:a.toLowerCase().includes(r.toLowerCase()))});return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Classes"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage class information and records"})]}),(0,ga.jsxs)("button",{className:"btn btn-primary flex items-center",onClick:()=>o(!0),children:[(0,ga.jsx)(im,{className:"w-4 h-4 mr-2"}),"Add Class"]})]}),(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search classes...",className:"pl-10 input w-64",value:r,onChange:e=>i(e.target.value)})]}),(0,ga.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[(0,ga.jsx)(om,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:s?(0,ga.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)("table",{className:"table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Class Name"}),(0,ga.jsx)("th",{children:"Section"}),(0,ga.jsx)("th",{children:"Capacity"}),(0,ga.jsx)("th",{children:"Room Number"}),(0,ga.jsx)("th",{children:"Academic Year"}),(0,ga.jsx)("th",{children:"Students"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:0===y.length?(0,ga.jsx)("tr",{children:(0,ga.jsxs)("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Ta,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,ga.jsx)("p",{children:"No classes found. Add your first class to get started."})]})}):y.map(e=>{var t;return(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("td",{children:e.name}),(0,ga.jsx)("td",{children:e.section}),(0,ga.jsx)("td",{children:e.capacity}),(0,ga.jsx)("td",{children:e.roomNumber||"N/A"}),(0,ga.jsx)("td",{children:e.academicYear}),(0,ga.jsx)("td",{children:(null===(t=e.students)||void 0===t?void 0:t.length)||0}),(0,ga.jsx)("td",{children:(0,ga.jsx)("span",{className:"badge ".concat(e.isActive?"badge-success":"badge-danger"),children:e.isActive?"Active":"Inactive"})}),(0,ga.jsx)("td",{children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{className:"btn btn-sm btn-secondary",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(e=>{h(e),g({name:e.name||"",section:e.section||"",capacity:e.capacity||"",roomNumber:e.roomNumber||"",academicYear:e.academicYear||""}),d(!0)})(e),children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this class?"))try{await um.deleteClass(e),Dr.success("Class deleted successfully"),f()}catch(t){console.error("Error deleting class:",t),Dr.error("Failed to delete class")}})(e.id),children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]},m)})]}),l&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Class"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{console.log("Form data being sent:",p),await um.createClass(p),Dr.success("Class added successfully"),o(!1),b(),f()}catch(a){var t,s;console.error("Error adding class:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add class")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.name,onChange:e=>g(Le(Le({},p),{},{name:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.section,onChange:e=>g(Le(Le({},p),{},{section:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:p.capacity,onChange:e=>g(Le(Le({},p),{},{capacity:e.target.value})),required:!0,min:"1",max:"100"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.roomNumber,onChange:e=>g(Le(Le({},p),{},{roomNumber:e.target.value}))})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.academicYear,onChange:e=>g(Le(Le({},p),{},{academicYear:e.target.value})),placeholder:"e.g., 2024-2025",required:!0})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>o(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Class"})]})]})]})}),c&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Class"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await um.updateClass(u.id,p);console.log("Update response:",e),x(e=>e+1),t(e=>e.map(e=>e.id===u.id?Le(Le(Le({},e),p),{},{updatedAt:(new Date).toISOString()}):e)),Dr.success("Class updated successfully"),d(!1),b(),setTimeout(async()=>{await f()},100),console.log("Class updated and UI refreshed")}catch(n){var s,a;console.error("Error updating class:",n),Dr.error((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update class")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.name,onChange:e=>g(Le(Le({},p),{},{name:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.section,onChange:e=>g(Le(Le({},p),{},{section:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:p.capacity,onChange:e=>g(Le(Le({},p),{},{capacity:e.target.value})),required:!0,min:"1",max:"100"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.roomNumber,onChange:e=>g(Le(Le({},p),{},{roomNumber:e.target.value}))})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:p.academicYear,onChange:e=>g(Le(Le({},p),{},{academicYear:e.target.value})),placeholder:"e.g., 2024-2025",required:!0})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Class"})]})]})]})})]})},gm={getSubjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/subjects",{params:e})).data},getSubject:async e=>(await tm.get("/subjects/".concat(e))).data,createSubject:async e=>(await tm.post("/subjects",e)).data,updateSubject:async(e,t)=>(await tm.put("/subjects/".concat(e),t)).data,deleteSubject:async e=>(await tm.delete("/subjects/".concat(e))).data,getClassSubjects:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/subjects/class/".concat(e),{params:t})).data},getTeacherSubjects:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/subjects/teacher/".concat(e),{params:t})).data}},fm=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)(0),[f,b]=(0,a.useState)({name:"",code:"",description:"",credits:"",classId:""});(0,a.useEffect)(()=>{y(),v()},[]);const y=async()=>{try{i(!0);const e=await gm.getSubjects();t(e.data.subjects||[])}catch(e){console.error("Error loading subjects:",e),Dr.error("Failed to load subjects")}finally{i(!1)}},v=async()=>{try{const e=await um.getClasses();n(e.data.classes||[])}catch(e){console.error("Error loading classes:",e)}},j=()=>{b({name:"",code:"",description:"",credits:"",classId:""})},N=e.filter(e=>{var t,s,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase()))||(null===(s=e.code)||void 0===s?void 0:s.toLowerCase().includes(l.toLowerCase()))||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(l.toLowerCase()))});return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Subjects"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage subject information and curriculum"})]}),(0,ga.jsxs)("button",{className:"btn btn-primary flex items-center",onClick:()=>d(!0),children:[(0,ga.jsx)(im,{className:"w-4 h-4 mr-2"}),"Add Subject"]})]}),(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search subjects...",className:"pl-10 input w-64",value:l,onChange:e=>o(e.target.value)})]}),(0,ga.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[(0,ga.jsx)(om,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:r?(0,ga.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)("table",{className:"table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Subject Code"}),(0,ga.jsx)("th",{children:"Subject Name"}),(0,ga.jsx)("th",{children:"Description"}),(0,ga.jsx)("th",{children:"Credits"}),(0,ga.jsx)("th",{children:"Class"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:0===N.length?(0,ga.jsx)("tr",{children:(0,ga.jsxs)("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Ta,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,ga.jsx)("p",{children:"No subjects found. Add your first subject to get started."})]})}):N.map(e=>{var t;return(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("td",{children:(0,ga.jsx)("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:e.code})}),(0,ga.jsx)("td",{className:"font-medium",children:e.name}),(0,ga.jsx)("td",{className:"max-w-xs truncate",children:e.description||"N/A"}),(0,ga.jsx)("td",{children:e.credits||"N/A"}),(0,ga.jsx)("td",{children:(null===(t=e.class)||void 0===t?void 0:t.name)||"N/A"}),(0,ga.jsx)("td",{children:(0,ga.jsx)("span",{className:"badge ".concat(e.isActive?"badge-success":"badge-danger"),children:e.isActive?"Active":"Inactive"})}),(0,ga.jsx)("td",{children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{className:"btn btn-sm btn-secondary",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(e=>{x(e),b({name:e.name||"",code:e.code||"",description:e.description||"",credits:e.credits||"",classId:e.classId||""}),h(!0)})(e),children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this subject?"))try{await gm.deleteSubject(e),Dr.success("Subject deleted successfully"),y()}catch(t){console.error("Error deleting subject:",t),Dr.error("Failed to delete subject")}})(e.id),children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]},p)})]}),c&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Subject"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await gm.createSubject(f),Dr.success("Subject added successfully"),d(!1),j(),y()}catch(a){var t,s;console.error("Error adding subject:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add subject")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.name,onChange:e=>b(Le(Le({},f),{},{name:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Code *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.code,onChange:e=>b(Le(Le({},f),{},{code:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{className:"input w-full",rows:"3",value:f.description,onChange:e=>b(Le(Le({},f),{},{description:e.target.value})),placeholder:"Subject description..."})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credits"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:f.credits,onChange:e=>b(Le(Le({},f),{},{credits:e.target.value})),min:"1",max:"10"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.classId,onChange:e=>b(Le(Le({},f),{},{classId:e.target.value})),children:[(0,ga.jsx)("option",{value:"",children:"Select Class (Optional)"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Subject"})]})]})]})}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Subject"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await gm.updateSubject(m.id,f);console.log("Update response:",e),g(e=>e+1),t(e=>e.map(e=>e.id===m.id?Le(Le(Le({},e),f),{},{updatedAt:(new Date).toISOString()}):e)),Dr.success("Subject updated successfully"),h(!1),j(),setTimeout(async()=>{await y()},100),console.log("Subject updated and UI refreshed")}catch(n){var s,a;console.error("Error updating subject:",n),Dr.error((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update subject")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.name,onChange:e=>b(Le(Le({},f),{},{name:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Code *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.code,onChange:e=>b(Le(Le({},f),{},{code:e.target.value})),required:!0})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{className:"input w-full",rows:"3",value:f.description,onChange:e=>b(Le(Le({},f),{},{description:e.target.value})),placeholder:"Subject description..."})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credits"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:f.credits,onChange:e=>b(Le(Le({},f),{},{credits:e.target.value})),min:"1",max:"10"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.classId,onChange:e=>b(Le(Le({},f),{},{classId:e.target.value})),children:[(0,ga.jsx)("option",{value:"",children:"Select Class (Optional)"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Subject"})]})]})]})})]})},bm={getGrades:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/grades",{params:e})).data},getGrade:async e=>(await tm.get("/grades/".concat(e))).data,createGrade:async e=>(await tm.post("/grades",e)).data,updateGrade:async(e,t)=>(await tm.put("/grades/".concat(e),t)).data,deleteGrade:async e=>(await tm.delete("/grades/".concat(e))).data,getStudentGrades:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/grades/student/".concat(e),{params:t})).data},getSubjectGrades:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/grades/subject/".concat(e),{params:t})).data},getClassGrades:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await tm.get("/grades/class/".concat(e),{params:t})).data},getGradeStats:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/grades/stats",{params:e})).data}},ym=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[f,b]=(0,a.useState)({studentId:"",subjectId:"",examType:"",marks:"",maxMarks:"",grade:"",remarks:""});(0,a.useEffect)(()=>{y(),v(),j()},[]);const y=async()=>{try{o(!0);const e=await bm.getGrades();t(e.data.grades||[])}catch(e){console.error("Error loading grades:",e),Dr.error("Failed to load grades")}finally{o(!1)}},v=async()=>{try{const e=await am.getStudents();n(e.data.students||[])}catch(e){console.error("Error loading students:",e)}},j=async()=>{try{const e=await gm.getSubjects();i(e.data.subjects||[])}catch(e){console.error("Error loading subjects:",e)}},N=()=>{b({studentId:"",subjectId:"",examType:"",marks:"",maxMarks:"",grade:"",remarks:""})},w=e.filter(e=>{var t,s,a,n,r,i,l,o,d,u,h;return(null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s||null===(a=s.firstName)||void 0===a?void 0:a.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.student)||void 0===n||null===(r=n.user)||void 0===r||null===(i=r.lastName)||void 0===i?void 0:i.toLowerCase().includes(c.toLowerCase()))||(null===(l=e.student)||void 0===l||null===(o=l.studentId)||void 0===o?void 0:o.toLowerCase().includes(c.toLowerCase()))||(null===(d=e.subject)||void 0===d||null===(u=d.name)||void 0===u?void 0:u.toLowerCase().includes(c.toLowerCase()))||(null===(h=e.examType)||void 0===h?void 0:h.toLowerCase().includes(c.toLowerCase()))}),k=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":e>=60?"text-orange-600":"text-red-600";return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Grades"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage student grades and exam results"})]}),(0,ga.jsxs)("button",{className:"btn btn-primary flex items-center",onClick:()=>h(!0),children:[(0,ga.jsx)(im,{className:"w-4 h-4 mr-2"}),"Add Grade"]})]}),(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search grades...",className:"pl-10 input w-64",value:c,onChange:e=>d(e.target.value)})]}),(0,ga.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[(0,ga.jsx)(om,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:l?(0,ga.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)("table",{className:"table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Student"}),(0,ga.jsx)("th",{children:"Subject"}),(0,ga.jsx)("th",{children:"Exam Type"}),(0,ga.jsx)("th",{children:"Marks"}),(0,ga.jsx)("th",{children:"Percentage"}),(0,ga.jsx)("th",{children:"Grade"}),(0,ga.jsx)("th",{children:"Date"}),(0,ga.jsx)("th",{children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:0===w.length?(0,ga.jsx)("tr",{children:(0,ga.jsxs)("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Oa,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,ga.jsx)("p",{children:"No grade records found. Add your first grade to get started."})]})}):w.map(e=>{var t,s,a,n,r,i;const l=(o=e.marks,c=e.maxMarks,o&&c?Math.round(parseFloat(o)/parseFloat(c)*100):0);var o,c;return(0,ga.jsxs)("tr",{children:[(0,ga.jsxs)("td",{children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName,(0,ga.jsx)("br",{}),(0,ga.jsx)("small",{className:"text-gray-500",children:null===(r=e.student)||void 0===r?void 0:r.studentId})]}),(0,ga.jsx)("td",{children:null===(i=e.subject)||void 0===i?void 0:i.name}),(0,ga.jsx)("td",{children:e.examType}),(0,ga.jsxs)("td",{children:[e.marks," / ",e.maxMarks]}),(0,ga.jsx)("td",{children:(0,ga.jsxs)("span",{className:"font-semibold ".concat(k(l)),children:[l,"%"]})}),(0,ga.jsx)("td",{children:(0,ga.jsx)("span",{className:"badge badge-primary",children:e.grade||"N/A"})}),(0,ga.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,ga.jsx)("td",{children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{className:"btn btn-sm btn-secondary",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>{return g(t=e),b({studentId:t.studentId||"",subjectId:t.subjectId||"",examType:t.examType||"",marks:t.marks||"",maxMarks:t.maxMarks||"",grade:t.grade||"",remarks:t.remarks||""}),void x(!0);var t},children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this grade record?"))try{await bm.deleteGrade(e),Dr.success("Grade record deleted successfully"),y()}catch(t){console.error("Error deleting grade:",t),Dr.error("Failed to delete grade record")}})(e.id),children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add Grade"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await bm.createGrade(f),Dr.success("Grade added successfully"),h(!1),N(),y()}catch(a){var t,s;console.error("Error adding grade:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add grade")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student *"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.studentId,onChange:e=>b(Le(Le({},f),{},{studentId:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),s.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," (",e.studentId,")"]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.subjectId,onChange:e=>b(Le(Le({},f),{},{subjectId:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Subject"}),r.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Type *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.examType,onChange:e=>b(Le(Le({},f),{},{examType:e.target.value})),placeholder:"e.g., Mid-term, Final, Quiz",required:!0})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks *"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:f.marks,onChange:e=>b(Le(Le({},f),{},{marks:e.target.value})),required:!0,min:"0",step:"0.01"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Marks *"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:f.maxMarks,onChange:e=>b(Le(Le({},f),{},{maxMarks:e.target.value})),required:!0,min:"1",step:"0.01"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.grade,onChange:e=>b(Le(Le({},f),{},{grade:e.target.value})),placeholder:"e.g., A+, A, B+"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{className:"input w-full",rows:"3",value:f.remarks,onChange:e=>b(Le(Le({},f),{},{remarks:e.target.value})),placeholder:"Optional remarks..."})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Grade"})]})]})]})}),m&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Grade"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await bm.updateGrade(p.id,f),Dr.success("Grade updated successfully"),x(!1),N(),y()}catch(a){var t,s;console.error("Error updating grade:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update grade")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student *"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.studentId,onChange:e=>b(Le(Le({},f),{},{studentId:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),s.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," (",e.studentId,")"]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),(0,ga.jsxs)("select",{className:"input w-full",value:f.subjectId,onChange:e=>b(Le(Le({},f),{},{subjectId:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Subject"}),r.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Type *"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.examType,onChange:e=>b(Le(Le({},f),{},{examType:e.target.value})),placeholder:"e.g., Mid-term, Final, Quiz",required:!0})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks *"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:f.marks,onChange:e=>b(Le(Le({},f),{},{marks:e.target.value})),required:!0,min:"0",step:"0.01"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Marks *"}),(0,ga.jsx)("input",{type:"number",className:"input w-full",value:f.maxMarks,onChange:e=>b(Le(Le({},f),{},{maxMarks:e.target.value})),required:!0,min:"1",step:"0.01"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),(0,ga.jsx)("input",{type:"text",className:"input w-full",value:f.grade,onChange:e=>b(Le(Le({},f),{},{grade:e.target.value})),placeholder:"e.g., A+, A, B+"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{className:"input w-full",rows:"3",value:f.remarks,onChange:e=>b(Le(Le({},f),{},{remarks:e.target.value})),placeholder:"Optional remarks..."})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>x(!1),children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Grade"})]})]})]})})]})},vm=Da("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),jm={getExams:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/exams",{params:e})).data},getExamById:async e=>(await tm.get("/exams/".concat(e))).data,createExam:async e=>(await tm.post("/exams",e)).data,updateExam:async(e,t)=>(await tm.put("/exams/".concat(e),t)).data,deleteExam:async e=>(await tm.delete("/exams/".concat(e))).data,getExamStats:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/exams/stats",{params:e})).data},createExamSchedule:async e=>(await tm.post("/exams/schedules",e)).data,getExamSchedules:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/exams/schedules/list",{params:e})).data},generateHallTickets:async e=>(await tm.post("/exams/hall-tickets/generate",e)).data,getHallTickets:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/exams/hall-tickets/list",{params:e})).data}},Nm=jm;function wm(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function km(e){wm(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Te(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Sm(e){if(wm(1,arguments),!function(e){return wm(1,arguments),e instanceof Date||"object"===Te(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=km(e);return!isNaN(Number(t))}function Cm(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function _m(e,t){return wm(2,arguments),function(e,t){wm(2,arguments);var s=km(e).getTime(),a=Cm(t);return new Date(s+a)}(e,-Cm(t))}function Em(e){wm(1,arguments);var t=km(e),s=t.getUTCDay(),a=(s<1?7:0)+s-1;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}function Mm(e){wm(1,arguments);var t=km(e),s=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(s+1,0,4),a.setUTCHours(0,0,0,0);var n=Em(a),r=new Date(0);r.setUTCFullYear(s,0,4),r.setUTCHours(0,0,0,0);var i=Em(r);return t.getTime()>=n.getTime()?s+1:t.getTime()>=i.getTime()?s:s-1}function Dm(e){wm(1,arguments);var t=km(e),s=Em(t).getTime()-function(e){wm(1,arguments);var t=Mm(e),s=new Date(0);return s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0),Em(s)}(t).getTime();return Math.round(s/6048e5)+1}var Pm={};function Am(){return Pm}function Tm(e,t){var s,a,n,r,i,l,o,c;wm(1,arguments);var d=Am(),u=Cm(null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==r?r:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:d.weekStartsOn)&&void 0!==a?a:null===(o=d.locale)||void 0===o||null===(c=o.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==s?s:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=km(e),m=h.getUTCDay(),x=(m<u?7:0)+m-u;return h.setUTCDate(h.getUTCDate()-x),h.setUTCHours(0,0,0,0),h}function Im(e,t){var s,a,n,r,i,l,o,c;wm(1,arguments);var d=km(e),u=d.getUTCFullYear(),h=Am(),m=Cm(null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:h.firstWeekContainsDate)&&void 0!==a?a:null===(o=h.locale)||void 0===o||null===(c=o.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=new Date(0);x.setUTCFullYear(u+1,0,m),x.setUTCHours(0,0,0,0);var p=Tm(x,t),g=new Date(0);g.setUTCFullYear(u,0,m),g.setUTCHours(0,0,0,0);var f=Tm(g,t);return d.getTime()>=p.getTime()?u+1:d.getTime()>=f.getTime()?u:u-1}function Om(e,t){wm(1,arguments);var s=km(e),a=Tm(s,t).getTime()-function(e,t){var s,a,n,r,i,l,o,c;wm(1,arguments);var d=Am(),u=Cm(null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:d.firstWeekContainsDate)&&void 0!==a?a:null===(o=d.locale)||void 0===o||null===(c=o.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:1),h=Im(e,t),m=new Date(0);return m.setUTCFullYear(h,0,u),m.setUTCHours(0,0,0,0),Tm(m,t)}(s,t).getTime();return Math.round(a/6048e5)+1}function Rm(e,t){for(var s=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return s+a}const Lm={y:function(e,t){var s=e.getUTCFullYear(),a=s>0?s:1-s;return Rm("yy"===t?a%100:a,t.length)},M:function(e,t){var s=e.getUTCMonth();return"M"===t?String(s+1):Rm(s+1,2)},d:function(e,t){return Rm(e.getUTCDate(),t.length)},a:function(e,t){var s=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:function(e,t){return Rm(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Rm(e.getUTCHours(),t.length)},m:function(e,t){return Rm(e.getUTCMinutes(),t.length)},s:function(e,t){return Rm(e.getUTCSeconds(),t.length)},S:function(e,t){var s=t.length,a=e.getUTCMilliseconds();return Rm(Math.floor(a*Math.pow(10,s-3)),t.length)}};var Fm="midnight",zm="noon",qm="morning",Bm="afternoon",Um="evening",Wm="night",Hm={G:function(e,t,s){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if("yo"===t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return s.ordinalNumber(n,{unit:"year"})}return Lm.y(e,t)},Y:function(e,t,s,a){var n=Im(e,a),r=n>0?n:1-n;return"YY"===t?Rm(r%100,2):"Yo"===t?s.ordinalNumber(r,{unit:"year"}):Rm(r,t.length)},R:function(e,t){return Rm(Mm(e),t.length)},u:function(e,t){return Rm(e.getUTCFullYear(),t.length)},Q:function(e,t,s){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Rm(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Rm(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){var a=e.getUTCMonth();switch(t){case"M":case"MM":return Lm.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return Rm(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){var n=Om(e,a);return"wo"===t?s.ordinalNumber(n,{unit:"week"}):Rm(n,t.length)},I:function(e,t,s){var a=Dm(e);return"Io"===t?s.ordinalNumber(a,{unit:"week"}):Rm(a,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getUTCDate(),{unit:"date"}):Lm.d(e,t)},D:function(e,t,s){var a=function(e){wm(1,arguments);var t=km(e),s=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=s-t.getTime();return Math.floor(a/864e5)+1}(e);return"Do"===t?s.ordinalNumber(a,{unit:"dayOfYear"}):Rm(a,t.length)},E:function(e,t,s){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){var n=e.getUTCDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Rm(r,2);case"eo":return s.ordinalNumber(r,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){var n=e.getUTCDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Rm(r,t.length);case"co":return s.ordinalNumber(r,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,s){var a=e.getUTCDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return Rm(n,t.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){var a,n=e.getUTCHours();switch(a=12===n?zm:0===n?Fm:n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){var a,n=e.getUTCHours();switch(a=n>=17?Um:n>=12?Bm:n>=4?qm:Wm,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){var a=e.getUTCHours()%12;return 0===a&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return Lm.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Lm.H(e,t)},K:function(e,t,s){var a=e.getUTCHours()%12;return"Ko"===t?s.ordinalNumber(a,{unit:"hour"}):Rm(a,t.length)},k:function(e,t,s){var a=e.getUTCHours();return 0===a&&(a=24),"ko"===t?s.ordinalNumber(a,{unit:"hour"}):Rm(a,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Lm.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Lm.s(e,t)},S:function(e,t){return Lm.S(e,t)},X:function(e,t,s,a){var n=(a._originalDate||e).getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return Ym(n);case"XXXX":case"XX":return Gm(n);default:return Gm(n,":")}},x:function(e,t,s,a){var n=(a._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ym(n);case"xxxx":case"xx":return Gm(n);default:return Gm(n,":")}},O:function(e,t,s,a){var n=(a._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Vm(n,":");default:return"GMT"+Gm(n,":")}},z:function(e,t,s,a){var n=(a._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Vm(n,":");default:return"GMT"+Gm(n,":")}},t:function(e,t,s,a){var n=a._originalDate||e;return Rm(Math.floor(n.getTime()/1e3),t.length)},T:function(e,t,s,a){return Rm((a._originalDate||e).getTime(),t.length)}};function Vm(e,t){var s=e>0?"-":"+",a=Math.abs(e),n=Math.floor(a/60),r=a%60;if(0===r)return s+String(n);var i=t||"";return s+String(n)+i+Rm(r,2)}function Ym(e,t){return e%60===0?(e>0?"-":"+")+Rm(Math.abs(e)/60,2):Gm(e,t)}function Gm(e,t){var s=t||"",a=e>0?"-":"+",n=Math.abs(e);return a+Rm(Math.floor(n/60),2)+s+Rm(n%60,2)}const Qm=Hm;var $m=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Km=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Jm={p:Km,P:function(e,t){var s,a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return $m(e,t);switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",$m(n,t)).replace("{{time}}",Km(r,t))}};const Xm=Jm;var Zm=["D","DD"],ex=["YY","YYYY"];function tx(e,t,s){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var sx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const ax=function(e,t,s){var a,n=sx[e];return a="string"===typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),null!==s&&void 0!==s&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function nx(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const rx={date:nx({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:nx({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:nx({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var ix={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const lx=function(e,t,s,a){return ix[e]};function ox(e){return function(t,s){var a;if("formatting"===(null!==s&&void 0!==s&&s.context?String(s.context):"standalone")&&e.formattingValues){var n=e.defaultFormattingWidth||e.defaultWidth,r=null!==s&&void 0!==s&&s.width?String(s.width):n;a=e.formattingValues[r]||e.formattingValues[n]}else{var i=e.defaultWidth,l=null!==s&&void 0!==s&&s.width?String(s.width):e.defaultWidth;a=e.values[l]||e.values[i]}return a[e.argumentCallback?e.argumentCallback(t):t]}}const cx={ordinalNumber:function(e,t){var s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:ox({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ox({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ox({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ox({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ox({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function dx(e){return function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(n);if(!r)return null;var i,l=r[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(var s=0;s<e.length;s++)if(t(e[s]))return s;return}(o,function(e){return e.test(l)}):function(e,t){for(var s in e)if(e.hasOwnProperty(s)&&t(e[s]))return s;return}(o,function(e){return e.test(l)});return i=e.valueCallback?e.valueCallback(c):c,{value:i=s.valueCallback?s.valueCallback(i):i,rest:t.slice(l.length)}}}var ux,hx={ordinalNumber:(ux={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.match(ux.matchPattern);if(!s)return null;var a=s[0],n=e.match(ux.parsePattern);if(!n)return null;var r=ux.valueCallback?ux.valueCallback(n[0]):n[0];return{value:r=t.valueCallback?t.valueCallback(r):r,rest:e.slice(a.length)}}),era:dx({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:dx({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:dx({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:dx({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:dx({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const mx={code:"en-US",formatDistance:ax,formatLong:rx,formatRelative:lx,localize:cx,match:hx,options:{weekStartsOn:0,firstWeekContainsDate:1}};var xx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,px=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gx=/^'([^]*?)'?$/,fx=/''/g,bx=/[a-zA-Z]/;function yx(e,t,s){var a,n,r,i,l,o,c,d,u,h,m,x,p,g,f,b,y,v;wm(2,arguments);var j=String(t),N=Am(),w=null!==(a=null!==(n=null===s||void 0===s?void 0:s.locale)&&void 0!==n?n:N.locale)&&void 0!==a?a:mx,k=Cm(null!==(r=null!==(i=null!==(l=null!==(o=null===s||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:null===s||void 0===s||null===(c=s.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:N.firstWeekContainsDate)&&void 0!==i?i:null===(u=N.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==r?r:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Cm(null!==(m=null!==(x=null!==(p=null!==(g=null===s||void 0===s?void 0:s.weekStartsOn)&&void 0!==g?g:null===s||void 0===s||null===(f=s.locale)||void 0===f||null===(b=f.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==p?p:N.weekStartsOn)&&void 0!==x?x:null===(y=N.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var C=km(e);if(!Sm(C))throw new RangeError("Invalid time value");var _=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(C),E=_m(C,_),M={firstWeekContainsDate:k,weekStartsOn:S,locale:w,_originalDate:C};return j.match(px).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,Xm[t])(e,w.formatLong):e}).join("").match(xx).map(function(a){if("''"===a)return"'";var n=a[0];if("'"===n)return function(e){var t=e.match(gx);if(!t)return e;return t[1].replace(fx,"'")}(a);var r,i=Qm[n];if(i)return null!==s&&void 0!==s&&s.useAdditionalWeekYearTokens||(r=a,-1===ex.indexOf(r))||tx(a,t,String(e)),null!==s&&void 0!==s&&s.useAdditionalDayOfYearTokens||!function(e){return-1!==Zm.indexOf(e)}(a)||tx(a,t,String(e)),i(E,a,w.localize,M);if(n.match(bx))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return a}).join("")}const vx=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(null),[y,v]=(0,a.useState)({name:"",description:"",examType:"unit_test",classId:"",subjectId:"",academicYear:"2024-2025",semester:"1",startDate:"",endDate:"",duration:60,maxMarks:100,passingMarks:35,venue:"",instructions:"",hallTicketRequired:!0,hallTicketReleaseDate:"",resultDeclarationDate:""}),[j,N]=(0,a.useState)(""),[w,k]=(0,a.useState)({examType:"",status:"",classId:"",academicYear:"2024-2025"}),[S,C]=(0,a.useState)({page:1,limit:10,totalPages:1,totalResults:0}),_=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.page,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.limit,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;o(!0);try{const r=Le({page:e,limit:s,search:a},n),i=await Nm.getExams(r);t(i.data.exams),C({page:i.data.pagination.page,limit:i.data.pagination.limit,totalPages:i.data.pagination.pages,totalResults:i.data.pagination.total})}catch(r){d(r.message||"Failed to fetch exams"),ir.error(r.message||"Failed to fetch exams")}finally{o(!1)}},[S.page,S.limit,j,w]),E=(0,a.useCallback)(async()=>{try{var e;console.log("Fetching classes...");const t=await um.getClasses({limit:1e3});console.log("Classes response:",null===(e=t.data.classes)||void 0===e?void 0:e.length,"classes"),n(t.data.classes)}catch(c){console.error("Error fetching classes:",c)}},[]),M=(0,a.useCallback)(async()=>{try{const e=await gm.getSubjects({limit:1e3});i(e.data.subjects)}catch(c){console.error("Error fetching subjects:",c)}},[]);(0,a.useEffect)(()=>{_(),E(),M()},[_,E,M]),(0,a.useEffect)(()=>{console.log("Classes state updated:",s.length,"classes"),s.length>0&&console.log("First class:",s[0])},[s]);const D=e=>{const t=s.find(t=>t.id===e);return t?"".concat(t.name," - ").concat(t.section):"N/A"},P=e=>{const t=r.find(t=>t.id===e);return t?t.name:"N/A"},A=e=>{_(e,S.limit,j,w)},T=(e,t)=>{const s=Le(Le({},w),{},{[e]:t});k(s),_(1,S.limit,j,s)},I=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"scheduled":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800"}},O=e=>{switch(e){case"unit_test":return"bg-purple-100 text-purple-800";case"mid_term":return"bg-blue-100 text-blue-800";case"final_exam":return"bg-red-100 text-red-800";case"quarterly":return"bg-green-100 text-green-800";case"half_yearly":return"bg-yellow-100 text-yellow-800";case"annual":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}};return l&&0===e.length?(0,ga.jsx)("div",{className:"flex justify-center items-center h-screen text-lg font-semibold",children:"Loading Exams..."}):c?(0,ga.jsxs)("div",{className:"flex justify-center items-center h-screen text-lg font-semibold text-red-600",children:["Error: ",c]}):(0,ga.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-lg shadow-md",children:[(0,ga.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,ga.jsx)(Ta,{className:"mr-3"})," Exam Management"]}),(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)("input",{type:"text",placeholder:"Search exams...",className:"form-input mt-1 block w-64 rounded-md border-gray-300 shadow-sm pl-10",value:j,onChange:e=>{N(e.target.value),_(1,S.limit,e.target.value,w)}}),(0,ga.jsx)(lm,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"})]}),(0,ga.jsxs)("select",{className:"form-select mt-1 block rounded-md border-gray-300 shadow-sm",value:w.examType,onChange:e=>T("examType",e.target.value),children:[(0,ga.jsx)("option",{value:"",children:"All Types"}),(0,ga.jsx)("option",{value:"unit_test",children:"Unit Test"}),(0,ga.jsx)("option",{value:"mid_term",children:"Mid Term"}),(0,ga.jsx)("option",{value:"final_exam",children:"Final Exam"}),(0,ga.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,ga.jsx)("option",{value:"half_yearly",children:"Half Yearly"}),(0,ga.jsx)("option",{value:"annual",children:"Annual"})]}),(0,ga.jsxs)("select",{className:"form-select mt-1 block rounded-md border-gray-300 shadow-sm",value:w.status,onChange:e=>T("status",e.target.value),children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),(0,ga.jsx)("option",{value:"draft",children:"Draft"}),(0,ga.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,ga.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,ga.jsx)("option",{value:"completed",children:"Completed"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,ga.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,ga.jsx)(im,{className:"mr-2"})," Add New Exam"]})]}),0===e.length?(0,ga.jsx)("p",{className:"text-center text-gray-500 text-lg",children:"No exams found."}):(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam Name"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ga.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(O(e.examType)),children:e.examType.replace("_"," ").toUpperCase()})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(e.classId)}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(e.subjectId)}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.startDate?yx(new Date(e.startDate),"MMM dd, yyyy HH:mm"):"N/A"}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.duration," min"]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ga.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(I(e.status)),children:e.status.toUpperCase()})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{b(e),g(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,ga.jsx)(xn,{className:"inline-block w-5 h-5"})}),(0,ga.jsx)("button",{onClick:()=>(e=>{b(Le(Le({},e),{},{startDate:e.startDate?yx(new Date(e.startDate),"yyyy-MM-dd'T'HH:mm"):"",endDate:e.endDate?yx(new Date(e.endDate),"yyyy-MM-dd'T'HH:mm"):"",hallTicketReleaseDate:e.hallTicketReleaseDate?yx(new Date(e.hallTicketReleaseDate),"yyyy-MM-dd'T'HH:mm"):"",resultDeclarationDate:e.resultDeclarationDate?yx(new Date(e.resultDeclarationDate),"yyyy-MM-dd'T'HH:mm"):""})),x(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:(0,ga.jsx)(cm,{className:"inline-block w-5 h-5"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this exam?"))try{await Nm.deleteExam(e),ir.success("Exam deleted successfully!"),_()}catch(a){var t,s;ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete exam")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"inline-block w-5 h-5"})})]})]},e.id))})]})}),S.totalPages>1&&(0,ga.jsxs)("nav",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>A(S.page-1),disabled:1===S.page,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>A(S.page+1),disabled:S.page===S.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,ga.jsx)("span",{className:"font-medium",children:(S.page-1)*S.limit+1})," to"," ",(0,ga.jsx)("span",{className:"font-medium",children:Math.min(S.page*S.limit,S.totalResults)})," of"," ",(0,ga.jsx)("span",{className:"font-medium",children:S.totalResults})," results"]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,ga.jsxs)("button",{onClick:()=>A(S.page-1),disabled:1===S.page,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,ga.jsx)("span",{className:"sr-only",children:"Previous"}),(0,ga.jsx)(vm,{className:"h-5 w-5","aria-hidden":"true"})]}),[...Array(S.totalPages)].map((e,t)=>(0,ga.jsx)("button",{onClick:()=>A(t+1),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(S.page===t+1?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:t+1},t)),(0,ga.jsxs)("button",{onClick:()=>A(S.page+1),disabled:S.page===S.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,ga.jsx)("span",{className:"sr-only",children:"Next"}),(0,ga.jsx)(Ja,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-4xl max-h-screen overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Add New Exam"}),(0,ga.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form submitted, calling handleAddExam"),(async()=>{try{if(console.log("Creating exam with data:",y),console.log("Subject ID being sent:",y.subjectId),console.log("Available subjects:",r.map(e=>({id:e.id,name:e.name}))),y.subjectId&&!r.find(e=>e.id===y.subjectId))return console.error("Invalid subject ID:",y.subjectId),void ir.error("Please select a valid subject");const e=await Nm.createExam(y);console.log("Exam creation result:",e),ir.success("Exam created successfully!"),h(!1),v({name:"",description:"",examType:"unit_test",classId:"",subjectId:"",academicYear:"2024-2025",semester:"1",startDate:"",endDate:"",duration:60,maxMarks:100,passingMarks:35,venue:"",instructions:"",hallTicketRequired:!0,hallTicketReleaseDate:"",resultDeclarationDate:""}),_()}catch(a){var e,t,s;console.error("Exam creation error:",a),console.error("Error details:",null===(e=a.response)||void 0===e?void 0:e.data),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to create exam")}})()},children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Exam Name"}),(0,ga.jsx)("input",{type:"text",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.name,onChange:e=>v(Le(Le({},y),{},{name:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Exam Type"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.examType,onChange:e=>v(Le(Le({},y),{},{examType:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"unit_test",children:"Unit Test"}),(0,ga.jsx)("option",{value:"mid_term",children:"Mid Term"}),(0,ga.jsx)("option",{value:"final_exam",children:"Final Exam"}),(0,ga.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,ga.jsx)("option",{value:"half_yearly",children:"Half Yearly"}),(0,ga.jsx)("option",{value:"annual",children:"Annual"}),(0,ga.jsx)("option",{value:"competitive",children:"Competitive"}),(0,ga.jsx)("option",{value:"entrance",children:"Entrance"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.classId,onChange:e=>{console.log("Class selected:",e.target.value),v(Le(Le({},y),{},{classId:e.target.value}))},required:!0,children:[(0,ga.jsxs)("option",{value:"",children:["Select Class (",s.length," available)"]}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subject (Optional)"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.subjectId,onChange:e=>{console.log("Subject selected:",e.target.value),v(Le(Le({},y),{},{subjectId:e.target.value}))},children:[(0,ga.jsxs)("option",{value:"",children:["Select Subject (",r.length," available)"]}),r.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),(0,ga.jsx)("input",{type:"text",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.academicYear,onChange:e=>v(Le(Le({},y),{},{academicYear:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Semester"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.semester,onChange:e=>v(Le(Le({},y),{},{semester:e.target.value})),children:[(0,ga.jsx)("option",{value:"1",children:"Semester 1"}),(0,ga.jsx)("option",{value:"2",children:"Semester 2"}),(0,ga.jsx)("option",{value:"3",children:"Semester 3"}),(0,ga.jsx)("option",{value:"4",children:"Semester 4"}),(0,ga.jsx)("option",{value:"5",children:"Semester 5"}),(0,ga.jsx)("option",{value:"6",children:"Semester 6"}),(0,ga.jsx)("option",{value:"7",children:"Semester 7"}),(0,ga.jsx)("option",{value:"8",children:"Semester 8"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date & Time"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.startDate,onChange:e=>v(Le(Le({},y),{},{startDate:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date & Time"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.endDate,onChange:e=>v(Le(Le({},y),{},{endDate:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),(0,ga.jsx)("input",{type:"number",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.duration,onChange:e=>v(Le(Le({},y),{},{duration:parseInt(e.target.value)})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Max Marks"}),(0,ga.jsx)("input",{type:"number",step:"0.01",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.maxMarks,onChange:e=>v(Le(Le({},y),{},{maxMarks:parseFloat(e.target.value)})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Passing Marks"}),(0,ga.jsx)("input",{type:"number",step:"0.01",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.passingMarks,onChange:e=>v(Le(Le({},y),{},{passingMarks:parseFloat(e.target.value)})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Venue"}),(0,ga.jsx)("input",{type:"text",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.venue,onChange:e=>v(Le(Le({},y),{},{venue:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hall Ticket Required"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.hallTicketRequired,onChange:e=>v(Le(Le({},y),{},{hallTicketRequired:"true"===e.target.value})),children:[(0,ga.jsx)("option",{value:"true",children:"Yes"}),(0,ga.jsx)("option",{value:"false",children:"No"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hall Ticket Release Date"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.hallTicketReleaseDate,onChange:e=>v(Le(Le({},y),{},{hallTicketReleaseDate:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Result Declaration Date"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:y.resultDeclarationDate,onChange:e=>v(Le(Le({},y),{},{resultDeclarationDate:e.target.value}))})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,ga.jsx)("textarea",{className:"form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"3",value:y.description,onChange:e=>v(Le(Le({},y),{},{description:e.target.value}))})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instructions"}),(0,ga.jsx)("textarea",{className:"form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"4",value:y.instructions,onChange:e=>v(Le(Le({},y),{},{instructions:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",onClick:()=>console.log("Create Exam button clicked"),children:"Create Exam"})]})]})]})}),m&&f&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-4xl max-h-screen overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Edit Exam"}),(0,ga.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{await Nm.updateExam(f.id,f),ir.success("Exam updated successfully!"),x(!1),_()}catch(s){var e,t;ir.error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to update exam")}})()},children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Exam Name"}),(0,ga.jsx)("input",{type:"text",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.name,onChange:e=>b(Le(Le({},f),{},{name:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Exam Type"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.examType,onChange:e=>b(Le(Le({},f),{},{examType:e.target.value})),required:!0,children:[(0,ga.jsx)("option",{value:"unit_test",children:"Unit Test"}),(0,ga.jsx)("option",{value:"mid_term",children:"Mid Term"}),(0,ga.jsx)("option",{value:"final_exam",children:"Final Exam"}),(0,ga.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,ga.jsx)("option",{value:"half_yearly",children:"Half Yearly"}),(0,ga.jsx)("option",{value:"annual",children:"Annual"}),(0,ga.jsx)("option",{value:"competitive",children:"Competitive"}),(0,ga.jsx)("option",{value:"entrance",children:"Entrance"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.status,onChange:e=>b(Le(Le({},f),{},{status:e.target.value})),children:[(0,ga.jsx)("option",{value:"draft",children:"Draft"}),(0,ga.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,ga.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,ga.jsx)("option",{value:"completed",children:"Completed"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),(0,ga.jsx)("input",{type:"text",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.academicYear,onChange:e=>b(Le(Le({},f),{},{academicYear:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date & Time"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.startDate,onChange:e=>b(Le(Le({},f),{},{startDate:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date & Time"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.endDate,onChange:e=>b(Le(Le({},f),{},{endDate:e.target.value})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),(0,ga.jsx)("input",{type:"number",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.duration,onChange:e=>b(Le(Le({},f),{},{duration:parseInt(e.target.value)})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Max Marks"}),(0,ga.jsx)("input",{type:"number",step:"0.01",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.maxMarks,onChange:e=>b(Le(Le({},f),{},{maxMarks:parseFloat(e.target.value)})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Passing Marks"}),(0,ga.jsx)("input",{type:"number",step:"0.01",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.passingMarks,onChange:e=>b(Le(Le({},f),{},{passingMarks:parseFloat(e.target.value)})),required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Venue"}),(0,ga.jsx)("input",{type:"text",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.venue||"",onChange:e=>b(Le(Le({},f),{},{venue:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hall Ticket Required"}),(0,ga.jsxs)("select",{className:"form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.hallTicketRequired,onChange:e=>b(Le(Le({},f),{},{hallTicketRequired:"true"===e.target.value})),children:[(0,ga.jsx)("option",{value:"true",children:"Yes"}),(0,ga.jsx)("option",{value:"false",children:"No"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hall Ticket Release Date"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.hallTicketReleaseDate||"",onChange:e=>b(Le(Le({},f),{},{hallTicketReleaseDate:e.target.value}))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Result Declaration Date"}),(0,ga.jsx)("input",{type:"datetime-local",className:"form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:f.resultDeclarationDate||"",onChange:e=>b(Le(Le({},f),{},{resultDeclarationDate:e.target.value}))})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,ga.jsx)("textarea",{className:"form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"3",value:f.description||"",onChange:e=>b(Le(Le({},f),{},{description:e.target.value}))})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instructions"}),(0,ga.jsx)("textarea",{className:"form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"4",value:f.instructions||"",onChange:e=>b(Le(Le({},f),{},{instructions:e.target.value}))})]})]}),(0,ga.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Update Exam"})]})]})]})}),p&&f&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-4xl max-h-screen overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Exam Details"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Basic Information"}),(0,ga.jsxs)("div",{className:"space-y-2",children:[(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Name:"})," ",f.name]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Type:"})," ",f.examType.replace("_"," ").toUpperCase()]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Status:"}),(0,ga.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full ".concat(I(f.status)),children:f.status.toUpperCase()})]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Class:"})," ",D(f.classId)]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Subject:"})," ",P(f.subjectId)]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Academic Year:"})," ",f.academicYear]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Semester:"})," ",f.semester]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Schedule & Details"}),(0,ga.jsxs)("div",{className:"space-y-2",children:[(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Start Date:"})," ",f.startDate?yx(new Date(f.startDate),"MMM dd, yyyy HH:mm"):"N/A"]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"End Date:"})," ",f.endDate?yx(new Date(f.endDate),"MMM dd, yyyy HH:mm"):"N/A"]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Duration:"})," ",f.duration," minutes"]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Max Marks:"})," ",f.maxMarks]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Passing Marks:"})," ",f.passingMarks]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Venue:"})," ",f.venue||"N/A"]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("span",{className:"font-medium",children:"Hall Ticket Required:"})," ",f.hallTicketRequired?"Yes":"No"]})]})]}),f.description&&(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),(0,ga.jsx)("p",{className:"text-gray-700",children:f.description})]}),f.instructions&&(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Instructions"}),(0,ga.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:f.instructions})]})]}),(0,ga.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ga.jsx)("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})]})},jx=Da("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Nx=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[g,f]=(0,a.useState)({search:"",examId:"",classId:"",status:""}),[b,y]=(0,a.useState)({examId:"",subjectId:"",classId:"",examDate:"",startTime:"",endTime:"",duration:"",maxMarks:100,passingMarks:35,venue:"",roomNumber:"",invigilatorId:"",instructions:"",status:"scheduled"});(0,a.useEffect)(()=>{w()},[g]),(0,a.useEffect)(()=>{v(),j(),N()},[]);const v=(0,a.useCallback)(async()=>{try{var e;console.log("Fetching classes for exam schedule...");const t=await um.getClasses({limit:1e3});console.log("Classes response:",null===(e=t.data.classes)||void 0===e?void 0:e.length,"classes"),r(t.data.classes)}catch(t){console.error("Error fetching classes:",t)}},[]),j=(0,a.useCallback)(async()=>{try{var e;console.log("Fetching exams for exam schedule...");const t=await Nm.getExams({limit:1e3});console.log("Exams response:",null===(e=t.data.exams)||void 0===e?void 0:e.length,"exams"),l(t.data.exams)}catch(t){console.error("Error fetching exams:",t)}},[]),N=(0,a.useCallback)(async()=>{try{var e;console.log("Fetching subjects for exam schedule...");const t=await gm.getSubjects({limit:1e3});console.log("Subjects response:",null===(e=t.data.subjects)||void 0===e?void 0:e.length,"subjects"),c(t.data.subjects)}catch(t){console.error("Error fetching subjects:",t)}},[]),w=async()=>{try{u(!0);const e=new URLSearchParams;Object.entries(g).forEach(t=>{let[s,a]=t;a&&e.append(s,a)});const t=await fetch("/api/exam-schedules?".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();s(e.data.examSchedules)}}catch(e){console.error("Error fetching exam schedules:",e)}finally{u(!1)}},k=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}};return d?(0,ga.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Exam Schedules"}),(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage exam schedules and timetables"})]}),(0,ga.jsxs)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-5 w-5"}),"Add Schedule"]})]}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search schedules...",value:g.search,onChange:e=>f(Le(Le({},g),{},{search:e.target.value})),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,ga.jsxs)("select",{value:g.classId,onChange:e=>f(Le(Le({},g),{},{classId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Classes"}),n.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam"}),(0,ga.jsxs)("select",{value:g.examId,onChange:e=>f(Le(Le({},g),{},{examId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Exams"}),i.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.examType]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:g.status,onChange:e=>f(Le(Le({},g),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),(0,ga.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,ga.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,ga.jsx)("option",{value:"completed",children:"Completed"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam & Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Venue"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t,s,a,n;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.exam)||void 0===t?void 0:t.name)||"N/A"}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:(null===(s=e.subject)||void 0===s?void 0:s.name)||"N/A"})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)(Ia,{className:"h-4 w-4 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.examDate).toLocaleDateString()}),(0,ga.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,ga.jsx)(La,{className:"h-3 w-3"}),e.startTime," - ",e.endTime]})]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:[(null===(a=e.class)||void 0===a?void 0:a.name)||"N/A"," ",(null===(n=e.class)||void 0===n?void 0:n.section)||""]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)(jx,{className:"h-4 w-4 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:e.venue||"TBD"}),e.roomNumber&&(0,ga.jsxs)("div",{className:"text-sm text-gray-500",children:["Room: ",e.roomNumber]})]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(k(e.status)),children:e.status})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{p(e),y({examId:e.examId,subjectId:e.subjectId,classId:e.classId,examDate:e.examDate,startTime:e.startTime,endTime:e.endTime,duration:e.duration,maxMarks:e.maxMarks,passingMarks:e.passingMarks,venue:e.venue||"",roomNumber:e.roomNumber||"",invigilatorId:e.invigilatorId||"",instructions:e.instructions||"",status:e.status}),m(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this exam schedule?"))try{(await fetch("/api/exam-schedules/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok&&w()}catch(t){console.error("Error deleting exam schedule:",t)}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),h&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:x?"Edit Exam Schedule":"Add Exam Schedule"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=x?"/api/exam-schedules/".concat(x.id):"/api/exam-schedules",t=x?"PUT":"POST";(await fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(b)})).ok&&(m(!1),p(null),y({examId:"",subjectId:"",classId:"",examDate:"",startTime:"",endTime:"",duration:"",maxMarks:100,passingMarks:35,venue:"",roomNumber:"",invigilatorId:"",instructions:"",status:"scheduled"}),w())}catch(t){console.error("Error saving exam schedule:",t)}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam"}),(0,ga.jsxs)("select",{value:b.examId,onChange:e=>{console.log("Exam selected:",e.target.value),y(Le(Le({},b),{},{examId:e.target.value}))},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsxs)("option",{value:"",children:["Select Exam (",i.length," available)"]}),i.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.examType," (",e.academicYear,")"]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ga.jsxs)("select",{value:b.subjectId,onChange:e=>{console.log("Subject selected:",e.target.value),y(Le(Le({},b),{},{subjectId:e.target.value}))},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsxs)("option",{value:"",children:["Select Subject (",o.length," available)"]}),o.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,ga.jsxs)("select",{value:b.classId,onChange:e=>{console.log("Class selected:",e.target.value),y(Le(Le({},b),{},{classId:e.target.value}))},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsxs)("option",{value:"",children:["Select Class (",n.length," available)"]}),n.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Date"}),(0,ga.jsx)("input",{type:"date",value:b.examDate,onChange:e=>y(Le(Le({},b),{},{examDate:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,ga.jsx)("input",{type:"time",value:b.startTime,onChange:e=>y(Le(Le({},b),{},{startTime:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),(0,ga.jsx)("input",{type:"time",value:b.endTime,onChange:e=>y(Le(Le({},b),{},{endTime:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,ga.jsx)("input",{type:"number",value:b.duration,onChange:e=>y(Le(Le({},b),{},{duration:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Marks"}),(0,ga.jsx)("input",{type:"number",value:b.maxMarks,onChange:e=>y(Le(Le({},b),{},{maxMarks:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Marks"}),(0,ga.jsx)("input",{type:"number",value:b.passingMarks,onChange:e=>y(Le(Le({},b),{},{passingMarks:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Venue"}),(0,ga.jsx)("input",{type:"text",value:b.venue,onChange:e=>y(Le(Le({},b),{},{venue:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Exam venue"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),(0,ga.jsx)("input",{type:"text",value:b.roomNumber,onChange:e=>y(Le(Le({},b),{},{roomNumber:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Room number"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:b.status,onChange:e=>y(Le(Le({},b),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,ga.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,ga.jsx)("option",{value:"completed",children:"Completed"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,ga.jsx)("textarea",{value:b.instructions,onChange:e=>y(Le(Le({},b),{},{instructions:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Exam instructions"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{m(!1),p(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:x?"Update":"Create"})]})]})]})})]})},wx=Da("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),kx=Da("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Sx=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[i,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)({search:"",examId:"",studentId:"",status:""}),[x,p]=(0,a.useState)({studentId:"",examId:"",examScheduleId:"",classId:"",ticketNumber:"",status:"generated"}),[g,f]=(0,a.useState)({examId:"",classId:""});(0,a.useEffect)(()=>{b()},[h]);const b=async()=>{try{r(!0);const e=new URLSearchParams;Object.entries(h).forEach(t=>{let[s,a]=t;a&&e.append(s,a)});const t=await fetch("/api/hall-tickets?".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();s(e.data.hallTickets)}}catch(e){console.error("Error fetching hall tickets:",e)}finally{r(!1)}},y=e=>{switch(e){case"generated":return"bg-blue-100 text-blue-800";case"printed":return"bg-green-100 text-green-800";case"distributed":return"bg-yellow-100 text-yellow-800";case"used":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}};return n?(0,ga.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Hall Tickets"}),(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage exam hall tickets and admissions"})]}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsxs)("button",{onClick:()=>u(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-5 w-5"}),"Generate Tickets"]}),(0,ga.jsxs)("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-5 w-5"}),"Add Ticket"]})]})]}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search tickets...",value:h.search,onChange:e=>m(Le(Le({},h),{},{search:e.target.value})),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:h.status,onChange:e=>m(Le(Le({},h),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),(0,ga.jsx)("option",{value:"generated",children:"Generated"}),(0,ga.jsx)("option",{value:"printed",children:"Printed"}),(0,ga.jsx)("option",{value:"distributed",children:"Distributed"}),(0,ga.jsx)("option",{value:"used",children:"Used"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket Details"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam Details"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedule"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t,s,a,n,r,i,o;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.ticketNumber}),(0,ga.jsxs)("div",{className:"text-sm text-gray-500",children:[null===(t=e.class)||void 0===t?void 0:t.name," ",null===(s=e.class)||void 0===s?void 0:s.section]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(a=e.student)||void 0===a?void 0:a.firstName," ",null===(n=e.student)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(r=e.student)||void 0===r?void 0:r.admissionNumber})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(i=e.exam)||void 0===i?void 0:i.name)||"N/A"}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:(null===(o=e.exam)||void 0===o?void 0:o.type)||"N/A"})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.examSchedule?(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)(Ia,{className:"h-4 w-4 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.examSchedule.examDate).toLocaleDateString()}),(0,ga.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,ga.jsx)(La,{className:"h-3 w-3"}),e.examSchedule.startTime," - ",e.examSchedule.endTime]}),e.examSchedule.venue&&(0,ga.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,ga.jsx)(jx,{className:"h-3 w-3"}),e.examSchedule.venue]})]})]}):(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"No schedule"})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(y(e.status)),children:e.status})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{c(e),p({studentId:e.studentId,examId:e.examId,examScheduleId:e.examScheduleId||"",classId:e.classId,ticketNumber:e.ticketNumber,status:e.status}),l(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"text-green-600 hover:text-green-900",title:"Print",children:(0,ga.jsx)(wx,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"text-purple-600 hover:text-purple-900",title:"Download",children:(0,ga.jsx)(kx,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this hall ticket?"))try{(await fetch("/api/hall-tickets/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok&&b()}catch(t){console.error("Error deleting hall ticket:",t)}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),i&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:o?"Edit Hall Ticket":"Add Hall Ticket"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=o?"/api/hall-tickets/".concat(o.id):"/api/hall-tickets",t=o?"PUT":"POST";(await fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(x)})).ok&&(l(!1),c(null),p({studentId:"",examId:"",examScheduleId:"",classId:"",ticketNumber:"",status:"generated"}),b())}catch(t){console.error("Error saving hall ticket:",t)}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID *"}),(0,ga.jsx)("input",{type:"text",value:x.studentId,onChange:e=>p(Le(Le({},x),{},{studentId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam ID *"}),(0,ga.jsx)("input",{type:"text",value:x.examId,onChange:e=>p(Le(Le({},x),{},{examId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class ID *"}),(0,ga.jsx)("input",{type:"text",value:x.classId,onChange:e=>p(Le(Le({},x),{},{classId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticket Number *"}),(0,ga.jsx)("input",{type:"text",value:x.ticketNumber,onChange:e=>p(Le(Le({},x),{},{ticketNumber:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),(0,ga.jsxs)("select",{value:x.status,onChange:e=>p(Le(Le({},x),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsx)("option",{value:"generated",children:"Generated"}),(0,ga.jsx)("option",{value:"printed",children:"Printed"}),(0,ga.jsx)("option",{value:"distributed",children:"Distributed"}),(0,ga.jsx)("option",{value:"used",children:"Used"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{l(!1),c(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:o?"Update":"Create"})]})]})]})}),d&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Generate Hall Tickets"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await fetch("/api/hall-tickets/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(g)})).ok&&(u(!1),f({examId:"",classId:""}),b())}catch(t){console.error("Error generating hall tickets:",t)}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam ID *"}),(0,ga.jsx)("input",{type:"text",value:g.examId,onChange:e=>f(Le(Le({},g),{},{examId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter exam ID",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class ID *"}),(0,ga.jsx)("input",{type:"text",value:g.classId,onChange:e=>f(Le(Le({},g),{},{classId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter class ID",required:!0})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Generate Tickets"})]})]})]})})]})},Cx=Da("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),_x=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)("books"),[n,r]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)({search:"",category:"",status:"",isAvailable:""}),[b,y]=(0,a.useState)({title:"",author:"",isbn:"",category:"",publisher:"",publicationYear:"",totalCopies:1,availableCopies:1,status:"available"}),[v,j]=(0,a.useState)({bookId:"",studentId:"",dueDate:"",issuedBy:""});(0,a.useEffect)(()=>{"books"===t?N():w()},[t,g]);const N=async()=>{try{c(!0);const e=new URLSearchParams;Object.entries(g).forEach(t=>{let[s,a]=t;a&&e.append(s,a)});const t=await fetch("/api/books?".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();r(e.data.books)}}catch(e){console.error("Error fetching books:",e)}finally{c(!1)}},w=async()=>{try{c(!0);const e=await fetch("/api/books/loans/all",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();l(t.data.bookLoans)}}catch(e){console.error("Error fetching book loans:",e)}finally{c(!1)}},k=e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"unavailable":return"bg-red-100 text-red-800";case"damaged":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},S=e=>{switch(e){case"borrowed":return"bg-blue-100 text-blue-800";case"returned":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o?(0,ga.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Library Management"}),(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage books and track loans"})]}),(0,ga.jsxs)("div",{className:"flex gap-2",children:["books"===t&&(0,ga.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-5 w-5"}),"Add Book"]}),"loans"===t&&(0,ga.jsxs)("button",{onClick:()=>p(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-5 w-5"}),"Issue Book"]})]})]}),(0,ga.jsxs)("div",{className:"flex space-x-1 mb-6",children:[(0,ga.jsx)("button",{onClick:()=>s("books"),className:"px-4 py-2 rounded-lg font-medium ".concat("books"===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Books"}),(0,ga.jsx)("button",{onClick:()=>s("loans"),className:"px-4 py-2 rounded-lg font-medium ".concat("loans"===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Book Loans"})]}),"books"===t&&(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search books...",value:g.search,onChange:e=>f(Le(Le({},g),{},{search:e.target.value})),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,ga.jsx)("input",{type:"text",placeholder:"Category",value:g.category,onChange:e=>f(Le(Le({},g),{},{category:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:g.status,onChange:e=>f(Le(Le({},g),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),(0,ga.jsx)("option",{value:"available",children:"Available"}),(0,ga.jsx)("option",{value:"unavailable",children:"Unavailable"}),(0,ga.jsx)("option",{value:"damaged",children:"Damaged"}),(0,ga.jsx)("option",{value:"lost",children:"Lost"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Availability"}),(0,ga.jsxs)("select",{value:g.isAvailable,onChange:e=>f(Le(Le({},g),{},{isAvailable:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All"}),(0,ga.jsx)("option",{value:"true",children:"Available"}),(0,ga.jsx)("option",{value:"false",children:"Not Available"})]})]})]})}),"books"===t&&(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Book Details"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Copies"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,ga.jsxs)("div",{className:"text-sm text-gray-500",children:["by ",e.author]}),e.isbn&&(0,ga.jsxs)("div",{className:"text-sm text-gray-400",children:["ISBN: ",e.isbn]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:e.category})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:[e.availableCopies," / ",e.totalCopies]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(k(e.status)),children:e.status})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{m(e),y({title:e.title,author:e.author,isbn:e.isbn||"",category:e.category,publisher:e.publisher||"",publicationYear:e.publicationYear||"",totalCopies:e.totalCopies,availableCopies:e.availableCopies,status:e.status}),u(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this book?"))try{(await fetch("/api/books/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok&&N()}catch(t){console.error("Error deleting book:",t)}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),"loans"===t&&(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Book"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>{var s,a,n,r,i,l;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null===(s=t.book)||void 0===s?void 0:s.title}),(0,ga.jsxs)("div",{className:"text-sm text-gray-500",children:["by ",null===(a=t.book)||void 0===a?void 0:a.author]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(n=t.student)||void 0===n?void 0:n.firstName," ",null===(r=t.student)||void 0===r?void 0:r.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(i=t.student)||void 0===i?void 0:i.admissionNumber})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:new Date(t.issuedAt).toLocaleDateString()})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:new Date(t.dueDate).toLocaleDateString()}),(l=t.dueDate,new Date(l)<new Date&&"borrowed"===t.status&&(0,ga.jsx)(Cx,{className:"h-4 w-4 text-red-500"}))]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(S(t.status)),children:t.status})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"borrowed"===t.status&&(0,ga.jsxs)("button",{onClick:()=>(async t=>{try{(await fetch("/api/books/loans/".concat(t,"/return"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({returnedBy:(null===e||void 0===e?void 0:e.id)||"",condition:"good",notes:"Book returned in good condition"})})).ok&&(w(),N())}catch(s){console.error("Error returning book:",s)}})(t.id),className:"text-green-600 hover:text-green-900 flex items-center gap-1",children:[(0,ga.jsx)(Lr,{className:"h-4 w-4"}),"Return"]})})]},t.id)})})]})})}),d&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:h?"Edit Book":"Add Book"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=h?"/api/books/".concat(h.id):"/api/books",t=h?"PUT":"POST";(await fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(b)})).ok&&(u(!1),m(null),y({title:"",author:"",isbn:"",category:"",publisher:"",publicationYear:"",totalCopies:1,availableCopies:1,status:"available"}),N())}catch(t){console.error("Error saving book:",t)}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,ga.jsx)("input",{type:"text",value:b.title,onChange:e=>y(Le(Le({},b),{},{title:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author *"}),(0,ga.jsx)("input",{type:"text",value:b.author,onChange:e=>y(Le(Le({},b),{},{author:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ISBN"}),(0,ga.jsx)("input",{type:"text",value:b.isbn,onChange:e=>y(Le(Le({},b),{},{isbn:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,ga.jsx)("input",{type:"text",value:b.category,onChange:e=>y(Le(Le({},b),{},{category:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publisher"}),(0,ga.jsx)("input",{type:"text",value:b.publisher,onChange:e=>y(Le(Le({},b),{},{publisher:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publication Year"}),(0,ga.jsx)("input",{type:"number",value:b.publicationYear,onChange:e=>y(Le(Le({},b),{},{publicationYear:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Copies *"}),(0,ga.jsx)("input",{type:"number",value:b.totalCopies,onChange:e=>y(Le(Le({},b),{},{totalCopies:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Copies *"}),(0,ga.jsx)("input",{type:"number",value:b.availableCopies,onChange:e=>y(Le(Le({},b),{},{availableCopies:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),(0,ga.jsxs)("select",{value:b.status,onChange:e=>y(Le(Le({},b),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsx)("option",{value:"available",children:"Available"}),(0,ga.jsx)("option",{value:"unavailable",children:"Unavailable"}),(0,ga.jsx)("option",{value:"damaged",children:"Damaged"}),(0,ga.jsx)("option",{value:"lost",children:"Lost"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{u(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:h?"Update":"Create"})]})]})]})}),x&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Issue Book"}),(0,ga.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{(await fetch("/api/books/loans/issue",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(v)})).ok&&(p(!1),j({bookId:"",studentId:"",dueDate:"",issuedBy:(null===e||void 0===e?void 0:e.id)||""}),w(),N())}catch(s){console.error("Error issuing book:",s)}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book ID *"}),(0,ga.jsx)("input",{type:"text",value:v.bookId,onChange:e=>j(Le(Le({},v),{},{bookId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter book ID",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID *"}),(0,ga.jsx)("input",{type:"text",value:v.studentId,onChange:e=>j(Le(Le({},v),{},{studentId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter student ID",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date *"}),(0,ga.jsx)("input",{type:"date",value:v.dueDate,onChange:e=>j(Le(Le({},v),{},{dueDate:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Issue Book"})]})]})]})})]})},Ex=Da("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Mx="http://13.61.100.250/api",Dx={getMarkDistributions:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await ca.get("".concat(Mx,"/mark-distributions"),{params:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},getMarkDistributionById:async e=>{try{return(await ca.get("".concat(Mx,"/mark-distributions/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},createMarkDistribution:async e=>{try{return(await ca.post("".concat(Mx,"/mark-distributions"),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},updateMarkDistribution:async(e,t)=>{try{return(await ca.put("".concat(Mx,"/mark-distributions/").concat(e),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).data}catch(a){var s;throw(null===(s=a.response)||void 0===s?void 0:s.data)||a.message}},deleteMarkDistribution:async e=>{try{return(await ca.delete("".concat(Mx,"/mark-distributions/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},getMarkDistributionStats:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await ca.get("".concat(Mx,"/mark-distributions/stats"),{params:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},calculateGrades:async e=>{try{return(await ca.post("".concat(Mx,"/mark-distributions/calculate-grades"),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},getGradeCalculations:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await ca.get("".concat(Mx,"/mark-distributions/grade-calculations"),{params:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}}},Px=Dx,Ax=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[p,g]=(0,a.useState)("2024-2025"),[f,b]=(0,a.useState)(1),[y,v]=(0,a.useState)(1),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!1),[M,D]=(0,a.useState)(null),[P,A]=(0,a.useState)({name:"",description:"",classId:"",subjectId:"",academicYear:"2024-2025",semester:"",theoryMarks:0,practicalMarks:0,internalMarks:0,projectMarks:0,assignmentMarks:0,attendanceMarks:0,totalMarks:100,gradeSystem:"percentage",passingPercentage:35,theoryWeightage:0,practicalWeightage:0,internalWeightage:0,projectWeightage:0,assignmentWeightage:0,attendanceWeightage:0,allowGraceMarks:!1,graceMarksLimit:0,roundingMethod:"round"}),T=(0,a.useCallback)(async()=>{try{o(!0);const e={page:f,limit:10,search:c,classId:u,subjectId:m,academicYear:p},s=await Px.getMarkDistributions(e);t(s.data),v(s.pagination.pages)}catch(e){ir.error("Failed to fetch mark distributions"),console.error("Error fetching distributions:",e)}finally{o(!1)}},[f,c,u,m,p]),I=(0,a.useCallback)(async()=>{try{var e;const t=await um.getClasses();console.log("Classes response:",t),n((null===(e=t.data)||void 0===e?void 0:e.classes)||[])}catch(t){console.error("Error fetching classes:",t),n([])}},[]),O=(0,a.useCallback)(async()=>{try{var e;const t=await gm.getSubjects();console.log("Subjects response:",t),i((null===(e=t.data)||void 0===e?void 0:e.subjects)||[])}catch(t){console.error("Error fetching subjects:",t),i([])}},[]);(0,a.useEffect)(()=>{T()},[T]),(0,a.useEffect)(()=>{I(),O()},[I,O]);const R=()=>{A({name:"",description:"",classId:"",subjectId:"",academicYear:"2024-2025",semester:"",theoryMarks:0,practicalMarks:0,internalMarks:0,projectMarks:0,assignmentMarks:0,attendanceMarks:0,totalMarks:100,gradeSystem:"percentage",passingPercentage:35,theoryWeightage:0,practicalWeightage:0,internalWeightage:0,projectWeightage:0,assignmentWeightage:0,attendanceWeightage:0,allowGraceMarks:!1,graceMarksLimit:0,roundingMethod:"round"})};return(0,a.useEffect)(()=>{(()=>{const e=P.theoryMarks+P.practicalMarks+P.internalMarks+P.projectMarks+P.assignmentMarks+P.attendanceMarks;A(t=>Le(Le({},t),{},{totalMarks:e}))})()},[P.theoryMarks,P.practicalMarks,P.internalMarks,P.projectMarks,P.assignmentMarks,P.attendanceMarks]),(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mark Distributions"}),(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage grade calculation systems and mark distributions"})]}),(0,ga.jsxs)("button",{onClick:()=>N(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-5 h-5"}),"Add Distribution"]})]}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,ga.jsx)("div",{children:(0,ga.jsx)("input",{type:"text",placeholder:"Search distributions...",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Classes"}),s&&s.length>0?s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id)):(0,ga.jsx)("option",{value:"",children:"No classes available"})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Subjects"}),r&&r.length>0?r.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id)):(0,ga.jsx)("option",{value:"",children:"No subjects available"})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"2024-2025",children:"2024-2025"}),(0,ga.jsx)("option",{value:"2023-2024",children:"2023-2024"}),(0,ga.jsx)("option",{value:"2025-2026",children:"2025-2026"})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("button",{onClick:T,className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center justify-center gap-2",children:[(0,ga.jsx)(lm,{className:"w-4 h-4"}),"Search"]})})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Marks"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passing %"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center",children:(0,ga.jsx)("div",{className:"flex justify-center",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):0===e.length?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No mark distributions found"})}):e.map(e=>(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,ga.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.class?"".concat(e.class.name," ").concat(e.class.section):"All Classes"}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.subject?e.subject.name:"All Subjects"}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalMarks}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.passingPercentage,"%"]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.academicYear}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{D(e),C(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(e=>{D(e),A({name:e.name,description:e.description||"",classId:e.classId,subjectId:e.subjectId||"",academicYear:e.academicYear,semester:e.semester||"",theoryMarks:e.theoryMarks,practicalMarks:e.practicalMarks,internalMarks:e.internalMarks,projectMarks:e.projectMarks,assignmentMarks:e.assignmentMarks,attendanceMarks:e.attendanceMarks,totalMarks:e.totalMarks,gradeSystem:e.gradeSystem,passingPercentage:e.passingPercentage,theoryWeightage:e.theoryWeightage,practicalWeightage:e.practicalWeightage,internalWeightage:e.internalWeightage,projectWeightage:e.projectWeightage,assignmentWeightage:e.assignmentWeightage,attendanceWeightage:e.attendanceWeightage,allowGraceMarks:e.allowGraceMarks,graceMarksLimit:e.graceMarksLimit,roundingMethod:e.roundingMethod}),k(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(e=>{D(e),E(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Calculate Grades",children:(0,ga.jsx)(Ex,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this mark distribution?"))try{await Px.deleteMarkDistribution(e),ir.success("Mark distribution deleted successfully"),T()}catch(t){ir.error(t.message||"Failed to delete mark distribution")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id))})]})}),y>1&&(0,ga.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>b(e=>Math.max(e-1,1)),disabled:1===f,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>b(e=>Math.min(e+1,y)),disabled:f===y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,ga.jsx)("span",{className:"font-medium",children:f})," of"," ",(0,ga.jsx)("span",{className:"font-medium",children:y})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,ga.jsx)("button",{onClick:()=>b(e=>Math.max(e-1,1)),disabled:1===f,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:(0,ga.jsx)(vm,{className:"h-5 w-5"})}),(0,ga.jsx)("button",{onClick:()=>b(e=>Math.min(e+1,y)),disabled:f===y,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:(0,ga.jsx)(Ja,{className:"h-5 w-5"})})]})})]})]})]}),(j||w)&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:j?"Add Mark Distribution":"Edit Mark Distribution"}),(0,ga.jsxs)("form",{onSubmit:j?async e=>{e.preventDefault();try{await Px.createMarkDistribution(P),ir.success("Mark distribution created successfully"),N(!1),R(),T()}catch(t){ir.error(t.message||"Failed to create mark distribution")}}:async e=>{e.preventDefault();try{await Px.updateMarkDistribution(M.id,P),ir.success("Mark distribution updated successfully"),k(!1),R(),T()}catch(t){ir.error(t.message||"Failed to update mark distribution")}},children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:P.name,onChange:e=>A(t=>Le(Le({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),(0,ga.jsxs)("select",{required:!0,value:P.classId,onChange:e=>A(t=>Le(Le({},t),{},{classId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),s&&s.length>0?s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id)):(0,ga.jsx)("option",{value:"",children:"No classes available"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ga.jsxs)("select",{value:P.subjectId,onChange:e=>A(t=>Le(Le({},t),{},{subjectId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Subjects"}),r&&r.length>0?r.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id)):(0,ga.jsx)("option",{value:"",children:"No subjects available"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:P.academicYear,onChange:e=>A(t=>Le(Le({},t),{},{academicYear:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{className:"mb-4",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{value:P.description,onChange:e=>A(t=>Le(Le({},t),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{className:"mb-4",children:[(0,ga.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Component Marks"}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theory Marks"}),(0,ga.jsx)("input",{type:"number",min:"0",value:P.theoryMarks,onChange:e=>A(t=>Le(Le({},t),{},{theoryMarks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Practical Marks"}),(0,ga.jsx)("input",{type:"number",min:"0",value:P.practicalMarks,onChange:e=>A(t=>Le(Le({},t),{},{practicalMarks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Internal Marks"}),(0,ga.jsx)("input",{type:"number",min:"0",value:P.internalMarks,onChange:e=>A(t=>Le(Le({},t),{},{internalMarks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Marks"}),(0,ga.jsx)("input",{type:"number",min:"0",value:P.projectMarks,onChange:e=>A(t=>Le(Le({},t),{},{projectMarks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Marks"}),(0,ga.jsx)("input",{type:"number",min:"0",value:P.assignmentMarks,onChange:e=>A(t=>Le(Le({},t),{},{assignmentMarks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attendance Marks"}),(0,ga.jsx)("input",{type:"number",min:"0",value:P.attendanceMarks,onChange:e=>A(t=>Le(Le({},t),{},{attendanceMarks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsx)("div",{className:"mt-2",children:(0,ga.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Marks: ",P.totalMarks]})})]}),(0,ga.jsxs)("div",{className:"mb-4",children:[(0,ga.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:["Component Weightages (Total: ",P.theoryWeightage+P.practicalWeightage+P.internalWeightage+P.projectWeightage+P.assignmentWeightage+P.attendanceWeightage,"%)"]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theory Weightage (%)"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.theoryWeightage,onChange:e=>A(t=>Le(Le({},t),{},{theoryWeightage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Practical Weightage (%)"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.practicalWeightage,onChange:e=>A(t=>Le(Le({},t),{},{practicalWeightage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Internal Weightage (%)"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.internalWeightage,onChange:e=>A(t=>Le(Le({},t),{},{internalWeightage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Weightage (%)"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.projectWeightage,onChange:e=>A(t=>Le(Le({},t),{},{projectWeightage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Weightage (%)"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.assignmentWeightage,onChange:e=>A(t=>Le(Le({},t),{},{assignmentWeightage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attendance Weightage (%)"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.attendanceWeightage,onChange:e=>A(t=>Le(Le({},t),{},{attendanceWeightage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Percentage"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",value:P.passingPercentage,onChange:e=>A(t=>Le(Le({},t),{},{passingPercentage:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rounding Method"}),(0,ga.jsxs)("select",{value:P.roundingMethod,onChange:e=>A(t=>Le(Le({},t),{},{roundingMethod:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"round",children:"Round"}),(0,ga.jsx)("option",{value:"ceil",children:"Ceiling"}),(0,ga.jsx)("option",{value:"floor",children:"Floor"}),(0,ga.jsx)("option",{value:"truncate",children:"Truncate"})]})]})]}),(0,ga.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ga.jsx)("input",{type:"checkbox",id:"allowGraceMarks",checked:P.allowGraceMarks,onChange:e=>A(t=>Le(Le({},t),{},{allowGraceMarks:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,ga.jsx)("label",{htmlFor:"allowGraceMarks",className:"ml-2 block text-sm text-gray-900",children:"Allow Grace Marks"})]}),P.allowGraceMarks&&(0,ga.jsxs)("div",{className:"mb-4",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grace Marks Limit"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"50",value:P.graceMarksLimit,onChange:e=>A(t=>Le(Le({},t),{},{graceMarksLimit:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{N(!1),k(!1),R()},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:j?"Create":"Update"})]})]})]})})}),S&&M&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mark Distribution Details"}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h4",{className:"font-medium text-gray-900",children:M.name}),M.description&&(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:M.description})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Class:"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:M.class?"".concat(M.class.name," ").concat(M.class.section):"All Classes"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:M.subject?M.subject.name:"All Subjects"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Academic Year:"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:M.academicYear})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Total Marks:"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:M.totalMarks})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Passing Percentage:"}),(0,ga.jsxs)("p",{className:"text-sm text-gray-900",children:[M.passingPercentage,"%"]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Grade System:"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900 capitalize",children:M.gradeSystem})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Component Marks:"}),(0,ga.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,ga.jsxs)("div",{children:["Theory: ",M.theoryMarks]}),(0,ga.jsxs)("div",{children:["Practical: ",M.practicalMarks]}),(0,ga.jsxs)("div",{children:["Internal: ",M.internalMarks]}),(0,ga.jsxs)("div",{children:["Project: ",M.projectMarks]}),(0,ga.jsxs)("div",{children:["Assignment: ",M.assignmentMarks]}),(0,ga.jsxs)("div",{children:["Attendance: ",M.attendanceMarks]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Component Weightages:"}),(0,ga.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,ga.jsxs)("div",{children:["Theory: ",M.theoryWeightage,"%"]}),(0,ga.jsxs)("div",{children:["Practical: ",M.practicalWeightage,"%"]}),(0,ga.jsxs)("div",{children:["Internal: ",M.internalWeightage,"%"]}),(0,ga.jsxs)("div",{children:["Project: ",M.projectWeightage,"%"]}),(0,ga.jsxs)("div",{children:["Assignment: ",M.assignmentWeightage,"%"]}),(0,ga.jsxs)("div",{children:["Attendance: ",M.attendanceWeightage,"%"]})]})]})]}),(0,ga.jsx)("div",{className:"flex justify-end mt-6",children:(0,ga.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})})}),_&&M&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Calculate Grades"}),(0,ga.jsxs)("div",{className:"mb-4",children:[(0,ga.jsx)("p",{className:"text-gray-600",children:"Are you sure you want to calculate grades for the following distribution?"}),(0,ga.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:[(0,ga.jsxs)("p",{children:[(0,ga.jsx)("strong",{children:"Name:"})," ",M.name]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("strong",{children:"Class:"})," ",M.class?"".concat(M.class.name," ").concat(M.class.section):"All Classes"]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("strong",{children:"Subject:"})," ",M.subject?M.subject.name:"All Subjects"]}),(0,ga.jsxs)("p",{children:[(0,ga.jsx)("strong",{children:"Academic Year:"})," ",M.academicYear]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsxs)("button",{onClick:async()=>{try{const e={classId:M.classId,subjectId:M.subjectId,academicYear:M.academicYear,semester:M.semester};await Px.calculateGrades(e),ir.success("Grades calculated successfully"),E(!1)}catch(e){ir.error(e.message||"Failed to calculate grades")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ga.jsx)(Ex,{className:"w-4 h-4"}),"Calculate Grades"]})]})]})})})]})},Tx=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),f=(0,a.useCallback)(async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/classes",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.data.classes||[])}else console.error("Failed to fetch classes:",s.status)}catch(e){console.error("Error fetching classes:",e)}},[]),b=(0,a.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/subjects",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();n(e.data.subjects||[])}else console.error("Failed to fetch subjects:",t.status)}catch(e){console.error("Error fetching subjects:",e)}},[]);(0,a.useEffect)(()=>{f(),b()},[f,b]);return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,ga.jsx)("div",{className:"flex items-center justify-between",children:(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ga.jsx)(Ya,{className:"h-8 w-8 mr-3 text-blue-600"}),"Attendance Reports"]}),(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:"Generate and view attendance reports"})]})})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class *"}),(0,ga.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Choose Class"}),e.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Subject"}),(0,ga.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Subjects"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,ga.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,ga.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsx)("div",{className:"flex items-end",children:(0,ga.jsx)("button",{onClick:async()=>{if(r){g(!0);try{const e=new URLSearchParams;e.append("classId",r),l&&e.append("subjectId",l),c&&e.append("startDate",c),u&&e.append("endDate",u);const t=await fetch("/api/attendance/class/".concat(r,"/report?").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();x(e.data)}else console.error("Failed to generate report")}catch(e){console.error("Error generating report:",e)}finally{g(!1)}}else alert("Please select a class")},disabled:!r||p,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:p?(0,ga.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(om,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})})]})}),m&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Report Statistics"}),(0,ga.jsxs)("button",{onClick:()=>{if(!m)return;const e=[["Student ID","Student Name","Date","Status","Subject","Remarks"].join(","),...m.attendance.map(e=>[e.student.studentId,'"'.concat(e.student.user.firstName," ").concat(e.student.user.lastName,'"'),e.date,e.status,e.subject.name,'"'.concat(e.remarks||"",'"')].join(","))].join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="attendance-report-".concat(r,"-").concat(c,"-").concat(u,".csv"),a.click(),window.URL.revokeObjectURL(s)},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center",children:[(0,ga.jsx)(kx,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:m.statistics.total}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Total Records"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m.statistics.present}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Present"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-red-600",children:m.statistics.absent}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Absent"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:m.statistics.late}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Late"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:m.statistics.excused}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Excused"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[m.statistics.attendancePercentage,"%"]}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Attendance"})]})]})]}),m&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ga.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,ga.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Attendance Records - ",m.attendance.length," Records"]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.attendance.map((e,t)=>(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.student.studentId}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.student.user.firstName," ",e.student.user.lastName]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("present"===e.status?"bg-green-100 text-green-800":"absent"===e.status?"bg-red-100 text-red-800":"late"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.subject.name}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.remarks||"-"})]},t))})]})})]}),r&&!m&&!p&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,ga.jsx)(Ya,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Report Generated"}),(0,ga.jsx)("p",{className:"text-gray-600",children:'Select filters and click "Generate Report" to view attendance data.'})]})]})},Ix=Da("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ox="http://13.61.100.250/api",Rx={getCheques:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await ca.get("".concat(Ox,"/cheques"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:e})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},getChequeById:async e=>{try{return(await ca.get("".concat(Ox,"/cheques/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},createCheque:async e=>{try{return(await ca.post("".concat(Ox,"/cheques"),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},updateChequeStatus:async(e,t)=>{try{return(await ca.put("".concat(Ox,"/cheques/").concat(e,"/status"),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).data}catch(a){var s;throw(null===(s=a.response)||void 0===s?void 0:s.data)||a.message}},deleteCheque:async e=>{try{return(await ca.delete("".concat(Ox,"/cheques/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},getChequeStats:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await ca.get("".concat(Ox,"/cheques/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:e})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},validateCheque:async e=>{try{return(await ca.post("".concat(Ox,"/cheques/validate"),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}},getPendingCheques:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await ca.get("".concat(Ox,"/cheques/pending"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:e})).data}catch(s){var t;throw(null===(t=s.response)||void 0===t?void 0:t.data)||s.message}}},Lx=()=>{var e;const[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)("2024-2025"),[x,p]=(0,a.useState)(""),[g,f]=(0,a.useState)(1),[b,y]=(0,a.useState)(1),[v,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[C,_]=(0,a.useState)(null),[E,M]=(0,a.useState)([]),[D,P]=(0,a.useState)({}),[A,T]=(0,a.useState)({chequeNumber:"",bankName:"",branchName:"",accountNumber:"",accountHolderName:"",amount:"",issueDate:"",dueDate:"",paymentType:"fee_payment",studentId:"",academicYear:"2024-2025",remarks:""}),[I,O]=(0,a.useState)({status:"",bouncedReason:"",remarks:""}),R=[{value:"pending",label:"Pending",color:"yellow",icon:La},{value:"cleared",label:"Cleared",color:"green",icon:Lr},{value:"bounced",label:"Bounced",color:"red",icon:Ix},{value:"cancelled",label:"Cancelled",color:"gray",icon:Cx},{value:"expired",label:"Expired",color:"orange",icon:Cx}],L=[{value:"fee_payment",label:"Fee Payment"},{value:"transport_payment",label:"Transport Payment"},{value:"other",label:"Other"}],F=(0,a.useCallback)(async()=>{try{r(!0);const e={page:g,limit:10,search:i,status:o,paymentType:d,academicYear:h,bankName:x},t=await Rx.getCheques(e);s(t.data.cheques),y(t.data.pagination.pages)}catch(e){ir.error("Failed to load cheques"),console.error("Error loading cheques:",e)}finally{r(!1)}},[g,i,o,d,h,x]),z=(0,a.useCallback)(async()=>{try{const e=await Rx.getChequeStats({academicYear:h});P(e.data)}catch(e){console.error("Error loading stats:",e)}},[h]),q=(0,a.useCallback)(async()=>{try{const e=await am.getStudents({limit:100});M(e.data.students)}catch(e){console.error("Error loading students:",e)}},[]);(0,a.useEffect)(()=>{F()},[F]),(0,a.useEffect)(()=>{z(),q()},[z,q]);const B=(e,t)=>{switch(e){case"status":c(t);break;case"paymentType":u(t);break;case"academicYear":m(t);break;case"bankName":p(t)}f(1)},U=e=>{const{name:t,value:s}=e.target;T(e=>Le(Le({},e),{},{[t]:s}))},W=e=>{const{name:t,value:s}=e.target;O(e=>Le(Le({},e),{},{[t]:s}))},H=e=>{_(e),O({status:e.status,bouncedReason:"",remarks:""}),S(!0)},V=e=>{f(e)},Y=e=>R.find(t=>t.value===e)||R[0];return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cheque Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage and track cheque payments"})]}),(0,ga.jsxs)("button",{onClick:()=>j(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Cheque"]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ua,{className:"w-8 h-8 text-blue-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Cheques"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.totalCheques||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Lr,{className:"w-8 h-8 text-green-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cleared"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.clearedCheques||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(La,{className:"w-8 h-8 text-yellow-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.pendingCheques||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ix,{className:"w-8 h-8 text-red-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Bounced"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.bouncedCheques||0})]})]})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ba,{className:"w-8 h-8 text-green-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",D.totalAmount||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Lr,{className:"w-8 h-8 text-green-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cleared Amount"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",D.clearedAmount||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(La,{className:"w-8 h-8 text-yellow-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Amount"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",D.pendingAmount||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ix,{className:"w-8 h-8 text-red-600"}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Bounced Amount"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",D.bouncedAmount||0]})]})]})})]}),(0,ga.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search cheques...",value:i,onChange:e=>{l(e.target.value),f(1)},className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:o,onChange:e=>B("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),R.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type"}),(0,ga.jsxs)("select",{value:d,onChange:e=>B("paymentType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Types"}),L.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),(0,ga.jsx)("select",{value:h,onChange:e=>B("academicYear",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["2023-2024","2024-2025","2025-2026"].map(e=>(0,ga.jsx)("option",{value:e,children:e},e))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),(0,ga.jsx)("input",{type:"text",placeholder:"Bank name...",value:x,onChange:e=>B("bankName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ga.jsxs)("button",{onClick:()=>{l(""),c(""),u(""),m("2024-2025"),p(""),f(1)},className:"text-gray-600 hover:text-gray-800 flex items-center gap-2",children:[(0,ga.jsx)(om,{className:"w-4 h-4"}),"Clear Filters"]})})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?(0,ga.jsxs)("div",{className:"p-8 text-center",children:[(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,ga.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading cheques..."})]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cheque Details"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bank Info"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t;const s=Y(e.status),a=s.icon,n=new Date(e.dueDate)<new Date&&"pending"===e.status;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.chequeNumber}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.accountHolderName})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.bankName}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.branchName})]})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["\u20b9",e.amount]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(t=L.find(t=>t.value===e.paymentType))||void 0===t?void 0:t.label})]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:["Issue: ",yx(new Date(e.issueDate),"MMM dd, yyyy")]}),(0,ga.jsxs)("div",{className:"text-sm ".concat(n?"text-red-600":"text-gray-500"),children:["Due: ",yx(new Date(e.dueDate),"MMM dd, yyyy")]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-".concat(s.color,"-100 text-").concat(s.color,"-800"),children:[(0,ga.jsx)(a,{className:"w-3 h-3 mr-1"}),s.label]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.student?(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.student.user.firstName," ",e.student.user.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.student.user.email})]}):(0,ga.jsx)("span",{className:"text-sm text-gray-500",children:"N/A"})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(async e=>{try{const t=await Rx.getChequeById(e.id);_(t.data.cheque),w(!0)}catch(t){ir.error("Failed to load cheque details")}})(e),className:"text-blue-600 hover:text-blue-900",title:"View Cheque",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>H(e),className:"text-green-600 hover:text-green-900",title:"Update Status",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this cheque?"))try{await Rx.deleteCheque(e.id),ir.success("Cheque deleted successfully"),F()}catch(t){ir.error("Failed to delete cheque")}})(e),className:"text-red-600 hover:text-red-900",title:"Delete Cheque",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),b>1&&(0,ga.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>V(g-1),disabled:1===g,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>V(g+1),disabled:g===b,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",(0,ga.jsx)("span",{className:"font-medium",children:g})," of"," ",(0,ga.jsx)("span",{className:"font-medium",children:b})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,ga.jsx)("button",{onClick:()=>V(g-1),disabled:1===g,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:(0,ga.jsx)(vm,{className:"h-5 w-5"})}),[...Array(b)].map((e,t)=>(0,ga.jsx)("button",{onClick:()=>V(t+1),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(g===t+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:t+1},t+1)),(0,ga.jsx)("button",{onClick:()=>V(g+1),disabled:g===b,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:(0,ga.jsx)(Ja,{className:"h-5 w-5"})})]})})]})]})]})}),v&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Cheque"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rx.createCheque(A),ir.success("Cheque created successfully"),j(!1),T({chequeNumber:"",bankName:"",branchName:"",accountNumber:"",accountHolderName:"",amount:"",issueDate:"",dueDate:"",paymentType:"fee_payment",studentId:"",academicYear:"2024-2025",remarks:""}),F()}catch(t){ir.error(t.message||"Failed to create cheque")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque Number"}),(0,ga.jsx)("input",{type:"text",name:"chequeNumber",value:A.chequeNumber,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter cheque number"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,ga.jsx)("input",{type:"number",step:"0.01",name:"amount",value:A.amount,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),(0,ga.jsx)("input",{type:"text",name:"bankName",value:A.bankName,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bank name"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Name"}),(0,ga.jsx)("input",{type:"text",name:"branchName",value:A.branchName,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter branch name"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),(0,ga.jsx)("input",{type:"text",name:"accountNumber",value:A.accountNumber,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter account number"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder"}),(0,ga.jsx)("input",{type:"text",name:"accountHolderName",value:A.accountHolderName,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter account holder name"})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,ga.jsx)("input",{type:"date",name:"issueDate",value:A.issueDate,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,ga.jsx)("input",{type:"date",name:"dueDate",value:A.dueDate,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type"}),(0,ga.jsx)("select",{name:"paymentType",value:A.paymentType,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:L.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student"}),(0,ga.jsxs)("select",{name:"studentId",value:A.studentId,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"Select Student (Optional)"}),E.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.user.firstName," ",e.user.lastName]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{name:"remarks",value:A.remarks,onChange:U,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter remarks (optional)"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Create Cheque"})]})]})]})})}),N&&C&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Cheque Details"}),(0,ga.jsxs)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:[(0,ga.jsx)("span",{className:"sr-only",children:"Close"}),(0,ga.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ga.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Number"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:C.chequeNumber})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Name"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:C.bankName})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Branch Name"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:C.branchName})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:C.accountNumber})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Account Holder"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:C.accountHolderName})]})]}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,ga.jsxs)("p",{className:"text-sm text-gray-900",children:["\u20b9",C.amount]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Issue Date"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:yx(new Date(C.issueDate),"MMM dd, yyyy")})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:yx(new Date(C.dueDate),"MMM dd, yyyy")})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,ga.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-".concat(Y(C.status).color,"-100 text-").concat(Y(C.status).color,"-800"),children:Y(C.status).label})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Type"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:null===(e=L.find(e=>e.value===C.paymentType))||void 0===e?void 0:e.label})]})]})]}),C.remarks&&(0,ga.jsxs)("div",{className:"mt-4",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:C.remarks})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{onClick:()=>H(C),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700",children:"Update Status"}),(0,ga.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200",children:"Close"})]})]})})}),k&&C&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Update Cheque Status"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rx.updateChequeStatus(C.id,I),ir.success("Cheque status updated successfully"),S(!1),O({status:"",bouncedReason:"",remarks:""}),F()}catch(t){ir.error(t.message||"Failed to update cheque status")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsx)("select",{name:"status",value:I.status,onChange:W,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"bounced"===I.status&&(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bounced Reason"}),(0,ga.jsx)("textarea",{name:"bouncedReason",value:I.bouncedReason,onChange:W,rows:3,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bounced reason"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{name:"remarks",value:I.remarks,onChange:W,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter remarks (optional)"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700",children:"Update Status"})]})]})]})})})]})},Fx=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([{id:1,name:"Mathematics",code:"MATH101",description:"Advanced Algebra and Geometry",credits:4,teacher:"Mr. Smith",class:"8th Grade - A",schedule:"Mon, Wed, Fri - 9:00 AM",room:"Room 101"},{id:2,name:"English Literature",code:"ENG201",description:"Classic and Modern Literature",credits:3,teacher:"Ms. Johnson",class:"8th Grade - A",schedule:"Tue, Thu - 10:15 AM",room:"Room 102"},{id:3,name:"Science",code:"SCI301",description:"Physics and Chemistry",credits:4,teacher:"Dr. Brown",class:"8th Grade - A",schedule:"Mon, Wed - 11:30 AM",room:"Lab 1"},{id:4,name:"History",code:"HIS401",description:"World History and Geography",credits:3,teacher:"Prof. Davis",class:"8th Grade - A",schedule:"Tue, Thu - 1:30 PM",room:"Room 103"},{id:5,name:"Physical Education",code:"PE501",description:"Sports and Physical Fitness",credits:2,teacher:"Coach Taylor",class:"8th Grade - A",schedule:"Mon, Wed, Fri - 2:45 PM",room:"Gymnasium"},{id:6,name:"Art",code:"ART601",description:"Drawing and Painting",credits:2,teacher:"Ms. Garcia",class:"8th Grade - A",schedule:"Tue, Thu - 3:30 PM",room:"Art Studio"}]),[n,r]=(0,a.useState)(""),[i,l]=(0,a.useState)("all"),o=t.filter(e=>{const t=e.name.toLowerCase().includes(n.toLowerCase())||e.code.toLowerCase().includes(n.toLowerCase())||e.teacher.toLowerCase().includes(n.toLowerCase()),s="all"===i||"high"===i&&e.credits>=4||"medium"===i&&3===e.credits||"low"===i&&e.credits<=2;return t&&s}),c=t.reduce((e,t)=>e+t.credits,0);return(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Subjects"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"View your enrolled subjects and course information"})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:"Total Credits"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c})]}),(0,ga.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Ta,{className:"w-8 h-8 text-blue-600"})})]})]})}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ta,{className:"w-6 h-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Subjects"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Oa,{className:"w-6 h-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Credits"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Za,{className:"w-6 h-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Teachers"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:new Set(t.map(e=>e.teacher)).size})]})]})})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search subjects...",value:n,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsx)("div",{className:"flex gap-2",children:(0,ga.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Credits"}),(0,ga.jsx)("option",{value:"high",children:"High Credits (4+)"}),(0,ga.jsx)("option",{value:"medium",children:"Medium Credits (3)"}),(0,ga.jsx)("option",{value:"low",children:"Low Credits (1-2)"})]})})]})}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{return(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500",children:[(0,ga.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:e.code})]}),(0,ga.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat((t=e.credits,t>=4?"bg-blue-100 text-blue-800 border-blue-200":3===t?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200")),children:[e.credits," credits"]})]}),(0,ga.jsx)("p",{className:"text-gray-700 mb-4 text-sm",children:e.description}),(0,ga.jsxs)("div",{className:"space-y-2",children:[(0,ga.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ga.jsx)(Za,{className:"w-4 h-4 mr-2"}),(0,ga.jsx)("span",{children:e.teacher})]}),(0,ga.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ga.jsx)(Ia,{className:"w-4 h-4 mr-2"}),(0,ga.jsx)("span",{children:e.schedule})]}),(0,ga.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ga.jsx)(Ta,{className:"w-4 h-4 mr-2"}),(0,ga.jsx)("span",{children:e.room})]})]}),(0,ga.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,ga.jsx)("span",{className:"text-gray-500",children:"Class:"}),(0,ga.jsx)("span",{className:"font-medium text-gray-900",children:e.class})]})})]},e.id);var t})}),0===o.length&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,ga.jsx)(Ta,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects found"}),(0,ga.jsx)("p",{className:"text-gray-600",children:n||"all"!==i?"Try adjusting your search or filter criteria.":"You are not enrolled in any subjects yet."})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject Summary"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Credit Distribution"}),(0,ga.jsxs)("div",{className:"space-y-2",children:[(0,ga.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ga.jsx)("span",{children:"High Credit Subjects (4+):"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.credits>=4).length})]}),(0,ga.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ga.jsx)("span",{children:"Medium Credit Subjects (3):"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>3===e.credits).length})]}),(0,ga.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ga.jsx)("span",{children:"Low Credit Subjects (1-2):"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.credits<=2).length})]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Schedule Overview"}),(0,ga.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ga.jsxs)("div",{className:"flex justify-between",children:[(0,ga.jsx)("span",{children:"Monday Classes:"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.schedule.includes("Mon")).length})]}),(0,ga.jsxs)("div",{className:"flex justify-between",children:[(0,ga.jsx)("span",{children:"Tuesday Classes:"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.schedule.includes("Tue")).length})]}),(0,ga.jsxs)("div",{className:"flex justify-between",children:[(0,ga.jsx)("span",{children:"Wednesday Classes:"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.schedule.includes("Wed")).length})]}),(0,ga.jsxs)("div",{className:"flex justify-between",children:[(0,ga.jsx)("span",{children:"Thursday Classes:"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.schedule.includes("Thu")).length})]}),(0,ga.jsxs)("div",{className:"flex justify-between",children:[(0,ga.jsx)("span",{children:"Friday Classes:"}),(0,ga.jsx)("span",{className:"font-medium",children:t.filter(e=>e.schedule.includes("Fri")).length})]})]})]})]})]})]})};fu.register(uh,ph,Iu,Au,Bu,Gu,oh,Vu,wu);const zx=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([{id:1,subject:"Mathematics",date:"2025-09-07",status:"present",teacher:"Mr. Smith",class:"8th Grade - A",remarks:"Good participation"},{id:2,subject:"English Literature",date:"2025-09-06",status:"present",teacher:"Ms. Johnson",class:"8th Grade - A",remarks:"Active in discussion"},{id:3,subject:"Science",date:"2025-09-05",status:"absent",teacher:"Dr. Brown",class:"8th Grade - A",remarks:"Sick leave"},{id:4,subject:"History",date:"2025-09-04",status:"present",teacher:"Prof. Davis",class:"8th Grade - A",remarks:"Excellent presentation"},{id:5,subject:"Physical Education",date:"2025-09-03",status:"present",teacher:"Coach Taylor",class:"8th Grade - A",remarks:"Good performance"},{id:6,subject:"Art",date:"2025-09-02",status:"late",teacher:"Ms. Garcia",class:"8th Grade - A",remarks:"Late by 10 minutes"},{id:7,subject:"Mathematics",date:"2025-09-01",status:"present",teacher:"Mr. Smith",class:"8th Grade - A",remarks:"Good work"},{id:8,subject:"English Literature",date:"2025-08-31",status:"present",teacher:"Ms. Johnson",class:"8th Grade - A",remarks:"Well prepared"}]),[n,r]=(0,a.useState)("all"),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)("week"),d=e=>{switch(e){case"present":return"text-green-600 bg-green-100";case"absent":return"text-red-600 bg-red-100";case"late":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},u=e=>{switch(e){case"present":return(0,ga.jsx)(Lr,{className:"w-4 h-4"});case"absent":return(0,ga.jsx)(Ix,{className:"w-4 h-4"});default:return(0,ga.jsx)(La,{className:"w-4 h-4"})}},h=t.filter(e=>{const t="all"===n||e.status===n,s=e.subject.toLowerCase().includes(i.toLowerCase())||e.teacher.toLowerCase().includes(i.toLowerCase());return t&&s}),m=t.length,x=t.filter(e=>"present"===e.status).length,p=t.filter(e=>"absent"===e.status).length,g=t.filter(e=>"late"===e.status).length,f=m>0?Math.round(x/m*100):0,b=t.reduce((e,t)=>(e[t.subject]||(e[t.subject]={total:0,present:0,absent:0,late:0}),e[t.subject].total++,e[t.subject][t.status]++,e),{}),y={labels:["Present","Absent","Late"],datasets:[{data:[x,p,g],backgroundColor:["#10B981","#EF4444","#F59E0B"],borderWidth:0}]},v={labels:Object.keys(b),datasets:[{label:"Attendance %",data:Object.values(b).map(e=>Math.round(e.present/e.total*100)),backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],borderWidth:0}]};return(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Attendance"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Track your attendance records and statistics"})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:"Overall Attendance"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[f,"%"]})]}),(0,ga.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Ia,{className:"w-8 h-8 text-green-600"})})]})]})}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Lr,{className:"w-6 h-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Present"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,ga.jsx)(Ix,{className:"w-6 h-6 text-red-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Absent"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,ga.jsx)(La,{className:"w-6 h-6 text-yellow-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Late"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ir,{className:"w-6 h-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Classes"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m})]})]})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attendance Overview"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Zh,{data:y,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject-wise Attendance"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Xh,{data:v,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return e+"%"}}}}}})})]})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Attendance Trend"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Jh,{data:{labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Attendance %",data:[85,92,78,88],borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return e+"%"}}}}}})})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search by subject or teacher...",value:i,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsx)("div",{className:"flex gap-2",children:(0,ga.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Status"}),(0,ga.jsx)("option",{value:"present",children:"Present"}),(0,ga.jsx)("option",{value:"absent",children:"Absent"}),(0,ga.jsx)("option",{value:"late",children:"Late"})]})})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Attendance Records"}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ta,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.subject})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Za,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,ga.jsx)("span",{className:"text-sm text-gray-900",children:e.teacher})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(d(e.status)),children:[u(e.status),(0,ga.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.remarks})]},e.id))})]})})]}),0===h.length&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,ga.jsx)(Ia,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No attendance records found"}),(0,ga.jsx)("p",{className:"text-gray-600",children:i||"all"!==n?"Try adjusting your search or filter criteria.":"No attendance records available yet."})]})]})},qx=Da("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);fu.register(uh,ph,Iu,Au,Bu,Gu,oh,Vu,wu);const Bx=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([{id:1,subject:"Mathematics",examType:"Midterm",examName:"Algebra Test",marksObtained:85,totalMarks:100,percentage:85,grade:"A",examDate:"2025-09-05",remarks:"Excellent work!"},{id:2,subject:"English Literature",examType:"Assignment",examName:"Essay Writing",marksObtained:92,totalMarks:100,percentage:92,grade:"A+",examDate:"2025-09-03",remarks:"Outstanding essay!"},{id:3,subject:"Science",examType:"Quiz",examName:"Chemistry Quiz",marksObtained:78,totalMarks:100,percentage:78,grade:"B+",examDate:"2025-09-01",remarks:"Good effort, keep practicing"},{id:4,subject:"History",examType:"Project",examName:"World War I Research",marksObtained:88,totalMarks:100,percentage:88,grade:"A",examDate:"2025-08-28",remarks:"Well researched project"},{id:5,subject:"Physical Education",examType:"Practical",examName:"Basketball Skills",marksObtained:95,totalMarks:100,percentage:95,grade:"A+",examDate:"2025-08-25",remarks:"Excellent performance"},{id:6,subject:"Art",examType:"Portfolio",examName:"Drawing Portfolio",marksObtained:90,totalMarks:100,percentage:90,grade:"A+",examDate:"2025-08-22",remarks:"Creative and artistic"},{id:7,subject:"Mathematics",examType:"Quiz",examName:"Geometry Quiz",marksObtained:82,totalMarks:100,percentage:82,grade:"A-",examDate:"2025-08-20",remarks:"Good understanding"},{id:8,subject:"English Literature",examType:"Presentation",examName:"Book Review",marksObtained:87,totalMarks:100,percentage:87,grade:"A",examDate:"2025-08-18",remarks:"Well presented"}]),[n,r]=(0,a.useState)("all"),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)("all"),d=e=>{switch(e){case"A+":case"A":case"A-":return"text-green-600 bg-green-100";case"B+":case"B":case"B-":return"text-blue-600 bg-blue-100";case"C+":case"C":case"C-":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"F":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},u=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":e>=60?"text-orange-600":"text-red-600",h=t.filter(e=>{const t="all"===n||e.grade.startsWith(n),s=e.subject.toLowerCase().includes(i.toLowerCase())||e.examName.toLowerCase().includes(i.toLowerCase()),a="all"===o||e.examType===o;return t&&s&&a}),m=t.length,x=m>0?Math.round(t.reduce((e,t)=>e+t.percentage,0)/m):0,p=t.length>0?Math.max(...t.map(e=>e.percentage)):0,g=t.length>0?Math.min(...t.map(e=>e.percentage)):0,f=t.reduce((e,t)=>(e[t.subject]||(e[t.subject]={total:0,count:0}),e[t.subject].total+=t.percentage,e[t.subject].count+=1,e),{});Object.keys(f).forEach(e=>{f[e].average=Math.round(f[e].total/f[e].count)});const b={labels:Object.keys(f),datasets:[{label:"Average %",data:Object.values(f).map(e=>e.average),backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],borderWidth:0}]},y=t.reduce((e,t)=>(e[t.grade]=(e[t.grade]||0)+1,e),{}),v={labels:Object.keys(y),datasets:[{data:Object.values(y),backgroundColor:["#10B981","#10B981","#10B981","#3B82F6","#3B82F6","#3B82F6","#F59E0B","#F59E0B","#F59E0B","#EF4444","#EF4444"],borderWidth:0}]},j=t.slice(0,6).map(e=>e.percentage),N={labels:t.slice(0,6).map(e=>e.examName),datasets:[{label:"Percentage",data:j,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]};return(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Grades"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"View your academic performance and progress"})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:"Overall Average"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[x,"%"]})]}),(0,ga.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Oa,{className:"w-8 h-8 text-blue-600"})})]})]})}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ya,{className:"w-6 h-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Average"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[x,"%"]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Ir,{className:"w-6 h-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Highest"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[p,"%"]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,ga.jsx)(qx,{className:"w-6 h-6 text-yellow-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Lowest"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[g,"%"]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Ta,{className:"w-6 h-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Exams"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m})]})]})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject-wise Performance"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Xh,{data:b,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return e+"%"}}}}}})})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Distribution"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Zh,{data:v,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Performance Trend"}),(0,ga.jsx)("div",{className:"h-64",children:(0,ga.jsx)(Jh,{data:N,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return e+"%"}}}}}})})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search by subject or exam...",value:i,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Grades"}),(0,ga.jsx)("option",{value:"A",children:"A Grades"}),(0,ga.jsx)("option",{value:"B",children:"B Grades"}),(0,ga.jsx)("option",{value:"C",children:"C Grades"}),(0,ga.jsx)("option",{value:"D",children:"D Grades"}),(0,ga.jsx)("option",{value:"F",children:"F Grades"})]}),(0,ga.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Types"}),(0,ga.jsx)("option",{value:"Quiz",children:"Quiz"}),(0,ga.jsx)("option",{value:"Midterm",children:"Midterm"}),(0,ga.jsx)("option",{value:"Final",children:"Final"}),(0,ga.jsx)("option",{value:"Assignment",children:"Assignment"}),(0,ga.jsx)("option",{value:"Project",children:"Project"}),(0,ga.jsx)("option",{value:"Presentation",children:"Presentation"}),(0,ga.jsx)("option",{value:"Practical",children:"Practical"})]})]})]})}),(0,ga.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500",children:(0,ga.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ga.jsxs)("div",{className:"flex-1",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.examName}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(d(e.grade)),children:e.grade}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:e.examType})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)(Ta,{className:"w-4 h-4"}),e.subject]}),(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)(Ia,{className:"w-4 h-4"}),new Date(e.examDate).toLocaleDateString()]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-6 mb-3",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Marks"}),(0,ga.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[e.marksObtained," / ",e.totalMarks]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Percentage"}),(0,ga.jsxs)("p",{className:"text-lg font-semibold ".concat(u(e.percentage)),children:[e.percentage,"%"]})]})]}),e.remarks&&(0,ga.jsxs)("p",{className:"text-sm text-gray-600 italic",children:['"',e.remarks,'"']})]}),(0,ga.jsx)("div",{className:"ml-4",children:(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsxs)("div",{className:"text-3xl font-bold ".concat(u(e.percentage)),children:[e.percentage,"%"]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Score"})]})})]})},e.id))}),0===h.length&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,ga.jsx)(Oa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No grades found"}),(0,ga.jsx)("p",{className:"text-gray-600",children:i||"all"!==n||"all"!==o?"Try adjusting your search or filter criteria.":"No grades available yet."})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject Summary"}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(f).map(e=>{let[t,s]=e;return(0,ga.jsx)("div",{className:"p-4 border rounded-lg",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900",children:t}),(0,ga.jsxs)("p",{className:"text-sm text-gray-600",children:[s.count," exam",1!==s.count?"s":""]})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsxs)("div",{className:"text-xl font-bold ".concat(u(s.average)),children:[s.average,"%"]}),(0,ga.jsx)("div",{className:"text-xs text-gray-500",children:"Average"})]})]})},t)})})]})]})},Ux=()=>{const[e,t]=(0,a.useState)("structures"),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)({}),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)("structure"),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)({classId:"",feeType:"",paymentStatus:"",academicYear:(new Date).getFullYear().toString()}),[y,v]=(0,a.useState)({name:"",description:"",amount:"",feeType:"tuition",classId:"",academicYear:(new Date).getFullYear().toString(),dueDate:"",lateFeeAmount:0,lateFeeDays:0,installmentCount:1,installmentInterval:"yearly"}),j=(0,a.useCallback)(async()=>{try{d(!0);const e=new URLSearchParams;f.classId&&e.append("classId",f.classId),f.feeType&&e.append("feeType",f.feeType),f.academicYear&&e.append("academicYear",f.academicYear);const t=await fetch("/api/fees/structures?".concat(e)),s=await t.json();"success"===s.status&&n(s.data.feeStructures)}catch(e){console.error("Error fetching fee structures:",e)}finally{d(!1)}},[f]),N=(0,a.useCallback)(async()=>{try{const e=new URLSearchParams;f.classId&&e.append("classId",f.classId),f.paymentStatus&&e.append("paymentStatus",f.paymentStatus),f.academicYear&&e.append("academicYear",f.academicYear);const t=await fetch("/api/fees/payments?".concat(e)),s=await t.json();"success"===s.status&&i(s.data.feePayments)}catch(e){console.error("Error fetching fee payments:",e)}},[f]),w=(0,a.useCallback)(async()=>{try{const e=new URLSearchParams;f.academicYear&&e.append("academicYear",f.academicYear),f.classId&&e.append("classId",f.classId);const t=await fetch("/api/fees/stats?".concat(e)),s=await t.json();"success"===s.status&&o(s.data)}catch(e){console.error("Error fetching stats:",e)}},[f]);(0,a.useEffect)(()=>{j(),N(),w()},[f,e,j,N,w]);const k=()=>{v({name:"",description:"",amount:"",feeType:"tuition",classId:"",academicYear:(new Date).getFullYear().toString(),dueDate:"",lateFeeAmount:0,lateFeeDays:0,installmentCount:1,installmentInterval:"yearly"})},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;x(e),t?v(t):k(),h(!0)},C=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=e=>{switch(e){case"tuition":return"bg-blue-100 text-blue-800";case"transport":return"bg-green-100 text-green-800";case"hostel":return"bg-purple-100 text-purple-800";case"library":return"bg-orange-100 text-orange-800";case"exam":return"bg-red-100 text-red-800";case"sports":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Fees Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage fee structures and payments"})]}),(0,ga.jsx)("div",{className:"flex space-x-3",children:(0,ga.jsxs)("button",{onClick:()=>S("structure"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),(0,ga.jsx)("span",{children:"Add Fee Structure"})]})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ba,{className:"h-6 w-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Fees"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",l.totalFees||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Ir,{className:"h-6 w-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Collected"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",l.totalPaid||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,ga.jsx)(Ia,{className:"h-6 w-6 text-yellow-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",l.totalPending||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Aa,{className:"h-6 w-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ga.jsx)("div",{className:"border-b border-gray-200",children:(0,ga.jsxs)("nav",{className:"-mb-px flex space-x-8 px-6",children:[(0,ga.jsx)("button",{onClick:()=>t("structures"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("structures"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Fee Structures"}),(0,ga.jsx)("button",{onClick:()=>t("payments"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("payments"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Payments"})]})}),(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search...",value:p,onChange:e=>g(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsxs)("select",{value:f.feeType,onChange:e=>b(Le(Le({},f),{},{feeType:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Fee Types"}),(0,ga.jsx)("option",{value:"tuition",children:"Tuition"}),(0,ga.jsx)("option",{value:"transport",children:"Transport"}),(0,ga.jsx)("option",{value:"hostel",children:"Hostel"}),(0,ga.jsx)("option",{value:"library",children:"Library"}),(0,ga.jsx)("option",{value:"exam",children:"Exam"}),(0,ga.jsx)("option",{value:"sports",children:"Sports"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]}),(0,ga.jsxs)("select",{value:f.paymentStatus,onChange:e=>b(Le(Le({},f),{},{paymentStatus:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),(0,ga.jsx)("option",{value:"paid",children:"Paid"}),(0,ga.jsx)("option",{value:"partial",children:"Partial"}),(0,ga.jsx)("option",{value:"pending",children:"Pending"}),(0,ga.jsx)("option",{value:"overdue",children:"Overdue"})]})]})]}),"structures"===e&&(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Structure"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{var t,s;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(_(e.feeType)),children:e.feeType})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[null===(t=e.class)||void 0===t?void 0:t.name," ",null===(s=e.class)||void 0===s?void 0:s.section]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.dueDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>S("structure",e),className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),"payments"===e&&(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Structure"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>{var t,s,a,n,r,i,l,o;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(r=e.student)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.email})]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:null===(l=e.feeStructure)||void 0===l?void 0:l.name}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(o=e.feeStructure)||void 0===o?void 0:o.feeType})]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.paidAmount]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.balanceAmount]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(C(e.paymentStatus)),children:e.paymentStatus})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(xn,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"text-green-600 hover:text-green-900",children:(0,ga.jsx)(Ua,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"structure"===m?"Add Fee Structure":"Add Payment"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(d(!0),"structure"===m){const e=await fetch("/api/fees/structures",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(y)}),t=await e.json();"success"===t.status?(Dr.success("Fee structure created successfully!"),h(!1),j(),k()):Dr.error(t.message||"Failed to create fee structure")}}catch(t){Dr.error("Error creating fee structure")}finally{d(!1)}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,ga.jsx)("input",{type:"text",value:y.name,onChange:e=>v(Le(Le({},y),{},{name:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,ga.jsx)("textarea",{value:y.description,onChange:e=>v(Le(Le({},y),{},{description:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"3"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,ga.jsx)("input",{type:"number",step:"0.01",value:y.amount,onChange:e=>v(Le(Le({},y),{},{amount:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fee Type"}),(0,ga.jsxs)("select",{value:y.feeType,onChange:e=>v(Le(Le({},y),{},{feeType:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,ga.jsx)("option",{value:"tuition",children:"Tuition"}),(0,ga.jsx)("option",{value:"transport",children:"Transport"}),(0,ga.jsx)("option",{value:"hostel",children:"Hostel"}),(0,ga.jsx)("option",{value:"library",children:"Library"}),(0,ga.jsx)("option",{value:"exam",children:"Exam"}),(0,ga.jsx)("option",{value:"sports",children:"Sports"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),(0,ga.jsx)("input",{type:"date",value:y.dueDate,onChange:e=>v(Le(Le({},y),{},{dueDate:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:c?"Saving...":"Save"})]})]})]})})})]})},Wx=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(new Date),[r,i]=(0,a.useState)(new Date),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)({title:"",description:"",eventType:"other",startDate:"",endDate:"",isAllDay:!1,location:"",color:"#3B82F6",targetAudience:"all"});(0,a.useEffect)(()=>{p()},[s]);const p=async()=>{h(!0);try{const e=[{id:"1",title:"Parent-Teacher Meeting",description:"Monthly parent-teacher meeting",eventType:"meeting",startDate:new Date(2024,11,15,10,0),endDate:new Date(2024,11,15,12,0),location:"School Auditorium",color:"#10B981",targetAudience:"parents"},{id:"2",title:"Annual Sports Day",description:"School annual sports competition",eventType:"sports",startDate:new Date(2024,11,20,9,0),endDate:new Date(2024,11,20,17,0),location:"School Ground",color:"#F59E0B",targetAudience:"all"},{id:"3",title:"Final Exams",description:"End of semester examinations",eventType:"exam",startDate:new Date(2024,11,25,9,0),endDate:new Date(2024,11,30,17,0),location:"Classrooms",color:"#EF4444",targetAudience:"students"}];t(e)}catch(e){console.error("Error fetching events:",e)}h(!1)},g=t=>e.filter(e=>new Date(e.startDate).toDateString()===t.toDateString()),f=g(r);return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"School Calendar"}),(0,ga.jsxs)("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),(0,ga.jsx)("span",{children:"Add Event"})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ga.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold",children:s.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>n(new Date(s.getFullYear(),s.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded",children:"\u2190"}),(0,ga.jsx)("button",{onClick:()=>n(new Date),className:"p-2 hover:bg-gray-100 rounded",children:"Today"}),(0,ga.jsx)("button",{onClick:()=>n(new Date(s.getFullYear(),s.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded",children:"\u2192"})]})]}),(0,ga.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,ga.jsx)("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:e},e))}),(0,ga.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const e=s.getFullYear(),t=s.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0).getDate(),l=a.getDay(),o=[];for(let s=0;s<l;s++){const a=new Date(e,t,-l+s+1);o.push((0,ga.jsx)("div",{className:"p-2 text-gray-400 text-sm",children:a.getDate()},"prev-".concat(s)))}for(let s=1;s<=n;s++){const a=new Date(e,t,s),n=g(a),l=a.toDateString()===(new Date).toDateString(),c=a.toDateString()===r.toDateString();o.push((0,ga.jsxs)("div",{className:"p-2 cursor-pointer hover:bg-gray-100 rounded ".concat(l?"bg-blue-100":""," ").concat(c?"bg-blue-200":""),onClick:()=>i(a),children:[(0,ga.jsx)("div",{className:"text-sm font-medium",children:s}),(0,ga.jsxs)("div",{className:"space-y-1",children:[n.slice(0,2).map((e,t)=>(0,ga.jsx)("div",{className:"text-xs p-1 rounded text-white truncate",style:{backgroundColor:e.color},children:e.title},t)),n.length>2&&(0,ga.jsxs)("div",{className:"text-xs text-gray-500",children:["+",n.length-2," more"]})]})]},s))}return o})()})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ga.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Events for ",r.toLocaleDateString()]}),0===f.length?(0,ga.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No events scheduled"}):(0,ga.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,ga.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ga.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,ga.jsxs)("div",{className:"flex space-x-1",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{d(e),x({title:e.title,description:e.description,eventType:e.eventType,startDate:e.startDate.toISOString().slice(0,16),endDate:e.endDate.toISOString().slice(0,16),isAllDay:e.isAllDay,location:e.location,color:e.color,targetAudience:e.targetAudience}),o(!0)})(e),className:"text-gray-400 hover:text-blue-600",children:(0,ga.jsx)(cm,{className:"h-3 w-3"})}),(0,ga.jsx)("button",{onClick:()=>{return s=e.id,void(window.confirm("Are you sure you want to delete this event?")&&t(e=>e.filter(e=>e.id!==s)));var s},className:"text-gray-400 hover:text-red-600",children:(0,ga.jsx)(dm,{className:"h-3 w-3"})})]})]}),e.description&&(0,ga.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.description}),(0,ga.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,ga.jsx)(La,{className:"h-3 w-3"}),(0,ga.jsxs)("span",{children:[e.startDate.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",e.endDate.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.location&&(0,ga.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,ga.jsx)(jx,{className:"h-3 w-3"}),(0,ga.jsx)("span",{children:e.location})]})]}),(0,ga.jsx)("div",{className:"mt-2",children:(0,ga.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded-full text-white",style:{backgroundColor:e.color},children:e.eventType})})]},e.id))})]})]}),l&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-4",children:c?"Edit Event":"Add New Event"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{if(c)t(e=>e.map(e=>e.id===c.id?Le(Le({},e),m):e));else{const e=Le(Le({id:Date.now().toString()},m),{},{startDate:new Date(m.startDate),endDate:new Date(m.endDate)});t(t=>[...t,e])}o(!1),d(null),x({title:"",description:"",eventType:"other",startDate:"",endDate:"",isAllDay:!1,location:"",color:"#3B82F6",targetAudience:"all"})}catch(s){console.error("Error saving event:",s)}h(!1)},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,ga.jsx)("input",{type:"text",value:m.title,onChange:e=>x(Le(Le({},m),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{value:m.description,onChange:e=>x(Le(Le({},m),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,ga.jsx)("input",{type:"datetime-local",value:m.startDate,onChange:e=>x(Le(Le({},m),{},{startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,ga.jsx)("input",{type:"datetime-local",value:m.endDate,onChange:e=>x(Le(Le({},m),{},{endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),(0,ga.jsxs)("select",{value:m.eventType,onChange:e=>x(Le(Le({},m),{},{eventType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"holiday",children:"Holiday"}),(0,ga.jsx)("option",{value:"exam",children:"Exam"}),(0,ga.jsx)("option",{value:"meeting",children:"Meeting"}),(0,ga.jsx)("option",{value:"sports",children:"Sports"}),(0,ga.jsx)("option",{value:"cultural",children:"Cultural"}),(0,ga.jsx)("option",{value:"academic",children:"Academic"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,ga.jsx)("input",{type:"text",value:m.location,onChange:e=>x(Le(Le({},m),{},{location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{o(!1),d(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:u?"Saving...":c?"Update":"Create"})]})]})]})})]})},Hx=()=>{const[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)({totalStudents:0,totalTeachers:0,totalClasses:0,totalRevenue:0}),r=(0,a.useCallback)(async()=>{try{t(!0);const e=await sm.getDashboardStats();n(e.data.stats||s)}catch(e){console.error("Error loading dashboard stats:",e)}finally{t(!1)}},[s]);(0,a.useEffect)(()=>{r()},[r]);const i=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";try{let a;t(!0),a="pdf"===s?await sm.generatePDFReport(e):await sm.generateExcelReport(e);const n=new Blob([a],{type:"pdf"===s?"application/pdf":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="".concat(e,"-report.").concat("pdf"===s?"pdf":"xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r),Dr.success("".concat(e," report generated successfully"))}catch(a){console.error("Error generating report:",a),Dr.error("Failed to generate report")}finally{t(!1)}},l=[{id:"students",title:"Student Reports",description:"Generate individual student performance and attendance reports.",icon:Aa,color:"blue",reports:[{name:"Student List",type:"student-list"},{name:"Student Performance",type:"student-performance"},{name:"Student Attendance",type:"student-attendance"}]},{id:"attendance",title:"Attendance Reports",description:"Generate attendance summaries and detailed reports.",icon:Ia,color:"green",reports:[{name:"Daily Attendance",type:"daily-attendance"},{name:"Monthly Summary",type:"monthly-attendance"},{name:"Class Attendance",type:"class-attendance"}]},{id:"grades",title:"Grade Reports",description:"Generate academic performance and grade reports.",icon:Ta,color:"purple",reports:[{name:"Grade Summary",type:"grade-summary"},{name:"Subject Performance",type:"subject-performance"},{name:"Exam Results",type:"exam-results"}]},{id:"fees",title:"Fee Reports",description:"Generate fee collection and outstanding reports.",icon:Ba,color:"yellow",reports:[{name:"Fee Collection",type:"fee-collection"},{name:"Outstanding Fees",type:"outstanding-fees"},{name:"Fee Summary",type:"fee-summary"}]},{id:"classes",title:"Class Reports",description:"Generate class-wise reports and statistics.",icon:Ir,color:"indigo",reports:[{name:"Class List",type:"class-list"},{name:"Class Performance",type:"class-performance"},{name:"Class Statistics",type:"class-statistics"}]},{id:"teachers",title:"Teacher Reports",description:"Generate teacher performance and workload reports.",icon:Aa,color:"pink",reports:[{name:"Teacher List",type:"teacher-list"},{name:"Teacher Workload",type:"teacher-workload"},{name:"Subject Assignment",type:"subject-assignment"}]}],o=e=>{const t={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",yellow:"bg-yellow-100 text-yellow-600",indigo:"bg-indigo-100 text-indigo-600",pink:"bg-pink-100 text-pink-600"};return t[e]||t.blue};return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Generate and download various reports"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ga.jsx)("div",{className:"card",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,ga.jsx)(Aa,{className:"w-5 h-5 text-blue-600"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Total Students"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalStudents})]})]})}),(0,ga.jsx)("div",{className:"card",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,ga.jsx)(Aa,{className:"w-5 h-5 text-green-600"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Total Teachers"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalTeachers})]})]})}),(0,ga.jsx)("div",{className:"card",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,ga.jsx)(Ta,{className:"w-5 h-5 text-purple-600"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Total Classes"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalClasses})]})]})}),(0,ga.jsx)("div",{className:"card",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:(0,ga.jsx)(Ba,{className:"w-5 h-5 text-yellow-600"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalRevenue]})]})]})})]}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(t=>{const s=t.icon;return(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ga.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-3 ".concat(o(t.color)),children:(0,ga.jsx)(s,{className:"w-5 h-5"})}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.title})]}),(0,ga.jsx)("p",{className:"text-gray-600 mb-4",children:t.description}),(0,ga.jsx)("div",{className:"space-y-2",children:t.reports.map(t=>(0,ga.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,ga.jsx)("span",{className:"text-sm text-gray-700",children:t.name}),(0,ga.jsxs)("div",{className:"flex space-x-1",children:[(0,ga.jsxs)("button",{onClick:()=>i(t.type,"pdf"),className:"btn btn-sm btn-secondary",disabled:e,children:[(0,ga.jsx)(Fa,{className:"w-3 h-3 mr-1"}),"PDF"]}),(0,ga.jsxs)("button",{onClick:()=>i(t.type,"excel"),className:"btn btn-sm btn-primary",disabled:e,children:[(0,ga.jsx)(kx,{className:"w-3 h-3 mr-1"}),"Excel"]})]})]},t.type))})]},t.id)})}),(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("button",{onClick:()=>i("comprehensive","pdf"),className:"btn btn-primary flex items-center justify-center",disabled:e,children:[(0,ga.jsx)(Fa,{className:"w-4 h-4 mr-2"}),"Generate Comprehensive Report"]}),(0,ga.jsxs)("button",{onClick:()=>i("monthly-summary","excel"),className:"btn btn-secondary flex items-center justify-center",disabled:e,children:[(0,ga.jsx)(Ia,{className:"w-4 h-4 mr-2"}),"Monthly Summary"]}),(0,ga.jsxs)("button",{onClick:()=>i("academic-year","pdf"),className:"btn btn-accent flex items-center justify-center",disabled:e,children:[(0,ga.jsx)(Ir,{className:"w-4 h-4 mr-2"}),"Academic Year Report"]})]})]}),e&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 flex items-center",children:[(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-4"}),(0,ga.jsx)("span",{children:"Generating report..."})]})})]})},Vx=Da("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Yx=Da("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Gx=Da("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Qx={getInquiries:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("\ud83d\udd0d InquiryService: Fetching inquiries with params:",e),console.log("\ud83d\udd0d InquiryService: API base URL:",tm.defaults.baseURL),console.log("\ud83d\udd0d InquiryService: Auth token present:",!!localStorage.getItem("token"));try{const t=await tm.get("/inquiries",{params:e});return console.log("\u2705 InquiryService: Successfully fetched inquiries:",t.data),t.data}catch(s){var t;throw console.error("\u274c InquiryService: Error fetching inquiries:",s),console.error("\u274c InquiryService: Error response:",null===(t=s.response)||void 0===t?void 0:t.data),s}},getInquiry:async e=>(await tm.get("/inquiries/".concat(e))).data,getInquiryByInquiryId:async e=>(await tm.get("/inquiries/lookup/".concat(e))).data,createInquiry:async e=>(await tm.post("/inquiries",e)).data,updateInquiry:async(e,t)=>(await tm.put("/inquiries/".concat(e),t)).data,deleteInquiry:async e=>(await tm.delete("/inquiries/".concat(e))).data,convertInquiryToStudent:async(e,t)=>(await tm.post("/inquiries/".concat(e,"/convert-to-student"),t)).data,getInquiryStats:async()=>(await tm.get("/inquiries/stats")).data},$x=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(null),[y,v]=(0,a.useState)({studentFirstName:"",studentLastName:"",studentDateOfBirth:"",studentGender:"",studentBloodGroup:"",studentPreviousSchool:"",studentPreviousClass:"",parentFirstName:"",parentLastName:"",parentPhone:"",parentEmail:"",parentOccupation:"",parentAddress:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:"",desiredClass:"",desiredAcademicYear:"2024-2025",preferredSubjects:"",inquirySource:"walk-in",inquiryNotes:"",status:"new"});(0,a.useEffect)(()=>{j(),N()},[]);const j=(0,a.useCallback)(async()=>{try{i(!0),console.log("\ud83d\udd0d Inquiries Component: Starting to load inquiries..."),console.log("\ud83d\udd0d Inquiries Component: Search term:",l),console.log("\ud83d\udd0d Inquiries Component: Status filter:",c);const e={};l&&(e.search=l),c&&(e.status=c),console.log("\ud83d\udd0d Inquiries Component: API params:",e);const s=await Qx.getInquiries(e);console.log("\u2705 Inquiries Component: API response:",s);const a=s.data.inquiries||[];console.log("\ud83d\udcca Inquiries Component: Setting inquiries:",a.length,"items"),t(a)}catch(e){console.error("\u274c Inquiries Component: Error loading inquiries:",e),Dr.error("Failed to load inquiries")}finally{i(!1)}},[l,c]),N=async()=>{try{const e=await um.getClasses();n(e.data.classes||[])}catch(e){console.error("Error loading classes:",e)}};(0,a.useEffect)(()=>{j()},[j]);const w=()=>{v({studentFirstName:"",studentLastName:"",studentDateOfBirth:"",studentGender:"",studentBloodGroup:"",studentPreviousSchool:"",studentPreviousClass:"",parentFirstName:"",parentLastName:"",parentPhone:"",parentEmail:"",parentOccupation:"",parentAddress:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:"",desiredClass:"",desiredAcademicYear:"2024-2025",preferredSubjects:"",inquirySource:"walk-in",inquiryNotes:"",status:"new"})},k=e=>new Date(e).toLocaleDateString();return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Inquiry Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage student inquiries and admissions"})]}),(0,ga.jsxs)("button",{onClick:()=>{w(),h(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Inquiry"]})]}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"flex gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search inquiries...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),(0,ga.jsx)("option",{value:"new",children:"New"}),(0,ga.jsx)("option",{value:"contacted",children:"Contacted"}),(0,ga.jsx)("option",{value:"follow-up",children:"Follow-up"}),(0,ga.jsx)("option",{value:"interested",children:"Interested"}),(0,ga.jsx)("option",{value:"not-interested",children:"Not Interested"}),(0,ga.jsx)("option",{value:"admitted",children:"Admitted"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inquiry ID"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Desired Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"Loading inquiries..."})}):0===e.length?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No inquiries found"})}):e.map(e=>{return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.inquiryId})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:[e.studentFirstName," ",e.studentLastName]}),(0,ga.jsxs)("div",{className:"text-sm text-gray-500",children:[e.studentGender," \u2022 ",k(e.studentDateOfBirth)]})]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:[e.parentFirstName," ",e.parentLastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.parentOccupation||"N/A"})]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)(Vx,{className:"w-4 h-4 text-gray-400"}),(0,ga.jsx)("span",{className:"text-sm text-gray-900",children:e.parentPhone})]}),e.parentEmail&&(0,ga.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,ga.jsx)(Yx,{className:"w-4 h-4 text-gray-400"}),(0,ga.jsx)("span",{className:"text-sm text-gray-500",children:e.parentEmail})]})]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:e.desiredClass}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.desiredAcademicYear})]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((t=e.status,{new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800","follow-up":"bg-orange-100 text-orange-800",interested:"bg-green-100 text-green-800","not-interested":"bg-red-100 text-red-800",admitted:"bg-purple-100 text-purple-800",cancelled:"bg-gray-100 text-gray-800"}[t]||"bg-gray-100 text-gray-800")),children:e.status.replace("-"," ")})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(e.inquiryDate)}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{b(e),v({studentFirstName:e.studentFirstName||"",studentLastName:e.studentLastName||"",studentDateOfBirth:e.studentDateOfBirth||"",studentGender:e.studentGender||"",studentBloodGroup:e.studentBloodGroup||"",studentPreviousSchool:e.studentPreviousSchool||"",studentPreviousClass:e.studentPreviousClass||"",parentFirstName:e.parentFirstName||"",parentLastName:e.parentLastName||"",parentPhone:e.parentPhone||"",parentEmail:e.parentEmail||"",parentOccupation:e.parentOccupation||"",parentAddress:e.parentAddress||"",emergencyContactName:e.emergencyContactName||"",emergencyContactPhone:e.emergencyContactPhone||"",emergencyContactRelation:e.emergencyContactRelation||"",desiredClass:e.desiredClass||"",desiredAcademicYear:e.desiredAcademicYear||"2024-2025",preferredSubjects:e.preferredSubjects||"",inquirySource:e.inquirySource||"walk-in",inquiryNotes:e.inquiryNotes||"",status:e.status||"new"}),x(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Edit Inquiry",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),"interested"===e.status&&!e.admissionConfirmed&&(0,ga.jsx)("button",{onClick:()=>(e=>{b(e),v({classId:"",transportRoute:""}),g(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Convert to Student",children:(0,ga.jsx)(Gx,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this inquiry?"))try{await Qx.deleteInquiry(e),Dr.success("Inquiry deleted successfully"),j()}catch(t){console.error("Error deleting inquiry:",t),Dr.error("Failed to delete inquiry")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id);var t})})]})})}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Inquiry"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Qx.createInquiry(y),Dr.success("Inquiry created successfully"),h(!1),w(),j()}catch(a){var t,s;console.error("Error adding inquiry:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add inquiry")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsx)("div",{className:"col-span-2",children:(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Student Information"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:y.studentFirstName,onChange:e=>v(Le(Le({},y),{},{studentFirstName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:y.studentLastName,onChange:e=>v(Le(Le({},y),{},{studentLastName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),(0,ga.jsx)("input",{type:"date",required:!0,value:y.studentDateOfBirth,onChange:e=>v(Le(Le({},y),{},{studentDateOfBirth:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),(0,ga.jsxs)("select",{required:!0,value:y.studentGender,onChange:e=>v(Le(Le({},y),{},{studentGender:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"Select Gender"}),(0,ga.jsx)("option",{value:"male",children:"Male"}),(0,ga.jsx)("option",{value:"female",children:"Female"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),(0,ga.jsx)("input",{type:"text",value:y.studentBloodGroup,onChange:e=>v(Le(Le({},y),{},{studentBloodGroup:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous School"}),(0,ga.jsx)("input",{type:"text",value:y.studentPreviousSchool,onChange:e=>v(Le(Le({},y),{},{studentPreviousSchool:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous Class"}),(0,ga.jsx)("input",{type:"text",value:y.studentPreviousClass,onChange:e=>v(Le(Le({},y),{},{studentPreviousClass:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsx)("div",{className:"col-span-2",children:(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Parent Information"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent First Name *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:y.parentFirstName,onChange:e=>v(Le(Le({},y),{},{parentFirstName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Last Name *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:y.parentLastName,onChange:e=>v(Le(Le({},y),{},{parentLastName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Phone *"}),(0,ga.jsx)("input",{type:"tel",required:!0,value:y.parentPhone,onChange:e=>v(Le(Le({},y),{},{parentPhone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Email"}),(0,ga.jsx)("input",{type:"email",value:y.parentEmail,onChange:e=>v(Le(Le({},y),{},{parentEmail:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Occupation"}),(0,ga.jsx)("input",{type:"text",value:y.parentOccupation,onChange:e=>v(Le(Le({},y),{},{parentOccupation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{className:"col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Address *"}),(0,ga.jsx)("textarea",{required:!0,rows:3,value:y.parentAddress,onChange:e=>v(Le(Le({},y),{},{parentAddress:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsx)("div",{className:"col-span-2",children:(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Academic Information"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desired Class *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:y.desiredClass,onChange:e=>v(Le(Le({},y),{},{desiredClass:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),(0,ga.jsx)("input",{type:"text",required:!0,value:y.desiredAcademicYear,onChange:e=>v(Le(Le({},y),{},{desiredAcademicYear:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{className:"col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Subjects"}),(0,ga.jsx)("textarea",{rows:2,value:y.preferredSubjects,onChange:e=>v(Le(Le({},y),{},{preferredSubjects:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsx)("div",{className:"col-span-2",children:(0,ga.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Inquiry Details"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inquiry Source"}),(0,ga.jsxs)("select",{value:y.inquirySource,onChange:e=>v(Le(Le({},y),{},{inquirySource:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"walk-in",children:"Walk-in"}),(0,ga.jsx)("option",{value:"phone",children:"Phone"}),(0,ga.jsx)("option",{value:"website",children:"Website"}),(0,ga.jsx)("option",{value:"referral",children:"Referral"}),(0,ga.jsx)("option",{value:"social-media",children:"Social Media"}),(0,ga.jsx)("option",{value:"advertisement",children:"Advertisement"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:y.status,onChange:e=>v(Le(Le({},y),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"new",children:"New"}),(0,ga.jsx)("option",{value:"contacted",children:"Contacted"}),(0,ga.jsx)("option",{value:"follow-up",children:"Follow-up"}),(0,ga.jsx)("option",{value:"interested",children:"Interested"}),(0,ga.jsx)("option",{value:"not-interested",children:"Not Interested"}),(0,ga.jsx)("option",{value:"admitted",children:"Admitted"}),(0,ga.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,ga.jsxs)("div",{className:"col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,ga.jsx)("textarea",{rows:3,value:y.inquiryNotes,onChange:e=>v(Le(Le({},y),{},{inquiryNotes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Inquiry"})]})]})]})}),m&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Inquiry"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Qx.updateInquiry(f.id,y),Dr.success("Inquiry updated successfully"),x(!1),w(),j()}catch(a){var t,s;console.error("Error updating inquiry:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update inquiry")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Student Information"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",value:y.studentFirstName,onChange:e=>v(Le(Le({},y),{},{studentFirstName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",value:y.studentLastName,onChange:e=>v(Le(Le({},y),{},{studentLastName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),(0,ga.jsx)("input",{type:"date",value:y.studentDateOfBirth,onChange:e=>v(Le(Le({},y),{},{studentDateOfBirth:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),(0,ga.jsxs)("select",{value:y.studentGender,onChange:e=>v(Le(Le({},y),{},{studentGender:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Gender"}),(0,ga.jsx)("option",{value:"male",children:"Male"}),(0,ga.jsx)("option",{value:"female",children:"Female"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),(0,ga.jsx)("input",{type:"text",value:y.studentBloodGroup,onChange:e=>v(Le(Le({},y),{},{studentBloodGroup:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous School"}),(0,ga.jsx)("input",{type:"text",value:y.studentPreviousSchool,onChange:e=>v(Le(Le({},y),{},{studentPreviousSchool:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous Class"}),(0,ga.jsx)("input",{type:"text",value:y.studentPreviousClass,onChange:e=>v(Le(Le({},y),{},{studentPreviousClass:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Parent Information"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent First Name *"}),(0,ga.jsx)("input",{type:"text",value:y.parentFirstName,onChange:e=>v(Le(Le({},y),{},{parentFirstName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Last Name *"}),(0,ga.jsx)("input",{type:"text",value:y.parentLastName,onChange:e=>v(Le(Le({},y),{},{parentLastName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Phone *"}),(0,ga.jsx)("input",{type:"tel",value:y.parentPhone,onChange:e=>v(Le(Le({},y),{},{parentPhone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Email"}),(0,ga.jsx)("input",{type:"email",value:y.parentEmail,onChange:e=>v(Le(Le({},y),{},{parentEmail:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Occupation"}),(0,ga.jsx)("input",{type:"text",value:y.parentOccupation,onChange:e=>v(Le(Le({},y),{},{parentOccupation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Address *"}),(0,ga.jsx)("textarea",{value:y.parentAddress,onChange:e=>v(Le(Le({},y),{},{parentAddress:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",required:!0})]})]})]}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Emergency Contact"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact Name"}),(0,ga.jsx)("input",{type:"text",value:y.emergencyContactName,onChange:e=>v(Le(Le({},y),{},{emergencyContactName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact Phone"}),(0,ga.jsx)("input",{type:"tel",value:y.emergencyContactPhone,onChange:e=>v(Le(Le({},y),{},{emergencyContactPhone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact Relation"}),(0,ga.jsx)("input",{type:"text",value:y.emergencyContactRelation,onChange:e=>v(Le(Le({},y),{},{emergencyContactRelation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Academic Information"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desired Class *"}),(0,ga.jsx)("input",{type:"text",value:y.desiredClass,onChange:e=>v(Le(Le({},y),{},{desiredClass:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),(0,ga.jsx)("input",{type:"text",value:y.desiredAcademicYear,onChange:e=>v(Le(Le({},y),{},{desiredAcademicYear:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inquiry Source *"}),(0,ga.jsxs)("select",{value:y.inquirySource,onChange:e=>v(Le(Le({},y),{},{inquirySource:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsx)("option",{value:"walk-in",children:"Walk-in"}),(0,ga.jsx)("option",{value:"phone",children:"Phone"}),(0,ga.jsx)("option",{value:"website",children:"Website"}),(0,ga.jsx)("option",{value:"referral",children:"Referral"}),(0,ga.jsx)("option",{value:"social-media",children:"Social Media"}),(0,ga.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Subjects"}),(0,ga.jsx)("textarea",{value:y.preferredSubjects,onChange:e=>v(Le(Le({},y),{},{preferredSubjects:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inquiry Notes"}),(0,ga.jsx)("textarea",{value:y.inquiryNotes,onChange:e=>v(Le(Le({},y),{},{inquiryNotes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),(0,ga.jsxs)("select",{value:y.status,onChange:e=>v(Le(Le({},y),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ga.jsx)("option",{value:"new",children:"New"}),(0,ga.jsx)("option",{value:"contacted",children:"Contacted"}),(0,ga.jsx)("option",{value:"follow-up",children:"Follow-up"}),(0,ga.jsx)("option",{value:"interested",children:"Interested"}),(0,ga.jsx)("option",{value:"admitted",children:"Admitted"}),(0,ga.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update Inquiry"})]})]})]})}),p&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Convert to Student"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={classId:y.classId,transportRoute:y.transportRoute||null};await Qx.convertInquiryToStudent(f.id,e),Dr.success("Inquiry converted to student successfully"),g(!1),w(),j()}catch(a){var t,s;console.error("Error converting inquiry:",a),Dr.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to convert inquiry")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Class *"}),(0,ga.jsxs)("select",{required:!0,value:y.classId,onChange:e=>v(Le(Le({},y),{},{classId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section," (",e.academicYear,")"]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport Route"}),(0,ga.jsx)("input",{type:"text",value:y.transportRoute,onChange:e=>v(Le(Le({},y),{},{transportRoute:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Convert to Student"})]})]})]})})]})},Kx=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[g,f]=(0,a.useState)(""),[b,y]=(0,a.useState)("all"),[v,j]=(0,a.useState)("all"),[N,w]=(0,a.useState)({studentId:"",type:"",title:"",description:"",issuedBy:"",issuedDate:"",validUntil:"",documentNumber:"",remarks:""}),[k,S]=(0,a.useState)({status:"verified",remarks:""}),C=[{value:"birth_certificate",label:"Birth Certificate"},{value:"address_proof",label:"Address Proof"},{value:"income_certificate",label:"Income Certificate"},{value:"caste_certificate",label:"Caste Certificate"},{value:"medical_certificate",label:"Medical Certificate"},{value:"other",label:"Other"}],_=[{value:"pending",label:"Pending",color:"text-yellow-600 bg-yellow-100"},{value:"verified",label:"Verified",color:"text-green-600 bg-green-100"},{value:"rejected",label:"Rejected",color:"text-red-600 bg-red-100"},{value:"expired",label:"Expired",color:"text-gray-600 bg-gray-100"}];(0,a.useEffect)(()=>{E(),M()},[]);const E=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/affidavits",{headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();"success"===a.status&&s(a.data.affidavits)}catch(e){console.error("Error fetching affidavits:",e),Dr.error("Failed to fetch affidavits")}finally{l(!1)}},M=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/students",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&r(s.data.students)}catch(e){console.error("Error fetching students:",e)}},D=()=>{w({studentId:"",type:"",title:"",description:"",issuedBy:"",issuedDate:"",validUntil:"",documentNumber:"",remarks:""})},P=e=>{switch(e){case"verified":return(0,ga.jsx)(Lr,{className:"w-4 h-4"});case"rejected":return(0,ga.jsx)(Ix,{className:"w-4 h-4"});case"expired":return(0,ga.jsx)(Fr,{className:"w-4 h-4"});default:return(0,ga.jsx)(La,{className:"w-4 h-4"})}},A=t.filter(e=>{var t,s,a,n,r;const i=e.affidavitId.toLowerCase().includes(g.toLowerCase())||e.title.toLowerCase().includes(g.toLowerCase())||(null===(t=e.documentNumber)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(s=e.student)||void 0===s||null===(a=s.user)||void 0===a?void 0:a.firstName.toLowerCase().includes(g.toLowerCase()))||(null===(n=e.student)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.lastName.toLowerCase().includes(g.toLowerCase())),l="all"===b||e.type===b,o="all"===v||e.status===v;return i&&l&&o});return i?(0,ga.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Affidavits Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage student affidavits and certificates"})]}),(0,ga.jsxs)("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Affidavit"]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search affidavits...",value:g,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Types"}),C.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Status"}),_.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Affidavit ID"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issued Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(e=>{var t,s,a,n,r,i,l;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.affidavitId}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null===(r=C.find(t=>t.value===e.type))||void 0===r?void 0:r.label}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.title}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(null===(i=_.find(t=>t.value===e.status))||void 0===i?void 0:i.color),children:[P(e.status),(0,ga.jsx)("span",{className:"ml-1",children:null===(l=_.find(t=>t.value===e.status))||void 0===l?void 0:l.label})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.issuedDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{p(e),w({studentId:e.studentId,type:e.type,title:e.title,description:e.description||"",issuedBy:e.issuedBy,issuedDate:e.issuedDate,validUntil:e.validUntil||"",documentNumber:e.documentNumber||"",remarks:e.remarks||""}),u(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(e=>{p(e),S({status:e.status,remarks:e.remarks||""}),m(!0)})(e),className:"text-green-600 hover:text-green-900",children:(0,ga.jsx)(Lr,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this affidavit?"))try{const t=localStorage.getItem("token"),s=await fetch("/api/affidavits/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),a=await s.json();"success"===a.status?(Dr.success("Affidavit deleted successfully"),E()):Dr.error(a.message||"Failed to delete affidavit")}catch(t){console.error("Error deleting affidavit:",t),Dr.error("Failed to delete affidavit")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),o&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Affidavit"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("/api/affidavits",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(N)}),s=await t.json();"success"===s.status?(Dr.success("Affidavit created successfully"),c(!1),D(),E()):Dr.error(s.message||"Failed to create affidavit")}catch(t){console.error("Error creating affidavit:",t),Dr.error("Failed to create affidavit")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student"}),(0,ga.jsxs)("select",{value:N.studentId,onChange:e=>w(Le(Le({},N),{},{studentId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),n.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," - ",e.studentId]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,ga.jsxs)("select",{value:N.type,onChange:e=>w(Le(Le({},N),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Type"}),C.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,ga.jsx)("input",{type:"text",value:N.title,onChange:e=>w(Le(Le({},N),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{value:N.description,onChange:e=>w(Le(Le({},N),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issued By"}),(0,ga.jsx)("input",{type:"text",value:N.issuedBy,onChange:e=>w(Le(Le({},N),{},{issuedBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Number"}),(0,ga.jsx)("input",{type:"text",value:N.documentNumber,onChange:e=>w(Le(Le({},N),{},{documentNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issued Date"}),(0,ga.jsx)("input",{type:"date",value:N.issuedDate,onChange:e=>w(Le(Le({},N),{},{issuedDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),(0,ga.jsx)("input",{type:"date",value:N.validUntil,onChange:e=>w(Le(Le({},N),{},{validUntil:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{value:N.remarks,onChange:e=>w(Le(Le({},N),{},{remarks:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Affidavit"})]})]})]})}),d&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Affidavit"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("/api/affidavits/".concat(x.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(N)}),s=await t.json();"success"===s.status?(Dr.success("Affidavit updated successfully"),u(!1),D(),E()):Dr.error(s.message||"Failed to update affidavit")}catch(t){console.error("Error updating affidavit:",t),Dr.error("Failed to update affidavit")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student"}),(0,ga.jsxs)("select",{value:N.studentId,onChange:e=>w(Le(Le({},N),{},{studentId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),n.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," - ",e.studentId]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,ga.jsxs)("select",{value:N.type,onChange:e=>w(Le(Le({},N),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Type"}),C.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,ga.jsx)("input",{type:"text",value:N.title,onChange:e=>w(Le(Le({},N),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{value:N.description,onChange:e=>w(Le(Le({},N),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issued By"}),(0,ga.jsx)("input",{type:"text",value:N.issuedBy,onChange:e=>w(Le(Le({},N),{},{issuedBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Number"}),(0,ga.jsx)("input",{type:"text",value:N.documentNumber,onChange:e=>w(Le(Le({},N),{},{documentNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issued Date"}),(0,ga.jsx)("input",{type:"date",value:N.issuedDate,onChange:e=>w(Le(Le({},N),{},{issuedDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),(0,ga.jsx)("input",{type:"date",value:N.validUntil,onChange:e=>w(Le(Le({},N),{},{validUntil:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{value:N.remarks,onChange:e=>w(Le(Le({},N),{},{remarks:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update Affidavit"})]})]})]})}),h&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Verify Affidavit"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("/api/affidavits/".concat(x.id,"/verify"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(k)}),s=await t.json();"success"===s.status?(Dr.success("Affidavit verification updated successfully"),m(!1),S({status:"verified",remarks:""}),E()):Dr.error(s.message||"Failed to update verification")}catch(t){console.error("Error verifying affidavit:",t),Dr.error("Failed to update verification")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsx)("select",{value:k.status,onChange:e=>S(Le(Le({},k),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:_.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{value:k.remarks,onChange:e=>S(Le(Le({},k),{},{remarks:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Add verification remarks..."})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Verification"})]})]})]})})]})},Jx=()=>{const[e,t]=(0,a.useState)("vehicles"),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)("");(0,a.useEffect)(()=>{"vehicles"===e?(async()=>{d(!0);try{const e=await fetch("/api/transport/vehicles"),t=await e.json();t.success&&n(t.data)}catch(e){console.error("Error fetching vehicles:",e)}finally{d(!1)}})():"fees"===e?(async()=>{d(!0);try{const e=await fetch("/api/transport/fees"),t=await e.json();t.success&&i(t.data)}catch(e){console.error("Error fetching transport fees:",e)}finally{d(!1)}})():"payments"===e&&(async()=>{d(!0);try{const e=await fetch("/api/transport/payments"),t=await e.json();t.success&&o(t.data)}catch(e){console.error("Error fetching payments:",e)}finally{d(!1)}})()},[e]);const f=[{id:"vehicles",label:"Vehicles",icon:qa},{id:"fees",label:"Transport Fees",icon:Ba},{id:"payments",label:"Payments",icon:Aa}];return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"mb-8",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Transport Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage vehicles, transport fees, and payments"})]}),(0,ga.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,ga.jsx)("nav",{className:"-mb-px flex space-x-8",children:f.map(s=>{const a=s.icon;return(0,ga.jsxs)("button",{onClick:()=>t(s.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,ga.jsx)(a,{className:"w-4 h-4"}),s.label]},s.id)})})}),"vehicles"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Vehicle Management"}),(0,ga.jsxs)("button",{onClick:()=>{g("vehicle"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Vehicle"]})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search vehicles...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,ga.jsx)(om,{className:"w-4 h-4"}),"Filter"]})]}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"w-full",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Vehicle Number"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Type"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Driver"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Route"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Capacity"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:s.map(e=>(0,ga.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"py-3 px-4 font-medium",children:e.vehicleNumber}),(0,ga.jsx)("td",{className:"py-3 px-4 capitalize",children:e.vehicleType}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.driverName}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.route}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.capacity}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"maintenance"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-red-600 hover:bg-red-50 rounded",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})})]}),"fees"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Transport Fee Management"}),(0,ga.jsxs)("button",{onClick:()=>{g("fee"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Transport Fee"]})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,ga.jsx)("div",{className:"p-6",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"w-full",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Student"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Route"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Pickup Point"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Monthly Fee"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:r.map(e=>{var t,s,a,n;return(0,ga.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ga.jsxs)("td",{className:"py-3 px-4",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.route}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.pickupPoint}),(0,ga.jsxs)("td",{className:"py-3 px-4",children:["$",e.monthlyFee]}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})})]}),"payments"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Transport Payment Management"}),(0,ga.jsxs)("button",{onClick:()=>{g("payment"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Payment"]})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,ga.jsx)("div",{className:"p-6",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"w-full",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Student"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Payment Date"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Method"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:l.map(e=>{var t,s,a,n;return(0,ga.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ga.jsxs)("td",{className:"py-3 px-4",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsxs)("td",{className:"py-3 px-4",children:["$",e.amount]}),(0,ga.jsx)("td",{className:"py-3 px-4",children:new Date(e.paymentDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"py-3 px-4 capitalize",children:e.paymentMethod.replace("_"," ")}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsx)("div",{className:"flex gap-2",children:(0,ga.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})})})})]},e.id)})})]})})})})]})]})},Xx=()=>{const[e,t]=(0,a.useState)("bonafide"),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)("");(0,a.useEffect)(()=>{"bonafide"===e?(async()=>{d(!0);try{const e=await fetch("/api/certificates/bonafide"),t=await e.json();t.success&&n(t.data)}catch(e){console.error("Error fetching bonafide certificates:",e)}finally{d(!1)}})():"leaving"===e?(async()=>{d(!0);try{const e=await fetch("/api/certificates/leaving"),t=await e.json();t.success&&i(t.data)}catch(e){console.error("Error fetching leaving certificates:",e)}finally{d(!1)}})():"affidavits"===e&&(async()=>{d(!0);try{const e=await fetch("/api/certificates/affidavits"),t=await e.json();t.success&&o(t.data)}catch(e){console.error("Error fetching affidavits:",e)}finally{d(!1)}})()},[e]);const f=[{id:"bonafide",label:"Bonafide Certificates",icon:Fa},{id:"leaving",label:"Leaving Certificates",icon:Fa},{id:"affidavits",label:"Affidavits",icon:Fa}],b=e=>{switch(e){case"issued":case"verified":return(0,ga.jsx)(Lr,{className:"w-4 h-4 text-green-600"});case"cancelled":case"rejected":return(0,ga.jsx)(Ix,{className:"w-4 h-4 text-red-600"});default:return(0,ga.jsx)(Fa,{className:"w-4 h-4 text-yellow-600"})}},y=e=>{switch(e){case"issued":case"verified":return"bg-green-100 text-green-800";case"cancelled":case"rejected":return"bg-red-100 text-red-800";case"draft":case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"mb-8",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Certificate & Document Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage bonafide certificates, leaving certificates, and affidavits"})]}),(0,ga.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,ga.jsx)("nav",{className:"-mb-px flex space-x-8",children:f.map(s=>{const a=s.icon;return(0,ga.jsxs)("button",{onClick:()=>t(s.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,ga.jsx)(a,{className:"w-4 h-4"}),s.label]},s.id)})})}),"bonafide"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bonafide Certificates"}),(0,ga.jsxs)("button",{onClick:()=>{g("bonafide"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Issue Certificate"]})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search certificates...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,ga.jsx)(om,{className:"w-4 h-4"}),"Filter"]})]}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"w-full",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Certificate No."}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Student"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Purpose"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Issued Date"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Valid Until"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:s.map(e=>{var t,s,a,n;return(0,ga.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"py-3 px-4 font-medium",children:e.certificateNumber}),(0,ga.jsxs)("td",{className:"py-3 px-4",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("td",{className:"py-3 px-4 capitalize",children:e.purpose.replace("_"," ")}),(0,ga.jsx)("td",{className:"py-3 px-4",children:new Date(e.issuedDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"py-3 px-4",children:new Date(e.validUntil).toLocaleDateString()}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[b(e.status),(0,ga.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.status)),children:e.status})]})}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",children:(0,ga.jsx)(kx,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-yellow-600 hover:bg-yellow-50 rounded",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]})})]}),"leaving"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Leaving Certificates"}),(0,ga.jsxs)("button",{onClick:()=>{g("leaving"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Issue Certificate"]})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,ga.jsx)("div",{className:"p-6",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"w-full",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Certificate No."}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Student"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Leaving Date"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Reason"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Last Class"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:r.map(e=>{var t,s,a,n;return(0,ga.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"py-3 px-4 font-medium",children:e.certificateNumber}),(0,ga.jsxs)("td",{className:"py-3 px-4",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("td",{className:"py-3 px-4",children:new Date(e.leavingDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"py-3 px-4 capitalize",children:e.reasonForLeaving.replace("_"," ")}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.lastClassAttended}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[b(e.status),(0,ga.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.status)),children:e.status})]})}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",children:(0,ga.jsx)(kx,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-yellow-600 hover:bg-yellow-50 rounded",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})})]}),"affidavits"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Affidavits"}),(0,ga.jsxs)("button",{onClick:()=>{g("affidavit"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Create Affidavit"]})]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,ga.jsx)("div",{className:"p-6",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"w-full",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Document No."}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Student"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Type"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Issued Date"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Valid Until"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,ga.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,ga.jsx)("tbody",{children:l.map(e=>{var t,s,a,n;return(0,ga.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"py-3 px-4 font-medium",children:e.documentNumber}),(0,ga.jsxs)("td",{className:"py-3 px-4",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("td",{className:"py-3 px-4 capitalize",children:e.type.replace("_"," ")}),(0,ga.jsx)("td",{className:"py-3 px-4",children:new Date(e.issuedDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"py-3 px-4",children:e.validUntil?new Date(e.validUntil).toLocaleDateString():"N/A"}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[b(e.status),(0,ga.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.status)),children:e.status})]})}),(0,ga.jsx)("td",{className:"py-3 px-4",children:(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",children:(0,ga.jsx)(kx,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{className:"p-1 text-yellow-600 hover:bg-yellow-50 rounded",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})})]})]})},Zx=Da("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ep=()=>{const[e,t]=(0,a.useState)("courses"),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(null),[y,v]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),w=[{id:"courses",name:"Courses",icon:Ta},{id:"lessons",name:"Lessons",icon:Zx},{id:"quizzes",name:"Quizzes",icon:Ta},{id:"enrollments",name:"Enrollments",icon:Aa}],k=["Mathematics","Science","English","History","Geography","Computer Science","Art","Music","Physical Education","Other"];(0,a.useEffect)(()=>{S()},[]);const S=async()=>{h(!0);try{const e=await fetch("/api/lms/courses"),t=await e.json();"success"===t.status&&n(t.data.courses)}catch(e){console.error("Error fetching courses:",e)}finally{h(!1)}},C=t=>{b(t),"lessons"===e?(async e=>{h(!0);try{const t=await fetch("/api/lms/courses/".concat(e,"/lessons")),s=await t.json();"success"===s.status&&i(s.data.lessons)}catch(t){console.error("Error fetching lessons:",t)}finally{h(!1)}})(t.id):"quizzes"===e&&(async e=>{h(!0);try{const t=await fetch("/api/lms/courses/".concat(e,"/quizzes")),s=await t.json();"success"===s.status&&o(s.data.quizzes)}catch(t){console.error("Error fetching quizzes:",t)}finally{h(!1)}})(t.id)},_=s.filter(e=>{const t=e.title.toLowerCase().includes(y.toLowerCase())||e.courseCode.toLowerCase().includes(y.toLowerCase()),s=!j||e.category===j;return t&&s});return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"mb-8",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Learning Management System"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage courses, lessons, quizzes, and student enrollments"})]}),(0,ga.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,ga.jsx)("nav",{className:"-mb-px flex space-x-8",children:w.map(s=>{const a=s.icon;return(0,ga.jsxs)("button",{onClick:()=>t(s.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,ga.jsx)(a,{className:"h-4 w-4"}),s.name]},s.id)})})}),u?(0,ga.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)(ga.Fragment,{children:["courses"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Courses"}),(0,ga.jsxs)("button",{onClick:()=>{g("course"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"Add Course"]})]}),(0,ga.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search courses...",value:y,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Categories"}),k.map(e=>(0,ga.jsx)("option",{value:e,children:e},e))]})]}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(e=>(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded",children:e.level}),(0,ga.jsx)("span",{className:"text-sm text-gray-500",children:e.courseCode})]}),(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,ga.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,ga.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,ga.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ga.jsx)(La,{className:"h-4 w-4"}),e.duration,"h"]}),(0,ga.jsx)("span",{children:e.category})]}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{onClick:()=>C(e),className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700",children:"View Details"}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})]})},e.id))})]}),"lessons"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Lessons"}),f&&(0,ga.jsxs)("button",{onClick:()=>{g("lesson"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"Add Lesson"]})]}),f?(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,ga.jsx)("h3",{className:"font-semibold text-blue-900",children:f.title}),(0,ga.jsx)("p",{className:"text-blue-700 text-sm",children:f.description})]}),(0,ga.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ga.jsx)("div",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded",children:t+1}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h4",{className:"font-semibold text-gray-900",children:e.title}),(0,ga.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ga.jsxs)("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,ga.jsx)(La,{className:"h-4 w-4"}),e.duration,"m"]}),(0,ga.jsx)("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded",children:e.lessonType}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(xn,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})]})]})},e.id))})]}):(0,ga.jsxs)("div",{className:"text-center py-12",children:[(0,ga.jsx)(Ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Course"}),(0,ga.jsx)("p",{className:"text-gray-500",children:"Choose a course from the Courses tab to view its lessons."})]})]}),"quizzes"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Quizzes"}),f&&(0,ga.jsxs)("button",{onClick:()=>{g("quiz"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"Add Quiz"]})]}),f?(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,ga.jsx)("h3",{className:"font-semibold text-blue-900",children:f.title}),(0,ga.jsx)("p",{className:"text-blue-700 text-sm",children:f.description})]}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,ga.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),(0,ga.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,ga.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,ga.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ga.jsx)("span",{className:"text-gray-500",children:"Time Limit:"}),(0,ga.jsxs)("span",{children:[e.timeLimit," minutes"]})]}),(0,ga.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ga.jsx)("span",{className:"text-gray-500",children:"Total Marks:"}),(0,ga.jsx)("span",{children:e.totalMarks})]}),(0,ga.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ga.jsx)("span",{className:"text-gray-500",children:"Passing Marks:"}),(0,ga.jsx)("span",{children:e.passingMarks})]})]}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700",children:"View Quiz"}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})]},e.id))})]}):(0,ga.jsxs)("div",{className:"text-center py-12",children:[(0,ga.jsx)(Ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Course"}),(0,ga.jsx)("p",{className:"text-gray-500",children:"Choose a course from the Courses tab to view its quizzes."})]})]}),"enrollments"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsx)("div",{className:"flex justify-between items-center",children:(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Student Enrollments"})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,ga.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Enrollments"})}),(0,ga.jsx)("div",{className:"divide-y divide-gray-200",children:c.map(e=>{var t,s;return(0,ga.jsx)("div",{className:"px-6 py-4",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h4",{className:"font-medium text-gray-900",children:null===(t=e.course)||void 0===t?void 0:t.title}),(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:null===(s=e.course)||void 0===s?void 0:s.courseCode})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status}),(0,ga.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.progress,"% complete"]})]})]})},e.id)})})]})]})]})]})},tp=Da("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),sp=Da("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ap=Da("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),np=Da("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),rp=()=>{const[e,t]=(0,a.useState)("forums"),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(null),[y,v]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),w=[{id:"forums",name:"Forums",icon:Ha},{id:"announcements",name:"Announcements",icon:tn},{id:"events",name:"Events",icon:Ia}],k=["general","academic","sports","events","announcements","discussions"];(0,a.useEffect)(()=>{S(),C(),_()},[]);const S=async()=>{h(!0);try{const e=await fetch("/api/social/forums"),t=await e.json();"success"===t.status&&n(t.data.forums)}catch(e){console.error("Error fetching forums:",e)}finally{h(!1)}},C=async()=>{h(!0);try{const e=await fetch("/api/social/announcements"),t=await e.json();"success"===t.status&&o(t.data.announcements)}catch(e){console.error("Error fetching announcements:",e)}finally{h(!1)}},_=async()=>{h(!0);try{const e=await fetch("/api/social/events"),t=await e.json();"success"===t.status&&d(t.data.events)}catch(e){console.error("Error fetching events:",e)}finally{h(!1)}},E=e=>{b(e),(async e=>{h(!0);try{const t=await fetch("/api/social/forums/".concat(e,"/posts")),s=await t.json();"success"===s.status&&i(s.data.posts)}catch(t){console.error("Error fetching forum posts:",t)}finally{h(!1)}})(e.id)},M=s.filter(e=>{var t;const s=e.title.toLowerCase().includes(y.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase())),a=!j||e.category===j;return s&&a});return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"mb-8",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Social Network"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Connect, share, and engage with the school community"})]}),(0,ga.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,ga.jsx)("nav",{className:"-mb-px flex space-x-8",children:w.map(s=>{const a=s.icon;return(0,ga.jsxs)("button",{onClick:()=>t(s.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,ga.jsx)(a,{className:"h-4 w-4"}),s.name]},s.id)})})}),u?(0,ga.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsxs)(ga.Fragment,{children:["forums"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Forums"}),(0,ga.jsxs)("button",{onClick:()=>{g("forum"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"Create Forum"]})]}),(0,ga.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search forums...",value:y,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Categories"}),k.map(e=>(0,ga.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(e=>{var t,s;return(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded",children:e.category}),(0,ga.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.isPublic?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isPublic?"Public":"Private"})]}),(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,ga.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,ga.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,ga.jsxs)("span",{children:["Created by ",null===(t=e.creator)||void 0===t?void 0:t.firstName," ",null===(s=e.creator)||void 0===s?void 0:s.lastName]}),(0,ga.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),(0,ga.jsx)("button",{onClick:()=>E(e),className:"w-full bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700",children:"View Forum"})]})},e.id)})}),f&&(0,ga.jsxs)("div",{className:"mt-8",children:[(0,ga.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,ga.jsx)("h3",{className:"font-semibold text-blue-900",children:f.title}),(0,ga.jsx)("p",{className:"text-blue-700 text-sm",children:f.description})]}),(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ga.jsx)("h4",{className:"text-lg font-semibold",children:"Posts"}),(0,ga.jsxs)("button",{onClick:()=>{g("post"),x(!0)},className:"bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"New Post"]})]}),(0,ga.jsx)("div",{className:"space-y-4",children:r.map(e=>{var t,s,a,n,r,i;return(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,ga.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center",children:(0,ga.jsxs)("span",{className:"text-white font-semibold",children:[null===(t=e.creator)||void 0===t||null===(s=t.firstName)||void 0===s?void 0:s[0],null===(a=e.creator)||void 0===a||null===(n=a.lastName)||void 0===n?void 0:n[0]]})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h5",{className:"font-semibold text-gray-900",children:e.title}),(0,ga.jsxs)("p",{className:"text-sm text-gray-500",children:["by ",null===(r=e.creator)||void 0===r?void 0:r.firstName," ",null===(i=e.creator)||void 0===i?void 0:i.lastName]})]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[e.isPinned&&(0,ga.jsx)(tp,{className:"h-4 w-4 text-yellow-500"}),e.isLocked&&(0,ga.jsx)(sp,{className:"h-4 w-4 text-gray-500"})]})]}),(0,ga.jsx)("p",{className:"text-gray-700 mb-4",children:e.content}),(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,ga.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ga.jsx)(xn,{className:"h-4 w-4"}),e.viewCount]}),(0,ga.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ga.jsx)(ap,{className:"h-4 w-4"}),e.likeCount]}),(0,ga.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ga.jsx)(np,{className:"h-4 w-4"}),e.replyCount]})]}),(0,ga.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]},e.id)})})]})]}),"announcements"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Announcements"}),(0,ga.jsxs)("button",{onClick:()=>{g("announcement"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"Create Announcement"]})]}),(0,ga.jsx)("div",{className:"space-y-4",children:l.map(e=>{var t,s;return(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 ".concat("urgent"===e.priority?"border-red-500":"high"===e.priority?"border-orange-500":"medium"===e.priority?"border-yellow-500":"border-green-500"),children:[(0,ga.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,ga.jsx)("p",{className:"text-gray-700",children:e.content})]}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat("urgent"===e.priority?"bg-red-100 text-red-800":"high"===e.priority?"bg-orange-100 text-orange-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority})]}),(0,ga.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ga.jsxs)("span",{children:["Target: ",e.targetAudience]}),(0,ga.jsxs)("span",{children:["By: ",null===(t=e.creator)||void 0===t?void 0:t.firstName," ",null===(s=e.creator)||void 0===s?void 0:s.lastName]})]}),(0,ga.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]},e.id)})})]}),"events"===e&&(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Events"}),(0,ga.jsxs)("button",{onClick:()=>{g("event"),x(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"h-4 w-4"}),"Create Event"]})]}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded",children:e.eventType}),(0,ga.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.isPublic?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isPublic?"Public":"Private"})]}),(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,ga.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,ga.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,ga.jsx)(Ia,{className:"h-4 w-4"}),(0,ga.jsx)("span",{children:new Date(e.startDate).toLocaleDateString()})]}),e.location&&(0,ga.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,ga.jsx)(Aa,{className:"h-4 w-4"}),(0,ga.jsx)("span",{children:e.location})]}),e.maxAttendees&&(0,ga.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,ga.jsx)(Aa,{className:"h-4 w-4"}),(0,ga.jsxs)("span",{children:["Max ",e.maxAttendees," attendees"]})]})]}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700",children:"Register"}),(0,ga.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(xn,{className:"h-4 w-4"})})]})]})},e.id))})]})]})]})},ip=Da("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),lp=Da("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),op=Da("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),cp=()=>{var e,t;const[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)({}),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)({startDate:"",endDate:"",paymentMode:"all",transactionType:"all",classId:"all",studentId:"",status:"all",viewBy:"receipt_transaction"}),[f,b]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),j=(0,a.useCallback)(async()=>{o(!0);try{const e=new URLSearchParams;Object.entries(p).forEach(t=>{let[s,a]=t;a&&"all"!==a&&e.append(s,a)});const t=await fetch("/api/transaction-reports?".concat(e)),s=await t.json();"success"===s.status&&(n(s.data.transactions),i(s.data.summary))}catch(e){console.error("Error fetching transaction reports:",e)}finally{o(!1)}},[p]);(0,a.useEffect)(()=>{j(),N()},[j]);const N=async()=>{try{const e=await fetch("/api/classes"),t=await e.json();"success"===t.status&&b(t.data.classes)}catch(e){console.error("Error fetching classes:",e)}},w=(e,t)=>{g(s=>Le(Le({},s),{},{[e]:t})),"classId"===e&&((async e=>{if(e&&"all"!==e)try{const t=await fetch("/api/students?classId=".concat(e)),s=await t.json();"success"===s.status&&v(s.data.students)}catch(t){console.error("Error fetching students:",t)}else v([])})(t),g(e=>Le(Le({},e),{},{studentId:""})))},k=e=>{if(!e.length)return"";const t=Object.keys(e[0]);return[t.join(","),...e.map(e=>t.map(t=>'"'.concat(e[t]||"",'"')).join(","))].join("\n")},S=(e,t)=>{const s=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=t,n.click(),window.URL.revokeObjectURL(a)},C=e=>{switch(e){case"cash":return(0,ga.jsx)(ip,{className:"h-4 w-4"});case"cheque":return(0,ga.jsx)(Fa,{className:"h-4 w-4"});case"card":return(0,ga.jsx)(Ua,{className:"h-4 w-4"});case"online":return(0,ga.jsx)(lp,{className:"h-4 w-4"});case"bank_transfer":return(0,ga.jsx)(op,{className:"h-4 w-4"});default:return(0,ga.jsx)(Ba,{className:"h-4 w-4"})}},_=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"mb-8",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Transaction Report"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"View and analyze all financial transactions"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ya,{className:"h-6 w-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.totalTransactions||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Ba,{className:"h-6 w-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",(null===(e=r.totalAmount)||void 0===e?void 0:e.toLocaleString())||0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Ir,{className:"h-6 w-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Transaction"}),(0,ga.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",r.totalTransactions?(r.totalAmount/r.totalTransactions).toFixed(2):0]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,ga.jsx)(Aa,{className:"h-6 w-6 text-orange-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Payment Modes"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(t=r.paymentModeBreakdown)||void 0===t?void 0:t.length)||0})]})]})})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Transactions"}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsxs)("button",{onClick:()=>{j()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(lm,{className:"h-4 w-4"}),"Show"]}),(0,ga.jsxs)("button",{onClick:async()=>{try{const e=new URLSearchParams;Object.entries(p).forEach(t=>{let[s,a]=t;a&&"all"!==a&&e.append(s,a)});const t=await fetch("/api/transaction-reports/export/csv?".concat(e)),s=await t.json();if("success"===s.status){const e=k(s.data.transactions);S(e,"transaction-reports.csv")}}catch(e){console.error("Error exporting reports:",e)}},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ga.jsx)(kx,{className:"h-4 w-4"}),"Export"]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,ga.jsx)("input",{type:"date",value:p.startDate,onChange:e=>w("startDate",e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,ga.jsx)("input",{type:"date",value:p.endDate,onChange:e=>w("endDate",e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pay Mode"}),(0,ga.jsx)("select",{value:p.paymentMode,onChange:e=>w("paymentMode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"all",label:"All Payment Modes"},{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"card",label:"Card"},{value:"online",label:"Online"},{value:"bank_transfer",label:"Bank Transfer"}].map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard"}),(0,ga.jsxs)("select",{value:p.classId,onChange:e=>w("classId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"Select One"}),f.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Type"}),(0,ga.jsx)("select",{value:p.transactionType,onChange:e=>w("transactionType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"all",label:"All Transaction Types"},{value:"fee_payment",label:"Fee Payment"},{value:"transport_payment",label:"Transport Payment"},{value:"library_fine",label:"Library Fine"},{value:"cafeteria_payment",label:"Cafeteria Payment"},{value:"other",label:"Other"}].map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student"}),(0,ga.jsxs)("select",{value:p.studentId,onChange:e=>w("studentId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!p.classId||"all"===p.classId,children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),y.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," (",e.studentId,")"]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsxs)("select",{value:p.status,onChange:e=>w("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Status"}),(0,ga.jsx)("option",{value:"completed",children:"Completed"}),(0,ga.jsx)("option",{value:"pending",children:"Pending"}),(0,ga.jsx)("option",{value:"failed",children:"Failed"}),(0,ga.jsx)("option",{value:"refunded",children:"Refunded"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View By"}),(0,ga.jsx)("select",{value:p.viewBy,onChange:e=>w("viewBy",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"receipt_transaction",label:"Receipt Transaction"},{value:"daily_summary",label:"Daily Summary"},{value:"monthly_summary",label:"Monthly Summary"}].map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),r.paymentModeBreakdown&&r.paymentModeBreakdown.length>0&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Mode Breakdown"}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.paymentModeBreakdown.map((e,t)=>(0,ga.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[C(e.paymentMode),(0,ga.jsx)("span",{className:"font-medium capitalize",children:e.paymentMode})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsxs)("p",{className:"text-sm text-gray-600",children:[e.count," transactions"]}),(0,ga.jsxs)("p",{className:"font-semibold",children:["\u20b9",parseFloat(e.totalAmount).toLocaleString()]})]})]})},t))})]}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,ga.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})}),l?(0,ga.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt No."}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{var t,s,a,n,r;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.receiptNumber}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.transactionDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"font-medium",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("div",{className:"text-gray-500",children:null===(r=e.student)||void 0===r?void 0:r.studentId})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,ga.jsx)("span",{className:"capitalize",children:e.transactionType.replace("_"," ")})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",parseFloat(e.amount).toLocaleString()]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[C(e.paymentMode),(0,ga.jsx)("span",{className:"capitalize",children:e.paymentMode})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(_(e.status)),children:e.status})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsx)("button",{onClick:()=>{x(e),h("view"),d(!0)},className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(xn,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>{x(e),h("edit"),d(!0)},className:"text-gray-600 hover:text-gray-900",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>{x(e),h("delete"),d(!0)},className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]})},dp=Da("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),up=Da("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),hp=Da("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),mp=Da("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),xp=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)("create"),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),[p,g]=(0,a.useState)({role:"all",status:"all",search:""}),[f,b]=(0,a.useState)({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:20}),[y,v]=(0,a.useState)({totalUsers:0,activeUsers:0,inactiveUsers:0,roleBreakdown:[]}),[j,N]=(0,a.useState)({firstName:"",lastName:"",email:"",password:"",role:"student",phone:"",address:"",dateOfBirth:"",gender:"male",isActive:!0,employeeId:"",department:"",specialization:"",studentId:"",admissionDate:"",classId:"",parentName:"",parentPhone:"",parentEmail:""}),[w,k]=(0,a.useState)([]),S=[{value:"admin",label:"Admin",color:"bg-red-100 text-red-800"},{value:"teacher",label:"Teacher",color:"bg-blue-100 text-blue-800"},{value:"student",label:"Student",color:"bg-green-100 text-green-800"},{value:"clark",label:"Clark",color:"bg-purple-100 text-purple-800"},{value:"parent",label:"Parent",color:"bg-yellow-100 text-yellow-800"},{value:"staff",label:"Staff",color:"bg-gray-100 text-gray-800"}],C=(0,a.useCallback)(async()=>{try{n(!0);const e=localStorage.getItem("token"),s=new URLSearchParams(Le(Le(Le({page:f.currentPage,limit:f.itemsPerPage},"all"!==p.role&&{role:p.role}),"all"!==p.status&&{status:p.status}),p.search&&{search:p.search})),a=await fetch("/api/user-management?".concat(s),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(a.ok){const e=await a.json();t(e.data.users),b(e.data.pagination)}}catch(e){console.error("Error fetching users:",e)}finally{n(!1)}},[p,f.currentPage,f.itemsPerPage]),_=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/user-management/stats/overview",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();v(e.data)}}catch(e){console.error("Error fetching statistics:",e)}};(0,a.useEffect)(()=>{C(),_()},[p,f.currentPage,f.itemsPerPage,C]);const E=async(e,t)=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/user-management/".concat(e,"/password"),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to change password")}return!0}catch(s){throw console.error("Error changing password:",s),s}},M=()=>{N({firstName:"",lastName:"",email:"",password:"",role:"student",phone:"",address:"",dateOfBirth:"",gender:"male",isActive:!0,employeeId:"",department:"",specialization:"",studentId:"",admissionDate:"",classId:"",parentName:"",parentPhone:"",parentEmail:""}),d(null)},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var s,a,n,r,l,c,u,h,m;(o(e),d(t),"edit"===e&&t)?N({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",password:"",role:t.role||"student",phone:t.phone||"",address:t.address||"",dateOfBirth:t.dateOfBirth||"",gender:t.gender||"male",isActive:t.isActive,employeeId:(null===(s=t.teacher)||void 0===s?void 0:s.employeeId)||"",department:(null===(a=t.teacher)||void 0===a?void 0:a.department)||"",specialization:(null===(n=t.teacher)||void 0===n?void 0:n.specialization)||"",studentId:(null===(r=t.student)||void 0===r?void 0:r.studentId)||"",admissionDate:(null===(l=t.student)||void 0===l?void 0:l.admissionDate)||"",classId:(null===(c=t.student)||void 0===c?void 0:c.classId)||"",parentName:(null===(u=t.student)||void 0===u?void 0:u.parentName)||"",parentPhone:(null===(h=t.student)||void 0===h?void 0:h.parentPhone)||"",parentEmail:(null===(m=t.student)||void 0===m?void 0:m.parentEmail)||""}):"bulk"===e?k([{firstName:"",lastName:"",email:"",password:"",role:"student"}]):M();i(!0)},P=(e,t,s)=>{const a=[...w];a[e][t]=s,k(a)},A=e=>{const t=S.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"},T=e=>{const t=S.find(t=>t.value===e);return t?t.label:e};return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ga.jsx)(Aa,{className:"mr-2"}),"User Management"]}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage system users and their access permissions"})]}),(0,ga.jsxs)("div",{className:"flex space-x-3",children:[(0,ga.jsxs)("button",{onClick:()=>D("bulk"),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",children:[(0,ga.jsx)(dp,{className:"mr-2 h-4 w-4"}),"Bulk Create"]}),(0,ga.jsxs)("button",{onClick:()=>D("create"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,ga.jsx)(up,{className:"mr-2 h-4 w-4"}),"Add User"]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Aa,{className:"h-6 w-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.totalUsers})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Lr,{className:"h-6 w-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.activeUsers})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,ga.jsx)(Ix,{className:"h-6 w-6 text-red-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Inactive Users"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.inactiveUsers})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Qa,{className:"h-6 w-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Roles"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.roleBreakdown.length})]})]})})]}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search users...",value:p.search,onChange:e=>g(Le(Le({},p),{},{search:e.target.value})),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),(0,ga.jsxs)("select",{value:p.role,onChange:e=>g(Le(Le({},p),{},{role:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"all",children:"All Roles"}),S.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,ga.jsxs)("select",{value:p.status,onChange:e=>g(Le(Le({},p),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"all",children:"All Status"}),(0,ga.jsx)("option",{value:"active",children:"Active"}),(0,ga.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,ga.jsx)("div",{className:"flex items-end",children:(0,ga.jsx)("button",{onClick:()=>g({role:"all",status:"all",search:""}),className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Clear Filters"})})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center",children:(0,ga.jsx)("div",{className:"flex justify-center",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):0===e.length?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):e.map(e=>{var t,s;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,ga.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,ga.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===(t=e.firstName)||void 0===t?void 0:t.charAt(0),null===(s=e.lastName)||void 0===s?void 0:s.charAt(0)]})})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(A(e.role)),children:T(e.role)})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone||"N/A"}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>D("view",e),className:"text-blue-600 hover:text-blue-900",title:"View",children:(0,ga.jsx)(xn,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>D("edit",e),className:"text-green-600 hover:text-green-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(e=>{d(e),x(""),h(!0)})(e),className:"text-purple-600 hover:text-purple-900",title:"Change Password",children:(0,ga.jsx)(hp,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),s=await fetch("/api/user-management/".concat(e,"/toggle-status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(s.ok)C(),_(),alert("User status updated successfully!");else{const e=await s.json();alert("Error: ".concat(e.message))}}catch(t){console.error("Error toggling user status:",t),alert("Failed to update user status")}})(e.id),className:e.isActive?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900",title:e.isActive?"Deactivate":"Activate",children:e.isActive?(0,ga.jsx)(sp,{className:"h-4 w-4"}):(0,ga.jsx)(mp,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{const t=localStorage.getItem("token"),s=await fetch("/api/user-management/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(s.ok)C(),_(),alert("User deleted successfully!");else{const e=await s.json();alert("Error: ".concat(e.message))}}catch(t){console.error("Error deleting user:",t),alert("Failed to delete user")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),f.totalPages>1&&(0,ga.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>b(Le(Le({},f),{},{currentPage:f.currentPage-1})),disabled:1===f.currentPage,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>b(Le(Le({},f),{},{currentPage:f.currentPage+1})),disabled:f.currentPage===f.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,ga.jsx)("span",{className:"font-medium",children:(f.currentPage-1)*f.itemsPerPage+1})," ","to"," ",(0,ga.jsx)("span",{className:"font-medium",children:Math.min(f.currentPage*f.itemsPerPage,f.totalItems)})," ","of"," ",(0,ga.jsx)("span",{className:"font-medium",children:f.totalItems})," ","results"]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,ga.jsx)("button",{onClick:()=>b(Le(Le({},f),{},{currentPage:f.currentPage-1})),disabled:1===f.currentPage,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:f.totalPages},(e,t)=>t+1).map(e=>(0,ga.jsx)("button",{onClick:()=>b(Le(Le({},f),{},{currentPage:e})),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===f.currentPage?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:e},e)),(0,ga.jsx)("button",{onClick:()=>b(Le(Le({},f),{},{currentPage:f.currentPage+1})),disabled:f.currentPage===f.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]}),r&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ga.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["create"===l&&"Create New User","edit"===l&&"Edit User","view"===l&&"User Details","bulk"===l&&"Bulk Create Users"]}),(0,ga.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(Ix,{className:"h-6 w-6"})})]}),"bulk"===l?(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("/api/user-management/bulk-create",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({users:w})});if(t.ok){const e=await t.json();i(!1),k([]),C(),_(),alert("Bulk creation completed: ".concat(e.data.successful.length," successful, ").concat(e.data.failed.length," failed"))}else{const e=await t.json();alert("Error: ".concat(e.message))}}catch(t){console.error("Error in bulk creation:",t),alert("Failed to create users in bulk")}},className:"space-y-4",children:[w.map((e,t)=>(0,ga.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,ga.jsxs)("h4",{className:"font-medium",children:["User ",t+1]}),w.length>1&&(0,ga.jsx)("button",{type:"button",onClick:()=>(e=>{k(w.filter((t,s)=>s!==e))})(t),className:"text-red-600 hover:text-red-800",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,ga.jsx)("input",{type:"text",value:e.firstName,onChange:e=>P(t,"firstName",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,ga.jsx)("input",{type:"text",value:e.lastName,onChange:e=>P(t,"lastName",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,ga.jsx)("input",{type:"email",value:e.email,onChange:e=>P(t,"email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,ga.jsx)("input",{type:"password",value:e.password,onChange:e=>P(t,"password",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,ga.jsx)("select",{value:e.role,onChange:e=>P(t,"role",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:S.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]},t)),(0,ga.jsx)("button",{type:"button",onClick:()=>{k([...w,{firstName:"",lastName:"",email:"",password:"",role:"student"}])},className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-gray-400 hover:text-gray-800",children:"+ Add Another User"}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Users"})]})]}):"view"===l?(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,ga.jsxs)("p",{className:"text-sm text-gray-900",children:[null===c||void 0===c?void 0:c.firstName," ",null===c||void 0===c?void 0:c.lastName]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:null===c||void 0===c?void 0:c.email})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(A(null===c||void 0===c?void 0:c.role)),children:T(null===c||void 0===c?void 0:c.role)})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(null!==c&&void 0!==c&&c.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:null!==c&&void 0!==c&&c.isActive?"Active":"Inactive"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:(null===c||void 0===c?void 0:c.phone)||"N/A"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Login"}),(0,ga.jsx)("p",{className:"text-sm text-gray-900",children:null!==c&&void 0!==c&&c.lastLogin?new Date(c.lastLogin).toLocaleString():"Never"})]})]}),(0,ga.jsx)("div",{className:"flex justify-end pt-4",children:(0,ga.jsx)("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]}):(0,ga.jsxs)("form",{onSubmit:"create"===l?async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=Le({},j);Object.keys(t).forEach(e=>{""===t[e]&&"firstName"!==e&&"lastName"!==e&&"email"!==e&&"password"!==e&&"role"!==e&&delete t[e],"dateOfBirth"!==e&&"admissionDate"!==e||"Invalid date"!==t[e]&&""!==t[e]&&Date.parse(t[e])||delete t[e]});const s=await fetch("/api/user-management",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)i(!1),M(),C(),_(),alert("User created successfully!");else{const e=await s.json();if(e.errors&&e.errors.length>0){const t=e.errors.map(e=>"".concat(e.param,": ").concat(e.msg)).join("\n");alert("Validation Errors:\n".concat(t))}else alert("Error: ".concat(e.message))}}catch(t){console.error("Error creating user:",t),alert("Failed to create user")}}:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=Le({},j);Object.keys(t).forEach(e=>{""===t[e]&&"firstName"!==e&&"lastName"!==e&&"email"!==e&&"role"!==e&&delete t[e],"dateOfBirth"!==e&&"admissionDate"!==e||"Invalid date"!==t[e]&&""!==t[e]&&Date.parse(t[e])||delete t[e]}),delete t.password;const s=await fetch("/api/user-management/".concat(c.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)j.password&&""!==j.password.trim()&&await E(c.id,j.password),i(!1),M(),C(),_(),alert("User updated successfully!");else{const e=await s.json();alert("Error: ".concat(e.message))}}catch(t){console.error("Error updating user:",t),alert("Failed to update user")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",value:j.firstName,onChange:e=>N(Le(Le({},j),{},{firstName:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",value:j.lastName,onChange:e=>N(Le(Le({},j),{},{lastName:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,ga.jsx)("input",{type:"email",value:j.email,onChange:e=>N(Le(Le({},j),{},{email:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ","create"===l?"*":"(leave blank to keep current)"]}),(0,ga.jsx)("input",{type:"password",value:j.password,onChange:e=>N(Le(Le({},j),{},{password:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:"create"===l})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,ga.jsx)("select",{value:j.role,onChange:e=>N(Le(Le({},j),{},{role:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:S.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,ga.jsx)("input",{type:"tel",value:j.phone,onChange:e=>N(Le(Le({},j),{},{phone:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,ga.jsx)("select",{value:j.gender,onChange:e=>N(Le(Le({},j),{},{gender:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}].map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,ga.jsx)("input",{type:"date",value:j.dateOfBirth,onChange:e=>N(Le(Le({},j),{},{dateOfBirth:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,ga.jsx)("textarea",{value:j.address,onChange:e=>N(Le(Le({},j),{},{address:e.target.value})),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsx)("div",{className:"md:col-span-2",children:(0,ga.jsxs)("label",{className:"flex items-center",children:[(0,ga.jsx)("input",{type:"checkbox",checked:j.isActive,onChange:e=>N(Le(Le({},j),{},{isActive:e.target.checked})),className:"mr-2"}),(0,ga.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active User"})]})})]}),"teacher"===j.role&&(0,ga.jsxs)("div",{className:"border-t pt-4",children:[(0,ga.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Teacher Information"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),(0,ga.jsx)("input",{type:"text",value:j.employeeId,onChange:e=>N(Le(Le({},j),{},{employeeId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,ga.jsx)("input",{type:"text",value:j.department,onChange:e=>N(Le(Le({},j),{},{department:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),(0,ga.jsx)("input",{type:"text",value:j.specialization,onChange:e=>N(Le(Le({},j),{},{specialization:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),"student"===j.role&&(0,ga.jsxs)("div",{className:"border-t pt-4",children:[(0,ga.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Student Information"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),(0,ga.jsx)("input",{type:"text",value:j.studentId,onChange:e=>N(Le(Le({},j),{},{studentId:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admission Date"}),(0,ga.jsx)("input",{type:"date",value:j.admissionDate,onChange:e=>N(Le(Le({},j),{},{admissionDate:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Name"}),(0,ga.jsx)("input",{type:"text",value:j.parentName,onChange:e=>N(Le(Le({},j),{},{parentName:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Phone"}),(0,ga.jsx)("input",{type:"tel",value:j.parentPhone,onChange:e=>N(Le(Le({},j),{},{parentPhone:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{className:"md:col-span-2",children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Email"}),(0,ga.jsx)("input",{type:"email",value:j.parentEmail,onChange:e=>N(Le(Le({},j),{},{parentEmail:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"create"===l?"Create User":"Update User"})]})]})]})})}),u&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ga.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Change Password for ",null===c||void 0===c?void 0:c.firstName," ",null===c||void 0===c?void 0:c.lastName]}),(0,ga.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(Ix,{className:"h-6 w-6"})})]}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await E(c.id,m),h(!1),x(""),alert("Password changed successfully!")}catch(t){alert("Error: ".concat(t.message))}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),(0,ga.jsx)("input",{type:"password",value:m,onChange:e=>x(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:"6",placeholder:"Enter new password"})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change Password"})]})]})]})})})]})},pp=Da("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),gp=Da("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),fp=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)("admin"),[u,h]=(0,a.useState)({}),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),f=[{value:"admin",label:"Admin",color:"bg-red-100 text-red-800",description:"Full system access"},{value:"teacher",label:"Teacher",color:"bg-blue-100 text-blue-800",description:"Teaching and student management"},{value:"student",label:"Student",color:"bg-green-100 text-green-800",description:"Student portal access"},{value:"clark",label:"Clark",color:"bg-purple-100 text-purple-800",description:"Administrative support"},{value:"parent",label:"Parent",color:"bg-yellow-100 text-yellow-800",description:"Parent portal access"},{value:"staff",label:"Staff",color:"bg-gray-100 text-gray-800",description:"General staff access"}],b=[{key:"view",label:"View",description:"Can view this feature"},{key:"create",label:"Create",description:"Can create new records"},{key:"update",label:"Update",description:"Can modify existing records"},{key:"delete",label:"Delete",description:"Can delete records"},{key:"export",label:"Export",description:"Can export data"}];(0,a.useEffect)(()=>{y(),v()},[]),(0,a.useEffect)(()=>{if(e.length>0){const t=e.find(e=>e.role===c);h(t&&t.permissions||{})}},[c,e]);const y=async()=>{try{i(!0);const e=localStorage.getItem("token"),s=await fetch("/api/role-permissions",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){const e=await s.json();t(e.data.rolePermissions)}}catch(e){console.error("Error fetching role permissions:",e)}finally{i(!1)}},v=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/role-permissions/features/available",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();n(e.data.features)}}catch(e){console.error("Error fetching available features:",e)}},j=e=>{const t=f.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"},N=(e,t)=>u[e]&&!0===u[e][t],w=e=>u[e]&&Object.values(u[e]).some(e=>!0===e);return r?(0,ga.jsx)("div",{className:"p-6",children:(0,ga.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ga.jsx)(Qa,{className:"mr-2"}),"Role Permissions"]}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage access permissions for different user roles"})]}),(0,ga.jsxs)("div",{className:"flex space-x-3",children:[(0,ga.jsxs)("button",{onClick:async()=>{if(window.confirm("This will reset all role permissions to default values. Are you sure?"))try{o(!0);const e=localStorage.getItem("token"),t=await fetch("/api/role-permissions/initialize-defaults",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok)g("Default permissions initialized successfully!"),x(!0),y();else{const e=await t.json();g("Error: ".concat(e.message)),x(!0)}}catch(e){console.error("Error initializing defaults:",e),g("Failed to initialize default permissions"),x(!0)}finally{o(!1)}},disabled:l,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 disabled:opacity-50 flex items-center",children:[(0,ga.jsx)(pp,{className:"mr-2 h-4 w-4 ".concat(l?"animate-spin":"")}),"Initialize Defaults"]}),(0,ga.jsxs)("button",{onClick:async()=>{try{o(!0);const e=localStorage.getItem("token"),t=await fetch("/api/role-permissions",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({role:c,permissions:u,isActive:!0})});if(t.ok)g("Permissions saved successfully!"),x(!0),y();else{const e=await t.json();g("Error: ".concat(e.message)),x(!0)}}catch(e){console.error("Error saving permissions:",e),g("Failed to save permissions"),x(!0)}finally{o(!1)}},disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[(0,ga.jsx)(gp,{className:"mr-2 h-4 w-4 ".concat(l?"animate-spin":"")}),"Save Permissions"]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,ga.jsx)("div",{className:"lg:col-span-1",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Role"}),(0,ga.jsx)("div",{className:"space-y-3",children:f.map(t=>{const s=(t=>{const s=e.find(e=>e.role===t);return s&&s.permissions?Object.keys(s.permissions).length:0})(t.value),a=c===t.value;return(0,ga.jsxs)("button",{onClick:()=>d(t.value),className:"w-full text-left p-4 rounded-lg border-2 transition-all ".concat(a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(j(t.value)),children:t.label}),(0,ga.jsxs)("span",{className:"text-xs text-gray-500",children:[s," features"]})]}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:t.description})]},t.value)})})]})}),(0,ga.jsx)("div",{className:"lg:col-span-3",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ga.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,ga.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Permissions for ",(e=>{const t=f.find(t=>t.value===e);return t?t.label:e})(c)]}),(0,ga.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(e=>{const t=f.find(t=>t.value===e);return t?t.description:""})(c)})]}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feature"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,ga.jsxs)("div",{className:"flex items-center justify-center",children:[(0,ga.jsx)(xn,{className:"h-4 w-4 mr-1"}),"View"]})}),(0,ga.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Create"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Update"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delete"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Export"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"All"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),b.map(t=>(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ga.jsx)("input",{type:"checkbox",checked:N(e.key,t.key),onChange:s=>((e,t,s)=>{h(a=>Le(Le({},a),{},{[e]:Le(Le({},a[e]),{},{[t]:s})}))})(e.key,t.key,s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:"view"!==t.key&&!N(e.key,"view")})},t.key)),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ga.jsx)("input",{type:"checkbox",checked:w(e.key),onChange:t=>((e,t)=>{const s=Le({},u);t?s[e]={view:!0,create:!1,update:!1,delete:!1,export:!1}:delete s[e],h(s)})(e.key,t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]},e.key))})]})})]})})]}),(0,ga.jsxs)("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Permission Types"}),(0,ga.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:b.map(e=>(0,ga.jsxs)("div",{className:"flex items-start",children:[(0,ga.jsx)("div",{className:"flex-shrink-0",children:(0,ga.jsx)("div",{className:"h-4 w-4 border border-gray-300 rounded mt-0.5"})}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.key))})]}),m&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3 text-center",children:[(0,ga.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:(0,ga.jsx)(Fr,{className:"h-6 w-6 text-blue-600"})}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Notification"}),(0,ga.jsx)("div",{className:"mt-2 px-7 py-3",children:(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:p})}),(0,ga.jsx)("div",{className:"items-center px-4 py-3",children:(0,ga.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-blue-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"OK"})})]})})})]})},bp=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)({type:"",text:""}),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)("create"),[y,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(""),[w,k]=(0,a.useState)("2024-2025"),[S,C]=(0,a.useState)({classId:"",teacherId:"",subjectId:"",role:"subject_teacher",academicYear:"2024-2025"}),_=(0,a.useCallback)(async()=>{d(!0);try{const e=localStorage.getItem("token"),s=await fetch("/api/class-teacher-assignments?academicYear=".concat(w,"&search=").concat(j),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.data.assignments||[])}else x({type:"error",text:"Failed to fetch assignments"})}catch(e){console.error("Error fetching assignments:",e),x({type:"error",text:"Error fetching assignments"})}finally{d(!1)}},[w,j]),E=(0,a.useCallback)(async()=>{try{const t=localStorage.getItem("token");console.log("Fetching classes with token:",t?"exists":"missing");const s=await fetch("/api/classes",{headers:{Authorization:"Bearer ".concat(t)}});if(console.log("Classes API response status:",s.status),s.ok){var e;const t=await s.json();console.log("Classes data received:",null===(e=t.data.classes)||void 0===e?void 0:e.length,"classes"),n(t.data.classes||[])}else console.error("Failed to fetch classes, status:",s.status)}catch(t){console.error("Error fetching classes:",t)}},[]),M=(0,a.useCallback)(async()=>{try{const t=localStorage.getItem("token");console.log("Fetching teachers with token:",t?"exists":"missing");const s=await fetch("/api/users?role=teacher&limit=1000",{headers:{Authorization:"Bearer ".concat(t)}});if(console.log("Teachers API response status:",s.status),s.ok){var e;const t=await s.json();console.log("Teachers data received:",null===(e=t.data.users)||void 0===e?void 0:e.length,"teachers"),i(t.data.users||[])}else console.error("Failed to fetch teachers, status:",s.status)}catch(t){console.error("Error fetching teachers:",t)}},[]),D=(0,a.useCallback)(async()=>{try{const t=localStorage.getItem("token");console.log("Fetching subjects with token:",t?"exists":"missing");const s=await fetch("/api/subjects",{headers:{Authorization:"Bearer ".concat(t)}});if(console.log("Subjects API response status:",s.status),s.ok){var e;const t=await s.json();console.log("Subjects data received:",null===(e=t.data.subjects)||void 0===e?void 0:e.length,"subjects"),o(t.data.subjects||[])}else console.error("Failed to fetch subjects, status:",s.status)}catch(t){console.error("Error fetching subjects:",t)}},[]);(0,a.useEffect)(()=>{console.log("Initializing data..."),_(),E(),M(),D()},[_,E,M,D]),(0,a.useEffect)(()=>{console.log("Current state - Teachers:",r.length,"Classes:",s.length,"Subjects:",l.length)},[r,s,l]);const P=e=>{const{name:t,value:s}=e.target;C(e=>Le(Le({},e),{},{[t]:s}))},A=e=>{const t=s.find(t=>t.id===e);return t?"".concat(t.name," - ").concat(t.section):"Unknown Class"},T=e=>{const t=r.find(t=>t.id===e);return t?"".concat(t.firstName," ").concat(t.lastName):"Unknown Teacher"},I=e=>{if(!e)return"All Subjects";const t=l.find(t=>t.id===e);return t?t.name:"Unknown Subject"};return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"mb-6",children:[(0,ga.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ga.jsx)(Aa,{className:"h-8 w-8 mr-3 text-blue-600"}),"Class-Teacher Assignments"]}),(0,ga.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage class assignments for teachers"})]}),m.text&&(0,ga.jsxs)("div",{className:"mb-4 p-4 rounded-md flex items-center ".concat("success"===m.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:["success"===m.type?(0,ga.jsx)(Lr,{className:"h-5 w-5 mr-2"}):(0,ga.jsx)(Fr,{className:"h-5 w-5 mr-2"}),m.text]}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),(0,ga.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"2024-2025",children:"2024-2025"}),(0,ga.jsx)("option",{value:"2023-2024",children:"2023-2024"}),(0,ga.jsx)("option",{value:"2025-2026",children:"2025-2026"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,ga.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"Search by class, teacher, or subject...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsx)("div",{className:"flex items-end",children:(0,ga.jsxs)("button",{onClick:()=>{b("create"),v(null),C({classId:"",teacherId:"",subjectId:"",role:"subject_teacher",academicYear:w}),g(!0)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-center",children:[(0,ga.jsx)(im,{className:"h-4 w-4 mr-2"}),"Add Assignment"]})})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ga.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Assignments"})}),c?(0,ga.jsxs)("div",{className:"p-6 text-center",children:[(0,ga.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,ga.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading assignments..."})]}):(0,ga.jsxs)("div",{className:"overflow-x-auto",children:[(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ra,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:A(e.classId)}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.academicYear})]})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Za,{className:"h-5 w-5 text-green-600 mr-2"}),(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:T(e.teacherId)})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ta,{className:"h-5 w-5 text-purple-600 mr-2"}),(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:I(e.subjectId)})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("class_teacher"===e.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"class_teacher"===e.role?"Class Teacher":"Subject Teacher"})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),s=await fetch("/api/class-teacher-assignments/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({isActive:!e.isActive})});if(s.ok)x({type:"success",text:"Assignment ".concat(e.isActive?"deactivated":"activated"," successfully")}),_();else{const e=await s.json();x({type:"error",text:e.message||"Failed to update assignment"})}}catch(t){console.error("Error updating assignment:",t),x({type:"error",text:"Error updating assignment"})}})(e),className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"),children:e.isActive?"Active":"Inactive"})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{v(e),b("edit"),C({classId:e.classId,teacherId:e.teacherId,subjectId:e.subjectId||"",role:e.role,academicYear:e.academicYear}),g(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(cm,{className:"h-4 w-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this assignment?"))try{const t=localStorage.getItem("token"),s=await fetch("/api/class-teacher-assignments/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok)x({type:"success",text:"Assignment deleted successfully"}),_();else{const e=await s.json();x({type:"error",text:e.message||"Failed to delete assignment"})}}catch(t){console.error("Error deleting assignment:",t),x({type:"error",text:"Error deleting assignment"})}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===e.length&&(0,ga.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No assignments found for the selected academic year."})]})]}),p&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"create"===f?"Add Assignment":"Edit Assignment"}),(0,ga.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)($a,{className:"h-6 w-6"})})]}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{const e=localStorage.getItem("token"),t="create"===f?"/api/class-teacher-assignments":"/api/class-teacher-assignments/".concat(y.id),s="create"===f?"POST":"PUT",a=await fetch(t,{method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(S)});if(a.ok)x({type:"success",text:"Assignment ".concat("create"===f?"created":"updated"," successfully")}),g(!1),C({classId:"",teacherId:"",subjectId:"",role:"subject_teacher",academicYear:"2024-2025"}),_();else{const e=await a.json();x({type:"error",text:e.message||"Failed to save assignment"})}}catch(t){console.error("Error saving assignment:",t),x({type:"error",text:"Error saving assignment"})}finally{h(!1)}},children:[(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),(0,ga.jsxs)("select",{name:"classId",value:S.classId,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),s.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher *"}),(0,ga.jsxs)("select",{name:"teacherId",value:S.teacherId,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Teacher"}),r.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),(0,ga.jsxs)("select",{name:"subjectId",value:S.subjectId,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"All Subjects (Class Teacher)"}),l.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),(0,ga.jsxs)("select",{name:"role",value:S.role,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"subject_teacher",children:"Subject Teacher"}),(0,ga.jsx)("option",{value:"class_teacher",children:"Class Teacher"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year *"}),(0,ga.jsxs)("select",{name:"academicYear",value:S.academicYear,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"2024-2025",children:"2024-2025"}),(0,ga.jsx)("option",{value:"2023-2024",children:"2023-2024"}),(0,ga.jsx)("option",{value:"2025-2026",children:"2025-2026"})]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:u?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(gp,{className:"h-4 w-4 mr-2"}),"create"===f?"Create":"Update"]})})]})]})]})})})]})},yp=async e=>(await tm.post("/bonafide-certificates",e)).data,vp=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/bonafide-certificates",{params:e})).data},jp=async(e,t)=>(await tm.put("/bonafide-certificates/".concat(e),t)).data,Np=async e=>(await tm.delete("/bonafide-certificates/".concat(e))).data,wp=async e=>(await tm.post("/bonafide-certificates/".concat(e,"/issue"))).data,kp=async()=>(await tm.get("/bonafide-certificates/stats")).data,Sp=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[y,v]=(0,a.useState)(1),[j,N]=(0,a.useState)(1),[w,k]=(0,a.useState)({}),[S,C]=(0,a.useState)({studentId:"",purpose:"",purposeDescription:"",issuedDate:(new Date).toISOString().split("T")[0],validUntil:"",remarks:""}),_=[{value:"scholarship",label:"Scholarship"},{value:"passport",label:"Passport"},{value:"visa",label:"Visa"},{value:"bank_account",label:"Bank Account"},{value:"employment",label:"Employment"},{value:"admission",label:"Admission"},{value:"other",label:"Other"}],E=[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"issued",label:"Issued",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800"},{value:"expired",label:"Expired",color:"bg-yellow-100 text-yellow-800"}],M=(0,a.useCallback)(async()=>{try{i(!0);const e=Le(Le(Le({page:y,limit:10},m&&{search:m}),p&&{status:p}),f&&{purpose:f}),s=await vp(e);t(s.data.certificates),N(s.data.pagination.pages)}catch(e){console.error("Error fetching certificates:",e),ir.error("Failed to fetch certificates")}finally{i(!1)}},[y,m,p,f]),D=(0,a.useCallback)(async()=>{try{const e=await am.getStudents({limit:1e3});n(e.data.students)}catch(e){console.error("Error fetching students:",e)}},[]),P=(0,a.useCallback)(async()=>{try{const e=await kp();k(e.data)}catch(e){console.error("Error fetching stats:",e)}},[]);(0,a.useEffect)(()=>{M(),D(),P()},[M,D,P]);const A=()=>{C({studentId:"",purpose:"",purposeDescription:"",issuedDate:(new Date).toISOString().split("T")[0],validUntil:"",remarks:""})},T=e=>{switch(e){case"issued":return(0,ga.jsx)(Lr,{className:"w-4 h-4"});case"cancelled":return(0,ga.jsx)(Ix,{className:"w-4 h-4"});case"expired":return(0,ga.jsx)(La,{className:"w-4 h-4"});default:return(0,ga.jsx)(Fa,{className:"w-4 h-4"})}},I=e=>{const t=E.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"};return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Bonafide Certificates"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage student bonafide certificates"})]}),(0,ga.jsxs)("button",{onClick:()=>{A(),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Certificate"]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Fa,{className:"w-8 h-8 text-blue-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Certificates"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.totalCertificates||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Lr,{className:"w-8 h-8 text-green-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Issued"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.issuedCertificates||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(La,{className:"w-8 h-8 text-yellow-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.pendingCertificates||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ia,{className:"w-8 h-8 text-purple-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"This Year"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(new Date).getFullYear()})]})]})})]}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search certificates...",value:m,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),E.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Purposes"}),_.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("button",{onClick:()=>{x(""),g(""),b("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center justify-center gap-2",children:[(0,ga.jsx)(om,{className:"w-4 h-4"}),"Clear Filters"]})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificate"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issued Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center",children:(0,ga.jsx)("div",{className:"flex justify-center",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):0===e.length?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No certificates found"})}):e.map(e=>{var t,s,a,n,r,i,l;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Fa,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,ga.jsx)("div",{children:(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.certificateNumber})})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Za,{className:"w-5 h-5 text-gray-400 mr-2"}),(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(r=e.student)||void 0===r?void 0:r.studentId})]})]})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:(null===(i=_.find(t=>t.value===e.purpose))||void 0===i?void 0:i.label)||e.purpose}),e.purposeDescription&&(0,ga.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.purposeDescription})]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(I(e.status)),children:[T(e.status),(0,ga.jsx)("span",{className:"ml-1",children:(null===(l=E.find(t=>t.value===e.status))||void 0===l?void 0:l.label)||e.status})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.issuedDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{h(e),C({studentId:e.studentId,purpose:e.purpose,purposeDescription:e.purposeDescription||"",issuedDate:e.issuedDate,validUntil:e.validUntil||"",remarks:e.remarks||""}),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),"draft"===e.status&&(0,ga.jsx)("button",{onClick:()=>(async e=>{try{await wp(e.id),ir.success("Certificate issued successfully"),M(),P()}catch(a){var t,s;console.error("Error issuing certificate:",a),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to issue certificate")}})(e),className:"text-green-600 hover:text-green-900",title:"Issue Certificate",children:(0,ga.jsx)(Lr,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this certificate?"))try{await Np(e.id),ir.success("Certificate deleted successfully"),M(),P()}catch(a){var t,s;console.error("Error deleting certificate:",a),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete certificate")}})(e),className:"text-red-600 hover:text-red-900",title:"Delete",disabled:"issued"===e.status,children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),j>1&&(0,ga.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>v(Math.max(1,y-1)),disabled:1===y,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>v(Math.min(j,y+1)),disabled:y===j,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Page ",(0,ga.jsx)("span",{className:"font-medium",children:y})," of"," ",(0,ga.jsx)("span",{className:"font-medium",children:j})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,ga.jsx)("button",{onClick:()=>v(Math.max(1,y-1)),disabled:1===y,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>v(Math.min(j,y+1)),disabled:y===j,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]}),(l||c)&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit Certificate":"Add New Certificate"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{u?(await jp(u.id,S),ir.success("Certificate updated successfully")):(await yp(S),ir.success("Certificate created successfully")),o(!1),d(!1),h(null),A(),M(),P()}catch(a){var t,s;console.error("Error saving certificate:",a),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to save certificate")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student *"}),(0,ga.jsxs)("select",{value:S.studentId,onChange:e=>C(Le(Le({},S),{},{studentId:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),s.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," (",e.studentId,")"]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose *"}),(0,ga.jsxs)("select",{value:S.purpose,onChange:e=>C(Le(Le({},S),{},{purpose:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Purpose"}),_.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose Description"}),(0,ga.jsx)("textarea",{value:S.purposeDescription,onChange:e=>C(Le(Le({},S),{},{purposeDescription:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional details about the purpose..."})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issued Date *"}),(0,ga.jsx)("input",{type:"date",value:S.issuedDate,onChange:e=>C(Le(Le({},S),{},{issuedDate:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),(0,ga.jsx)("input",{type:"date",value:S.validUntil,onChange:e=>C(Le(Le({},S),{},{validUntil:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{value:S.remarks,onChange:e=>C(Le(Le({},S),{},{remarks:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional remarks..."})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{o(!1),d(!1),h(null),A()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:u?"Update":"Create"})]})]})]})})})]})},Cp=async e=>(await tm.post("/leaving-certificates",e)).data,_p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/leaving-certificates",{params:e})).data},Ep=async(e,t)=>(await tm.put("/leaving-certificates/".concat(e),t)).data,Mp=async e=>(await tm.delete("/leaving-certificates/".concat(e))).data,Dp=async e=>(await tm.post("/leaving-certificates/".concat(e,"/issue"))).data,Pp=async()=>(await tm.get("/leaving-certificates/stats")).data,Ap=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[y,v]=(0,a.useState)(1),[j,N]=(0,a.useState)(1),[w,k]=(0,a.useState)({}),[S,C]=(0,a.useState)({studentId:"",leavingDate:(new Date).toISOString().split("T")[0],reasonForLeaving:"",reasonDescription:"",lastClassAttended:"",academicYear:"2024-2025",conduct:"good",attendancePercentage:"",feesPaid:!1,libraryBooksReturned:!1,noDuesCertificate:!1,remarks:""}),_=[{value:"transfer",label:"Transfer to Another School"},{value:"completion",label:"Course Completion"},{value:"withdrawal",label:"Withdrawal"},{value:"expulsion",label:"Expulsion"},{value:"migration",label:"Migration"},{value:"other",label:"Other"}],E=[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"issued",label:"Issued",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800"}],M=(0,a.useCallback)(async()=>{try{i(!0);const e=Le(Le(Le({page:y,limit:10},m&&{search:m}),p&&{status:p}),f&&{reasonForLeaving:f}),s=await _p(e);t(s.data.certificates),N(s.data.pagination.pages)}catch(e){console.error("Error fetching certificates:",e),ir.error("Failed to fetch certificates")}finally{i(!1)}},[y,m,p,f]),D=(0,a.useCallback)(async()=>{try{const e=await am.getStudents({limit:1e3});n(e.data.students)}catch(e){console.error("Error fetching students:",e)}},[]),P=(0,a.useCallback)(async()=>{try{const e=await Pp();k(e.data)}catch(e){console.error("Error fetching stats:",e)}},[]);(0,a.useEffect)(()=>{M(),D(),P()},[M,D,P]);const A=()=>{C({studentId:"",leavingDate:(new Date).toISOString().split("T")[0],reasonForLeaving:"",reasonDescription:"",lastClassAttended:"",academicYear:"2024-2025",conduct:"good",attendancePercentage:"",feesPaid:!1,libraryBooksReturned:!1,noDuesCertificate:!1,remarks:""})},T=e=>{switch(e){case"issued":return(0,ga.jsx)(Lr,{className:"w-4 h-4"});case"cancelled":return(0,ga.jsx)(Ix,{className:"w-4 h-4"});default:return(0,ga.jsx)(Fa,{className:"w-4 h-4"})}},I=e=>{const t=E.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"},O=e=>e.feesPaid&&e.libraryBooksReturned&&e.noDuesCertificate;return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Leaving Certificates"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage student leaving certificates"})]}),(0,ga.jsxs)("button",{onClick:()=>{A(),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Certificate"]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Fa,{className:"w-8 h-8 text-blue-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Certificates"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.totalCertificates||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Lr,{className:"w-8 h-8 text-green-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Issued"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.issuedCertificates||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(La,{className:"w-8 h-8 text-yellow-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.pendingCertificates||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Ia,{className:"w-8 h-8 text-purple-600"}),(0,ga.jsxs)("div",{className:"ml-3",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"This Year"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(new Date).getFullYear()})]})]})})]}),(0,ga.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search certificates...",value:m,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ga.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),E.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Reasons"}),_.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("button",{onClick:()=>{x(""),g(""),b("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center justify-center gap-2",children:[(0,ga.jsx)(om,{className:"w-4 h-4"}),"Clear Filters"]})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificate"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leaving Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center",children:(0,ga.jsx)("div",{className:"flex justify-center",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):0===e.length?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No certificates found"})}):e.map(e=>{var t,s,a,n,r,i,l;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Fa,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,ga.jsx)("div",{children:(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.certificateNumber})})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)(Za,{className:"w-5 h-5 text-gray-400 mr-2"}),(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(t=e.student)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===(a=e.student)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(r=e.student)||void 0===r?void 0:r.studentId})]})]})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:(null===(i=_.find(t=>t.value===e.reasonForLeaving))||void 0===i?void 0:i.label)||e.reasonForLeaving}),e.reasonDescription&&(0,ga.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.reasonDescription})]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(I(e.status)),children:[T(e.status),(0,ga.jsx)("span",{className:"ml-1",children:(null===(l=E.find(t=>t.value===e.status))||void 0===l?void 0:l.label)||e.status})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.leavingDate).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{h(e),C({studentId:e.studentId,leavingDate:e.leavingDate,reasonForLeaving:e.reasonForLeaving,reasonDescription:e.reasonDescription||"",lastClassAttended:e.lastClassAttended,academicYear:e.academicYear,conduct:e.conduct,attendancePercentage:e.attendancePercentage||"",feesPaid:e.feesPaid,libraryBooksReturned:e.libraryBooksReturned,noDuesCertificate:e.noDuesCertificate,remarks:e.remarks||""}),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),"draft"===e.status&&(0,ga.jsx)("button",{onClick:()=>(async e=>{try{await Dp(e.id),ir.success("Certificate issued successfully"),M(),P()}catch(a){var t,s;console.error("Error issuing certificate:",a),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to issue certificate")}})(e),className:"".concat(O(e)?"text-green-600 hover:text-green-900":"text-gray-400 cursor-not-allowed"),title:O(e)?"Issue Certificate":"Cannot issue - requirements not met",disabled:!O(e),children:O(e)?(0,ga.jsx)(Lr,{className:"w-4 h-4"}):(0,ga.jsx)(Cx,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this certificate?"))try{await Mp(e.id),ir.success("Certificate deleted successfully"),M(),P()}catch(a){var t,s;console.error("Error deleting certificate:",a),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete certificate")}})(e),className:"text-red-600 hover:text-red-900",title:"Delete",disabled:"issued"===e.status,children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),j>1&&(0,ga.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>v(Math.max(1,y-1)),disabled:1===y,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>v(Math.min(j,y+1)),disabled:y===j,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Page ",(0,ga.jsx)("span",{className:"font-medium",children:y})," of"," ",(0,ga.jsx)("span",{className:"font-medium",children:j})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,ga.jsx)("button",{onClick:()=>v(Math.max(1,y-1)),disabled:1===y,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>v(Math.min(j,y+1)),disabled:y===j,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]}),(l||c)&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit Certificate":"Add New Certificate"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{u?(await Ep(u.id,S),ir.success("Certificate updated successfully")):(await Cp(S),ir.success("Certificate created successfully")),o(!1),d(!1),h(null),A(),M(),P()}catch(a){var t,s;console.error("Error saving certificate:",a),ir.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to save certificate")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student *"}),(0,ga.jsxs)("select",{value:S.studentId,onChange:e=>C(Le(Le({},S),{},{studentId:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Student"}),s.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," (",e.studentId,")"]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leaving Date *"}),(0,ga.jsx)("input",{type:"date",value:S.leavingDate,onChange:e=>C(Le(Le({},S),{},{leavingDate:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Leaving *"}),(0,ga.jsxs)("select",{value:S.reasonForLeaving,onChange:e=>C(Le(Le({},S),{},{reasonForLeaving:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Reason"}),_.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Class Attended *"}),(0,ga.jsx)("input",{type:"text",value:S.lastClassAttended,onChange:e=>C(Le(Le({},S),{},{lastClassAttended:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10th Grade"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),(0,ga.jsx)("input",{type:"text",value:S.academicYear,onChange:e=>C(Le(Le({},S),{},{academicYear:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"YYYY-YYYY"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conduct"}),(0,ga.jsx)("select",{value:S.conduct,onChange:e=>C(Le(Le({},S),{},{conduct:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"excellent",label:"Excellent"},{value:"very_good",label:"Very Good"},{value:"good",label:"Good"},{value:"satisfactory",label:"Satisfactory"},{value:"unsatisfactory",label:"Unsatisfactory"}].map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attendance Percentage"}),(0,ga.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:S.attendancePercentage,onChange:e=>C(Le(Le({},S),{},{attendancePercentage:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 85.5"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason Description"}),(0,ga.jsx)("textarea",{value:S.reasonDescription,onChange:e=>C(Le(Le({},S),{},{reasonDescription:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional details about the reason for leaving..."})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Requirements"}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ga.jsxs)("label",{className:"flex items-center",children:[(0,ga.jsx)("input",{type:"checkbox",checked:S.feesPaid,onChange:e=>C(Le(Le({},S),{},{feesPaid:e.target.checked})),className:"mr-2"}),(0,ga.jsx)("span",{className:"text-sm text-gray-700",children:"Fees Paid"})]}),(0,ga.jsxs)("label",{className:"flex items-center",children:[(0,ga.jsx)("input",{type:"checkbox",checked:S.libraryBooksReturned,onChange:e=>C(Le(Le({},S),{},{libraryBooksReturned:e.target.checked})),className:"mr-2"}),(0,ga.jsx)("span",{className:"text-sm text-gray-700",children:"Library Books Returned"})]}),(0,ga.jsxs)("label",{className:"flex items-center",children:[(0,ga.jsx)("input",{type:"checkbox",checked:S.noDuesCertificate,onChange:e=>C(Le(Le({},S),{},{noDuesCertificate:e.target.checked})),className:"mr-2"}),(0,ga.jsx)("span",{className:"text-sm text-gray-700",children:"No Dues Certificate"})]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,ga.jsx)("textarea",{value:S.remarks,onChange:e=>C(Le(Le({},S),{},{remarks:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional remarks..."})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{o(!1),d(!1),h(null),A()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:u?"Update":"Create"})]})]})]})})})]})},Tp=Da("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Ip=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[b,y]=(0,a.useState)(""),[v,j]=(0,a.useState)("all"),[N,w]=(0,a.useState)([]),[k,S]=(0,a.useState)(!1),[C,_]=(0,a.useState)({title:"",message:"",recipientType:"all_students",classId:"",recipientIds:[],scheduledAt:""}),E=[{value:"all_students",label:"All Students"},{value:"all_teachers",label:"All Teachers"},{value:"specific_class",label:"Specific Class"},{value:"specific_students",label:"Specific Students"},{value:"custom_numbers",label:"Custom Phone Numbers"}],M=[{value:"draft",label:"Draft",color:"text-gray-600 bg-gray-100"},{value:"scheduled",label:"Scheduled",color:"text-blue-600 bg-blue-100"},{value:"sending",label:"Sending",color:"text-yellow-600 bg-yellow-100"},{value:"sent",label:"Sent",color:"text-green-600 bg-green-100"},{value:"failed",label:"Failed",color:"text-red-600 bg-red-100"},{value:"cancelled",label:"Cancelled",color:"text-gray-600 bg-gray-100"}];(0,a.useEffect)(()=>{D(),P(),A()},[]);const D=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/bulk-sms",{headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();"success"===a.status&&s(a.data.campaigns)}catch(e){console.error("Error fetching campaigns:",e),Dr.error("Failed to fetch campaigns")}finally{c(!1)}},P=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/students",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&r(s.data.students)}catch(e){console.error("Error fetching students:",e)}},A=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/classes",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&l(s.data.classes)}catch(e){console.error("Error fetching classes:",e)}},T=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;S(!0);try{const a=localStorage.getItem("token");let n="/api/bulk-sms/recipients/preview?recipientType=".concat(e);t&&(n+="&classId=".concat(t)),s&&s.length>0&&(n+="&recipientIds=".concat(s.join(",")));const r=await fetch(n,{headers:{Authorization:"Bearer ".concat(a)}}),i=await r.json();"success"===i.status&&w(i.data.recipients)}catch(a){console.error("Error fetching recipients:",a),Dr.error("Failed to fetch recipients")}finally{S(!1)}},I=()=>{_({title:"",message:"",recipientType:"all_students",classId:"",recipientIds:[],scheduledAt:""}),w([])},O=e=>{switch(e){case"sent":return(0,ga.jsx)(Lr,{className:"w-4 h-4"});case"failed":return(0,ga.jsx)(Ix,{className:"w-4 h-4"});case"sending":return(0,ga.jsx)(La,{className:"w-4 h-4"});case"scheduled":return(0,ga.jsx)(Ia,{className:"w-4 h-4"});default:return(0,ga.jsx)(Fr,{className:"w-4 h-4"})}},R=t.filter(e=>{const t=e.campaignId.toLowerCase().includes(b.toLowerCase())||e.title.toLowerCase().includes(b.toLowerCase())||e.message.toLowerCase().includes(b.toLowerCase()),s="all"===v||e.status===v;return t&&s});return o?(0,ga.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Bulk SMS Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Send SMS messages to students, teachers, and parents"})]}),(0,ga.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"New Campaign"]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search campaigns...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsx)("div",{className:"flex gap-2",children:(0,ga.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Status"}),M.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign ID"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recipients"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent/Total"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>{var t,s,a;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.campaignId}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.title}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null===(t=E.find(t=>t.value===e.recipientType))||void 0===t?void 0:t.label}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(null===(s=M.find(t=>t.value===e.status))||void 0===s?void 0:s.color),children:[O(e.status),(0,ga.jsx)("span",{className:"ml-1",children:null===(a=M.find(t=>t.value===e.status))||void 0===a?void 0:a.label})]})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.sentCount||0,"/",e.totalRecipients||0]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.createdAt).toLocaleDateString()}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{f(e),w(e.recipientIds||[]),p(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Preview",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),("draft"===e.status||"scheduled"===e.status)&&(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("button",{onClick:()=>(e=>{f(e),_({title:e.title,message:e.message,recipientType:e.recipientType,classId:e.classId||"",recipientIds:e.recipientIds||[],scheduledAt:e.scheduledAt||""}),m(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to send this SMS campaign?"))try{const t=localStorage.getItem("token"),s=await fetch("/api/bulk-sms/".concat(e,"/send"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),a=await s.json();"success"===a.status?(Dr.success(a.message),D()):Dr.error(a.message||"Failed to send campaign")}catch(t){console.error("Error sending campaign:",t),Dr.error("Failed to send campaign")}})(e.id),className:"text-blue-600 hover:text-blue-900",title:"Send",children:(0,ga.jsx)(Tp,{className:"w-4 h-4"})})]}),("draft"===e.status||"scheduled"===e.status)&&(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{const t=localStorage.getItem("token"),s=await fetch("/api/bulk-sms/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),a=await s.json();"success"===a.status?(Dr.success("Campaign deleted successfully"),D()):Dr.error(a.message||"Failed to delete campaign")}catch(t){console.error("Error deleting campaign:",t),Dr.error("Failed to delete campaign")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),d&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create Bulk SMS Campaign"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("/api/bulk-sms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(C)}),s=await t.json();"success"===s.status?(Dr.success("Bulk SMS campaign created successfully"),u(!1),I(),D()):Dr.error(s.message||"Failed to create campaign")}catch(t){console.error("Error creating campaign:",t),Dr.error("Failed to create campaign")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Title"}),(0,ga.jsx)("input",{type:"text",value:C.title,onChange:e=>_(Le(Le({},C),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,ga.jsx)("textarea",{value:C.message,onChange:e=>_(Le(Le({},C),{},{message:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",required:!0}),(0,ga.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[C.message.length,"/1600 characters"]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipient Type"}),(0,ga.jsx)("select",{value:C.recipientType,onChange:e=>{return t=e.target.value,_(Le(Le({},C),{},{recipientType:t,classId:"",recipientIds:[]})),void("all_students"!==t&&"all_teachers"!==t||T(t));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:E.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"specific_class"===C.recipientType&&(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Class"}),(0,ga.jsxs)("select",{value:C.classId,onChange:e=>{return t=e.target.value,_(Le(Le({},C),{},{classId:t})),void(t&&T("specific_class",t));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),i.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]}),"specific_students"===C.recipientType&&(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Students"}),(0,ga.jsx)("select",{multiple:!0,value:C.recipientIds,onChange:e=>{const t=Array.from(e.target.selectedOptions,e=>e.value);_(Le(Le({},C),{},{recipientIds:t})),t.length>0&&T("specific_students",null,t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",size:"5",children:n.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName," - ",e.studentId]},e.id)})})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Schedule (Optional)"}),(0,ga.jsx)("input",{type:"datetime-local",value:C.scheduledAt,onChange:e=>_(Le(Le({},C),{},{scheduledAt:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,ga.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Leave empty to send immediately"})]}),N.length>0&&(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Recipients Preview (",N.length," recipients)"]}),(0,ga.jsxs)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:[N.slice(0,10).map((e,t)=>(0,ga.jsxs)("div",{className:"text-sm text-gray-600",children:[e.name," - ",e.phone]},t)),N.length>10&&(0,ga.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",N.length-10," more"]})]})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})}),x&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Campaign Preview"}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-900",children:"Title:"}),(0,ga.jsx)("p",{className:"text-gray-700",children:null===g||void 0===g?void 0:g.title})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-900",children:"Message:"}),(0,ga.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:null===g||void 0===g?void 0:g.message})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Recipients (",N.length,"):"]}),(0,ga.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-2",children:N.map((e,t)=>(0,ga.jsxs)("div",{className:"text-sm text-gray-600 py-1",children:[e.name," - ",e.phone]},t))})]}),(0,ga.jsx)("div",{className:"flex justify-end",children:(0,ga.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})]})})]})},Op=()=>{var e,t,s,n,r,i,l,o;const{user:c}=ja(),[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[b,y]=(0,a.useState)(!0),[v,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[C,_]=(0,a.useState)(null),[E,M]=(0,a.useState)(""),[D,P]=(0,a.useState)("all"),[A,T]=(0,a.useState)("all"),[I,O]=(0,a.useState)("list"),[R,L]=(0,a.useState)({classId:"",subjectId:"",teacherId:"",dayOfWeek:"",startTime:"",endTime:"",roomNumber:"",academicYear:"2024-2025",semester:""}),F=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];(0,a.useEffect)(()=>{z(),q(),B(),U()},[]);const z=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/timetable",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&u(s.data.timetables)}catch(e){console.error("Error fetching timetables:",e),Dr.error("Failed to fetch timetables")}finally{y(!1)}},q=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/classes",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&m(s.data.classes)}catch(e){console.error("Error fetching classes:",e)}},B=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/subjects",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&p(s.data.subjects)}catch(e){console.error("Error fetching subjects:",e)}},U=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/teachers",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();"success"===s.status&&f(s.data.teachers)}catch(e){console.error("Error fetching teachers:",e)}},W=()=>{L({classId:"",subjectId:"",teacherId:"",dayOfWeek:"",startTime:"",endTime:"",roomNumber:"",academicYear:"2024-2025",semester:""})},H=e=>{_(e),S(!0)},V=d.filter(e=>{var t,s,a,n,r,i;const l=(null===(t=e.class)||void 0===t?void 0:t.name.toLowerCase().includes(E.toLowerCase()))||(null===(s=e.subject)||void 0===s?void 0:s.name.toLowerCase().includes(E.toLowerCase()))||(null===(a=e.teacher)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.firstName.toLowerCase().includes(E.toLowerCase()))||(null===(r=e.teacher)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.lastName.toLowerCase().includes(E.toLowerCase())),o="all"===D||e.classId===D,c="all"===A||e.dayOfWeek===A;return l&&o&&c}),Y=V.reduce((e,t)=>(e[t.dayOfWeek]||(e[t.dayOfWeek]=[]),e[t.dayOfWeek].push(t),e),{});return Object.keys(Y).forEach(e=>{Y[e].sort((e,t)=>e.startTime.localeCompare(t.startTime))}),b?(0,ga.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ga.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Timetable Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage class schedules and time slots"})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,ga.jsx)("button",{onClick:()=>O("list"),className:"px-3 py-1 rounded-md text-sm font-medium ".concat("list"===I?"bg-white text-gray-900 shadow-sm":"text-gray-600"),children:"List"}),(0,ga.jsx)("button",{onClick:()=>O("grid"),className:"px-3 py-1 rounded-md text-sm font-medium ".concat("grid"===I?"bg-white text-gray-900 shadow-sm":"text-gray-600"),children:"Grid"})]}),(0,ga.jsxs)("button",{onClick:()=>j(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Entry"]})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search timetables...",value:E,onChange:e=>M(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsxs)("div",{className:"flex gap-2",children:[(0,ga.jsxs)("select",{value:D,onChange:e=>P(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Classes"}),h.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]}),(0,ga.jsxs)("select",{value:A,onChange:e=>T(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Days"}),F.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})}),"list"===I?(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(e=>{var t,s,a,n,r,i,l,o;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:null===(t=F.find(t=>t.value===e.dayOfWeek))||void 0===t?void 0:t.label}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.startTime," - ",e.endTime]}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[null===(s=e.class)||void 0===s?void 0:s.name," ",null===(a=e.class)||void 0===a?void 0:a.section]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null===(n=e.subject)||void 0===n?void 0:n.name}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[null===(r=e.teacher)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.firstName," ",null===(l=e.teacher)||void 0===l||null===(o=l.user)||void 0===o?void 0:o.lastName]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.roomNumber||"-"}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ga.jsx)("button",{onClick:()=>H(e),className:"text-blue-600 hover:text-blue-900",title:"View",children:(0,ga.jsx)(xn,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(e=>{_(e),L({classId:e.classId,subjectId:e.subjectId,teacherId:e.teacherId,dayOfWeek:e.dayOfWeek,startTime:e.startTime,endTime:e.endTime,roomNumber:e.roomNumber||"",academicYear:e.academicYear,semester:e.semester||""}),w(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this timetable entry?"))try{const t=localStorage.getItem("token"),s=await fetch("/api/timetable/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),a=await s.json();"success"===a.status?(Dr.success("Timetable entry deleted successfully"),z()):Dr.error(a.message||"Failed to delete timetable entry")}catch(t){console.error("Error deleting timetable:",t),Dr.error("Failed to delete timetable entry")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}):(0,ga.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-4",children:F.map(e=>{var t;return(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 text-center",children:e.label}),(0,ga.jsx)("div",{className:"space-y-2",children:(null===(t=Y[e.value])||void 0===t?void 0:t.map(e=>{var t,s,a,n,r,i,l;return(0,ga.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100",onClick:()=>H(e),children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-blue-900",children:[e.startTime," - ",e.endTime]}),(0,ga.jsx)("div",{className:"text-xs text-blue-700 mt-1",children:null===(t=e.subject)||void 0===t?void 0:t.name}),(0,ga.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[null===(s=e.class)||void 0===s?void 0:s.name," ",null===(a=e.class)||void 0===a?void 0:a.section]}),(0,ga.jsxs)("div",{className:"text-xs text-blue-600",children:[null===(n=e.teacher)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.firstName," ",null===(i=e.teacher)||void 0===i||null===(l=i.user)||void 0===l?void 0:l.lastName]}),e.roomNumber&&(0,ga.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Room: ",e.roomNumber]})]},e.id)}))||(0,ga.jsx)("div",{className:"text-center text-gray-500 text-sm py-4",children:"No classes scheduled"})})]},e.value)})}),v&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add Timetable Entry"}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("/api/timetable",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(R)}),s=await t.json();"success"===s.status?(Dr.success("Timetable entry created successfully"),j(!1),W(),z()):Dr.error(s.message||"Failed to create timetable entry")}catch(t){console.error("Error creating timetable:",t),Dr.error("Failed to create timetable entry")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,ga.jsxs)("select",{value:R.classId,onChange:e=>L(Le(Le({},R),{},{classId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),h.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ga.jsxs)("select",{value:R.subjectId,onChange:e=>L(Le(Le({},R),{},{subjectId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Subject"}),x.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),(0,ga.jsxs)("select",{value:R.teacherId,onChange:e=>L(Le(Le({},R),{},{teacherId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Teacher"}),g.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day of Week"}),(0,ga.jsxs)("select",{value:R.dayOfWeek,onChange:e=>L(Le(Le({},R),{},{dayOfWeek:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,ga.jsx)("option",{value:"",children:"Select Day"}),F.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,ga.jsx)("input",{type:"time",value:R.startTime,onChange:e=>L(Le(Le({},R),{},{startTime:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),(0,ga.jsx)("input",{type:"time",value:R.endTime,onChange:e=>L(Le(Le({},R),{},{endTime:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),(0,ga.jsx)("input",{type:"text",value:R.roomNumber,onChange:e=>L(Le(Le({},R),{},{roomNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., A101"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),(0,ga.jsxs)("select",{value:R.semester,onChange:e=>L(Le(Le({},R),{},{semester:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"Select Semester"}),[{value:"1",label:"Semester 1"},{value:"2",label:"Semester 2"},{value:"3",label:"Semester 3"},{value:"4",label:"Semester 4"},{value:"5",label:"Semester 5"},{value:"6",label:"Semester 6"},{value:"7",label:"Semester 7"},{value:"8",label:"Semester 8"}].map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),(0,ga.jsx)("input",{type:"text",value:R.academicYear,onChange:e=>L(Le(Le({},R),{},{academicYear:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2024-2025"})]}),(0,ga.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,ga.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Entry"})]})]})]})}),k&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,ga.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Timetable Details"}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)(Ia,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Day"}),(0,ga.jsx)("div",{className:"font-medium",children:null===(e=F.find(e=>e.value===(null===C||void 0===C?void 0:C.dayOfWeek)))||void 0===e?void 0:e.label})]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)(La,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Time"}),(0,ga.jsxs)("div",{className:"font-medium",children:[null===C||void 0===C?void 0:C.startTime," - ",null===C||void 0===C?void 0:C.endTime]})]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)(Aa,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Class"}),(0,ga.jsxs)("div",{className:"font-medium",children:[null===C||void 0===C||null===(t=C.class)||void 0===t?void 0:t.name," ",null===C||void 0===C||null===(s=C.class)||void 0===s?void 0:s.section]})]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)(Ta,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Subject"}),(0,ga.jsx)("div",{className:"font-medium",children:null===C||void 0===C||null===(n=C.subject)||void 0===n?void 0:n.name})]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)(Za,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Teacher"}),(0,ga.jsxs)("div",{className:"font-medium",children:[null===C||void 0===C||null===(r=C.teacher)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.firstName," ",null===C||void 0===C||null===(l=C.teacher)||void 0===l||null===(o=l.user)||void 0===o?void 0:o.lastName]})]})]}),(null===C||void 0===C?void 0:C.roomNumber)&&(0,ga.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ga.jsx)(jx,{className:"w-5 h-5 text-gray-400"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:"Room"}),(0,ga.jsx)("div",{className:"font-medium",children:null===C||void 0===C?void 0:C.roomNumber})]})]})]}),(0,ga.jsx)("div",{className:"flex justify-end mt-6",children:(0,ga.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})})]})},Rp=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/classworks",{params:e})).data},Lp=async e=>(await tm.post("/classworks",e)).data,Fp=async(e,t)=>(await tm.put("/classworks/".concat(e),t)).data,zp=async e=>(await tm.delete("/classworks/".concat(e))).data,qp=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await tm.get("/classworks/stats",{params:e})).data},Bp=()=>{var e,t,s,n,r,i;const[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(!0),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(1),[S,C]=(0,a.useState)(1),[_,E]=(0,a.useState)(""),[M,D]=(0,a.useState)(""),[P,A]=(0,a.useState)(""),[T,I]=(0,a.useState)(""),[O,R]=(0,a.useState)(""),[L,F]=(0,a.useState)(""),[z,q]=(0,a.useState)({}),[B,U]=(0,a.useState)({classId:"",subjectId:"",teacherId:"",title:"",description:"",type:"assignment",dueDate:"",maxMarks:"",instructions:"",academicYear:"2024-2025",semester:"1"}),W=[{value:"assignment",label:"Assignment",color:"bg-blue-100 text-blue-800"},{value:"project",label:"Project",color:"bg-green-100 text-green-800"},{value:"homework",label:"Homework",color:"bg-yellow-100 text-yellow-800"},{value:"quiz",label:"Quiz",color:"bg-purple-100 text-purple-800"},{value:"test",label:"Test",color:"bg-red-100 text-red-800"},{value:"presentation",label:"Presentation",color:"bg-indigo-100 text-indigo-800"},{value:"other",label:"Other",color:"bg-gray-100 text-gray-800"}],H=[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"published",label:"Published",color:"bg-green-100 text-green-800"},{value:"closed",label:"Closed",color:"bg-red-100 text-red-800"},{value:"graded",label:"Graded",color:"bg-blue-100 text-blue-800"}],V=(0,a.useCallback)(async()=>{try{g(!0);const e={page:w,limit:10,search:_,status:M,type:P,classId:T,subjectId:O,teacherId:L},t=await Rp(e);o(t.data.classworks),C(t.data.pagination.pages)}catch(e){console.error("Error fetching classworks:",e),ir.error("Failed to fetch classworks")}finally{g(!1)}},[w,_,M,P,T,O,L]),Y=(0,a.useCallback)(async()=>{try{const e=await um.getClasses({limit:1e3});d(e.data.classes)}catch(e){console.error("Error fetching classes:",e)}},[]),G=(0,a.useCallback)(async()=>{try{const e=await gm.getSubjects({limit:1e3});h(e.data.subjects)}catch(e){console.error("Error fetching subjects:",e)}},[]),Q=(0,a.useCallback)(async()=>{try{const e=await mm.getTeachers({limit:1e3});x(e.data.teachers)}catch(e){console.error("Error fetching teachers:",e)}},[]),$=(0,a.useCallback)(async()=>{try{const e=await qp();q(e.data)}catch(e){console.error("Error fetching stats:",e)}},[]);(0,a.useEffect)(()=>{V(),Y(),G(),Q(),$()},[w,_,M,P,T,O,L,V,Y,G,Q,$]);const K=()=>{U({classId:"",subjectId:"",teacherId:"",title:"",description:"",type:"assignment",dueDate:"",maxMarks:"",instructions:"",academicYear:"2024-2025",semester:"1"}),N(null)},J=e=>{const t=H.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"},X=e=>{const t=W.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"};return(0,ga.jsxs)("div",{className:"p-6",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Classwork Management"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage assignments, projects, and other classwork"})]}),(0,ga.jsxs)("button",{onClick:()=>{K(),b(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ga.jsx)(im,{className:"w-4 h-4"}),"Add Classwork"]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ga.jsx)(Ta,{className:"w-6 h-6 text-blue-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Classworks"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z.totalClassworks||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ga.jsx)(Lr,{className:"w-6 h-6 text-green-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Published"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=z.statusCounts)||void 0===e||null===(t=e.find(e=>"published"===e.status))||void 0===t?void 0:t.count)||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,ga.jsx)(La,{className:"w-6 h-6 text-yellow-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Draft"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(s=z.statusCounts)||void 0===s||null===(n=s.find(e=>"draft"===e.status))||void 0===n?void 0:n.count)||0})]})]})}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,ga.jsxs)("div",{className:"flex items-center",children:[(0,ga.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,ga.jsx)(Fa,{className:"w-6 h-6 text-purple-600"})}),(0,ga.jsxs)("div",{className:"ml-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Assignments"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(r=z.typeCounts)||void 0===r||null===(i=r.find(e=>"assignment"===e.type))||void 0===i?void 0:i.count)||0})]})]})})]}),(0,ga.jsx)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search classworks...",value:_,onChange:e=>E(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),(0,ga.jsxs)("select",{value:M,onChange:e=>D(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Status"}),H.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Types"}),W.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,ga.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Classes"}),c.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]}),(0,ga.jsxs)("select",{value:O,onChange:e=>R(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Subjects"}),u.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,ga.jsxs)("select",{value:L,onChange:e=>F(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"",children:"All Teachers"}),m.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName]},e.id)})]})]})}),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ga.jsx)("div",{className:"overflow-x-auto",children:(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class & Subject"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):0===l.length?(0,ga.jsx)("tr",{children:(0,ga.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No classworks found"})}):l.map(e=>{var t,s,a,n,r,i,l,o,c,d,u;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{children:[(0,ga.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),e.description&&(0,ga.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:[null===(t=e.class)||void 0===t?void 0:t.name," ",null===(s=e.class)||void 0===s?void 0:s.section]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:null===(a=e.subject)||void 0===a?void 0:a.name})]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("div",{className:"text-sm text-gray-900",children:[null===(n=e.teacher)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.firstName," ",null===(i=e.teacher)||void 0===i||null===(l=i.user)||void 0===l?void 0:l.lastName]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(X(e.type)),children:(null===(o=W.find(t=>t.value===e.type))||void 0===o?void 0:o.label)||e.type})}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsx)("div",{className:"text-sm text-gray-900",children:(u=e.dueDate,new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),(d=e.dueDate,new Date(d)<new Date&&"graded"!==e.status&&(0,ga.jsx)("div",{className:"text-xs text-red-600",children:"Overdue"}))]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(J(e.status)),children:(null===(c=H.find(t=>t.value===e.status))||void 0===c?void 0:c.label)||e.status})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>(e=>{N(e),U({classId:e.classId,subjectId:e.subjectId,teacherId:e.teacherId,title:e.title,description:e.description||"",type:e.type,dueDate:e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:"",maxMarks:e.maxMarks||"",instructions:e.instructions||"",academicYear:e.academicYear,semester:e.semester||"1"}),v(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,ga.jsx)(cm,{className:"w-4 h-4"})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this classwork?"))try{await zp(e),ir.success("Classwork deleted successfully"),V(),$()}catch(t){console.error("Error deleting classwork:",t),ir.error("Failed to delete classwork")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,ga.jsx)(dm,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),S>1&&(0,ga.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ga.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ga.jsx)("button",{onClick:()=>k(Math.max(1,w-1)),disabled:1===w,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>k(Math.min(S,w+1)),disabled:w===S,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,ga.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ga.jsx)("div",{children:(0,ga.jsxs)("p",{className:"text-sm text-gray-700",children:["Page ",(0,ga.jsx)("span",{className:"font-medium",children:w})," of"," ",(0,ga.jsx)("span",{className:"font-medium",children:S})]})}),(0,ga.jsx)("div",{children:(0,ga.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,ga.jsx)("button",{onClick:()=>k(Math.max(1,w-1)),disabled:1===w,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,ga.jsx)("button",{onClick:()=>k(Math.min(S,w+1)),disabled:w===S,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]}),(f||y)&&(0,ga.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,ga.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,ga.jsxs)("div",{className:"mt-3",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:j?"Edit Classwork":"Add New Classwork"}),(0,ga.jsx)("button",{onClick:()=>{b(!1),v(!1),K()},className:"text-gray-400 hover:text-gray-600",children:(0,ga.jsx)(Ix,{className:"w-6 h-6"})})]}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{j?(await Fp(j.id,B),ir.success("Classwork updated successfully"),v(!1)):(await Lp(B),ir.success("Classwork created successfully"),b(!1)),K(),V(),$()}catch(t){console.error("Error saving classwork:",t),ir.error("Failed to save classwork")}},className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),(0,ga.jsxs)("select",{value:B.classId,onChange:e=>U(Le(Le({},B),{},{classId:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Class"}),c.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),(0,ga.jsxs)("select",{value:B.subjectId,onChange:e=>U(Le(Le({},B),{},{subjectId:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Subject"}),u.map(e=>(0,ga.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher *"}),(0,ga.jsxs)("select",{value:B.teacherId,onChange:e=>U(Le(Le({},B),{},{teacherId:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"",children:"Select Teacher"}),m.map(e=>{var t,s;return(0,ga.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName]},e.id)})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,ga.jsx)("select",{value:B.type,onChange:e=>U(Le(Le({},B),{},{type:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:W.map(e=>(0,ga.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date *"}),(0,ga.jsx)("input",{type:"date",value:B.dueDate,onChange:e=>U(Le(Le({},B),{},{dueDate:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Marks"}),(0,ga.jsx)("input",{type:"number",value:B.maxMarks,onChange:e=>U(Le(Le({},B),{},{maxMarks:e.target.value})),min:"0",max:"1000",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),(0,ga.jsx)("input",{type:"text",value:B.academicYear,onChange:e=>U(Le(Le({},B),{},{academicYear:e.target.value})),placeholder:"2024-2025",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),(0,ga.jsx)("select",{value:B.semester,onChange:e=>U(Le(Le({},B),{},{semester:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5,6,7,8].map(e=>(0,ga.jsxs)("option",{value:e.toString(),children:["Semester ",e]},e))})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,ga.jsx)("input",{type:"text",value:B.title,onChange:e=>U(Le(Le({},B),{},{title:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter classwork title"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ga.jsx)("textarea",{value:B.description,onChange:e=>U(Le(Le({},B),{},{description:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter classwork description"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,ga.jsx)("textarea",{value:B.instructions,onChange:e=>U(Le(Le({},B),{},{instructions:e.target.value})),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter detailed instructions for students"})]}),(0,ga.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{b(!1),v(!1),K()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ga.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[j?"Update":"Create"," Classwork"]})]})]})]})})})]})},Up=()=>{const{user:e,updateProfile:t}=ja(),[s,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)({firstName:(null===e||void 0===e?void 0:e.firstName)||"",lastName:(null===e||void 0===e?void 0:e.lastName)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",address:(null===e||void 0===e?void 0:e.address)||""}),[l,o]=(0,a.useState)(!1),c=e=>{i(Le(Le({},r),{},{[e.target.name]:e.target.value}))};return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage your account information"})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ga.jsx)("div",{className:"lg:col-span-1",children:(0,ga.jsxs)("div",{className:"card text-center",children:[(0,ga.jsx)("div",{className:"w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ga.jsx)(Za,{className:"w-12 h-12 text-white"})}),(0,ga.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,ga.jsx)("p",{className:"text-gray-600 capitalize",children:null===e||void 0===e?void 0:e.role}),(0,ga.jsx)("div",{className:"mt-4",children:(0,ga.jsx)("span",{className:"badge badge-success",children:"Active"})})]})}),(0,ga.jsx)("div",{className:"lg:col-span-2",children:(0,ga.jsxs)("div",{className:"card",children:[(0,ga.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),!s&&(0,ga.jsx)("button",{onClick:()=>n(!0),className:"btn btn-primary",children:"Edit Profile"})]}),(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);const s=await t(r);s.success?(Dr.success("Profile updated successfully!"),n(!1)):Dr.error(s.error),o(!1)},className:"space-y-6",children:[(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,ga.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:c,disabled:!s,className:"input"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,ga.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:c,disabled:!s,className:"input"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(Yx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"email",value:null===e||void 0===e?void 0:e.email,disabled:!0,className:"input pl-10 bg-gray-50"})]}),(0,ga.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"tel",name:"phone",value:r.phone,onChange:c,disabled:!s,className:"input pl-10"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(jx,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),(0,ga.jsx)("textarea",{name:"address",value:r.address,onChange:c,disabled:!s,rows:3,className:"input pl-10"})]})]}),(null===e||void 0===e?void 0:e.dateOfBirth)&&(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"date",value:e.dateOfBirth,disabled:!0,className:"input pl-10 bg-gray-50"})]})]}),s&&(0,ga.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>{n(!1),i({firstName:(null===e||void 0===e?void 0:e.firstName)||"",lastName:(null===e||void 0===e?void 0:e.lastName)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",address:(null===e||void 0===e?void 0:e.address)||""})},className:"btn btn-secondary",children:"Cancel"}),(0,ga.jsxs)("button",{type:"submit",disabled:l,className:"btn btn-primary flex items-center",children:[(0,ga.jsx)(gp,{className:"w-4 h-4 mr-2"}),l?"Saving...":"Save Changes"]})]})]})]})})]})]})},Wp=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)([{id:1,subject:"Mathematics",title:"Algebra Problems",description:"Complete exercises 1-20 from chapter 5. Show all working steps.",dueDate:"2025-09-08",status:"pending",priority:"high",teacher:"Mr. Smith",assignedDate:"2025-09-05",attachments:["algebra_worksheet.pdf"]},{id:2,subject:"English",title:"Essay Writing",description:"Write a 500-word essay on climate change. Include introduction, body paragraphs, and conclusion.",dueDate:"2025-09-10",status:"completed",priority:"medium",teacher:"Ms. Johnson",assignedDate:"2025-09-03",attachments:["essay_guidelines.pdf"]},{id:3,subject:"Science",title:"Lab Report",description:"Complete lab report for chemistry experiment on acids and bases.",dueDate:"2025-09-12",status:"pending",priority:"high",teacher:"Dr. Brown",assignedDate:"2025-09-06",attachments:["lab_template.docx"]},{id:4,subject:"History",title:"Research Project",description:"Research and present on the causes of World War I.",dueDate:"2025-09-15",status:"in_progress",priority:"medium",teacher:"Prof. Davis",assignedDate:"2025-09-01",attachments:["research_guidelines.pdf","timeline_template.xlsx"]},{id:5,subject:"Geography",title:"Map Study",description:"Study and label all countries in Europe on the provided map.",dueDate:"2025-09-09",status:"pending",priority:"low",teacher:"Ms. Wilson",assignedDate:"2025-09-04",attachments:["europe_map.pdf"]}]),[n,r]=(0,a.useState)("all"),[i,l]=(0,a.useState)(""),o=e=>{switch(e){case"completed":return"text-green-600 bg-green-100";case"in_progress":return"text-blue-600 bg-blue-100";case"pending":return"text-yellow-600 bg-yellow-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},c=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},d=t.filter(e=>{const t="all"===n||e.status===n,s=e.title.toLowerCase().includes(i.toLowerCase())||e.subject.toLowerCase().includes(i.toLowerCase());return t&&s}),u=e=>{const t=new Date,s=new Date(e)-t;return Math.ceil(s/864e5)};return(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Homework"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"Manage your assignments and track your progress"})]}),(0,ga.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm text-gray-500",children:"Pending Assignments"}),(0,ga.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(e=>"pending"===e.status).length})]}),(0,ga.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Ta,{className:"w-8 h-8 text-blue-600"})})]})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ga.jsx)("div",{className:"flex-1",children:(0,ga.jsxs)("div",{className:"relative",children:[(0,ga.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ga.jsx)("input",{type:"text",placeholder:"Search homework...",value:i,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ga.jsx)("div",{className:"flex gap-2",children:(0,ga.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ga.jsx)("option",{value:"all",children:"All Status"}),(0,ga.jsx)("option",{value:"pending",children:"Pending"}),(0,ga.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,ga.jsx)("option",{value:"completed",children:"Completed"}),(0,ga.jsx)("option",{value:"overdue",children:"Overdue"})]})})]})}),(0,ga.jsx)("div",{className:"space-y-4",children:d.map(e=>{const t=((e,t)=>{const s=u(e);return"completed"===t?"completed":s<0?"overdue":0===s?"due_today":1===s?"due_tomorrow":"upcoming"})(e.dueDate,e.status),s=u(e.dueDate);return(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500",children:(0,ga.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ga.jsxs)("div",{className:"flex-1",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,ga.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(o(e.status)),children:e.status.replace("_"," ")}),(0,ga.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(c(e.priority)),children:[e.priority," priority"]})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)(Ta,{className:"w-4 h-4"}),e.subject]}),(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)(Ia,{className:"w-4 h-4"}),"Due: ",e.dueDate]}),(0,ga.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ga.jsx)(Fa,{className:"w-4 h-4"}),e.teacher]})]}),(0,ga.jsx)("p",{className:"text-gray-700 mb-4",children:e.description}),e.attachments&&e.attachments.length>0&&(0,ga.jsxs)("div",{className:"mb-4",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Attachments:"}),(0,ga.jsx)("div",{className:"flex flex-wrap gap-2",children:e.attachments.map((e,t)=>(0,ga.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e},t))})]}),(0,ga.jsxs)("div",{className:"flex items-center gap-4",children:["overdue"===t&&(0,ga.jsxs)("div",{className:"flex items-center gap-1 text-red-600",children:[(0,ga.jsx)(Fr,{className:"w-4 h-4"}),(0,ga.jsxs)("span",{className:"text-sm font-medium",children:["Overdue by ",Math.abs(s)," days"]})]}),"due_today"===t&&(0,ga.jsxs)("div",{className:"flex items-center gap-1 text-orange-600",children:[(0,ga.jsx)(La,{className:"w-4 h-4"}),(0,ga.jsx)("span",{className:"text-sm font-medium",children:"Due today!"})]}),"due_tomorrow"===t&&(0,ga.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600",children:[(0,ga.jsx)(La,{className:"w-4 h-4"}),(0,ga.jsx)("span",{className:"text-sm font-medium",children:"Due tomorrow"})]}),"upcoming"===t&&(0,ga.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,ga.jsx)(La,{className:"w-4 h-4"}),(0,ga.jsxs)("span",{className:"text-sm",children:["Due in ",s," days"]})]}),"completed"===e.status&&(0,ga.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,ga.jsx)(Lr,{className:"w-4 h-4"}),(0,ga.jsx)("span",{className:"text-sm font-medium",children:"Completed"})]})]})]}),(0,ga.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:["pending"===e.status&&(0,ga.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Start Assignment"}),"in_progress"===e.status&&(0,ga.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),(0,ga.jsx)("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"View Details"})]})]})},e.id)})}),0===d.length&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,ga.jsx)(Ta,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No homework found"}),(0,ga.jsx)("p",{className:"text-gray-600",children:i||"all"!==n?"Try adjusting your search or filter criteria.":"You have no homework assignments at the moment."})]})]})},Hp=()=>{const{user:e}=ja(),[t,s]=(0,a.useState)(new Date),[n,r]=(0,a.useState)("week"),i=[{id:1,subject:"Mathematics",teacher:"Mr. Smith",room:"Room 101",startTime:"09:00",endTime:"10:00",day:"Monday",type:"class"},{id:2,subject:"English",teacher:"Ms. Johnson",room:"Room 102",startTime:"10:15",endTime:"11:15",day:"Monday",type:"class"},{id:3,subject:"Science",teacher:"Dr. Brown",room:"Lab 1",startTime:"11:30",endTime:"12:30",day:"Monday",type:"lab"},{id:4,subject:"Lunch Break",teacher:"",room:"Cafeteria",startTime:"12:30",endTime:"13:30",day:"Monday",type:"break"},{id:5,subject:"History",teacher:"Prof. Davis",room:"Room 103",startTime:"13:30",endTime:"14:30",day:"Monday",type:"class"},{id:6,subject:"Geography",teacher:"Ms. Wilson",room:"Room 104",startTime:"14:45",endTime:"15:45",day:"Monday",type:"class"},{id:7,subject:"Mathematics",teacher:"Mr. Smith",room:"Room 101",startTime:"09:00",endTime:"10:00",day:"Tuesday",type:"class"},{id:8,subject:"Physical Education",teacher:"Coach Taylor",room:"Gymnasium",startTime:"10:15",endTime:"11:15",day:"Tuesday",type:"pe"},{id:9,subject:"Art",teacher:"Ms. Garcia",room:"Art Studio",startTime:"11:30",endTime:"12:30",day:"Tuesday",type:"art"},{id:10,subject:"Lunch Break",teacher:"",room:"Cafeteria",startTime:"12:30",endTime:"13:30",day:"Tuesday",type:"break"},{id:11,subject:"English",teacher:"Ms. Johnson",room:"Room 102",startTime:"13:30",endTime:"14:30",day:"Tuesday",type:"class"},{id:12,subject:"Study Hall",teacher:"Mr. Anderson",room:"Library",startTime:"14:45",endTime:"15:45",day:"Tuesday",type:"study"}],l=e=>{switch(e){case"class":return"bg-blue-100 text-blue-800 border-blue-200";case"lab":return"bg-green-100 text-green-800 border-green-200";case"pe":return"bg-orange-100 text-orange-800 border-orange-200";case"art":return"bg-purple-100 text-purple-800 border-purple-200";case"study":default:return"bg-gray-100 text-gray-800 border-gray-200";case"break":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"exam":return"bg-red-100 text-red-800 border-red-200";case"assignment":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"meeting":return"bg-pink-100 text-pink-800 border-pink-200";case"holiday":return"bg-emerald-100 text-emerald-800 border-emerald-200"}},o=e=>{switch(e){case"exam":return"text-red-600 bg-red-100";case"assignment":return"text-blue-600 bg-blue-100";case"meeting":return"text-purple-600 bg-purple-100";case"holiday":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},c=e=>{const a=new Date(t);"day"===n?a.setDate(a.getDate()+e):"week"===n?a.setDate(a.getDate()+7*e):"month"===n&&a.setMonth(a.getMonth()+e),s(a)};return(0,ga.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Schedule"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"View your class schedule and upcoming events"})]}),(0,ga.jsx)("div",{className:"flex items-center space-x-4",children:(0,ga.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ga.jsx)(Ia,{className:"w-8 h-8 text-blue-600"})})})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsx)("div",{className:"flex items-center space-x-4",children:(0,ga.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,ga.jsx)("button",{onClick:()=>r("day"),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat("day"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Day"}),(0,ga.jsx)("button",{onClick:()=>r("week"),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat("week"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Week"})]})}),(0,ga.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>c(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ga.jsx)(vm,{className:"w-5 h-5"})}),(0,ga.jsx)("button",{onClick:()=>s(new Date),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Today"}),(0,ga.jsx)("button",{onClick:()=>c(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ga.jsx)(Ja,{className:"w-5 h-5"})})]})]})}),"day"===n&&(()=>{const e=(()=>{const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()];return i.filter(t=>t.day===e)})(),s=t.toLocaleDateString("en-US",{weekday:"long"}),a=t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,ga.jsx)("div",{className:"space-y-4",children:(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:[s,", ",a]}),e.length>0?(0,ga.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,ga.jsx)("div",{className:"p-4 rounded-lg border ".concat(l(e.type)),children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-semibold",children:e.subject}),e.teacher&&(0,ga.jsxs)("p",{className:"text-sm opacity-75",children:["with ",e.teacher]})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsxs)("p",{className:"font-medium",children:[e.startTime," - ",e.endTime]}),(0,ga.jsx)("p",{className:"text-sm opacity-75",children:e.room})]})]})},e.id))}):(0,ga.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ga.jsx)(Ia,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,ga.jsx)("p",{children:"No classes scheduled for this day"})]})]})})})(),"week"===n&&(()=>{const e=(()=>{const e={};return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].forEach(t=>{e[t]=i.filter(e=>e.day===t)}),e})();return(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Weekly Schedule"}),(0,ga.jsx)("div",{className:"grid grid-cols-7 gap-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(t=>{var s;return(0,ga.jsxs)("div",{className:"space-y-2",children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900 text-center py-2 border-b",children:t}),(0,ga.jsxs)("div",{className:"space-y-2",children:[null===(s=e[t])||void 0===s?void 0:s.map(e=>(0,ga.jsxs)("div",{className:"p-2 rounded text-xs border ".concat(l(e.type)),children:[(0,ga.jsx)("div",{className:"font-medium",children:e.subject}),(0,ga.jsx)("div",{className:"opacity-75",children:e.startTime}),(0,ga.jsx)("div",{className:"opacity-75",children:e.room})]},e.id)),(!e[t]||0===e[t].length)&&(0,ga.jsx)("div",{className:"text-center py-4 text-gray-400 text-xs",children:"No classes"})]})]},t)})})]})})(),(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ga.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ga.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Events"}),(0,ga.jsx)(tn,{className:"w-5 h-5 text-gray-400"})]}),(0,ga.jsx)("div",{className:"space-y-3",children:[{id:1,title:"Math Test",date:"2025-09-10",time:"09:00",type:"exam",subject:"Mathematics"},{id:2,title:"Science Project Due",date:"2025-09-12",time:"23:59",type:"assignment",subject:"Science"},{id:3,title:"Parent-Teacher Meeting",date:"2025-09-18",time:"15:00",type:"meeting",subject:"General"},{id:4,title:"School Holiday",date:"2025-09-15",time:"00:00",type:"holiday",subject:"General"}].map(e=>(0,ga.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ga.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,ga.jsx)("p",{className:"text-sm text-gray-600",children:e.subject})]})]}),(0,ga.jsxs)("div",{className:"text-right",children:[(0,ga.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.date}),(0,ga.jsx)("p",{className:"text-xs text-gray-500",children:e.time}),(0,ga.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full mt-1 ".concat(o(e.type)),children:e.type})]})]},e.id))})]})]})},Vp=Da("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Yp=()=>{const e=Z();return(0,ga.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,ga.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,ga.jsx)("div",{className:"flex justify-center",children:(0,ga.jsx)(Qa,{className:"h-16 w-16 text-red-500"})}),(0,ga.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Access Denied"}),(0,ga.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"You don't have permission to access this page."})]}),(0,ga.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,ga.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("p",{className:"text-gray-600 mb-6",children:"Your current role doesn't have access to this section of the application. Please contact your administrator if you believe this is an error."}),(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("button",{onClick:()=>e(-1),className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,ga.jsx)(Vp,{className:"h-4 w-4 mr-2"}),"Go Back"]}),(0,ga.jsxs)("button",{onClick:()=>e("/admin/dashboard"),className:"w-full flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,ga.jsx)(Pa,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})]})]})})})]})},Gp=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)((new Date).toISOString().split("T")[0]),[u,h]=(0,a.useState)("class"),[m,x]=(0,a.useState)({}),[p,g]=(0,a.useState)({}),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)({type:"",text:""}),[w,k]=(0,a.useState)(!1),S=(0,a.useCallback)(async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/attendance/teacher-classes",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.data.classes||[])}else console.error("Failed to fetch classes:",s.status)}catch(e){console.error("Error fetching classes:",e)}},[]),C=(0,a.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/subjects",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();n(e.data.subjects||[])}else console.error("Failed to fetch subjects:",t.status)}catch(e){console.error("Error fetching subjects:",e)}},[]),_=(0,a.useCallback)(async()=>{if(c){console.log("fetchAllStudents: Starting fetch for all students, date:",c),b(!0);try{const e=localStorage.getItem("token"),t=await fetch("/api/students?limit=1000&date=".concat(c),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const s=await t.json(),a=(s.data.students||[]).map(async t=>{try{const s=await fetch("/api/attendance?studentId=".concat(t.id,"&date=").concat(c),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();return Le(Le({},t),{},{attendance:e.data.attendance[0]||{status:null,remarks:null}})}return Le(Le({},t),{},{attendance:{status:null,remarks:null}})}catch(s){return Le(Le({},t),{},{attendance:{status:null,remarks:null}})}}),n=await Promise.all(a),r={};n.forEach(e=>{var t,s;const a=(null===(t=e.class)||void 0===t?void 0:t.name)||"Unknown",n=(null===(s=e.class)||void 0===s?void 0:s.section)||"Unknown",i="".concat(a,"-").concat(n);r[i]||(r[i]={standard:a,division:n,students:[]}),r[i].students.push(e)}),x(r),i(n);const l=n.some(e=>null!==e.attendance.status);k(l);const o={};n.forEach(e=>{o[e.id]={status:e.attendance.status||"present",remarks:e.attendance.remarks||""}}),g(o)}else N({type:"error",text:"Failed to fetch all students"})}catch(e){console.error("Error fetching all students:",e),N({type:"error",text:"Error fetching all students"})}finally{b(!1)}}else console.log("fetchAllStudents: No date selected")},[c]),E=(0,a.useCallback)(async()=>{if(l&&c){console.log("fetchStudents: Starting fetch for class:",l,"date:",c),b(!0);try{const e=localStorage.getItem("token"),t=await fetch("/api/attendance/class/".concat(l,"/students?date=").concat(c),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=(await t.json()).data.students||[];console.log("Students from class API:",e.length),console.log("Selected class ID:",l);const s={};e.forEach(e=>{var t,a;const n=(null===(t=e.class)||void 0===t?void 0:t.name)||"Unknown",r=(null===(a=e.class)||void 0===a?void 0:a.section)||"Unknown",i="".concat(n,"-").concat(r);s[i]||(s[i]={standard:n,division:r,students:[]}),s[i].students.push(e)}),x(s),i(e);const a=e.some(e=>null!==e.attendance.status);k(a);const n={};e.forEach(e=>{n[e.id]={status:e.attendance.status||"present",remarks:e.attendance.remarks||""}}),g(n)}else N({type:"error",text:"Failed to fetch students for the selected class"})}catch(e){console.error("Error fetching students:",e),N({type:"error",text:"Error fetching students"})}finally{b(!1)}}else console.log("fetchStudents: Missing required data",{selectedClass:l,selectedDate:c})},[l,c]);(0,a.useEffect)(()=>{S(),C()},[S,C]);const M=e=>{switch(e){case"present":return"bg-green-100 text-green-800 border-green-200";case"absent":return"bg-red-100 text-red-800 border-red-200";case"late":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"excused":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=(()=>{const e=r.length,t=r.filter(e=>{var t;return"present"===(null===(t=p[e.id])||void 0===t?void 0:t.status)}).length;return{total:e,present:t,absent:r.filter(e=>{var t;return"absent"===(null===(t=p[e.id])||void 0===t?void 0:t.status)}).length,late:r.filter(e=>{var t;return"late"===(null===(t=p[e.id])||void 0===t?void 0:t.status)}).length,excused:r.filter(e=>{var t;return"excused"===(null===(t=p[e.id])||void 0===t?void 0:t.status)}).length,attendancePercentage:e>0?Math.round(t/e*100):0}})();return(0,ga.jsxs)("div",{className:"space-y-6",children:[(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ga.jsx)(Aa,{className:"h-8 w-8 mr-3 text-blue-600"}),"Attendance Register"]}),(0,ga.jsx)("p",{className:"text-gray-600 mt-1",children:"Mark and manage student attendance"})]}),(0,ga.jsx)("div",{className:"flex items-center space-x-4",children:(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:c&&(0,ga.jsxs)("span",{className:"flex items-center",children:[(0,ga.jsx)(Ia,{className:"h-4 w-4 mr-1"}),new Date(c).toLocaleDateString()]})})})]})}),(0,ga.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Mode *"}),(0,ga.jsxs)("select",{value:u,onChange:e=>{h(e.target.value),"all"===e.target.value&&o("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ga.jsx)("option",{value:"class",children:"By Class"}),(0,ga.jsx)("option",{value:"all",children:"All Students"})]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Class ","class"===u?"*":""]}),(0,ga.jsxs)("select",{value:l,onChange:e=>o(e.target.value),disabled:"all"===u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,ga.jsx)("option",{value:"",children:"Choose Class"}),e.map(e=>(0,ga.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attendance Date *"}),(0,ga.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ga.jsx)("div",{className:"flex items-end",children:(0,ga.jsx)("button",{onClick:()=>{"all"===u?_():E()},disabled:!l&&"class"===u||!c||f,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:f?(0,ga.jsx)(pp,{className:"h-4 w-4 animate-spin"}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(om,{className:"h-4 w-4 mr-2"}),"all"===u?"Show All Students":"Show Students"]})})})]})}),r.length>0&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ga.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attendance Statistics"}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:D.total}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Total Students"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-green-600",children:D.present}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Present"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-red-600",children:D.absent}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Absent"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:D.late}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Late"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:D.excused}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Excused"})]}),(0,ga.jsxs)("div",{className:"text-center",children:[(0,ga.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[D.attendancePercentage,"%"]}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:"Attendance"})]})]})]}),j.text&&(0,ga.jsx)("div",{className:"p-4 rounded-md ".concat("success"===j.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:j.text}),r.length>0&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ga.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,ga.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ga.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Student List - ",r.length," Students"]}),(0,ga.jsxs)("div",{className:"flex space-x-2",children:[(0,ga.jsx)("button",{onClick:()=>{const e={};r.forEach(t=>{var s;e[t.id]={status:"present",remarks:(null===(s=p[t.id])||void 0===s?void 0:s.remarks)||""}}),g(e)},className:"px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 text-sm",children:"Mark All Present"}),(0,ga.jsx)("button",{onClick:()=>{const e={};r.forEach(t=>{var s;e[t.id]={status:"absent",remarks:(null===(s=p[t.id])||void 0===s?void 0:s.remarks)||""}}),g(e)},className:"px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 text-sm",children:"Mark All Absent"}),(0,ga.jsxs)("button",{onClick:async()=>{if(c)if("class"!==u||l){v(!0);try{const e=r.map(e=>{var t,s;return{studentId:e.id,status:(null===(t=p[e.id])||void 0===t?void 0:t.status)||"present",remarks:(null===(s=p[e.id])||void 0===s?void 0:s.remarks)||""}});let t;if("class"===u&&l){const s=e.map(async e=>await fetch("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({studentId:e.studentId,classId:l,subjectId:null,date:c,status:e.status,remarks:e.remarks})}));t=(await Promise.all(s))[0]}else{const s=e.map(async e=>{var t;const s=await fetch("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({studentId:e.studentId,classId:null===(t=r.find(t=>t.id===e.studentId))||void 0===t?void 0:t.classId,subjectId:null,date:c,status:e.status,remarks:e.remarks})});return s});t=(await Promise.all(s))[0]}if(t.ok){const e=await t.json();N({type:"success",text:e.message}),k(!0),E()}else{const e=await t.json();N({type:"error",text:e.message||"Failed to save attendance"})}}catch(e){console.error("Error saving attendance:",e),N({type:"error",text:"Error saving attendance"})}finally{v(!1)}}else N({type:"error",text:"Please select class when using class mode"});else N({type:"error",text:"Please select date"})},disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[y?(0,ga.jsx)(pp,{className:"h-4 w-4 animate-spin mr-2"}):(0,ga.jsx)(gp,{className:"h-4 w-4 mr-2"}),w?"Update Attendance":"Save Attendance"]})]})]})}),(0,ga.jsx)("div",{className:"overflow-x-auto",children:Object.keys(m).length>0?Object.entries(m).map(e=>{let[t,s]=e;return(0,ga.jsxs)("div",{className:"mb-8",children:[(0,ga.jsx)("div",{className:"bg-gray-100 px-6 py-3 border-b border-gray-200",children:(0,ga.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:[s.standard," - ",s.division,(0,ga.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",s.students.length," students)"]})]})}),(0,ga.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ga.jsx)("thead",{className:"bg-gray-50",children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ga.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),(0,ga.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.students.map(e=>{var t,s,a;return(0,ga.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.studentId}),(0,ga.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ga.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,ga.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsxs)("select",{value:(null===(t=p[e.id])||void 0===t?void 0:t.status)||"present",onChange:t=>{return s=e.id,a=t.target.value,void g(e=>Le(Le({},e),{},{[s]:Le(Le({},e[s]),{},{status:a})}));var s,a},className:"px-3 py-1 rounded-md border text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(M((null===(s=p[e.id])||void 0===s?void 0:s.status)||"present")),children:[(0,ga.jsx)("option",{value:"present",children:"Present"}),(0,ga.jsx)("option",{value:"absent",children:"Absent"}),(0,ga.jsx)("option",{value:"late",children:"Late"}),(0,ga.jsx)("option",{value:"excused",children:"Excused"})]})}),(0,ga.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ga.jsx)("input",{type:"text",value:(null===(a=p[e.id])||void 0===a?void 0:a.remarks)||"",onChange:t=>{return s=e.id,a=t.target.value,void g(e=>Le(Le({},e),{},{[s]:Le(Le({},e[s]),{},{remarks:a})}));var s,a},placeholder:"Add remarks...",className:"w-full px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})})]},e.id)})})]})]},t)}):(0,ga.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No students found"})})]}),c&&0===r.length&&!f&&(0,ga.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,ga.jsx)(Aa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,ga.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Found"}),(0,ga.jsx)("p",{className:"text-gray-600",children:"all"===u?"No active students found in the system.":"No active students found for the selected class and date."})]})]})},Qp=e=>{let{size:t="md",className:s=""}=e;return(0,ga.jsx)("div",{className:"flex items-center justify-center ".concat(s),children:(0,ga.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[t]," border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin")})})},$p=e=>{let{children:t}=e;const{isAuthenticated:s,loading:a}=ja();return a?(0,ga.jsx)(Qp,{}):s?t:(0,ga.jsx)(pe,{to:"/login"})},Kp=e=>{let{children:t}=e;const{isAuthenticated:s,loading:a}=ja();return a?(0,ga.jsx)(Qp,{}):s?(0,ga.jsx)(pe,{to:"/dashboard"}):t},Jp=()=>{const{userRole:e}=wa();return(0,ga.jsx)(un,{},e||"default")},Xp=e=>{let{children:t,allowedRoles:s}=e;const{user:a,isAuthenticated:n,loading:r}=ja();return r?(0,ga.jsx)(Qp,{}):n?s&&!s.includes(null===a||void 0===a?void 0:a.role)?(0,ga.jsx)(pe,{to:"/unauthorized"}):t:(0,ga.jsx)(pe,{to:"/login"})},Zp=()=>{const{user:e}=ja();return(0,ga.jsxs)(ye,{children:[(0,ga.jsx)(fe,{path:"/login",element:(0,ga.jsx)(Kp,{children:(0,ga.jsx)(Pr,{})})}),(0,ga.jsx)(fe,{path:"/register",element:(0,ga.jsx)(Kp,{children:(0,ga.jsx)(Tr,{})})}),(0,ga.jsx)(fe,{path:"/unauthorized",element:(0,ga.jsx)(Yp,{})}),(0,ga.jsxs)(fe,{path:"/admin/*",element:(0,ga.jsx)(Xp,{allowedRoles:["admin","teacher","clark","staff"],children:(0,ga.jsx)(Jp,{})}),children:[(0,ga.jsx)(fe,{index:!0,element:(0,ga.jsx)(pe,{to:"/admin/dashboard"})}),(0,ga.jsx)(fe,{path:"dashboard",element:(0,ga.jsx)(nm,{})}),(0,ga.jsx)(fe,{path:"students",element:(0,ga.jsx)(hm,{})}),(0,ga.jsx)(fe,{path:"teachers",element:(0,ga.jsx)(xm,{})}),(0,ga.jsx)(fe,{path:"classes",element:(0,ga.jsx)(pm,{})}),(0,ga.jsx)(fe,{path:"subjects",element:(0,ga.jsx)(fm,{})}),(0,ga.jsx)(fe,{path:"timetable",element:(0,ga.jsx)(Op,{})}),(0,ga.jsx)(fe,{path:"classworks",element:(0,ga.jsx)(Bp,{})}),(0,ga.jsx)(fe,{path:"attendance",element:(0,ga.jsx)(Gp,{})}),(0,ga.jsx)(fe,{path:"grades",element:(0,ga.jsx)(ym,{})}),(0,ga.jsx)(fe,{path:"exams",element:(0,ga.jsx)(vx,{})}),(0,ga.jsx)(fe,{path:"exam-schedules",element:(0,ga.jsx)(Nx,{})}),(0,ga.jsx)(fe,{path:"hall-tickets",element:(0,ga.jsx)(Sx,{})}),(0,ga.jsx)(fe,{path:"library",element:(0,ga.jsx)(_x,{})}),(0,ga.jsx)(fe,{path:"mark-distributions",element:(0,ga.jsx)(Ax,{})}),(0,ga.jsx)(fe,{path:"attendance-reports",element:(0,ga.jsx)(Tx,{})}),(0,ga.jsx)(fe,{path:"cheques",element:(0,ga.jsx)(Lx,{})}),(0,ga.jsx)(fe,{path:"fees",element:(0,ga.jsx)(Ux,{})}),(0,ga.jsx)(fe,{path:"transport",element:(0,ga.jsx)(Jx,{})}),(0,ga.jsx)(fe,{path:"certificates",element:(0,ga.jsx)(Xx,{})}),(0,ga.jsx)(fe,{path:"lms",element:(0,ga.jsx)(ep,{})}),(0,ga.jsx)(fe,{path:"social",element:(0,ga.jsx)(rp,{})}),(0,ga.jsx)(fe,{path:"transaction-reports",element:(0,ga.jsx)(cp,{})}),(0,ga.jsx)(fe,{path:"user-management",element:(0,ga.jsx)(xp,{})}),(0,ga.jsx)(fe,{path:"role-permissions",element:(0,ga.jsx)(fp,{})}),(0,ga.jsx)(fe,{path:"class-teacher-assignments",element:(0,ga.jsx)(bp,{})}),(0,ga.jsx)(fe,{path:"calendar",element:(0,ga.jsx)(Wx,{})}),(0,ga.jsx)(fe,{path:"reports",element:(0,ga.jsx)(Hx,{})}),(0,ga.jsx)(fe,{path:"inquiries",element:(0,ga.jsx)($x,{})}),(0,ga.jsx)(fe,{path:"affidavits",element:(0,ga.jsx)(Kx,{})}),(0,ga.jsx)(fe,{path:"bonafide-certificates",element:(0,ga.jsx)(Sp,{})}),(0,ga.jsx)(fe,{path:"leaving-certificates",element:(0,ga.jsx)(Ap,{})}),(0,ga.jsx)(fe,{path:"bulk-sms",element:(0,ga.jsx)(Ip,{})}),(0,ga.jsx)(fe,{path:"profile",element:(0,ga.jsx)(Up,{})})]}),(0,ga.jsxs)(fe,{path:"/student/*",element:(0,ga.jsx)(Xp,{allowedRoles:["student"],children:(0,ga.jsx)(hn,{})}),children:[(0,ga.jsx)(fe,{index:!0,element:(0,ga.jsx)(pe,{to:"/student/dashboard"})}),(0,ga.jsx)(fe,{path:"dashboard",element:(0,ga.jsx)(rm,{})}),(0,ga.jsx)(fe,{path:"subjects",element:(0,ga.jsx)(Fx,{})}),(0,ga.jsx)(fe,{path:"attendance",element:(0,ga.jsx)(zx,{})}),(0,ga.jsx)(fe,{path:"grades",element:(0,ga.jsx)(Bx,{})}),(0,ga.jsx)(fe,{path:"homework",element:(0,ga.jsx)(Wp,{})}),(0,ga.jsx)(fe,{path:"schedule",element:(0,ga.jsx)(Hp,{})}),(0,ga.jsx)(fe,{path:"profile",element:(0,ga.jsx)(Up,{})})]}),(0,ga.jsx)(fe,{path:"/",element:(0,ga.jsx)($p,{children:"student"===(null===e||void 0===e?void 0:e.role)?(0,ga.jsx)(pe,{to:"/student/dashboard",replace:!0}):(0,ga.jsx)(pe,{to:"/admin/dashboard",replace:!0})})}),(0,ga.jsx)(fe,{path:"/dashboard",element:(0,ga.jsx)($p,{children:"student"===(null===e||void 0===e?void 0:e.role)?(0,ga.jsx)(pe,{to:"/student/dashboard",replace:!0}):(0,ga.jsx)(pe,{to:"/admin/dashboard",replace:!0})})})]})};const eg=function(){return(0,ga.jsx)(Ca,{children:(0,ga.jsx)(va,{children:(0,ga.jsx)(ka,{children:(0,ga.jsx)(_e,{children:(0,ga.jsx)("div",{className:"App",children:(0,ga.jsx)(Zp,{})})})})})})};var tg=s(907);const sg=new tg.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});r.createRoot(document.getElementById("root")).render((0,ga.jsx)(a.StrictMode,{children:(0,ga.jsxs)(tg.QueryClientProvider,{client:sg,children:[(0,ga.jsx)(eg,{}),(0,ga.jsx)(Mr,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})}))})()})();
//# sourceMappingURL=main.cc5e576f.js.map